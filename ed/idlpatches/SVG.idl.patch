From f4319b788a1e353808a166e4c0dfc93f75bc431b Mon Sep 17 00:00:00 2001
From: Francois Daoust <fd@tidoust.net>
Date: Mon, 22 Sep 2025 11:32:11 +0200
Subject: [PATCH] Fix IDL of SVG spec

HTMLHyperlinkElementUtils: https://github.com/w3c/svgwg/issues/312

Also drop `SVGPathElement`, now that SVG Paths is also being crawled, pending
clarification of status between SVG 2 and SVG Paths.

Constructor patch is a temporary fix until svgwg.org correctly reflects the
latest version of the Editor's Draft.
---
 ed/idl/SVG.idl | 24 +++++++++++++++++-------
 1 file changed, 17 insertions(+), 7 deletions(-)

diff --git a/ed/idl/SVG.idl b/ed/idl/SVG.idl
index d046678667..55c1f5869c 100644
--- a/ed/idl/SVG.idl
+++ b/ed/idl/SVG.idl
@@ -252,7 +252,7 @@ interface SVGSVGElement : SVGGraphicsElement {
   [NewObject] DOMMatrix createSVGMatrix();
   [NewObject] DOMRect createSVGRect();
   [NewObject] SVGTransform createSVGTransform();
-  [NewObject] SVGTransform createSVGTransformFromMatrix(optional DOMMatrix2DInit matrix);
+  [NewObject] SVGTransform createSVGTransformFromMatrix(optional DOMMatrix2DInit matrix = {});
 
   Element? getElementById(DOMString elementId);
 
@@ -314,8 +314,9 @@ interface mixin SVGElementInstance {
   [SameObject] readonly attribute SVGUseElement? correspondingUseElement;
 };
 
-[Constructor(Animation source, Animatable newTarget), Exposed=Window]
+[Exposed=Window]
 interface ShadowAnimation : Animation {
+  constructor(Animation source, (Element or CSSPseudoElement) newTarget);
   [SameObject] readonly attribute Animation sourceAnimation;
 };
 
@@ -418,10 +419,6 @@ interface SVGAnimatedPreserveAspectRatio {
   [SameObject] readonly attribute SVGPreserveAspectRatio animVal;
 };
 
-[Exposed=Window]
-interface SVGPathElement : SVGGeometryElement {
-};
-
 [Exposed=Window]
 interface SVGRectElement : SVGGeometryElement {
   [SameObject] readonly attribute SVGAnimatedLength x;
@@ -671,7 +668,20 @@ interface SVGAElement : SVGGraphicsElement {
 };
 
 SVGAElement includes SVGURIReference;
-SVGAElement includes HTMLHyperlinkElementUtils;
+
+// Inline HTMLHyperlinkElementUtils except href, which conflicts.
+partial interface SVGAElement {
+  readonly attribute USVString origin;
+  [CEReactions] attribute USVString protocol;
+  [CEReactions] attribute USVString username;
+  [CEReactions] attribute USVString password;
+  [CEReactions] attribute USVString host;
+  [CEReactions] attribute USVString hostname;
+  [CEReactions] attribute USVString port;
+  [CEReactions] attribute USVString pathname;
+  [CEReactions] attribute USVString search;
+  [CEReactions] attribute USVString hash;
+};
 
 [Exposed=Window]
 interface SVGViewElement : SVGElement {};
-- 
2.51.0

