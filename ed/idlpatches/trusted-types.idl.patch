From bee7e0b3179eed98477520c2058b465ac42cdd52 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Philip=20J=C3=A4genstedt?= <philip@foolip.org>
Date: Wed, 17 Feb 2021 14:48:32 +0100
Subject: [PATCH] Fix trusted-types.idl

https://github.com/w3c/webappsec-trusted-types/pull/308
---
 ed/idl/trusted-types.idl | 78 +---------------------------------------
 1 file changed, 1 insertion(+), 77 deletions(-)

diff --git a/ed/idl/trusted-types.idl b/ed/idl/trusted-types.idl
index ad6d1f998..cd5e5eec1 100644
--- a/ed/idl/trusted-types.idl
+++ b/ed/idl/trusted-types.idl
@@ -23,7 +23,7 @@ interface TrustedScriptURL {
 
 [Exposed=Window, SecureContext] interface TrustedTypePolicyFactory {
     TrustedTypePolicy createPolicy(
-        DOMString policyName, optional TrustedTypePolicyOptions policyOptions);
+        DOMString policyName, optional TrustedTypePolicyOptions policyOptions = {});
     boolean isHTML(any value);
     boolean isScript(any value);
     boolean isScriptURL(any value);
@@ -66,79 +66,3 @@ typedef (TrustedHTML or TrustedScript or TrustedScriptURL) TrustedType;
 partial interface Window {
   [SecureContext] readonly attribute TrustedTypePolicyFactory trustedTypes;
 };
-
-partial interface Document {
-  [CEReactions] void write(HTMLString... text);
-  [CEReactions] void writeln(HTMLString... text);
-};
-
-partial interface HTMLScriptElement {
- [CEReactions] attribute [TreatNullAs=EmptyString] ScriptString innerText;
- [CEReactions] attribute ScriptString? textContent;
- [CEReactions] attribute ScriptURLString src;
- [CEReactions] attribute ScriptString text;
-};
-
-partial interface HTMLIFrameElement {
-  [CEReactions] attribute HTMLString srcdoc;
-};
-
-partial interface HTMLEmbedElement {
-  [CEReactions] attribute ScriptURLString src;
-};
-
-partial interface HTMLObjectElement {
-  [CEReactions] attribute ScriptURLString data;
-  [CEReactions] attribute ScriptURLString codeBase; // obsolete
-};
-
-typedef (ScriptString or Function) TrustedTimerHandler;
-
-partial interface mixin WindowOrWorkerGlobalScope {
-  long setTimeout(TrustedTimerHandler handler, optional long timeout = 0, any... arguments);
-  long setInterval(TrustedTimerHandler handler, optional long timeout = 0, any... arguments);
-};
-
-[Exposed=(Window,Worker)]
-partial interface Worker : EventTarget {
-    constructor(ScriptURLString scriptURL, optional WorkerOptions options = {});
-};
-
-[Exposed=(Window,Worker)]
-partial interface SharedWorker : EventTarget {
-  constructor(ScriptURLString scriptURL, optional (DOMString or WorkerOptions) options = {});
-};
-
-[Exposed=Worker]
-partial interface WorkerGlobalScope : EventTarget {
-  void importScripts(ScriptURLString... urls);
-};
-
-[SecureContext, Exposed=(Window,Worker)]
-partial interface ServiceWorkerContainer : EventTarget {
-   [NewObject] Promise<ServiceWorkerRegistration> register(ScriptURLString scriptURL, optional RegistrationOptions options = {});
-};
-
-[Exposed=Window]
-partial interface mixin SVGAnimatedString {
-           attribute (DOMString or TrustedScriptURL) baseVal;
-};
-
-partial interface Element {
-  [CEReactions, TreatNullAs=EmptyString] attribute HTMLString outerHTML;
-  [CEReactions] void insertAdjacentHTML(DOMString position, HTMLString text);
-};
-
-partial interface mixin InnerHTML { // specified in a draft version at https://w3c.github.io/DOM-Parsing/#the-innerhtml-mixin
-  [CEReactions, TreatNullAs=EmptyString] attribute HTMLString innerHTML;
-};
-
-partial interface Range {
-  [CEReactions, NewObject] DocumentFragment createContextualFragment(HTMLString fragment);
-};
-
-[Exposed=Window]
-interface DOMParser {
-  constructor();
-  [NewObject] Document parseFromString(HTMLString str, SupportedType type);
-};
-- 
2.30.0.365.g02bc693789-goog

