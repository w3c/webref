{
  "spec": {
    "title": "CSS Backgrounds and Borders Module Level 3",
    "url": "https://drafts.csswg.org/css-backgrounds-3/"
  },
  "algorithms": [
    {
      "name": "border-radius-outset",
      "href": "https://drafts.csswg.org/css-backgrounds-3/#outset-adjusted-border-radius",
      "html": "To compute the <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-export=\"\" id=\"outset-adjusted-border-radius\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">outset-adjusted border radius</dfn> given the 2-dimensional <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-sizing-3/#size\" id=\"ref-for-size\">size</a>s <var>edge</var>, <var>radius</var>, and <var>outset</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>coverage</var> be <code>2 * min(<var>radius</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-sizing-3/#width\" id=\"ref-for-width\">width</a> / <var>edge</var>’s <span id=\"ref-for-width①\">width</span>, <var>radius</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-sizing-3/#height\" id=\"ref-for-height\">height</a> / <var>edge</var>’s <span id=\"ref-for-height①\">height</span>)</code>.</p>"
        },
        {
          "html": "<p>Let <var>adustedRadiusWidth</var> be the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-backgrounds-3/#adjusted-radius-dimension\" id=\"ref-for-adjusted-radius-dimension\">adjusted radius dimension</a> given <var>coverage</var>, <var>radius</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-sizing-3/#width\" id=\"ref-for-width②\">width</a>, and <var>outset</var>’s <span id=\"ref-for-width③\">width</span>.</p>"
        },
        {
          "html": "<p>Let <var>adustedRadiusHeight</var> be the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-backgrounds-3/#adjusted-radius-dimension\" id=\"ref-for-adjusted-radius-dimension①\">adjusted radius dimension</a> given <var>coverage</var>, <var>radius</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-sizing-3/#height\" id=\"ref-for-height②\">height</a>, and <var>outset</var>’s <span id=\"ref-for-height③\">height</span>.</p>"
        },
        {
          "html": "<p>Return (<var>adustedRadiusWidth</var>, <var>adustedRadiusHeight</var>).</p>"
        }
      ]
    },
    {
      "name": "border-radius-outset",
      "href": "https://drafts.csswg.org/css-backgrounds-3/#outset-adjusted-border-radius",
      "html": "To compute the <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-export=\"\" id=\"outset-adjusted-border-radius\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">outset-adjusted border radius</dfn> given the 2-dimensional <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-sizing-3/#size\" id=\"ref-for-size\">size</a>s <var>edge</var>, <var>radius</var>, and <var>outset</var>:",
      "rationale": "if",
      "steps": [
        {
          "html": "<p>If <var>radius</var> is greater than <var>spread</var>, or if <var>coverage</var> is greater than 1, then return <code><var>radius</var> + <var>outset</var></code>.</p>"
        },
        {
          "html": "<p>Let <var>ratio</var> be <code><var>radius</var> / <var>outset</var></code>.</p>"
        },
        {
          "html": "<p>Return <code><var>radius</var> + <var>outset</var> * (1 - (1 - <var>ratio</var>)<sup>3</sup> * (1 - <var>coverage</var><sup>3</sup>))</code>.</p>"
        }
      ]
    },
    {
      "html": "After the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-backgrounds-3/#border-image-dfn\" id=\"ref-for-border-image-dfn②\">border image</a> given by <a class=\"property css\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-backgrounds-3/#propdef-border-image-source\" id=\"ref-for-propdef-border-image-source③\">border-image-source</a>\n\tis sliced by the <a class=\"property css\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-backgrounds-3/#propdef-border-image-slice\" id=\"ref-for-propdef-border-image-slice⑤\">border-image-slice</a> values,\n\tthe resulting nine images are scaled, positioned, and tiled\n\tinto their corresponding <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-backgrounds-3/#border-image-region\" id=\"ref-for-border-image-region④\">border image regions</a> in four steps:",
      "rationale": "if",
      "steps": [
        {
          "html": "Scale to <a class=\"property css\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-backgrounds-3/#propdef-border-image-width\" id=\"ref-for-propdef-border-image-width⑨\">border-image-width</a>.\n\t\t\n     <ul>\n      <li>The two images for the top and bottom edges are made as tall\n\t\t\tas the top and bottom <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-backgrounds-3/#border-image-region\" id=\"ref-for-border-image-region⑤\">border image regions</a>, respectively,\n\t\t\tand their width is scaled proportionally.\n\n\t\t\n      </li><li>The images for the left and right edges are made as wide\n\t\t\tas the left and right <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-backgrounds-3/#border-image-region\" id=\"ref-for-border-image-region⑥\">border image regions</a>, respectively,\n\t\t\tand their height is scaled proportionally.\n\n\t\t\n      </li><li>The corner images are scaled to be as wide and as tall\n\t\t\tas the their respective <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-backgrounds-3/#border-image-region\" id=\"ref-for-border-image-region⑦\">border image regions</a>.\n\n\t\t\n      </li><li>The middle image’s width is scaled by the same factor as the top image\n\t\t\tunless that factor is zero or infinity,\n\t\t\tin which case the scaling factor of the bottom is substituted,\n\t\t\tand failing that, the width is not scaled.\n\t\t\tThe height of the middle image is scaled by the same factor as the left image\n\t\t\tunless that factor is zero or infinity,\n\t\t\tin which case the scaling factor of the right image is substituted,\n\t\t\tand failing that, the height is not scaled.\n\t\t\n     </li></ul>"
        },
        {
          "html": "Scale to <a class=\"property css\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-backgrounds-3/#propdef-border-image-repeat\" id=\"ref-for-propdef-border-image-repeat①\">border-image-repeat</a>.\n\t\t\n     <ul>\n      <li>If the first keyword is <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-backgrounds-3/#valdef-border-image-repeat-stretch\" id=\"ref-for-valdef-border-image-repeat-stretch\">stretch</a>,\n\t\t\tthe top, middle and bottom images are further scaled\n\t\t\tto be as wide as the middle region of the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-backgrounds-3/#border-image-area\" id=\"ref-for-border-image-area⑧\">border image area</a>.\n\t\t\tThe height is not changed any further.\n\n\t\t\n      </li><li>If the first keyword is <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-backgrounds-3/#valdef-border-image-repeat-round\" id=\"ref-for-valdef-border-image-repeat-round\">round</a>,\n\t\t\tthe top, middle and bottom images are resized in width,\n\t\t\tso that exactly a whole number of them fit\n\t\t\tin the middle region of the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-backgrounds-3/#border-image-area\" id=\"ref-for-border-image-area⑨\">border image area</a>,\n\t\t\texactly as for <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-backgrounds-3/#valdef-background-repeat-round\" id=\"ref-for-valdef-background-repeat-round③\">round</a> in the <a class=\"property css\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-backgrounds-3/#propdef-background-repeat\" id=\"ref-for-propdef-background-repeat⑥\">background-repeat</a> property.\n\n\t\t\n      </li><li>If the first keyword is <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-backgrounds-3/#valdef-border-image-repeat-repeat\" id=\"ref-for-valdef-border-image-repeat-repeat\">repeat</a> or <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-backgrounds-3/#valdef-border-image-repeat-space\" id=\"ref-for-valdef-border-image-repeat-space\">space</a>,\n\t\t\tthe top, middle, and bottom images are not changed any further.\n\n\t\t\n      </li><li>The effects of <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-backgrounds-3/#valdef-border-image-repeat-stretch\" id=\"ref-for-valdef-border-image-repeat-stretch①\">stretch</a>, <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-backgrounds-3/#valdef-border-image-repeat-round\" id=\"ref-for-valdef-border-image-repeat-round①\">round</a>, <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-backgrounds-3/#valdef-border-image-repeat-repeat\" id=\"ref-for-valdef-border-image-repeat-repeat①\">repeat</a>, and <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-backgrounds-3/#valdef-border-image-repeat-space\" id=\"ref-for-valdef-border-image-repeat-space①\">space</a>\n\t\t\tfor the second keyword are analogous,\n\t\t\tacting on the height of the left, middle and right images.\n\t\t\n     </li></ul>"
        },
        {
          "html": "Position the first tile.\n\t\t\n     <ul>\n      <li>If the first keyword is <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-backgrounds-3/#valdef-border-image-repeat-repeat\" id=\"ref-for-valdef-border-image-repeat-repeat②\">repeat</a>,\n\t\t\tthe top, middle, and bottom images\n\t\t\tare centered horizontally in their respective regions.\n\t\t\tOtherwise the images are placed at the left edge\n\t\t\tof their respective regions of the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-backgrounds-3/#border-image-area\" id=\"ref-for-border-image-area①⓪\">border image area</a>.\n\n\t\t\n      </li><li>If the second keyword is <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-backgrounds-3/#valdef-border-image-repeat-repeat\" id=\"ref-for-valdef-border-image-repeat-repeat③\">repeat</a>,\n\t\t\tthe left, middle, and right images\n\t\t\tare centered vertically in their respective regions.\n\t\t\tOtherwise the images are placed at the top edge\n\t\t\tof their respective regions of the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-backgrounds-3/#border-image-area\" id=\"ref-for-border-image-area①①\">border image area</a>.\n\t\t\n     </li></ul>"
        },
        {
          "html": "Tile and draw.\n\t\t\n     <ul>\n      <li>The images are then tiled to fill their respective regions.\n\n\t\t\n      </li><li>In the case of <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-backgrounds-3/#valdef-border-image-repeat-space\" id=\"ref-for-valdef-border-image-repeat-space②\">space</a>,\n\t\t\tany partial tiles are discarded and the extra space distributed\n\t\t\tbefore, after, and between the tiles.\n\t\t\t(I.e. the gap before the first tile,\n\t\t\tthe gap after the last tile,\n\t\t\tand the gaps between tiles are equalized.)\n\t\t\t\n\n\t\t\n      </li><li>The images are drawn at the same stacking level as normal borders:\n\t\t\timmediately in front of the background layers.\n\n\t\t\n      </li><li>The middle image is not drawn\n\t\t\tunless <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-backgrounds-3/#border-image-slice-fill\" id=\"ref-for-border-image-slice-fill④\">fill</a> was specified for <a class=\"property css\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-backgrounds-3/#propdef-border-image-source\" id=\"ref-for-propdef-border-image-source④\">border-image-source</a>.\n\t\t\n     </li></ul>"
        }
      ]
    }
  ]
}