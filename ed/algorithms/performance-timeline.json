{
  "spec": {
    "title": "Performance Timeline",
    "url": "https://w3c.github.io/performance-timeline/"
  },
  "algorithms": [
    {
      "name": "relevant performance entry tuple",
      "href": "https://w3c.github.io/performance-timeline/#dfn-relevant-performance-entry-tuple",
      "html": "In order to get the <dfn id=\"dfn-relevant-performance-entry-tuple\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">relevant performance entry tuple</dfn>, given\n    <var>entryType</var> and <var>globalObject</var> as input, run the\n    following steps:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var>map</var> be the <a href=\"https://w3c.github.io/performance-timeline/#dfn-performance-entry-buffer-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-performance-entry-buffer-map-1\">performance entry buffer map</a>\n      associated with <var>globalObject</var>."
        },
        {
          "html": "Return the result of <a data-cite=\"INFRA#map-get\" data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-get\">getting the value of an entry</a> from <var>\n        map</var>, given <var>entryType</var> as the <a data-cite=\"INFRA#map-key\" data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-key\">key</a>."
        }
      ]
    },
    {
      "name": "initialize a PerformanceEntry",
      "href": "https://w3c.github.io/performance-timeline/#dfn-initialize-a-performanceentry",
      "html": "To <dfn class=\"export\" data-export=\"\" id=\"dfn-initialize-a-performanceentry\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">initialize a <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceentry\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceentry-10\"><code>PerformanceEntry</code></a></dfn> <var>entry</var> given a <a data-xref-type=\"_IDL_\" data-link-type=\"typedef\" data-lt=\"DOMHighResTimeStamp\" data-cite=\"hr-time-3\" data-cite-path=\"\" data-cite-frag=\"dom-domhighrestimestamp\" href=\"https://www.w3.org/TR/hr-time-3/#dom-domhighrestimestamp\"><code>DOMHighResTimeStamp</code></a> <var>startTime</var>,\n    a <code>DOMString</code> <var>entryType</var>, a <code>DOMString</code> name, and an optional <a data-xref-type=\"_IDL_\" data-link-type=\"typedef\" data-lt=\"DOMHighResTimeStamp\" data-cite=\"hr-time-3\" data-cite-path=\"\" data-cite-frag=\"dom-domhighrestimestamp\" href=\"https://www.w3.org/TR/hr-time-3/#dom-domhighrestimestamp\"><code>DOMHighResTimeStamp</code></a> <var>endTime</var> (default <code>0</code>):",
      "rationale": "assert",
      "steps": [
        {
          "html": "Assert: <var>entryType</var> is defined in the <a href=\"https://w3c.github.io/timing-entrytypes-registry/#registry\">entry type registry</a>."
        },
        {
          "html": "Initialize <var>entry</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceentry-starttime\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceentry-starttime-3\"><code>startTime</code></a> to <var>startTime</var>."
        },
        {
          "html": "Initialize <var>entry</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceentry-entrytype\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceentry-entrytype-2\"><code>entryType</code></a> to <var>entryType</var>."
        },
        {
          "html": "Initialize <var>entry</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceentry-name\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceentry-name-2\"><code>name</code></a> to <var>name</var>."
        },
        {
          "html": "Initialize <var>entry</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-end-time\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-end-time-3\">end time</a> to <var>endTime</var>."
        }
      ]
    },
    {
      "html": "The <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserver-observe\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserver-observe-4\"><code>observe()</code></a> method instructs the user agent to register\n      the observer and must run these steps:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var>relevantGlobal</var> be <a data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>'s <a data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"concept-relevant-global\" data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global\">relevant\n        global object</a>."
        },
        {
          "html": "If <var>options</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserverinit-entrytypes\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserverinit-entrytypes-1\"><code>entryTypes</code></a> and <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserverinit-type\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserverinit-type-1\"><code>type</code></a> members\n        are both omitted, then <a data-link-type=\"dfn\" data-link-for=\"exception\" data-xref-for=\"exception\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dfn-throw\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\">throw</a> a \"<a data-link-type=\"exception\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"\" data-cite-frag=\"exceptiondef-typeerror\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\"><code>TypeError</code></a>\"."
        },
        {
          "html": "If <var>options</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserverinit-entrytypes\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserverinit-entrytypes-2\"><code>entryTypes</code></a> is present and any other\n        member is also present, then <a data-link-type=\"dfn\" data-link-for=\"exception\" data-xref-for=\"exception\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dfn-throw\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\">throw</a> a \"<a data-link-type=\"exception\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"\" data-cite-frag=\"exceptiondef-typeerror\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\"><code>TypeError</code></a>\"."
        },
        {
          "html": "Update or check <a data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-observer-type\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-observer-type-1\">observer type</a> by running these\n        steps:",
          "rationale": "if",
          "steps": [
            {
              "html": "If <a data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-observer-type\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-observer-type-2\">observer type</a> is\n            <code>\"undefined\"</code>:",
              "rationale": "if",
              "steps": [
                {
                  "html": "If <var>options</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserverinit-entrytypes\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserverinit-entrytypes-3\"><code>entryTypes</code></a> member is\n                present, then set <a data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-observer-type\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-observer-type-3\">observer type</a> to\n                <code>\"multiple\"</code>."
                },
                {
                  "html": "If <var>options</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserverinit-type\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserverinit-type-2\"><code>type</code></a> member is present, then\n                set <a data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-observer-type\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-observer-type-4\">observer type</a> to\n                <code>\"single\"</code>."
                }
              ]
            },
            {
              "html": "If <a data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-observer-type\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-observer-type-5\">observer type</a> is\n            <code>\"single\"</code> and <var>options</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserverinit-entrytypes\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserverinit-entrytypes-4\"><code>entryTypes</code></a>\n            member is present, then <a data-link-type=\"dfn\" data-link-for=\"exception\" data-xref-for=\"exception\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dfn-throw\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\">throw</a> an\n            \"<a data-link-type=\"exception\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"\" data-cite-frag=\"invalidmodificationerror\" href=\"https://webidl.spec.whatwg.org/#invalidmodificationerror\"><code>InvalidModificationError</code></a>\"."
            },
            {
              "html": "If <a data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-observer-type\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-observer-type-6\">observer type</a> is\n            <code>\"multiple\"</code> and <var>options</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserverinit-type\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserverinit-type-3\"><code>type</code></a> member\n            is present, then <a data-link-type=\"dfn\" data-link-for=\"exception\" data-xref-for=\"exception\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dfn-throw\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\">throw</a> an\n            \"<a data-link-type=\"exception\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"\" data-cite-frag=\"invalidmodificationerror\" href=\"https://webidl.spec.whatwg.org/#invalidmodificationerror\"><code>InvalidModificationError</code></a>\"."
            }
          ]
        },
        {
          "html": "Set <a data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-requires-dropped-entries\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-requires-dropped-entries-2\">requires dropped entries</a> to true."
        },
        {
          "html": "If <a data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-observer-type\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-observer-type-7\">observer type</a> is\n        <code>\"multiple\"</code>, run the following steps:",
          "rationale": "let",
          "steps": [
            {
              "html": "Let <var>entry types</var> be <var>options</var>'s\n            <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserverinit-entrytypes\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserverinit-entrytypes-5\"><code>entryTypes</code></a> sequence."
            },
            {
              "html": "Remove all types from <var>entry types</var> that are not\n            contained in <var>relevantGlobal</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-frozen-array-of-supported-entry-types\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-frozen-array-of-supported-entry-types-1\">frozen array of\n            supported entry types</a>. The user agent <em class=\"rfc2119\">SHOULD</em> notify developers\n            if <var>entry types</var> is modified. For example, a console\n            warning listing removed types might be appropriate."
            },
            {
              "html": "If the resulting <var>entry types</var> sequence is an empty\n            sequence, abort these steps. The user agent <em class=\"rfc2119\">SHOULD</em> notify\n            developers when the steps are aborted to notify that registration\n            has been aborted. For example, a console warning might be\n            appropriate."
            },
            {
              "html": "If the <a href=\"https://w3c.github.io/performance-timeline/#dfn-list-of-registered-performance-observer-objects\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-list-of-registered-performance-observer-objects-1\">list of registered performance observer objects</a>\n            of <var>relevantGlobal</var> contains a <a href=\"https://w3c.github.io/performance-timeline/#dfn-registered-performance-observer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-registered-performance-observer-2\">registered performance\n            observer</a> whose <a href=\"https://w3c.github.io/performance-timeline/#dfn-observer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-observer-1\">observer</a> is <a data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>,\n            replace its <a href=\"https://w3c.github.io/performance-timeline/#dfn-options-list\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-options-list-1\">options list</a> with a list containing\n            <var>options</var> as its only item."
            },
            {
              "html": "Otherwise, create and append a <a href=\"https://w3c.github.io/performance-timeline/#dfn-registered-performance-observer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-registered-performance-observer-3\">registered performance\n            observer</a> object to the <a href=\"https://w3c.github.io/performance-timeline/#dfn-list-of-registered-performance-observer-objects\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-list-of-registered-performance-observer-objects-2\">list of registered performance\n            observer objects</a> of <var>relevantGlobal</var>, with\n            <a href=\"https://w3c.github.io/performance-timeline/#dfn-observer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-observer-2\">observer</a> set to <a data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this</a> and <a href=\"https://w3c.github.io/performance-timeline/#dfn-options-list\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-options-list-2\">options list</a> set to a\n            list containing <var>options</var> as its only item."
            }
          ]
        },
        {
          "html": "Otherwise, run the following steps:",
          "rationale": "assert",
          "steps": [
            {
              "html": "Assert that <a data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-observer-type\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-observer-type-8\">observer type</a> is\n            <code>\"single\"</code>."
            },
            {
              "html": "If <var>options</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserverinit-type\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserverinit-type-4\"><code>type</code></a> is not contained in the\n            <var>relevantGlobal</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-frozen-array-of-supported-entry-types\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-frozen-array-of-supported-entry-types-2\">frozen array of supported entry\n            types</a>, abort these steps. The user agent <em class=\"rfc2119\">SHOULD</em> notify\n            developers when this happens, for instance via a console warning."
            },
            {
              "html": "If the <a href=\"https://w3c.github.io/performance-timeline/#dfn-list-of-registered-performance-observer-objects\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-list-of-registered-performance-observer-objects-3\">list of registered performance observer objects</a>\n            of <var>relevantGlobal</var> contains a <a href=\"https://w3c.github.io/performance-timeline/#dfn-registered-performance-observer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-registered-performance-observer-4\">registered performance\n            observer</a> <var>obs</var> whose <a href=\"https://w3c.github.io/performance-timeline/#dfn-observer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-observer-3\">observer</a> is <a data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>:",
              "rationale": "if",
              "steps": [
                {
                  "html": "If <var>obs</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-options-list\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-options-list-3\">options list</a> contains a\n                <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserverinit\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserverinit-3\"><code>PerformanceObserverInit</code></a> item <var>currentOptions</var>\n                whose <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserverinit-type\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserverinit-type-5\"><code>type</code></a> is equal to <var>options</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserverinit-type\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserverinit-type-6\"><code>type</code></a>,\n                replace <var>currentOptions</var> with <var>options</var> in\n                <var>obs</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-options-list\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-options-list-4\">options list</a>."
                },
                {
                  "html": "Otherwise, append <var>options</var> to <var>obs</var>'s\n                <a href=\"https://w3c.github.io/performance-timeline/#dfn-options-list\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-options-list-5\">options list</a>."
                }
              ]
            },
            {
              "html": "Otherwise, create and append a <a href=\"https://w3c.github.io/performance-timeline/#dfn-registered-performance-observer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-registered-performance-observer-5\">registered performance\n            observer</a> object to the <a href=\"https://w3c.github.io/performance-timeline/#dfn-list-of-registered-performance-observer-objects\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-list-of-registered-performance-observer-objects-4\">list of registered performance\n            observer objects</a> of <var>relevantGlobal</var>, with\n            <a href=\"https://w3c.github.io/performance-timeline/#dfn-observer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-observer-4\">observer</a> set to the <a data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this</a> and <a href=\"https://w3c.github.io/performance-timeline/#dfn-options-list\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-options-list-6\">options list</a> set\n            to a list containing <var>options</var> as its only item."
            },
            {
              "html": "If <var>options</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserverinit-buffered\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserverinit-buffered-2\"><code>buffered</code></a> flag is set:",
              "rationale": "let",
              "steps": [
                {
                  "html": "Let <var>tuple</var> be the <a href=\"https://w3c.github.io/performance-timeline/#dfn-relevant-performance-entry-tuple\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-relevant-performance-entry-tuple-1\">relevant performance entry\n                tuple</a> of <var>options</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserverinit-type\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserverinit-type-7\"><code>type</code></a> and\n                <var>relevantGlobal</var>."
                },
                {
                  "html": "For each <var>entry</var> in <var>tuple</var>'s\n                <a href=\"https://w3c.github.io/performance-timeline/#dfn-performance-entry-buffer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-performance-entry-buffer-1\">performance entry buffer</a>:",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "If <a href=\"https://w3c.github.io/timing-entrytypes-registry/#dfn-should-add-entry\">\n                    should add entry</a> with <var>entry</var> and <var>options</var> as\n                    parameters returns true, <a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-append\" href=\"https://infra.spec.whatwg.org/#list-append\">append</a> <var>entry</var> to the\n                    <a href=\"https://w3c.github.io/performance-timeline/#dfn-observer-buffer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-observer-buffer-1\">observer buffer</a>."
                    }
                  ]
                },
                {
                  "html": "<a href=\"https://w3c.github.io/performance-timeline/#dfn-queue-the-performanceobserver-task\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-queue-the-performanceobserver-task-1\">Queue the PerformanceObserver task</a> with\n                <var>relevantGlobal</var> as input."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "html": "The <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserver-disconnect\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserver-disconnect-2\"><code>disconnect()</code></a> method must do the following:",
      "rationale": "remove",
      "steps": [
        {
          "html": "Remove <a data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this</a> from the <a href=\"https://w3c.github.io/performance-timeline/#dfn-list-of-registered-performance-observer-objects\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-list-of-registered-performance-observer-objects-5\">list of registered\n        performance observer objects</a> of <a data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"concept-relevant-global\" data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global\">relevant global object</a>."
        },
        {
          "html": "Empty <a data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-observer-buffer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-observer-buffer-4\">observer buffer</a>."
        },
        {
          "html": "Empty <a data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-options-list\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-options-list-7\">options list</a>."
        }
      ]
    },
    {
      "name": "PerformanceObserver/supportedEntryTypes",
      "href": "https://w3c.github.io/performance-timeline/#dom-performanceobserver-supportedentrytypes",
      "html": "When <dfn data-export=\"\" data-dfn-type=\"attribute\" id=\"dom-performanceobserver-supportedentrytypes\" data-idl=\"attribute\" data-title=\"supportedEntryTypes\" data-dfn-for=\"PerformanceObserver\" data-type=\"FrozenArray\" data-lt=\"supportedEntryTypes\" data-local-lt=\"PerformanceObserver.supportedEntryTypes\" tabindex=\"0\" aria-haspopup=\"dialog\"><code>supportedEntryTypes</code></dfn>'s attribute getter is called, run\n      the following steps:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var>globalObject</var> be the <a data-cite=\"HTML/webappapis.html#concept-settings-object-global\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global\">environment\n        settings object's global object</a>."
        },
        {
          "html": "Return <var>globalObject</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-frozen-array-of-supported-entry-types\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-frozen-array-of-supported-entry-types-3\">frozen array of supported entry\n        types</a>."
        }
      ]
    },
    {
      "name": "queue a PerformanceEntry",
      "href": "https://w3c.github.io/performance-timeline/#dfn-queue-a-performanceentry",
      "html": "To <dfn class=\"export\" data-export=\"\" id=\"dfn-queue-a-performanceentry\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">queue a PerformanceEntry</dfn> (<var>newEntry</var>), run\n      these steps:",
      "rationale": "if",
      "steps": [
        {
          "html": "If <var>newEntry</var>'s <a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"PerformanceEntry\" data-xref-for=\"PerformanceEntry\" href=\"https://w3c.github.io/performance-timeline/#dom-performanceentry-id\" class=\"internalDFN\" id=\"ref-for-dom-performanceentry-id-1\"><code>id</code></a> is unset:",
          "rationale": "let",
          "steps": [
            {
              "html": "Let <var>id</var> be the result of running <a href=\"https://w3c.github.io/performance-timeline/#dfn-generate-an-id\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-generate-an-id-1\">generate an id</a> for <var>newEntry</var>."
            },
            {
              "html": "Set <var>newEntry</var>'s <a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"PerformanceEntry\" data-xref-for=\"PerformanceEntry\" href=\"https://w3c.github.io/performance-timeline/#dom-performanceentry-id\" class=\"internalDFN\" id=\"ref-for-dom-performanceentry-id-2\"><code>id</code></a> to <var>id</var>."
            }
          ]
        },
        {
          "html": "Let <var>interested observers</var> be an initially empty set of\n        <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserver\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserver-16\"><code>PerformanceObserver</code></a> objects."
        },
        {
          "html": "Let <var>entryType</var> be <var>newEntry</var>’s <a data-lt=\"PerformanceEntry.entryType\" href=\"https://w3c.github.io/performance-timeline/#dom-performanceentry-entrytype\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceentry-entrytype-3\"><code>entryType</code></a> value."
        },
        {
          "html": "Let <var>relevantGlobal</var> be <var>newEntry</var>'s <a data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"concept-relevant-global\" data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global\">relevant\n        global object</a>."
        },
        {
          "html": "If <var>relevantGlobal</var> has an <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/nav-history-apis.html\" data-cite-frag=\"concept-document-window\" href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window\">associated document</a>:",
          "rationale": "set",
          "steps": [
            {
              "html": "Set <var>newEntry</var>'s <a data-lt=\"PerformanceEntry.navigationId\" href=\"https://w3c.github.io/performance-timeline/#dom-performanceentry-navigationid\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceentry-navigationid-2\"><code>navigationId</code></a> to the value of\n            <var>relevantGlobal</var>'s <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/nav-history-apis.html\" data-cite-frag=\"concept-document-window\" href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window\">associated document</a>'s <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/performance-timeline/#dfn-most-recent-navigation\" class=\"internalDFN\" id=\"ref-for-dfn-most-recent-navigation-1\">most recent navigation</a>'s <a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"PerformanceEntry\" data-xref-for=\"PerformanceEntry\" href=\"https://w3c.github.io/performance-timeline/#dom-performanceentry-id\" class=\"internalDFN\" id=\"ref-for-dom-performanceentry-id-3\"><code>id</code></a>."
            }
          ]
        },
        {
          "html": "Otherwise, set <var>newEntry</var>'s <a data-lt=\"PerformanceEntry.navigationId\" href=\"https://w3c.github.io/performance-timeline/#dom-performanceentry-navigationid\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceentry-navigationid-3\"><code>navigationId</code></a> to null."
        },
        {
          "html": "For each <a href=\"https://w3c.github.io/performance-timeline/#dfn-registered-performance-observer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-registered-performance-observer-6\">registered performance observer</a> <var>regObs</var> in\n        <var>relevantGlobal</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-list-of-registered-performance-observer-objects\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-list-of-registered-performance-observer-objects-6\">list of registered performance observer objects</a>:",
          "rationale": "if",
          "steps": [
            {
              "html": "If <var>regObs</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-options-list\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-options-list-8\">options list</a> contains a\n            <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserverinit\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserverinit-6\"><code>PerformanceObserverInit</code></a> <var>options</var> whose <a data-link-for=\"PerformanceObserverInit\" href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserverinit-entrytypes\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserverinit-entrytypes-10\"><code>entryTypes</code></a> member includes\n            <var>entryType</var> or whose <a data-link-for=\"PerformanceObserverInit\" href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserverinit-type\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserverinit-type-13\"><code>type</code></a> member equals to\n            <var>entryType</var>:",
              "rationale": "if",
              "steps": [
                {
                  "html": "If <a href=\"https://w3c.github.io/timing-entrytypes-registry/#dfn-should-add-entry\">\n                should add entry</a> with <var>newEntry</var> and <var>options</var>\n                returns true, append <var>regObs</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-observer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-observer-5\">observer</a> to\n                <var>interested observers</var>."
                }
              ]
            }
          ]
        },
        {
          "html": "For each <var>observer</var> in <var>interested observers</var>:",
          "rationale": "append",
          "steps": [
            {
              "html": "Append <var>newEntry</var> to <var>observer</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-observer-buffer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-observer-buffer-5\">observer\n            buffer</a>."
            }
          ]
        },
        {
          "html": "Let <var>tuple</var> be the <a href=\"https://w3c.github.io/performance-timeline/#dfn-relevant-performance-entry-tuple\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-relevant-performance-entry-tuple-2\">relevant performance entry tuple</a>\n        of <var>entryType</var> and <var>relevantGlobal</var>."
        },
        {
          "html": "Let <var>isBufferFull</var> be the return value of the <a href=\"https://w3c.github.io/performance-timeline/#dfn-determine-if-a-performance-entry-buffer-is-full\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-determine-if-a-performance-entry-buffer-is-full-1\">determine if a performance\n        entry buffer is full</a> algorithm with <var>tuple</var> as input."
        },
        {
          "html": "Let <var>shouldAdd</var> be the result of <a href=\"https://w3c.github.io/timing-entrytypes-registry/#dfn-should-add-entry\">should add\n        entry</a> with <var>newEntry</var> as input."
        },
        {
          "html": "If <var>isBufferFull</var> is false and <var>shouldAdd</var> is true, <a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-append\" href=\"https://infra.spec.whatwg.org/#list-append\">append</a>\n        <var>newEntry</var> to <var>tuple</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-performance-entry-buffer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-performance-entry-buffer-2\">performance entry buffer</a>."
        },
        {
          "html": "<a href=\"https://w3c.github.io/performance-timeline/#dfn-queue-the-performanceobserver-task\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-queue-the-performanceobserver-task-2\">Queue the PerformanceObserver task</a> with\n        <var>relevantGlobal</var> as input."
        }
      ]
    },
    {
      "name": "queue a navigation PerformanceEntry",
      "href": "https://w3c.github.io/performance-timeline/#dfn-queue-a-navigation-performanceentry",
      "html": "To <dfn class=\"export\" data-export=\"\" id=\"dfn-queue-a-navigation-performanceentry\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">queue a navigation PerformanceEntry</dfn> (<var>newEntry</var>), run\n      these steps:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var>id</var> be the result of running <a href=\"https://w3c.github.io/performance-timeline/#dfn-generate-an-id\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-generate-an-id-2\">generate an id</a> for <var>newEntry</var>."
        },
        {
          "html": "Let <var>relevantGlobal</var> be <var>newEntry</var>'s <a data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"concept-relevant-global\" data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global\">relevant\n        global object</a>."
        },
        {
          "html": "Set <var>newEntry</var>'s <a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"PerformanceEntry\" data-xref-for=\"PerformanceEntry\" href=\"https://w3c.github.io/performance-timeline/#dom-performanceentry-id\" class=\"internalDFN\" id=\"ref-for-dom-performanceentry-id-4\"><code>id</code></a> to <var>id</var>."
        },
        {
          "html": "Set <var>newEntry</var>'s <a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"PerformanceEntry\" data-xref-for=\"PerformanceEntry\" href=\"https://w3c.github.io/performance-timeline/#dom-performanceentry-navigationid\" class=\"internalDFN\" id=\"ref-for-dom-performanceentry-navigationid-4\"><code>navigationId</code></a> to <var>id</var>."
        },
        {
          "html": "If <var>relevantGlobal</var> has an <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/nav-history-apis.html\" data-cite-frag=\"concept-document-window\" href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window\">associated document</a>:",
          "rationale": "set",
          "steps": [
            {
              "html": "Set <var>relevantGlobal</var>'s <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/nav-history-apis.html\" data-cite-frag=\"concept-document-window\" href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window\">associated document</a>'s <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/performance-timeline/#dfn-most-recent-navigation\" class=\"internalDFN\" id=\"ref-for-dfn-most-recent-navigation-2\">most recent navigation</a> to <var>newEntry</var>."
            }
          ]
        },
        {
          "html": "<a href=\"https://w3c.github.io/performance-timeline/#dfn-queue-a-performanceentry\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-queue-a-performanceentry-1\">Queue a PerformanceEntry</a> with <var>newEntry</var> as input."
        }
      ]
    },
    {
      "name": "queue the PerformanceObserver task",
      "href": "https://w3c.github.io/performance-timeline/#dfn-queue-the-performanceobserver-task",
      "html": "When asked to <dfn id=\"dfn-queue-the-performanceobserver-task\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">queue the PerformanceObserver task</dfn>, given\n      <var>relevantGlobal</var> as input, run the following steps:",
      "rationale": "if",
      "steps": [
        {
          "html": "If <var>relevantGlobal</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-performance-observer-task-queued-flag\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-performance-observer-task-queued-flag-1\">performance observer task queued\n        flag</a> is set, terminate these steps."
        },
        {
          "html": "Set <var>relevantGlobal</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-performance-observer-task-queued-flag\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-performance-observer-task-queued-flag-2\">performance observer task queued\n        flag</a>."
        },
        {
          "html": "<a data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"queue-a-task\" data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\">Queue a task</a> that consists of running the following substeps.\n          The <a data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"task-source\" data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#task-source\">task source</a> for the queued task is the <dfn class=\"export\" data-export=\"\" id=\"dfn-performance-timeline-task-source\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">performance\n          timeline task source</dfn>.",
          "rationale": "unset",
          "steps": [
            {
              "html": "Unset <a href=\"https://w3c.github.io/performance-timeline/#dfn-performance-observer-task-queued-flag\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-performance-observer-task-queued-flag-3\">performance observer task queued flag</a> of\n            <var>relevantGlobal</var>."
            },
            {
              "html": "Let <var>notifyList</var> be a copy of\n            <var>relevantGlobal</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-list-of-registered-performance-observer-objects\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-list-of-registered-performance-observer-objects-7\">list of registered performance\n            observer objects</a>."
            },
            {
              "html": "For each <a href=\"https://w3c.github.io/performance-timeline/#dfn-registered-performance-observer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-registered-performance-observer-7\">registered performance observer</a> object <var>registeredObserver</var>\n            in <var>notifyList</var>, run these steps:",
              "rationale": "let",
              "steps": [
                {
                  "html": "Let <var>po</var> be <var>registeredObserver</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-observer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-observer-6\">observer</a>."
                },
                {
                  "html": "Let <var>entries</var> be a copy of <var>po</var>’s\n                <a href=\"https://w3c.github.io/performance-timeline/#dfn-observer-buffer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-observer-buffer-6\">observer buffer</a>."
                },
                {
                  "html": "If <var>entries</var> is empty, return."
                },
                {
                  "html": "Empty <var>po</var>’s <a href=\"https://w3c.github.io/performance-timeline/#dfn-observer-buffer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-observer-buffer-7\">observer buffer</a>."
                },
                {
                  "html": "Let <var>observerEntryList</var> be a new\n                <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"PerformanceObserverEntryList\" href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserverentrylist\" class=\"internalDFN\" id=\"ref-for-dom-performanceobserverentrylist-4\"><code>PerformanceObserverEntryList</code></a>, with its <a href=\"https://w3c.github.io/performance-timeline/#dfn-entry-list\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-entry-list-4\">entry list</a> set\n                to <var>entries</var>."
                },
                {
                  "html": "Let <var>droppedEntriesCount</var> be null."
                },
                {
                  "html": "If <var>po</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-requires-dropped-entries\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-requires-dropped-entries-3\">requires dropped entries</a> is set, perform the following\n                steps:",
                  "rationale": "set",
                  "steps": [
                    {
                      "html": "Set <var>droppedEntriesCount</var> to 0."
                    },
                    {
                      "html": "For each <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserverinit\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserverinit-7\"><code>PerformanceObserverInit</code></a> <var>item</var> in\n                    <var>registeredObserver</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-options-list\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-options-list-9\">options list</a>:",
                      "rationale": "for",
                      "steps": [
                        {
                          "html": "For each <a data-cite=\"WEBIDL#idl-DOMString\" href=\"https://webidl.spec.whatwg.org/#idl-DOMString\">DOMString</a>\n                      <var>entryType</var> that appears either as <var>item</var>'s <a data-link-for=\"PerformanceObserverInit\" href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserverinit-type\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserverinit-type-14\"><code>type</code></a> or in <var>item</var>'s\n                      <a data-link-for=\"PerformanceObserverInit\" href=\"https://w3c.github.io/performance-timeline/#dom-performanceobserverinit-entrytypes\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobserverinit-entrytypes-11\"><code>entryTypes</code></a>:",
                          "rationale": "let",
                          "steps": [
                            {
                              "html": "Let <var>map</var> be <var>relevantGlobal</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-performance-entry-buffer-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-performance-entry-buffer-map-2\">performance entry\n                          buffer map</a>."
                            },
                            {
                              "html": "Let <var>tuple</var> be the result of <a data-cite=\"INFRA#map-get\" data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-get\">getting the value of entry</a>\n                          on <var>map</var> given <var>entryType</var> as <a data-cite=\"INFRA#map-key\" data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-key\">key</a>."
                            },
                            {
                              "html": "Increase <var>droppedEntriesCount</var> by <var>tuple</var>'s\n                          <a href=\"https://w3c.github.io/performance-timeline/#dfn-dropped-entries-count\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-dropped-entries-count-1\">dropped entries count</a>."
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "html": "Set <var>po</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-requires-dropped-entries\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-requires-dropped-entries-4\">requires dropped entries</a> to false."
                    }
                  ]
                },
                {
                  "html": "Let <var>callbackOptions</var> be a <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceobservercallbackoptions\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobservercallbackoptions-3\"><code>PerformanceObserverCallbackOptions</code></a>\n                with its <a data-link-for=\"PerformanceObserverCallbackOptions\" href=\"https://w3c.github.io/performance-timeline/#dom-performanceobservercallbackoptions-droppedentriescount\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceobservercallbackoptions-droppedentriescount-2\"><code>droppedEntriesCount</code></a>\n                set to <var>droppedEntriesCount</var> if <var>droppedEntriesCount</var> is not null,\n                otherwise unset."
                },
                {
                  "html": "Call <var>po</var>’s <a href=\"https://w3c.github.io/performance-timeline/#dfn-observer-callback\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-observer-callback-2\">observer callback</a> with\n                <var>observerEntryList</var> as the first argument, with <var>po</var>\n                as the second argument and as <a data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dfn-callback-this-value\" data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-callback-this-value\">callback this value</a>, and with\n                <var>callbackOptions</var> as the third argument. If this <a data-link-type=\"dfn\" data-link-for=\"exception\" data-xref-for=\"exception\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dfn-throw\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\">throws</a>\n                an exception, <a data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"report-the-exception\" data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#report-the-exception\">report the exception</a>."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "filter buffer map by name and type",
      "href": "https://w3c.github.io/performance-timeline/#dfn-filter-buffer-map-by-name-and-type",
      "html": "When asked to run the <dfn id=\"dfn-filter-buffer-map-by-name-and-type\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">filter buffer map by name and type</dfn>\n      algorithm with optional <var>name</var> and <var>type</var>, run the\n      following steps:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var>result</var> be an initially empty <a data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list\" data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\">list</a>."
        },
        {
          "html": "Let <var>map</var> be the <a href=\"https://w3c.github.io/performance-timeline/#dfn-performance-entry-buffer-map\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-performance-entry-buffer-map-3\">performance entry buffer map</a>\n        associated with the <a data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"concept-relevant-global\" data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global\">relevant global object</a> of <a data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>."
        },
        {
          "html": "Let <var>tuple list</var> be an empty <a data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list\" data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\">list</a>."
        },
        {
          "html": "If <var>type</var> is not null, append the result of <a data-cite=\"INFRA#map-get\" data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-get\">getting the\n        value of entry</a> on <var>map</var> given <var>type</var> as\n        <a data-cite=\"INFRA#map-key\" data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-key\">key</a> to <var>tuple list</var>. Otherwise, assign the result of\n        <a data-cite=\"INFRA/#map-getting-the-values\" href=\"https://infra.spec.whatwg.org/#map-getting-the-values\">get the values</a> on\n        <var>map</var> to <var>tuple list</var>."
        },
        {
          "html": "For each <var>tuple</var> in <var>tuple list</var>, run the\n        following steps:",
          "rationale": "let",
          "steps": [
            {
              "html": "Let <var>buffer</var> be <var>tuple</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-performance-entry-buffer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-performance-entry-buffer-3\">performance\n            entry buffer</a>."
            },
            {
              "html": "If <var>tuple</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-availablefromtimeline\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-availablefromtimeline-1\">availableFromTimeline</a> is false,\n            continue to the next <var>tuple</var>."
            },
            {
              "html": "Let <var>entries</var> be the result of running <a href=\"https://w3c.github.io/performance-timeline/#dfn-filter-buffer-by-name-and-type\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-filter-buffer-by-name-and-type-4\">filter\n            buffer by name and type</a> with <var>buffer</var>, <var>name</var>\n            and <var>type</var> as inputs."
            },
            {
              "html": "For each <var>entry</var> in <var>entries</var>,\n            <a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-append\" href=\"https://infra.spec.whatwg.org/#list-append\">append</a> <var>entry</var> to <var>result</var>."
            }
          ]
        },
        {
          "html": "Sort <var>results</var>'s entries in chronological order with\n        respect to <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceentry-starttime\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceentry-starttime-4\"><code>startTime</code></a>"
        },
        {
          "html": "Return <var>result</var>."
        }
      ]
    },
    {
      "name": "filter buffer by name and type",
      "href": "https://w3c.github.io/performance-timeline/#dfn-filter-buffer-by-name-and-type",
      "html": "When asked to run the <dfn id=\"dfn-filter-buffer-by-name-and-type\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">filter buffer by name and type</dfn>\n      algorithm, with <var>buffer</var>, <var>name</var>, and <var>type</var>\n      as inputs, run the following steps:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var>result</var> be an initially empty <a data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list\" data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\">list</a>."
        },
        {
          "html": "For each <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceentry\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceentry-11\"><code>PerformanceEntry</code></a> <var>entry</var> in\n        <var>buffer</var>, run the following steps:",
          "rationale": "if",
          "steps": [
            {
              "html": "If <var>type</var> is not null and if <var>type</var> is not\n            <a data-cite=\"INFRA#string-is\" href=\"https://infra.spec.whatwg.org/#string-is\">identical to</a> <var>entry</var>'s\n            <code>entryType</code> attribute, continue to next <var>entry</var>."
            },
            {
              "html": "If <var>name</var> is not null and if <var>name</var> is not\n            <a data-cite=\"INFRA#string-is\" href=\"https://infra.spec.whatwg.org/#string-is\">identical to</a> <var>entry</var>'s\n            <code>name</code> attribute, continue to next <var>entry</var>."
            },
            {
              "html": "<a data-link-type=\"dfn\" data-link-for=\"list\" data-xref-for=\"list\" data-cite=\"infra\" data-cite-path=\"\" data-cite-frag=\"list-append\" href=\"https://infra.spec.whatwg.org/#list-append\">append</a> <var>entry</var> to <var>result</var>."
            }
          ]
        },
        {
          "html": "Sort <var>results</var>'s entries in chronological order with\n        respect to <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceentry-starttime\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceentry-starttime-5\"><code>startTime</code></a>"
        },
        {
          "html": "Return <var>result</var>."
        }
      ]
    },
    {
      "name": "determine if a performance entry buffer is full",
      "href": "https://w3c.github.io/performance-timeline/#dfn-determine-if-a-performance-entry-buffer-is-full",
      "html": "To <dfn id=\"dfn-determine-if-a-performance-entry-buffer-is-full\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">determine if a performance entry buffer is full</dfn>,\n      with <var>tuple</var> as input, run the following\n      steps:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var>num current entries</var> be the size of\n        <var>tuple</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-performance-entry-buffer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-performance-entry-buffer-4\">performance entry buffer</a>."
        },
        {
          "html": "If <var>num current entries</var> is less than <var>tuples</var>'s\n        <a href=\"https://w3c.github.io/performance-timeline/#dfn-maxbuffersize\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-maxbuffersize-1\">maxBufferSize</a>, return false."
        },
        {
          "html": "Increase <var>tuple</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-dropped-entries-count\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-dropped-entries-count-2\">dropped entries count</a> by 1."
        },
        {
          "html": "Return true."
        }
      ]
    },
    {
      "name": "generate an id",
      "href": "https://w3c.github.io/performance-timeline/#dfn-generate-an-id",
      "html": "When asked to <dfn class=\"export\" data-export=\"\" id=\"dfn-generate-an-id\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">generate an id</dfn> for a\n      <a href=\"https://w3c.github.io/performance-timeline/#dom-performanceentry\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-performanceentry-12\"><code>PerformanceEntry</code></a> <var>entry, run the following steps:</var>",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var>relevantGlobal</var> be <var>entry</var>'s <a data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"concept-relevant-global\" data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global\">relevant\n        global object</a>."
        },
        {
          "html": "Increase <var>relevantGlobal</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-last-performance-entry-id\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-last-performance-entry-id-1\">last performance entry\n        id</a> by a small number chosen by the user agent."
        },
        {
          "html": "Return <var>relevantGlobal</var>'s <a href=\"https://w3c.github.io/performance-timeline/#dfn-last-performance-entry-id\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-last-performance-entry-id-2\">last performance entry id</a>."
        }
      ]
    }
  ]
}