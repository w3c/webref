{
  "spec": {
    "title": "Decentralized Identifier Resolution (DID Resolution) v0.3",
    "url": "https://w3c.github.io/did-resolution/"
  },
  "algorithms": [
    {
      "html": "A <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolvers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-140\">DID resolver</a> implements the following <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolution\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-141\">DID resolution</a> algorithm.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "Validate that the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-decentralized-identifiers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-142\">DID</a></var> conforms to the <code>did</code> rule of the\n\t\t\t<a href=\"https://www.w3.org/TR/did-core/#did-syntax\">DID Syntax</a>.\n\t\t\tIf not, the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolvers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-143\">DID resolver</a> <em class=\"rfc2119\">MUST</em> return the following result:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "<b>didResolutionMetadata</b>: <var>error object</var> with type set to <code><a href=\"https://w3c.github.io/did-resolution/#INVALID_DID\">https://www.w3.org/ns/did#INVALID_DID</a></code>"
            },
            {
              "html": "<b>didDocument</b>: <code>null</code>"
            },
            {
              "html": "<b>didDocumentMetadata</b>: <code>«[ ]»</code>"
            }
          ]
        },
        {
          "html": "Determine whether the DID method of the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-decentralized-identifiers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-144\">DID</a></var> is supported by the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolvers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-145\">DID resolver</a>\n\t\t\tthat implements this algorithm. If not, the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolvers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-146\">DID resolver</a> <em class=\"rfc2119\">MUST</em> return the following result:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "<b>didResolutionMetadata</b>: <var>error object</var> with type set to <code><a href=\"https://w3c.github.io/did-resolution/#METHOD_NOT_SUPPORTED\">https://www.w3.org/ns/did#METHOD_NOT_SUPPORTED</a></code>"
            },
            {
              "html": "<b>didDocument</b>: <code>null</code>"
            },
            {
              "html": "<b>didDocumentMetadata</b>: <code>«[ ]»</code>"
            }
          ]
        },
        {
          "html": "Determine whether the <var>input <a href=\"https://w3c.github.io/did-resolution/#did-resolution-options\">DID resolution options</a></var>\n\t\t\t\tare supported by the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolvers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-147\">DID resolver</a> that implements this algorithm. If not, the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolvers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-148\">DID resolver</a>\n\t\t\t\t<em class=\"rfc2119\">MUST</em> return the following result:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "<b>didResolutionMetadata</b>: <var>error object</var> with type set to <code><a href=\"https://w3c.github.io/did-resolution/#FEATURE_NOT_SUPPORTED\">https://www.w3.org/ns/did#FEATURE_NOT_SUPPORTED</a></code>"
            },
            {
              "html": "<b>didDocument</b>: <code>null</code>"
            },
            {
              "html": "<b>didDocumentMetadata</b>: <code>«[ ]»</code>"
            }
          ]
        },
        {
          "html": "Determine whether the <var>input <a href=\"https://w3c.github.io/did-resolution/#did-resolution-options\">DID resolution options</a></var>\n\t\t\t\tare valid. If not, the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolvers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-149\">DID resolver</a> <em class=\"rfc2119\">MUST</em> return the following result:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "<b>didResolutionMetadata</b>: <var>error object</var> with type set to <code><a href=\"https://w3c.github.io/did-resolution/#INVALID_OPTIONS\">https://www.w3.org/ns/did#INVALID_OPTIONS</a></code>"
            },
            {
              "html": "<b>didDocument</b>: <code>null</code>"
            },
            {
              "html": "<b>didDocumentMetadata</b>: <code>«[ ]»</code>"
            }
          ]
        },
        {
          "html": "Obtain the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-documents\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-150\">DID document</a> for the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-decentralized-identifiers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-151\">DID</a></var> by executing the\n\t\t\t<a href=\"https://www.w3.org/TR/did-core/#method-operations\">Read</a> operation, as defined by the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-methods\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-152\">DID method</a></var>:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "If the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-decentralized-identifiers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-153\">DID</a></var> does not exist, return the following result:",
              "rationale": ".algorithm",
              "steps": [
                {
                  "html": "<b>didResolutionMetadata</b>: <var>error object</var> with type set to <code><a href=\"https://w3c.github.io/did-resolution/#NOT_FOUND\">https://www.w3.org/ns/did#NOT_FOUND</a></code>"
                },
                {
                  "html": "<b>didDocument</b>: <code>null</code>"
                },
                {
                  "html": "<b>didDocumentMetadata</b>: <code>«[ ]»</code>"
                }
              ]
            },
            {
              "html": "If the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-decentralized-identifiers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-154\">DID</a></var> has been deactivated, return the following result:",
              "rationale": ".algorithm",
              "steps": [
                {
                  "html": "<b>didResolutionMetadata</b>: <code>«[ ... ]»</code>"
                },
                {
                  "html": "<b>didDocument</b>: <code>null</code>"
                },
                {
                  "html": "<b>didDocumentMetadata</b>: <code>«[ \"deactivated\" → true, ... ]»</code>"
                }
              ]
            },
            {
              "html": "Otherwise, the result of the <a href=\"https://www.w3.org/TR/did-core/#method-operations\">Read</a> operation\n\t\t\t\t\tis called the <var>output <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-documents\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-155\">DID document</a></var>. This result <em class=\"rfc2119\">MUST</em> be represented in a\n\t\t\t\t\t<a href=\"https://www.w3.org/TR/did-core/#representations\">conformant representation</a>."
            }
          ]
        },
        {
          "html": "If the <var>input <a href=\"https://w3c.github.io/did-resolution/#did-resolution-options\">DID resolution options</a></var> contain the <code>expandRelativeUrls</code> option with a value of <code>true</code>:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "Iterate over all <a data-cite=\"did-core#services\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did-core#services&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-services-1\">services</a>,\n\t\t\t\t\t\t<a data-cite=\"did-core#verification-methods\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did-core#verification-methods&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-verification-methods\">verification methods</a>, and\n\t\t\t\t\t\t<a data-cite=\"did-core#verification-relationships\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did-core#verification-relationships&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-verification-relationships\">verification relationships</a>\n\t\t\t\t\t\tin the <var>output <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-documents\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-156\">DID document</a></var>."
            },
            {
              "html": "If the value of the <code>id</code> property of a <a data-cite=\"did-core#services\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did-core#services&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-services-2\">service</a> or\n\t\t\t\t\t\t<a data-cite=\"did-core#verification-methods\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did-core#verification-methods&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-verification-methods-0\">verification method</a>\n\t\t\t\t\t\t(including those embedded in <a data-cite=\"did-core#verification-relationships\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did-core#verification-relationships&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-verification-relationships-0\">verification relationships</a>) is a\n\t\t\t\t\t\t<a data-cite=\"did-core#relative-did-urls\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did-core#relative-did-urls&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-relative-did-urls-0\">relative DID URL</a>, or if a\n\t\t\t\t\t\t<a data-cite=\"did-core#verification-relationships\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did-core#verification-relationships&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-verification-relationships-1\">verification relationship</a> is a\n\t\t\t\t\t\t<a data-cite=\"did-core#relative-did-urls\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did-core#relative-did-urls&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-relative-did-urls-1\">relative DID URL</a>:",
              "rationale": ".algorithm",
              "steps": [
                {
                  "html": "Resolve the <a data-cite=\"did-core#relative-did-urls\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did-core#relative-did-urls&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-relative-did-urls-2\">relative DID URL</a> to\n\t\t\t\t\t\t\t\tan absolute <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-urls\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-157\">DID URL</a> conformant with <a data-cite=\"did-core#did-url-syntax\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did-core#did-url-syntax&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-did-url-syntax-0\">DID URL Syntax</a>, according\n\t\t\t\t\t\t\t\tto the rules of section <a data-cite=\"did-core#relative-did-urls\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did-core#relative-did-urls&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-relative-did-urls-3\">Relative DID URLs</a> in <a data-cite=\"DID-CORE\" data-matched-text=\"[[[DID-CORE]]]\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;DID-CORE&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core\">[[[DID-CORE]]]</a>."
                }
              ]
            },
            {
              "html": "Update the <var>output <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-documents\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-158\">DID document</a></var> by replacing\n\t\t\t\t\t\tthe <a data-cite=\"did-core#relative-did-urls\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did-core#relative-did-urls&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-relative-did-urls-4\">relative DID URLs</a> with the resolved absolute <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-urls\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-159\">DID URLs</a>."
            }
          ]
        },
        {
          "html": "Return the following result:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "<b>didResolutionMetadata</b>: <code>«[ ... ]»</code>"
            },
            {
              "html": "<b>didDocument</b>: <var>output DID document</var>"
            },
            {
              "html": "<b>didDocumentMetadata</b>: <code>«[ \"contentType\" → </code><var>output DID document media type</var><code>, ... ]»</code>"
            }
          ]
        }
      ]
    },
    {
      "html": "If the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolvers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-160\">DID resolver</a> encounters any unexpected errors during the execution of the DID Resolution algorithm,\n\t\t\tit <em class=\"rfc2119\">MUST</em> return the following result:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<b>didResolutionMetadata</b>: <var>error object</var> with type set to <code><a href=\"https://w3c.github.io/did-resolution/#INTERNAL_ERROR\">https://www.w3.org/ns/did#INTERNAL_ERROR</a></code>"
        },
        {
          "html": "<b>didDocument</b>: <code>null</code>"
        },
        {
          "html": "<b>didDocumentMetadata</b>: <code>«[ ]»</code>"
        }
      ]
    },
    {
      "name": "resolution cycle",
      "href": "https://w3c.github.io/did-resolution/#dfn-resolution-cycle",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "Validate that the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-urls\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-204\">DID URL</a></var> conforms to the <code>did-url</code> rule of the\n\t\t\t\t\t<a href=\"https://www.w3.org/TR/did-core/#did-url-syntax\">DID URL Syntax</a>.\n\t\t\t\t\tIf not, the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-url-dereferencers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-205\">DID URL dereferencer</a> <em class=\"rfc2119\">MUST</em> return the following result:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "<b>dereferencingMetadata</b>: <var>error object</var> with type set to <code><a href=\"https://w3c.github.io/did-resolution/#INVALID_DID_URL\">https://www.w3.org/ns/did#INVALID_DID_URL</a></code>"
            },
            {
              "html": "<b>contentStream</b>: <code>null</code>"
            },
            {
              "html": "<b>contentMetadata</b>: <code>«[ ]»</code>"
            }
          ]
        },
        {
          "html": "Obtain the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-documents\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-206\">DID document</a> for the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-decentralized-identifiers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-207\">DID</a></var> by executing the\n\t\t\t\t\t<a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolution\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-208\">DID resolution</a> algorithm as defined in <a href=\"https://w3c.github.io/did-resolution/#resolving\" class=\"sec-ref\"><bdi class=\"secno\">4. </bdi>DID Resolution</a>. All\n\t\t\t\t\t<var>dereferencing options</var> and all\n\t\t\t\t\t<a href=\"https://www.w3.org/TR/did-core/#did-parameters\">\n\t\t\t\t\t\tDID parameters</a> of the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-urls\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-209\">DID URL</a></var> <em class=\"rfc2119\">MUST</em> be passed as <var>resolution options</var> to the\n\t\t\t\t\t\t<a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolution\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-210\">DID Resolution</a> algorithm."
        },
        {
          "html": "If the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-decentralized-identifiers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-211\">DID</a></var> does not exist in the VDR, the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-url-dereferencers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-212\">DID URL dereferencer</a>\n\t\t\t\t\t\t<em class=\"rfc2119\">MUST</em> return the following result:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "<b>dereferencingMetadata</b>: <var>error object</var> with type set to <code><a href=\"https://w3c.github.io/did-resolution/#NOT_FOUND\">https://www.w3.org/ns/did#NOT_FOUND</a></code>"
            },
            {
              "html": "<b>contentStream</b>: <code>null</code>"
            },
            {
              "html": "<b>contentMetadata</b>: <code>«[ ]»</code>"
            }
          ]
        },
        {
          "html": "Otherwise, the <b>didDocument</b> result of the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolution\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-213\">DID resolution</a> algorithm is called the <var>resolved <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-documents\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-214\">DID document</a></var>."
        },
        {
          "html": "If present, separate the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-fragments\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-215\">DID fragment</a> from the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-urls\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-216\">DID URL</a></var> and continue\n\t\t\t\t\twith the adjusted <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-urls\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-217\">DID URL</a></var>."
        },
        {
          "html": "If the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-urls\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-218\">DID URL</a></var> contains no <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-paths\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-219\">DID path</a> and no <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-queries\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-220\">DID query</a>:\n\t\t\t\t\t\n\t\t\t\t\tThe <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-url-dereferencers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-221\">DID URL dereferencer</a> <em class=\"rfc2119\">MUST</em> return the <var>resolved <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-documents\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-222\">DID document</a></var> and\n\t\t\t\t\t<var>resolved <a href=\"https://w3c.github.io/did-resolution/#did-document-metadata\" class=\"sec-ref\"><bdi class=\"secno\">4.3 </bdi>DID Document Metadata</a></var> as follows:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "<b>dereferencingMetadata</b>: <code>«[ ... ]»</code>"
            },
            {
              "html": "<b>contentStream</b>: <code>resolved DID document</code>"
            },
            {
              "html": "<b>contentMetadata</b>: <code>«[ <code>resolved DID document metadata</code> ]»</code>"
            }
          ]
        },
        {
          "html": "If the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-urls\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-223\">DID URL</a></var> contains the\n\t\t\t\t\t<a href=\"https://www.w3.org/TR/did-core/#did-parameters\">DID parameter</a> <code>hl</code>:"
        },
        {
          "html": "If the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-urls\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-224\">DID URL</a></var> contains the\n\t\t\t\t<a href=\"https://www.w3.org/TR/did-core/#did-parameters\">\n\t\t\t\t\tDID parameter</a> <code>service</code> and/or the <a href=\"https://www.w3.org/TR/did-core/#did-parameters\">\n\t\t\t\t\tDID parameter</a> <code>serviceType</code>, and optionally the\n\t\t\t\t\t<a data-cite=\"did-core#did-parameters\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did-core#did-parameters&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-did-parameters\">DID parameter</a> <code>relativeRef</code>:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "From the <var>resolved <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-documents\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-225\">DID document</a></var>, select all\n\t\t\t\t\t\t\t<a data-cite=\"did-core#services\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did-core#services&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-services-4\">services</a> which fulfill the following conditions:",
              "rationale": ".algorithm",
              "steps": [
                {
                  "html": "If the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-urls\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-226\">DID URL</a></var> contains the\n\t\t\t\t\t\t\t\t\t<a data-cite=\"did-core#did-parameters\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did-core#did-parameters&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-did-parameters-0\">DID parameter</a> <code>service</code>:\n\t\t\t\t\t\t\t\t\tSelect the <a data-cite=\"did-core#services\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did-core#services&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-services-5\">service</a> if its <code>id</code>\n\t\t\t\t\t\t\t\t\tproperty matches the value of the <code>service</code> DID parameter. If the <code>id</code>\n\t\t\t\t\t\t\t\t\tproperty or the <code>service</code> DID parameter or both contain relative\n\t\t\t\t\t\t\t\t\treferences, the corresponding absolute URIs <em class=\"rfc2119\">MUST</em> be resolved and used for determining\n\t\t\t\t\t\t\t\t\tthe match, using the rules specified in <a data-cite=\"RFC3986#section-5\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;RFC3986#section-5&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-rfc3986-section-5\">RFC3986 Section 5: Reference Resolution</a>\n\t\t\t\t\t\t\t\t\tand in section <a data-cite=\"did-core#relative-did-urls\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did-core#relative-did-urls&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-relative-did-urls-5\">Relative DID URLs</a> in <a data-cite=\"DID-CORE\" data-matched-text=\"[[[DID-CORE]]]\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;DID-CORE&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-0\">[[[DID-CORE]]]</a>."
                },
                {
                  "html": "If the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-urls\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-227\">DID URL</a></var> contains the\n\t\t\t\t\t\t\t\t\t<a data-cite=\"did-core#did-parameters\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did-core#did-parameters&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-did-parameters-1\">DID parameter</a> <code>serviceType</code>:\n\t\t\t\t\t\t\t\t\tSelect the <a data-cite=\"did-core#services\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did-core#services&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-services-6\">service</a> if its <code>type</code>\n\t\t\t\t\t\t\t\t\tproperty matches the value of the <code>serviceType</code> DID parameter."
                }
              ]
            },
            {
              "html": "If the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-urls\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-228\">DID URL</a></var> contains the\n\t\t\t\t\t\t\t<a data-cite=\"did-core#did-parameters\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did-core#did-parameters&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-did-parameters-2\">DID parameter</a> <code>relativeRef</code>:",
              "rationale": ".algorithm",
              "steps": [
                {
                  "html": "For each <var>selected <a href=\"https://w3c.github.io/did-resolution/#dfn-service\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-service-3\">service</a></var>:",
                  "rationale": ".algorithm",
                  "steps": [
                    {
                      "html": "If the value of the <code>serviceEndpoint</code> property of the <var>selected <a href=\"https://w3c.github.io/did-resolution/#dfn-service\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-service-4\">service</a></var>\n\t\t\t\t\t\t\t\t\t\tis a <a data-cite=\"INFRA#maps\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;INFRA#maps&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-infra-maps-2\">map</a>, skip this <var>selected <a href=\"https://w3c.github.io/did-resolution/#dfn-service\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-service-5\">service</a></var>."
                    },
                    {
                      "html": "If the value of the <code>serviceEndpoint</code> property of the <var>selected <a href=\"https://w3c.github.io/did-resolution/#dfn-service\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-service-6\">service</a></var>\n\t\t\t\t\t\t\t\t\t\t\tis a <a data-cite=\"INFRA#string\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;INFRA#string&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-infra-string-3\">string</a>, add this value to a list of\n\t\t\t\t\t\t\t\t\t\t\t<var>selected <a data-link-type=\"dfn\" data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-service-endpoints\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-229\">DID service endpoint</a> URLs</var>."
                    },
                    {
                      "html": "If the value of the <code>serviceEndpoint</code> property of the <var>selected <a href=\"https://w3c.github.io/did-resolution/#dfn-service\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-service-7\">service</a></var>\n\t\t\t\t\t\t\t\t\t\t\tis a <a data-cite=\"INFRA#sets\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;INFRA#sets&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-infra-sets-3\">set</a>, add all its items that are <a data-cite=\"INFRA#string\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;INFRA#string&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-infra-string-4\">strings</a>\n\t\t\t\t\t\t\t\t\t\t\tto a list of <var>selected <a data-link-type=\"dfn\" data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-service-endpoints\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-230\">DID service endpoint</a> URLs</var>."
                    }
                  ]
                },
                {
                  "html": "Resolving a <a data-link-type=\"dfn\" data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-service-endpoints\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-18\">DID service endpoint</a> — particularly one that is a DID — might\n\t\t\t\t\t\t\t\t\t\t\tresult in a <dfn id=\"dfn-resolution-cycle\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">resolution cycle</dfn>, which is a set of steps that result in\n\t\t\t\t\t\t\t\t\t\t\tan infinite loop. For example, a <a data-link-type=\"dfn\" data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-service-endpoints\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-19\">DID service endpoint</a> might indirectly point\n\t\t\t\t\t\t\t\t\t\t\tback through a sequence of resolutions to a previously dereferenced identifier.\n\t\t\t\t\t\t\t\t\t\t\tA <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolvers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-20\">DID resolver</a> recursively resolving a <a data-link-type=\"dfn\" data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-service-endpoints\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-21\">DID service endpoint</a> is advised\n\t\t\t\t\t\t\t\t\t\t\tto detect and handle such a cycle to prevent an infinite loop or resolution failure.\n\t\t\t\t\t\t\t\t\t\t\tFor further guidance, see Section <a href=\"https://w3c.github.io/did-resolution/#security-cycles-resolution\">Resolution Cycles</a>.",
                  "rationale": ".algorithm",
                  "steps": [
                    {
                      "html": "The <strong>base URI</strong> value is the <var>selected <a data-link-type=\"dfn\" data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-service-endpoints\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-232\">DID service endpoint</a> URL</var>."
                    },
                    {
                      "html": "The <strong>relative reference</strong> is the value of the\n\t\t\t\t\t\t\t\t\t\t\t<a data-cite=\"did-core#did-parameters\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;did-core#did-parameters&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-did-core-did-parameters-3\">DID parameter</a> <code>relativeRef</code>."
                    },
                    {
                      "html": "Update the <var>selected <a data-link-type=\"dfn\" data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-service-endpoints\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-233\">DID service endpoint</a> URL</var> to\n\t\t\t\t\t\t\t\t\t\tthe result of the \"Reference Resolution\" algorithm."
                    }
                  ]
                }
              ]
            },
            {
              "html": "If the <b>accept</b> <var>input <a href=\"https://w3c.github.io/did-resolution/#did-url-dereferencing-options\">DID dereferencing option</a></var>\n\t\t\t\t\t\t\tis missing, or if its value is the Media Type of a <a href=\"https://w3c.github.io/did-resolution/#dfn-representations\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-representations-8\">representation</a> of a <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-documents\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-234\">DID document</a>:",
              "rationale": ".algorithm",
              "steps": [
                {
                  "html": "Update the <a href=\"https://w3c.github.io/did-resolution/#dfn-service\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-service-8\">services</a> in the <var>resolved <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-documents\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-235\">DID document</a></var> to contain only the\n\t\t\t\t\t\t\t\t\t<var>selected <a href=\"https://w3c.github.io/did-resolution/#dfn-service\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-service-9\">services</a></var>."
                },
                {
                  "html": "Return the following result:",
                  "rationale": ".algorithm",
                  "steps": [
                    {
                      "html": "<b>dereferencingMetadata</b>: <code>«[ ... ]»</code>"
                    },
                    {
                      "html": "<b>content</b>: <code>resolved DID document with selected services</code>"
                    },
                    {
                      "html": "<b>contentMetadata</b>: <code>«[ <code>resolved DID document metadata</code> ]»</code>"
                    }
                  ]
                }
              ]
            },
            {
              "html": "If the value of the <b>accept</b> <var>input <a href=\"https://w3c.github.io/did-resolution/#did-resolution-options\">DID resolution option</a></var>\n\t\t\t\t\t\t\tis <b>text/uri-list</b>:",
              "rationale": ".algorithm",
              "steps": [
                {
                  "html": "Return the following result:",
                  "rationale": ".algorithm",
                  "steps": [
                    {
                      "html": "<b>dereferencingMetadata</b>: <code>«[ ... ]»</code>"
                    },
                    {
                      "html": "<b>content</b>: <code>« selected service endpoint URLs »</code>"
                    },
                    {
                      "html": "<b>contentMetadata</b>: <code>«[ \"contentType\" → \"text/uri-list\", ... ]»</code>"
                    }
                  ]
                }
              ]
            },
            {
              "html": "Otherwise, return the following result:",
              "rationale": ".algorithm",
              "steps": [
                {
                  "html": "<b>dereferencingMetadata</b>: <var>error object</var> with type set to <code><a href=\"https://w3c.github.io/did-resolution/#REPRESENTATION_NOT_SUPPORTED\">https://www.w3.org/ns/did#REPRESENTATION_NOT_SUPPORTED</a></code>"
                },
                {
                  "html": "<b>content</b>: <code>null</code>"
                },
                {
                  "html": "<b>contentMetadata</b>: <code>«[ ]»</code>"
                }
              ]
            }
          ]
        },
        {
          "html": "Otherwise, if the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-urls\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-236\">DID URL</a></var> contains a <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-paths\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-237\">DID path</a> and/or <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-queries\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-238\">DID query</a>:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "The applicable <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-methods\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-239\">DID method</a> <em class=\"rfc2119\">MAY</em> specify how to dereference\n\t\t\t\t\t\tthe <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-paths\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-240\">DID path</a> and/or <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-queries\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-241\">DID query</a> of the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-urls\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-242\">DID URL</a></var>."
            },
            {
              "html": "An extension specification <em class=\"rfc2119\">MAY</em> specify how to dereference\n\t\t\t\t\t\tthe <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-paths\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-243\">DID path</a> of the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-urls\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-244\">DID URL</a></var>."
            },
            {
              "html": "An extension specification <em class=\"rfc2119\">MAY</em> specify how to dereference\n\t\t\t\t\t\tthe <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-queries\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-245\">DID query</a> of the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-urls\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-246\">DID URL</a></var>."
            },
            {
              "html": "The client <em class=\"rfc2119\">MAY</em> be able to dereference the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-urls\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-247\">DID URL</a></var>\n\t\t\t\t\t\tin an application-specific way."
            }
          ]
        },
        {
          "html": "If neither this algorithm, nor the applicable <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-methods\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-248\">DID method</a>, nor an extension, nor the client\n\t\t\t\tis able to dereference the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-urls\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-249\">DID URL</a></var>, return the following result:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "<b>dereferencingMetadata</b>: <var>error object</var> with type set to <code><a href=\"https://w3c.github.io/did-resolution/#NOT_FOUND\">https://www.w3.org/ns/did#NOT_FOUND</a></code>"
            },
            {
              "html": "<b>contentStream</b>: <code>null</code>"
            },
            {
              "html": "<b>contentMetadata</b>: <code>«[ ]»</code>"
            }
          ]
        }
      ]
    },
    {
      "html": "If the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-urls\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-250\">DID URL</a></var> contains a <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-fragments\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-251\">DID fragment</a>,\n\t\t\tthen dereferencing of the fragment is dependent\n\t\t\ton the media type ([<cite><a class=\"bibref respec-offending-element\" data-link-type=\"biblio\" href=\"https://w3c.github.io/did-resolution/#bib-rfc2046\" title=\"Reference &quot;[RFC2046]&quot; not found.\" id=\"respec-offender-reference-rfc2046-not-found\">RFC2046</a></cite>]) of the resource, i.e., on the result of\n\t\t\t<a href=\"https://w3c.github.io/did-resolution/#dereferencing-algorithm-resource\" class=\"sec-ref\"><bdi class=\"secno\">5.4.1 </bdi>Dereferencing the Resource</a>.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "If the result of <a href=\"https://w3c.github.io/did-resolution/#dereferencing-algorithm-resource\" class=\"sec-ref\"><bdi class=\"secno\">5.4.1 </bdi>Dereferencing the Resource</a> is an <var>output <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-documents\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-252\">DID document</a></var>,\n\t\t\t\tand the <var>input <a href=\"https://w3c.github.io/did-resolution/#did-url-dereferencing-options\">DID URL dereferencing options</a></var> contain the\n\t\t\t\t<code>verificationRelationship</code> option:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "Let <var>verificationRelationship</var> be the value of the <code>verificationRelationship</code>\n\t\t\t\t\toption."
            },
            {
              "html": "Let <var>verificationMethod</var> be the result of dereferencing the\n\t\t\t\t\t<a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-fragments\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-253\">DID fragment</a> from the <var>output <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-documents\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-254\">DID document</a></var> according to the\n\t\t\t\t\trules of the media type of the <var>DID document</var>."
            },
            {
              "html": "If <var>verificationMethod</var> is not a <a data-cite=\"cid#dfn-conforming-verification-method\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;cid#dfn-conforming-verification-method&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-cid-dfn-conforming-verification-method\">conforming verification method</a>,\n\t\t\t\t\tan error <em class=\"rfc2119\">MUST</em> be raised and <em class=\"rfc2119\">SHOULD</em> convey an error type of\n\t\t\t\t\t<a data-cite=\"cid#INVALID_VERIFICATION_METHOD\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;cid#INVALID_VERIFICATION_METHOD&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-cid-invalid_verification_method\">INVALID_VERIFICATION_METHOD</a>."
            },
            {
              "html": "If <var>verificationMethod</var> is not associated, either by reference\n\t\t\t\t\t(URL) or by value (object), with the <a data-cite=\"cid#dfn-verification-relationship\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;cid#dfn-verification-relationship&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-cid-dfn-verification-relationship\">verification relationship</a> array in the\n\t\t\t\t\t<var>output <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-documents\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-255\">DID document</a></var> identified by <var>verificationRelationship</var>,\n\t\t\t\t\tan error <em class=\"rfc2119\">MUST</em> be raised and <em class=\"rfc2119\">SHOULD</em> convey an error type of\n\t\t\t\t\t<a data-cite=\"cid#INVALID_RELATIONSHIP_FOR_VERIFICATION_METHOD\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;cid#INVALID_RELATIONSHIP_FOR_VERIFICATION_METHOD&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-cid-invalid_relationship_for_verification_method\">\n\t\t\t\t\tINVALID_RELATIONSHIP_FOR_VERIFICATION_METHOD</a>."
            },
            {
              "html": "Return the <var>verificationMethod</var>."
            }
          ]
        },
        {
          "html": "If the result of <a href=\"https://w3c.github.io/did-resolution/#dereferencing-algorithm-resource\" class=\"sec-ref\"><bdi class=\"secno\">5.4.1 </bdi>Dereferencing the Resource</a> is a <var>selected <a data-link-type=\"dfn\" data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-service-endpoints\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-256\">DID service endpoint</a> URL</var>,\n\t\t\t\tand the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-urls\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-257\">DID URL</a></var> contains a <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-fragments\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-258\">DID fragment</a>:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "If the <var>selected <a data-link-type=\"dfn\" data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-service-endpoints\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-259\">DID service endpoint</a> URL</var>\n\t\t\t\t\tcontains a <code>fragment</code> component, raise an error."
            },
            {
              "html": "Append the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-fragments\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-260\">DID fragment</a> to the <var>select <a data-link-type=\"dfn\" data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-service-endpoints\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-261\">DID service endpoint</a> URL</var>. In other words,\n\t\t\t\t\tthe <var>select <a data-link-type=\"dfn\" data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-service-endpoints\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-262\">DID service endpoint</a> URL</var> \"inherits\" the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-fragments\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-263\">DID fragment</a> of the\n\t\t\t\t\t<var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-urls\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-264\">DID URL</a></var>."
            },
            {
              "html": "Return the <var>select <a data-link-type=\"dfn\" data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-service-endpoints\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-265\">DID service endpoint</a> URL</var>."
            }
          ]
        },
        {
          "html": "Otherwise, dereference the DID fragment as defined by the media type ([<cite><a class=\"bibref respec-offending-element\" data-link-type=\"biblio\" href=\"https://w3c.github.io/did-resolution/#bib-rfc2046\" title=\"Reference &quot;[RFC2046]&quot; not found.\" id=\"respec-offender-reference-rfc2046-not-found-0\">RFC2046</a></cite>]) of the resource.\n\t\t\t\tFor example, if the resource is a representation of a DID document with media type <code>application/did</code>, then\n\t\t\t\tthe fragment is treated according to the rules associated with the\n\t\t\t\t<a href=\"https://www.w3.org/TR/json-ld11/#iana-considerations\">JSON-LD 1.1: application/ld+json media type</a>\n\t\t\t\t[JSON-LD11]."
        }
      ]
    },
    {
      "html": "Using this binding, the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolution\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-401\">DID resolution</a> function (see\n\t\t\t<a href=\"https://w3c.github.io/did-resolution/#resolving\" class=\"sec-ref\"><bdi class=\"secno\">4. </bdi>DID Resolution</a>) and/or <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-url-dereferencing\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-402\">DID URL dereferencing</a> function (see <a href=\"https://w3c.github.io/did-resolution/#dereferencing\" class=\"sec-ref\"><bdi class=\"secno\">5. </bdi>DID URL Dereferencing</a>)\n\t\t\tcan be executed as follows:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "Initialize a <var>request HTTP(S) URL</var> with the <var><a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolvers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-403\">DID resolver</a> HTTP(S) endpoint</var>."
        },
        {
          "html": "For the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolution\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-404\">DID resolution</a> function:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "Append the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-decentralized-identifiers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-405\">DID</a></var> to the <var>request HTTP(S) URL</var>."
            },
            {
              "html": "Set the <code>Accept</code> <var>HTTP request header</var> to <code>application/did-resolution</code>\n\t\t\t\t\t\tto request a complete <a href=\"https://w3c.github.io/did-resolution/#did-resolution-result\" class=\"sec-ref\"><bdi class=\"secno\">8. </bdi>DID Resolution Result</a>, OR"
            },
            {
              "html": "set the <code>Accept</code> <var>HTTP request header</var> to the value of the <b>accept</b> <var>resolution option</var>\n                        to request only the <b>didDocument</b> value of the result."
            }
          ]
        },
        {
          "html": "For the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-url-dereferencing\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-406\">DID URL dereferencing</a> function:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "Append the <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-urls\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-407\">DID URL</a></var> to the <var>request HTTP(S) URL</var>."
            },
            {
              "html": "Set the <code>Accept</code> <var>HTTP request header</var> to <code>application/did-url-dereferencing</code>\n\t\t\t\t\t\tto request a complete <a href=\"https://w3c.github.io/did-resolution/#did-url-dereferencing-result\" class=\"sec-ref\"><bdi class=\"secno\">8.2 </bdi>DID URL Dereferencing Result</a>, OR"
            },
            {
              "html": "set the <code>Accept</code> <var>HTTP request header</var> to the value of the <b>accept</b> <var>dereferencing option</var>\n                        to request only the <b>contentStream</b> value of the result."
            }
          ]
        },
        {
          "html": "For the HTTP(S) GET binding:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "If any other <var>resolution options</var> or <var>dereferencing options</var> than <b>accept</b> are provided:",
              "rationale": ".algorithm",
              "steps": [
                {
                  "html": "The <var>input <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-decentralized-identifiers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-408\">DID</a></var> <em class=\"rfc2119\">MUST</em> be URL-encoded (as specified in <a data-cite=\"RFC3986#section-2.1\" class=\"respec-offending-element\" title=\"Couldn't find a match for &quot;RFC3986#section-2.1&quot;\" id=\"respec-offender-couldn-t-find-a-match-for-rfc3986-section-2-1\">RFC3986 Section 2.1</a>)."
                },
                {
                  "html": "Encode all <var>resolution options</var> except <b>accept</b> as\n                                query parameters in the <var>request HTTP(S) URL</var>."
                }
              ]
            },
            {
              "html": "Execute an HTTP <code>GET</code> request on the <var>request HTTP(S) URL</var>. This invokes the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolution\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-409\">DID resolution</a> or\n                        <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-url-dereferencing\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-410\">DID URL dereferencing</a> function at the remote <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolvers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-411\">DID resolver</a>."
            }
          ]
        },
        {
          "html": "For the HTTP(S) POST binding:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "If any other <var>resolution options</var> or <var>dereferencing options</var> than <b>accept</b> are provided:",
              "rationale": ".algorithm",
              "steps": [
                {
                  "html": "Encode all <var>resolution options</var> except <b>accept</b> as\n                            a JSON structure in the HTTP request's POST body."
                }
              ]
            },
            {
              "html": "Execute an HTTP <code>POST</code> request on the <var>request HTTP(S) URL</var>. This invokes the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolution\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-412\">DID resolution</a> or\n                    <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-url-dereferencing\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-413\">DID URL dereferencing</a> function at the remote <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolvers\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-414\">DID resolver</a>."
            }
          ]
        },
        {
          "html": "If the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolution\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-415\">DID resolution</a> or <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-url-dereferencing\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-416\">DID URL dereferencing</a> function returns an <b>error</b> metadata property in the\n\t\t\t\t<b>didResolutionMetadata</b> or <b>dereferencingMetadata</b>,\n\t\t\t\tthen the HTTP response status code <em class=\"rfc2119\">MUST</em> correspond to the value of the <b>error</b> metadata property,\n\t\t\t\taccording to the following table:\n\t\t\t\t<table class=\"simple\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\terror\n\t\t\t\t\t\t</th>\n\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\tHTTP status code\n\t\t\t\t\t\t</th>\n\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<code>INVALID_DID</code>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<code>400</code>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<code>INVALID_DID_URL</code>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<code>400</code>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n          <tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<code>INVALID_OPTIONS</code>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<code>400</code>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<code>NOT_FOUND</code>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<code>404</code>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<code>REPRESENTATION_NOT_SUPPORTED</code>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<code>406</code>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n          <tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<code>INVALID_DID_DOCUMENT</code>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<code>500</code>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<code>METHOD_NOT_SUPPORTED</code>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<code>501</code>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<code>FEATURE_NOT_SUPPORTED</code>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<code>501</code>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<code>INTERNAL_ERROR</code>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<code>500</code>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t(any other value)\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<code>500</code>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>"
        },
        {
          "html": "If the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolution\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-417\">DID resolution</a> or <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-url-dereferencing\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-418\">DID URL dereferencing</a> function returns a <b>deactivated</b> metadata property with\n\t\t\t\tthe value <code>true</code> in the <b>didDocumentMetadata</b> or <b>contentMetadata</b>:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "The HTTP response status code <em class=\"rfc2119\">MUST</em> be <code>410</code>."
            }
          ]
        },
        {
          "html": "For the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolution\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-419\">DID resolution</a> function:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "If the value of the <code>Content-Type</code> <var>HTTP response header</var> is <code>application/did-resolution</code>:",
              "rationale": ".algorithm",
              "steps": [
                {
                  "html": "The <var>HTTP body</var> <em class=\"rfc2119\">MUST</em> contain a <a href=\"https://w3c.github.io/did-resolution/#dfn-did-resolution-result\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-did-resolution-result-2\">DID resolution result</a> (see <a href=\"https://w3c.github.io/did-resolution/#did-resolution-result\" class=\"sec-ref\"><bdi class=\"secno\">8. </bdi>DID Resolution Result</a>) that\n\t\t\t\t\t\t\t\tis the result of the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolution\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-420\">DID resolution</a> function."
                }
              ]
            },
            {
              "html": "If the function is successful and returns a <b>didDocument</b>:",
              "rationale": ".algorithm",
              "steps": [
                {
                  "html": "The HTTP response status code <em class=\"rfc2119\">MUST</em> be <code>200</code>."
                },
                {
                  "html": "The HTTP response <em class=\"rfc2119\">MUST</em> contain a <code>Content-Type</code> <var>HTTP response header</var>. Its value <em class=\"rfc2119\">MUST</em> be the value of the\n\t\t\t\t\t\t\t\t<b>contentType</b> metadata property in the <b>didResolutionMetadata</b> (see <a href=\"https://w3c.github.io/did-resolution/#did-resolution-metadata\" class=\"sec-ref\"><bdi class=\"secno\">4.2 </bdi>DID Resolution Metadata</a>)."
                },
                {
                  "html": "The HTTP response body <em class=\"rfc2119\">MUST</em> contain the <b>didDocument</b> that is the result of the\n\t\t\t\t\t\t\t\t<a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-resolution\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-421\">DID resolution</a> function, in the representation corresponding to the <code>Content-Type</code> <var>HTTP response header</var>."
                }
              ]
            }
          ]
        },
        {
          "html": "For the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-url-dereferencing\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-422\">DID URL dereferencing</a> function:",
          "rationale": ".algorithm",
          "steps": [
            {
              "html": "If the value of the <code>Content-Type</code> <var>HTTP response header</var> is <code>application/did-url-dereferencing</code>:",
              "rationale": ".algorithm",
              "steps": [
                {
                  "html": "The <var>HTTP body</var> <em class=\"rfc2119\">MUST</em> contain a <a href=\"https://w3c.github.io/did-resolution/#dfn-did-url-dereferencing-result\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-did-url-dereferencing-result-2\">DID URL dereferencing result</a> (see <a href=\"https://w3c.github.io/did-resolution/#did-url-dereferencing-result\" class=\"sec-ref\"><bdi class=\"secno\">8.2 </bdi>DID URL Dereferencing Result</a>) that\n\t\t\t\t\t\t\t\tis the result of the <a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-url-dereferencing\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-423\">DID URL dereferencing</a> function."
                }
              ]
            },
            {
              "html": "If the function is successful and returns a <b>contentStream</b> and a <b>contentType</b> metadata property with the value <code>text/uri-list</code> in the <b>dereferencingMetadata</b>:",
              "rationale": ".algorithm",
              "steps": [
                {
                  "html": "The HTTP response status code <em class=\"rfc2119\">MUST</em> be <code>303</code>."
                },
                {
                  "html": "The HTTP response <em class=\"rfc2119\">MUST</em> contain an <code>Location</code> header. The value of this header\n\t\t\t\t\t\t\t\t<em class=\"rfc2119\">MUST</em> be the <var>selected <a data-link-type=\"dfn\" data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-service-endpoints\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-424\">DID service endpoint</a> URL</var>."
                },
                {
                  "html": "the HTTP response body <em class=\"rfc2119\">MUST</em> be empty."
                }
              ]
            },
            {
              "html": "If the function is successful and returns a <b>contentStream</b> with any other <b>contentType</b>:",
              "rationale": ".algorithm",
              "steps": [
                {
                  "html": "The HTTP response status code <em class=\"rfc2119\">MUST</em> be <code>200</code>."
                },
                {
                  "html": "The HTTP response <em class=\"rfc2119\">MUST</em> contain a <code>Content-Type</code> <var>HTTP response header</var>. Its value <em class=\"rfc2119\">MUST</em> be the value of the\n\t\t\t\t\t\t\t\t<b>contentType</b> metadata property in the <b>dereferencingMetadata</b> (see <a href=\"https://w3c.github.io/did-resolution/#did-url-dereferencing-metadata\" class=\"sec-ref\"><bdi class=\"secno\">5.2 </bdi>DID URL Dereferencing Metadata</a>)."
                },
                {
                  "html": "The HTTP response body <em class=\"rfc2119\">MUST</em> contain the <b>contentStream</b> that is the result of the\n\t\t\t\t\t\t\t\t<a data-cite=\"did\" data-cite-path=\"\" data-cite-frag=\"dfn-did-url-dereferencing\" data-link-type=\"dfn\" class=\"respec-offending-element\" title=\"Normative reference to non-normative term.\" id=\"respec-offender-normative-reference-to-non-normative-term-425\">DID URL dereferencing</a> function, in the representation corresponding to the <code>Content-Type</code> <var>HTTP response header</var>."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "rationale": "resolve",
      "steps": [
        {
          "html": "<a href=\"https://www.w3.org/TR/did-core/#resolution\">DID resolvers in DID Core specification</a>"
        },
        {
          "html": "<a href=\"https://github.com/decentralized-identity/universal-resolver/\">Universal Resolver</a>"
        },
        {
          "html": "<a href=\"https://github.com/digitalbazaar/did-client\">did-client</a>"
        },
        {
          "html": "<a href=\"https://github.com/uport-project/did-resolver\">uPort DID resolver</a>"
        }
      ]
    }
  ]
}