{
  "spec": {
    "title": "Captured Surface Control",
    "url": "https://w3c.github.io/mediacapture-surface-control/"
  },
  "algorithms": [
    {
      "name": "CaptureController/getSupportedZoomLevels()",
      "href": "https://w3c.github.io/mediacapture-surface-control/#dom-capturecontroller-getsupportedzoomlevels",
      "html": "When invoked, the user agent <em class=\"rfc2119\">MUST</em> run the following steps:",
      "rationale": "if",
      "steps": [
        {
          "html": "If <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a> is not <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-actively-capturing\" class=\"internalDFN\" id=\"ref-for-dfn-actively-capturing-1\">actively capturing</a>, <a data-link-type=\"dfn\" data-link-for=\"exception\" data-xref-for=\"exception\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dfn-throw\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\">throw</a> an\n                \"<a data-xref-type=\"_IDL_\" data-link-type=\"exception\" data-lt=\"InvalidStateError\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"invalidstateerror\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\"><code>InvalidStateError</code></a>\" <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-DOMException\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException</code></a>."
        },
        {
          "html": "Let <var>surfaceType</var> be <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[DisplaySurfaceType]]\" data-cite=\"screen-capture\" data-cite-path=\"\" data-cite-frag=\"dfn-displaysurfacetype\" href=\"https://www.w3.org/TR/screen-capture/#dfn-displaysurfacetype\"><code>[[DisplaySurfaceType]]</code></a>."
        },
        {
          "html": "If <var>surfaceType</var> is not a <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-supported-display-surface-type\" class=\"internalDFN\" id=\"ref-for-dfn-supported-display-surface-type-1\">supported display surface type</a>, <a data-link-type=\"dfn\" data-link-for=\"exception\" data-xref-for=\"exception\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dfn-throw\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\">throw</a> a\n                \"<a data-xref-type=\"_IDL_\" data-link-type=\"exception\" data-lt=\"NotSupportedError\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"notsupportederror\" href=\"https://webidl.spec.whatwg.org/#notsupportederror\"><code>NotSupportedError</code></a>\" <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-DOMException\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException</code></a>."
        },
        {
          "html": "Return a monotonically increasing sequence containing all of the values in the\n                <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-supported-zoom-levels\" class=\"internalDFN\" id=\"ref-for-dfn-supported-zoom-levels-1\">supported zoom levels</a> for <var>surfaceType</var>."
        }
      ]
    },
    {
      "name": "CaptureController/getZoomLevel()",
      "href": "https://w3c.github.io/mediacapture-surface-control/#dom-capturecontroller-getzoomlevel",
      "html": "When invoked, the user agent <em class=\"rfc2119\">MUST</em> run the following steps:",
      "rationale": "if",
      "steps": [
        {
          "html": "If <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a> is not <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-actively-capturing\" class=\"internalDFN\" id=\"ref-for-dfn-actively-capturing-2\">actively capturing</a>, <a data-link-type=\"dfn\" data-link-for=\"exception\" data-xref-for=\"exception\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dfn-throw\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\">throw</a> an\n                \"<a data-xref-type=\"_IDL_\" data-link-type=\"exception\" data-lt=\"InvalidStateError\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"invalidstateerror\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\"><code>InvalidStateError</code></a>\" <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-DOMException\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException</code></a>."
        },
        {
          "html": "If <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[DisplaySurfaceType]]\" data-cite=\"screen-capture\" data-cite-path=\"\" data-cite-frag=\"dfn-displaysurfacetype\" href=\"https://www.w3.org/TR/screen-capture/#dfn-displaysurfacetype\"><code>[[DisplaySurfaceType]]</code></a> is not a <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-supported-display-surface-type\" class=\"internalDFN\" id=\"ref-for-dfn-supported-display-surface-type-2\">supported display surface type</a>, <a data-link-type=\"dfn\" data-link-for=\"exception\" data-xref-for=\"exception\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dfn-throw\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\">throw</a> a \"<a data-xref-type=\"_IDL_\" data-link-type=\"exception\" data-lt=\"NotSupportedError\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"notsupportederror\" href=\"https://webidl.spec.whatwg.org/#notsupportederror\"><code>NotSupportedError</code></a>\"\n                <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-DOMException\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException</code></a>."
        },
        {
          "html": "Return <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[Source]]\" data-cite=\"screen-capture\" data-cite-path=\"\" data-cite-frag=\"dfn-source\" href=\"https://www.w3.org/TR/screen-capture/#dfn-source\"><code>[[Source]]</code></a>'s <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-zoom-level\" class=\"internalDFN\" id=\"ref-for-dfn-zoom-level-5\">zoom level</a>."
        }
      ]
    },
    {
      "name": "CaptureController/forwardWheel()",
      "href": "https://w3c.github.io/mediacapture-surface-control/#dom-capturecontroller-forwardwheel",
      "html": "When invoked, the user agent <em class=\"rfc2119\">MUST</em> run the following steps:",
      "rationale": "if",
      "steps": [
        {
          "html": "If <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a> is not <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-actively-capturing\" class=\"internalDFN\" id=\"ref-for-dfn-actively-capturing-3\">actively capturing</a>, return a promise <a data-link-type=\"dfn\" data-lt=\"reject\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"reject\" href=\"https://webidl.spec.whatwg.org/#reject\">rejected</a> with\n                a <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-DOMException\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException</code></a> object whose <a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"DOMException\" data-xref-for=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dom-domexception-name\" href=\"https://webidl.spec.whatwg.org/#dom-domexception-name\"><code>name</code></a> attribute has the value\n                <a data-xref-type=\"_IDL_\" data-link-type=\"exception\" data-lt=\"InvalidStateError\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"invalidstateerror\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\"><code>InvalidStateError</code></a>."
        },
        {
          "html": "If <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a> <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-is-self-capturing\" class=\"internalDFN\" id=\"ref-for-dfn-is-self-capturing-1\">is self-capturing</a>, return a promise <a data-link-type=\"dfn\" data-lt=\"reject\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"reject\" href=\"https://webidl.spec.whatwg.org/#reject\">rejected</a> with a\n                <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-DOMException\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException</code></a> object whose <a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"DOMException\" data-xref-for=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dom-domexception-name\" href=\"https://webidl.spec.whatwg.org/#dom-domexception-name\"><code>name</code></a> attribute has the value\n                <a data-xref-type=\"_IDL_\" data-link-type=\"exception\" data-lt=\"InvalidStateError\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"invalidstateerror\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\"><code>InvalidStateError</code></a>."
        },
        {
          "html": "Let <var>surfaceType</var> be <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[DisplaySurfaceType]]\" data-cite=\"screen-capture\" data-cite-path=\"\" data-cite-frag=\"dfn-displaysurfacetype\" href=\"https://www.w3.org/TR/screen-capture/#dfn-displaysurfacetype\"><code>[[DisplaySurfaceType]]</code></a>."
        },
        {
          "html": "If <var>surfaceType</var> is not a <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-supported-display-surface-type\" class=\"internalDFN\" id=\"ref-for-dfn-supported-display-surface-type-3\">supported display surface type</a>, return a promise\n                <a data-link-type=\"dfn\" data-lt=\"reject\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"reject\" href=\"https://webidl.spec.whatwg.org/#reject\">rejected</a> with a <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-DOMException\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException</code></a> object whose <a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"DOMException\" data-xref-for=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dom-domexception-name\" href=\"https://webidl.spec.whatwg.org/#dom-domexception-name\"><code>name</code></a>\n                attribute has the value <a data-xref-type=\"_IDL_\" data-link-type=\"exception\" data-lt=\"NotSupportedError\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"notsupportederror\" href=\"https://webidl.spec.whatwg.org/#notsupportederror\"><code>NotSupportedError</code></a>."
        },
        {
          "html": "Let <var>element</var> be the method's first argument."
        },
        {
          "html": "Let <var>P</var> be a new <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"Promise\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-promise\" href=\"https://webidl.spec.whatwg.org/#idl-promise\"><code>Promise</code></a>."
        },
        {
          "html": "Run the following steps <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/infrastructure.html\" data-cite-frag=\"in-parallel\" href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel\">in parallel</a>:",
          "rationale": "reject",
          "steps": [
            {
              "html": "<a data-link-type=\"dfn\" data-cite=\"permissions\" data-cite-path=\"\" data-cite-frag=\"dfn-getting-the-current-permission-state\" href=\"https://www.w3.org/TR/permissions/#dfn-getting-the-current-permission-state\">Get the current permission state</a> of <a href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-captured-surface-control\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-captured-surface-control-2\"><code>\"captured-surface-control\"</code></a>. If\n                    the result is NOT \"<a data-link-type=\"enum-value\" data-xref-type=\"enum-value\" data-link-for=\"PermissionState\" data-xref-for=\"PermissionState\" data-cite=\"permissions\" data-cite-path=\"\" data-cite-frag=\"dom-permissionstate-granted\" href=\"https://www.w3.org/TR/permissions/#dom-permissionstate-granted\"><code>granted</code></a>\", and the <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"concept-relevant-global\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global\">relevant global object</a> does NOT have <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/interaction.html\" data-cite-frag=\"transient-activation\" href=\"https://html.spec.whatwg.org/multipage/interaction.html#transient-activation\">transient activation</a>, return a promise\n                    <a data-link-type=\"dfn\" data-lt=\"reject\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"reject\" href=\"https://webidl.spec.whatwg.org/#reject\">rejected</a> with a <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-DOMException\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException</code></a> object whose <a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"DOMException\" data-xref-for=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dom-domexception-name\" href=\"https://webidl.spec.whatwg.org/#dom-domexception-name\"><code>name</code></a>\n                    attribute has the value <a data-xref-type=\"_IDL_\" data-link-type=\"exception\" data-lt=\"InvalidStateError\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"invalidstateerror\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\"><code>InvalidStateError</code></a>."
            },
            {
              "html": "<a data-link-type=\"dfn\" data-cite=\"permissions\" data-cite-path=\"\" data-cite-frag=\"dfn-request-permission-to-use\" href=\"https://www.w3.org/TR/permissions/#dfn-request-permission-to-use\">Request permission to use</a> a <a data-xref-type=\"_IDL_\" data-link-type=\"dictionary\" data-lt=\"PermissionDescriptor\" data-cite=\"permissions\" data-cite-path=\"\" data-cite-frag=\"dom-permissiondescriptor\" href=\"https://www.w3.org/TR/permissions/#dom-permissiondescriptor\"><code>PermissionDescriptor</code></a> with its\n                    <a data-link-type=\"dict-member\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"PermissionDescriptor\" data-xref-for=\"PermissionDescriptor\" data-cite=\"permissions\" data-cite-path=\"\" data-cite-frag=\"dom-permissiondescriptor-name\" href=\"https://www.w3.org/TR/permissions/#dom-permissiondescriptor-name\"><code>name</code></a> member set to\n                    <a href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-captured-surface-control\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-captured-surface-control-3\"><code>\"captured-surface-control\"</code></a>. If the result of the request is\n                    \"<a data-link-type=\"enum-value\" data-xref-type=\"enum-value\" data-link-for=\"PermissionState\" data-xref-for=\"PermissionState\" data-cite=\"permissions\" data-cite-path=\"\" data-cite-frag=\"dom-permissionstate-denied\" href=\"https://www.w3.org/TR/permissions/#dom-permissionstate-denied\"><code>denied</code></a>\", <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"reject\" href=\"https://webidl.spec.whatwg.org/#reject\">reject</a> <var>P</var> with a new <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-DOMException\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException</code></a> object\n                    whose <a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"DOMException\" data-xref-for=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dom-domexception-name\" href=\"https://webidl.spec.whatwg.org/#dom-domexception-name\"><code>name</code></a> is <a data-xref-type=\"_IDL_\" data-link-type=\"exception\" data-lt=\"NotAllowedError\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"notallowederror\" href=\"https://webidl.spec.whatwg.org/#notallowederror\"><code>NotAllowedError</code></a> and abort these steps."
            },
            {
              "html": "If <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[ForwardWheelElement]]\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-forwardwheelelement\" class=\"internalDFN\" id=\"ref-for-dfn-forwardwheelelement-1\"><code>[[ForwardWheelElement]]</code></a> is not <code>null</code>,\n                    <a data-link-type=\"dfn\" data-cite=\"dom\" data-cite-path=\"\" data-cite-frag=\"remove-an-event-listener\" href=\"https://dom.spec.whatwg.org/#remove-an-event-listener\">remove an event listener</a> with\n                    <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[ForwardWheelElement]]\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-forwardwheelelement\" class=\"internalDFN\" id=\"ref-for-dfn-forwardwheelelement-2\"><code>[[ForwardWheelElement]]</code></a> as <var>eventTarget</var> and\n                    <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[ForwardWheelEventListener]]\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-forwardwheeleventlistener\" class=\"internalDFN\" id=\"ref-for-dfn-forwardwheeleventlistener-1\"><code>[[ForwardWheelEventListener]]</code></a> as <var>listener</var>."
            },
            {
              "html": "Set <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[ForwardWheelEventListener]]\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-forwardwheeleventlistener\" class=\"internalDFN\" id=\"ref-for-dfn-forwardwheeleventlistener-2\"><code>[[ForwardWheelEventListener]]</code></a> to <code>null</code>."
            },
            {
              "html": "Set <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[ForwardWheelElement]]\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-forwardwheelelement\" class=\"internalDFN\" id=\"ref-for-dfn-forwardwheelelement-3\"><code>[[ForwardWheelElement]]</code></a> to <var>element</var>."
            },
            {
              "html": "If <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[ForwardWheelElement]]\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-forwardwheelelement\" class=\"internalDFN\" id=\"ref-for-dfn-forwardwheelelement-4\"><code>[[ForwardWheelElement]]</code></a> is not <code>null</code>:",
              "rationale": "set",
              "steps": [
                {
                  "html": "Set <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[ForwardWheelEventListener]]\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-forwardwheeleventlistener\" class=\"internalDFN\" id=\"ref-for-dfn-forwardwheeleventlistener-3\"><code>[[ForwardWheelEventListener]]</code></a> to an\n                        <a data-link-type=\"dfn\" data-cite=\"dom\" data-cite-path=\"\" data-cite-frag=\"concept-event-listener\" href=\"https://dom.spec.whatwg.org/#concept-event-listener\">event listener</a> defined as follows:\n                        <dl>\n                          <dt>type</dt>\n                          <dd><code>wheel</code></dd>\n                          <dt><a data-link-type=\"dfn\" data-link-for=\"event listener\" data-xref-for=\"event listener\" data-cite=\"dom\" data-cite-path=\"\" data-cite-frag=\"event-listener-callback\" href=\"https://dom.spec.whatwg.org/#event-listener-callback\">callback</a></dt>\n                          <dd>\n                            The result of creating a new Web IDL <a data-xref-type=\"_IDL_\" data-link-type=\"callback\" data-lt=\"EventListener\" data-cite=\"dom\" data-cite-path=\"\" data-cite-frag=\"callbackdef-eventlistener\" href=\"https://dom.spec.whatwg.org/#callbackdef-eventlistener\"><code>EventListener</code></a> instance\n                            representing a reference to a function of one argument of type <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"Event\" data-cite=\"dom\" data-cite-path=\"\" data-cite-frag=\"event\" href=\"https://dom.spec.whatwg.org/#event\"><code>Event</code></a>\n                            <var>event</var>. This function executes the <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-forward-wheel-event-algorithm\" class=\"internalDFN\" id=\"ref-for-dfn-forward-wheel-event-algorithm-1\">forward wheel event algorithm</a>\n                            given <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a> and <var>event</var>.\n                          </dd>\n                        </dl>"
                },
                {
                  "html": "<a data-link-type=\"dfn\" data-cite=\"dom\" data-cite-path=\"\" data-cite-frag=\"add-an-event-listener\" href=\"https://dom.spec.whatwg.org/#add-an-event-listener\">Add an event listener</a> with\n                        <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[ForwardWheelElement]]\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-forwardwheelelement\" class=\"internalDFN\" id=\"ref-for-dfn-forwardwheelelement-5\"><code>[[ForwardWheelElement]]</code></a> as <var>eventTarget</var> and\n                        <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[ForwardWheelEventListener]]\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-forwardwheeleventlistener\" class=\"internalDFN\" id=\"ref-for-dfn-forwardwheeleventlistener-4\"><code>[[ForwardWheelEventListener]]</code></a> as <var>listener</var>."
                }
              ]
            },
            {
              "html": "<a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"resolve\" href=\"https://webidl.spec.whatwg.org/#resolve\">Resolve</a> <var>P</var>."
            }
          ]
        },
        {
          "html": "Return <var>P</var>."
        }
      ]
    },
    {
      "name": "actively capturing",
      "href": "https://w3c.github.io/mediacapture-surface-control/#dfn-actively-capturing",
      "html": "To determine if a <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"CaptureController\" data-cite=\"screen-capture\" data-cite-path=\"\" data-cite-frag=\"dom-capturecontroller\" href=\"https://www.w3.org/TR/screen-capture/#dom-capturecontroller\"><code>CaptureController</code></a> <var>controller</var> is\n          <dfn id=\"dfn-actively-capturing\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">actively capturing</dfn>, run the following steps:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var>source</var> be <var>controller</var>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[Source]]\" data-cite=\"screen-capture\" data-cite-path=\"\" data-cite-frag=\"dfn-source\" href=\"https://www.w3.org/TR/screen-capture/#dfn-source\"><code>[[Source]]</code></a>."
        },
        {
          "html": "If <var>source</var> is <code>null</code>, return <code>false</code>."
        },
        {
          "html": "If <var>source</var> has been <a data-cite=\"GETUSERMEDIA#source-stopped\" href=\"https://www.w3.org/TR/mediacapture-streams/#source-stopped\">stopped</a>, return\n            <code>false</code>."
        },
        {
          "html": "Return <code>true</code>."
        }
      ]
    },
    {
      "name": "is self-capturing",
      "href": "https://w3c.github.io/mediacapture-surface-control/#dfn-is-self-capturing",
      "html": "To determine if a <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"CaptureController\" data-cite=\"screen-capture\" data-cite-path=\"\" data-cite-frag=\"dom-capturecontroller\" href=\"https://www.w3.org/TR/screen-capture/#dom-capturecontroller\"><code>CaptureController</code></a> <var>controller</var> is\n          <dfn id=\"dfn-is-self-capturing\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">is self-capturing</dfn>, run the following steps:",
      "rationale": "if",
      "steps": [
        {
          "html": "If <var>controller</var> is not <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-actively-capturing\" class=\"internalDFN\" id=\"ref-for-dfn-actively-capturing-4\">actively capturing</a>, return <code>false</code>."
        },
        {
          "html": "If <var>controller</var>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[Source]]\" data-cite=\"screen-capture\" data-cite-path=\"\" data-cite-frag=\"dfn-source\" href=\"https://www.w3.org/TR/screen-capture/#dfn-source\"><code>[[Source]]</code></a> is a <a data-link-type=\"dfn\" data-cite=\"screen-capture\" data-cite-path=\"\" data-cite-frag=\"dfn-display-surface\" href=\"https://www.w3.org/TR/screen-capture/#dfn-display-surface\">display surface</a> of type\n            <a data-link-type=\"dfn\" data-link-for=\"display surface\" data-xref-for=\"display surface\" data-cite=\"screen-capture\" data-cite-path=\"\" data-cite-frag=\"dfn-browser\" href=\"https://www.w3.org/TR/screen-capture/#dfn-browser\">browser</a>, and represents the <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"concept-relevant-global\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global\">relevant global object</a>'s\n            <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/nav-history-apis.html\" data-cite-frag=\"concept-document-window\" href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window\">associated <code>Document</code></a>, return <code>true</code>."
        },
        {
          "html": "Return <code>false</code>."
        }
      ]
    },
    {
      "name": "supported display surface type",
      "href": "https://w3c.github.io/mediacapture-surface-control/#dfn-supported-display-surface-type",
      "html": "To determine if a <a data-link-type=\"dfn\" data-cite=\"screen-capture\" data-cite-path=\"\" data-cite-frag=\"dfn-display-surface\" href=\"https://www.w3.org/TR/screen-capture/#dfn-display-surface\">display surface</a> <var>surfaceType</var> is\n          <dfn id=\"dfn-supported-display-surface-type\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">supported display surface type</dfn>, run the following steps:",
      "rationale": "if",
      "steps": [
        {
          "html": "If <var>surfaceType</var> is <a data-link-type=\"dfn\" data-link-for=\"display surface\" data-xref-for=\"display surface\" data-cite=\"screen-capture\" data-cite-path=\"\" data-cite-frag=\"dfn-browser\" href=\"https://www.w3.org/TR/screen-capture/#dfn-browser\">browser</a>, return <code>true</code>."
        },
        {
          "html": "Return <code>false</code>."
        }
      ]
    },
    {
      "name": "set zoom level algorithm",
      "href": "https://w3c.github.io/mediacapture-surface-control/#dfn-set-zoom-level-algorithm",
      "html": "The <dfn id=\"dfn-set-zoom-level-algorithm\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">set zoom level algorithm</dfn>, given a <var data-type=\"CaptureController\">controller</var> of type\n          <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"CaptureController\" data-cite=\"screen-capture\" data-cite-path=\"\" data-cite-frag=\"dom-capturecontroller\" href=\"https://www.w3.org/TR/screen-capture/#dom-capturecontroller\"><code>CaptureController</code></a> and a <var data-type=\"DOMString\">zoomAction</var> of type <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"DOMString\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-DOMString\" href=\"https://webidl.spec.whatwg.org/#idl-DOMString\"><code>DOMString</code></a> as arguments,\n          consists of running the following steps:",
      "rationale": "if",
      "steps": [
        {
          "html": "If <var data-type=\"CaptureController\">controller</var> is not <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-actively-capturing\" class=\"internalDFN\" id=\"ref-for-dfn-actively-capturing-5\">actively capturing</a>, return a promise <a data-link-type=\"dfn\" data-lt=\"reject\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"reject\" href=\"https://webidl.spec.whatwg.org/#reject\">rejected</a> with\n            a <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-DOMException\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException</code></a> object whose <a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"DOMException\" data-xref-for=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dom-domexception-name\" href=\"https://webidl.spec.whatwg.org/#dom-domexception-name\"><code>name</code></a> attribute has the value\n            <a data-xref-type=\"_IDL_\" data-link-type=\"exception\" data-lt=\"InvalidStateError\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"invalidstateerror\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\"><code>InvalidStateError</code></a>."
        },
        {
          "html": "If <var data-type=\"CaptureController\">controller</var> <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-is-self-capturing\" class=\"internalDFN\" id=\"ref-for-dfn-is-self-capturing-2\">is self-capturing</a>, return a promise <a data-link-type=\"dfn\" data-lt=\"reject\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"reject\" href=\"https://webidl.spec.whatwg.org/#reject\">rejected</a> with a\n            <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-DOMException\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException</code></a> object whose <a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"DOMException\" data-xref-for=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dom-domexception-name\" href=\"https://webidl.spec.whatwg.org/#dom-domexception-name\"><code>name</code></a> attribute has the value\n            <a data-xref-type=\"_IDL_\" data-link-type=\"exception\" data-lt=\"InvalidStateError\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"invalidstateerror\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\"><code>InvalidStateError</code></a>."
        },
        {
          "html": "Let <var>surfaceType</var> be <var data-type=\"CaptureController\">controller</var>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[DisplaySurfaceType]]\" data-cite=\"screen-capture\" data-cite-path=\"\" data-cite-frag=\"dfn-displaysurfacetype\" href=\"https://www.w3.org/TR/screen-capture/#dfn-displaysurfacetype\"><code>[[DisplaySurfaceType]]</code></a>."
        },
        {
          "html": "If <var>surfaceType</var> is not a <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-supported-display-surface-type\" class=\"internalDFN\" id=\"ref-for-dfn-supported-display-surface-type-4\">supported display surface type</a>, return a promise\n            <a data-link-type=\"dfn\" data-lt=\"reject\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"reject\" href=\"https://webidl.spec.whatwg.org/#reject\">rejected</a> with a <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-DOMException\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException</code></a> object whose <a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"DOMException\" data-xref-for=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dom-domexception-name\" href=\"https://webidl.spec.whatwg.org/#dom-domexception-name\"><code>name</code></a> attribute\n            has the value <a data-xref-type=\"_IDL_\" data-link-type=\"exception\" data-lt=\"NotSupportedError\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"notsupportederror\" href=\"https://webidl.spec.whatwg.org/#notsupportederror\"><code>NotSupportedError</code></a>."
        },
        {
          "html": "Ensure that the code is running from within the context of an event handler which was\n              triggered by the browser agent firing a trusted event, triggered by the user\n              interacting with the user agent. To do so, run the following steps:",
          "rationale": "let",
          "steps": [
            {
              "html": "Let <var data-type=\"Event\">currentEvent</var> be <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"Window\" data-cite=\"html\" data-cite-path=\"/nav-history-apis.html\" data-cite-frag=\"window\" href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window\"><code>Window</code></a>.<a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"Window\" data-xref-for=\"Window\" data-cite=\"dom\" data-cite-path=\"\" data-cite-frag=\"dom-window-event\" href=\"https://dom.spec.whatwg.org/#dom-window-event\"><code>event</code></a>."
            },
            {
              "html": "If <var data-type=\"Event\">currentEvent</var> is <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"undefined\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-undefined\" href=\"https://webidl.spec.whatwg.org/#idl-undefined\"><code>undefined</code></a>, return a promise <a data-link-type=\"dfn\" data-lt=\"reject\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"reject\" href=\"https://webidl.spec.whatwg.org/#reject\">rejected</a> with a\n                <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-DOMException\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException</code></a> object whose <a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"DOMException\" data-xref-for=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dom-domexception-name\" href=\"https://webidl.spec.whatwg.org/#dom-domexception-name\"><code>name</code></a> attribute has the value\n                <a data-xref-type=\"_IDL_\" data-link-type=\"exception\" data-lt=\"InvalidStateError\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"invalidstateerror\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\"><code>InvalidStateError</code></a>."
            },
            {
              "html": "If <var data-type=\"Event\">currentEvent</var>.<a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"Event\" data-xref-for=\"Event\" data-cite=\"dom\" data-cite-path=\"\" data-cite-frag=\"dom-event-istrusted\" href=\"https://dom.spec.whatwg.org/#dom-event-istrusted\"><code>isTrusted</code></a> is <code>false</code>, return a promise\n                <a data-link-type=\"dfn\" data-lt=\"reject\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"reject\" href=\"https://webidl.spec.whatwg.org/#reject\">rejected</a> with a <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-DOMException\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException</code></a> object whose <a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"DOMException\" data-xref-for=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dom-domexception-name\" href=\"https://webidl.spec.whatwg.org/#dom-domexception-name\"><code>name</code></a>\n                attribute has the value <a data-xref-type=\"_IDL_\" data-link-type=\"exception\" data-lt=\"InvalidStateError\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"invalidstateerror\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\"><code>InvalidStateError</code></a>."
            },
            {
              "html": "If <var data-type=\"Event\">currentEvent</var>.<a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"Event\" data-xref-for=\"Event\" data-cite=\"dom\" data-cite-path=\"\" data-cite-frag=\"dom-event-type\" href=\"https://dom.spec.whatwg.org/#dom-event-type\"><code>type</code></a> is not in <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-permitted-event-types-for-zoom-setting\" class=\"internalDFN\" id=\"ref-for-dfn-permitted-event-types-for-zoom-setting-1\">permitted event types for zoom-setting</a>, return a promise <a data-link-type=\"dfn\" data-lt=\"reject\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"reject\" href=\"https://webidl.spec.whatwg.org/#reject\">rejected</a> with a <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-DOMException\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException</code></a> object\n                whose <a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"DOMException\" data-xref-for=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dom-domexception-name\" href=\"https://webidl.spec.whatwg.org/#dom-domexception-name\"><code>name</code></a> attribute has the value <a data-xref-type=\"_IDL_\" data-link-type=\"exception\" data-lt=\"InvalidStateError\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"invalidstateerror\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\"><code>InvalidStateError</code></a>."
            }
          ]
        },
        {
          "html": "Let <var>currentZoomLevel</var> be <var data-type=\"CaptureController\">controller</var>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[Source]]\" data-cite=\"screen-capture\" data-cite-path=\"\" data-cite-frag=\"dfn-source\" href=\"https://www.w3.org/TR/screen-capture/#dfn-source\"><code>[[Source]]</code></a>'s <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-zoom-level\" class=\"internalDFN\" id=\"ref-for-dfn-zoom-level-11\">zoom level</a>"
        },
        {
          "html": "Let <var>targetZoomLevel</var> be a <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"long\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-long\" href=\"https://webidl.spec.whatwg.org/#idl-long\"><code>long</code></a>. Set its value as follows:"
        },
        {
          "html": "Let <var>P</var> be a new <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"Promise\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-promise\" href=\"https://webidl.spec.whatwg.org/#idl-promise\"><code>Promise</code></a>."
        },
        {
          "html": "Run the following steps <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/infrastructure.html\" data-cite-frag=\"in-parallel\" href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel\">in parallel</a>:",
          "rationale": "abort these steps",
          "steps": [
            {
              "html": "<a data-link-type=\"dfn\" data-cite=\"permissions\" data-cite-path=\"\" data-cite-frag=\"dfn-request-permission-to-use\" href=\"https://www.w3.org/TR/permissions/#dfn-request-permission-to-use\">Request permission to use</a> a <a data-xref-type=\"_IDL_\" data-link-type=\"dictionary\" data-lt=\"PermissionDescriptor\" data-cite=\"permissions\" data-cite-path=\"\" data-cite-frag=\"dom-permissiondescriptor\" href=\"https://www.w3.org/TR/permissions/#dom-permissiondescriptor\"><code>PermissionDescriptor</code></a> with its\n                <a data-link-type=\"dict-member\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"PermissionDescriptor\" data-xref-for=\"PermissionDescriptor\" data-cite=\"permissions\" data-cite-path=\"\" data-cite-frag=\"dom-permissiondescriptor-name\" href=\"https://www.w3.org/TR/permissions/#dom-permissiondescriptor-name\"><code>name</code></a> member set to\n                <a href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-captured-surface-control\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-captured-surface-control-4\"><code>\"captured-surface-control\"</code></a>. If the result of the request is\n                \"<a data-link-type=\"enum-value\" data-xref-type=\"enum-value\" data-link-for=\"PermissionState\" data-xref-for=\"PermissionState\" data-cite=\"permissions\" data-cite-path=\"\" data-cite-frag=\"dom-permissionstate-denied\" href=\"https://www.w3.org/TR/permissions/#dom-permissionstate-denied\"><code>denied</code></a>\", <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"reject\" href=\"https://webidl.spec.whatwg.org/#reject\">reject</a> <var>P</var> with a new <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-DOMException\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException</code></a> object\n                whose <a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"DOMException\" data-xref-for=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"dom-domexception-name\" href=\"https://webidl.spec.whatwg.org/#dom-domexception-name\"><code>name</code></a> is <a data-xref-type=\"_IDL_\" data-link-type=\"exception\" data-lt=\"NotAllowedError\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"notallowederror\" href=\"https://webidl.spec.whatwg.org/#notallowederror\"><code>NotAllowedError</code></a> and abort these steps."
            },
            {
              "html": "Set <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[Source]]\" data-cite=\"screen-capture\" data-cite-path=\"\" data-cite-frag=\"dfn-source\" href=\"https://www.w3.org/TR/screen-capture/#dfn-source\"><code>[[Source]]</code></a>'s <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-zoom-level\" class=\"internalDFN\" id=\"ref-for-dfn-zoom-level-12\">zoom level</a> to <var>targetZoomLevel</var>."
            },
            {
              "html": "<a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"resolve\" href=\"https://webidl.spec.whatwg.org/#resolve\">Resolve</a> <var>P</var>."
            }
          ]
        },
        {
          "html": "Return <var>P</var>."
        }
      ]
    },
    {
      "name": "forward wheel event algorithm",
      "href": "https://w3c.github.io/mediacapture-surface-control/#dfn-forward-wheel-event-algorithm",
      "html": "The <dfn id=\"dfn-forward-wheel-event-algorithm\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">forward wheel event algorithm</dfn> takes a <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"CaptureController\" data-cite=\"screen-capture\" data-cite-path=\"\" data-cite-frag=\"dom-capturecontroller\" href=\"https://www.w3.org/TR/screen-capture/#dom-capturecontroller\"><code>CaptureController</code></a> <var>controller</var>\n          and a <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"WheelEvent\" data-cite=\"uievents\" data-cite-path=\"\" data-cite-frag=\"wheelevent\" href=\"https://www.w3.org/TR/uievents/#wheelevent\"><code>WheelEvent</code></a> <var>event</var>, and runs the following steps:",
      "rationale": "if",
      "steps": [
        {
          "html": "If <var>controller</var> is not <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-actively-capturing\" class=\"internalDFN\" id=\"ref-for-dfn-actively-capturing-6\">actively capturing</a>, abort these steps."
        },
        {
          "html": "If <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a> <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-is-self-capturing\" class=\"internalDFN\" id=\"ref-for-dfn-is-self-capturing-3\">is self-capturing</a>, abort these steps."
        },
        {
          "html": "Let <var>surfaceType</var> be <var>controller</var>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[DisplaySurfaceType]]\" data-cite=\"screen-capture\" data-cite-path=\"\" data-cite-frag=\"dfn-displaysurfacetype\" href=\"https://www.w3.org/TR/screen-capture/#dfn-displaysurfacetype\"><code>[[DisplaySurfaceType]]</code></a>."
        },
        {
          "html": "If <var>surfaceType</var> is not a <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-supported-display-surface-type\" class=\"internalDFN\" id=\"ref-for-dfn-supported-display-surface-type-5\">supported display surface type</a>, abort these steps."
        },
        {
          "html": "Run the following steps <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/infrastructure.html\" data-cite-frag=\"in-parallel\" href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel\">in parallel</a>:",
          "rationale": "abort these steps",
          "steps": [
            {
              "html": "<a data-link-type=\"dfn\" data-cite=\"permissions\" data-cite-path=\"\" data-cite-frag=\"dfn-getting-the-current-permission-state\" href=\"https://www.w3.org/TR/permissions/#dfn-getting-the-current-permission-state\">Get the current permission state</a> of <a href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-captured-surface-control\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-captured-surface-control-5\"><code>\"captured-surface-control\"</code></a>. If the\n                result is NOT \"<a data-link-type=\"enum-value\" data-xref-type=\"enum-value\" data-link-for=\"PermissionState\" data-xref-for=\"PermissionState\" data-cite=\"permissions\" data-cite-path=\"\" data-cite-frag=\"dom-permissionstate-granted\" href=\"https://www.w3.org/TR/permissions/#dom-permissionstate-granted\"><code>granted</code></a>\", abort these steps."
            },
            {
              "html": "If <var>event</var>.<a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"Event\" data-xref-for=\"Event\" data-cite=\"dom\" data-cite-path=\"\" data-cite-frag=\"dom-event-istrusted\" href=\"https://dom.spec.whatwg.org/#dom-event-istrusted\"><code>isTrusted</code></a> is <code>false</code>, abort these steps."
            },
            {
              "html": "Let [<var>scaledX</var>, <var>scaledY</var>] be the result of the <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-scale-element-coordinates-algorithm\" class=\"internalDFN\" id=\"ref-for-dfn-scale-element-coordinates-algorithm-1\">scale element coordinates algorithm</a> on [<var>event</var>.<a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"MouseEvent\" data-xref-for=\"MouseEvent\" data-cite=\"cssom-view\" data-cite-path=\"\" data-cite-frag=\"dom-mouseevent-offsetx\" href=\"https://www.w3.org/TR/cssom-view-1/#dom-mouseevent-offsetx\"><code>offsetX</code></a>, <var>event</var>.<a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"MouseEvent\" data-xref-for=\"MouseEvent\" data-cite=\"cssom-view\" data-cite-path=\"\" data-cite-frag=\"dom-mouseevent-offsety\" href=\"https://www.w3.org/TR/cssom-view-1/#dom-mouseevent-offsety\"><code>offsetY</code></a>] and\n                <a data-link-type=\"dfn\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"this\" href=\"https://webidl.spec.whatwg.org/#this\">this</a>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[ForwardWheelElement]]\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-forwardwheelelement\" class=\"internalDFN\" id=\"ref-for-dfn-forwardwheelelement-6\"><code>[[ForwardWheelElement]]</code></a>."
            },
            {
              "html": "<a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"queue-a-global-task\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task\">Queue a global task</a> on the <a data-link-type=\"dfn\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"user-interaction-task-source\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source\">user interaction task source</a> of\n                <var>controller</var>.[[Source]]'s current realm, given that\n                <a data-cite=\"HTML#concept-realm-global\" href=\"https://html.spec.whatwg.org/multipage/#concept-realm-global\">realm's global object</a>, to <a data-link-type=\"dfn\" data-cite=\"dom\" data-cite-path=\"\" data-cite-frag=\"concept-event-fire\" href=\"https://dom.spec.whatwg.org/#concept-event-fire\">fire an event</a> named <code>\"wheel\"</code> using <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"WheelEvent\" data-cite=\"uievents\" data-cite-path=\"\" data-cite-frag=\"wheelevent\" href=\"https://www.w3.org/TR/uievents/#wheelevent\"><code>WheelEvent</code></a> with the <a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"MouseEvent\" data-xref-for=\"MouseEvent\" data-cite=\"cssom-view\" data-cite-path=\"\" data-cite-frag=\"dom-mouseevent-x\" href=\"https://www.w3.org/TR/cssom-view-1/#dom-mouseevent-x\"><code>x</code></a> attribute\n                initialized to <var>scaledX</var>, the <a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"MouseEvent\" data-xref-for=\"MouseEvent\" data-cite=\"cssom-view\" data-cite-path=\"\" data-cite-frag=\"dom-mouseevent-y\" href=\"https://www.w3.org/TR/cssom-view-1/#dom-mouseevent-y\"><code>y</code></a> attribute initialized to <var>scaledY</var>,\n                the <a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"WheelEvent\" data-xref-for=\"WheelEvent\" data-cite=\"uievents\" data-cite-path=\"\" data-cite-frag=\"dom-wheelevent-deltax\" href=\"https://www.w3.org/TR/uievents/#dom-wheelevent-deltax\"><code>deltaX</code></a> attribute initialized to <var>event</var>.<var>deltaX</var> and the\n                <a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"WheelEvent\" data-xref-for=\"WheelEvent\" data-cite=\"uievents\" data-cite-path=\"\" data-cite-frag=\"dom-wheelevent-deltay\" href=\"https://www.w3.org/TR/uievents/#dom-wheelevent-deltay\"><code>deltaY</code></a> attribute initialized to <var>event</var>.<var>deltaY</var>, at the\n                <a data-cite=\"uievents#topmost-event-target\" href=\"https://www.w3.org/TR/uievents/#topmost-event-target\">topmost event target</a>."
            }
          ]
        }
      ]
    },
    {
      "name": "scale element coordinates algorithm",
      "href": "https://w3c.github.io/mediacapture-surface-control/#dfn-scale-element-coordinates-algorithm",
      "html": "The <dfn id=\"dfn-scale-element-coordinates-algorithm\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">scale element coordinates algorithm</dfn> takes <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"double\" data-cite=\"webidl\" data-cite-path=\"\" data-cite-frag=\"idl-double\" href=\"https://webidl.spec.whatwg.org/#idl-double\"><code>double</code></a> coordinates [<var>x</var>, <var>y</var>]\n          and a <a data-xref-type=\"_IDL_\" data-link-type=\"interface\" data-lt=\"CaptureController\" data-cite=\"screen-capture\" data-cite-path=\"\" data-cite-frag=\"dom-capturecontroller\" href=\"https://www.w3.org/TR/screen-capture/#dom-capturecontroller\"><code>CaptureController</code></a> <var>controller</var>, and run the following steps:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var>scaleFactorX</var> be\n            <code>(<var>x</var> /\n              <var>controller</var>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[ForwardWheelElement]]\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-forwardwheelelement\" class=\"internalDFN\" id=\"ref-for-dfn-forwardwheelelement-7\"><code>[[ForwardWheelElement]]</code></a>.<a data-link-type=\"method\" data-xref-type=\"method\" data-link-for=\"Element\" data-xref-for=\"Element\" data-lt=\"getBoundingClientRect()\" data-cite=\"cssom-view\" data-cite-path=\"\" data-cite-frag=\"dom-element-getboundingclientrect\" href=\"https://www.w3.org/TR/cssom-view-1/#dom-element-getboundingclientrect\"><code>getBoundingClientRect</code></a><code>()</code>.<a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"DOMRect\" data-xref-for=\"DOMRect\" data-cite=\"geometry-1\" data-cite-path=\"\" data-cite-frag=\"dom-domrect-width\" href=\"https://www.w3.org/TR/geometry-1/#dom-domrect-width\"><code>width</code></a>)</code>."
        },
        {
          "html": "Let <var>scaleFactorX</var> be\n            <code>(<var>x</var> /\n              <var>controller</var>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[ForwardWheelElement]]\" href=\"https://w3c.github.io/mediacapture-surface-control/#dfn-forwardwheelelement\" class=\"internalDFN\" id=\"ref-for-dfn-forwardwheelelement-8\"><code>[[ForwardWheelElement]]</code></a>.<a data-link-type=\"method\" data-xref-type=\"method\" data-link-for=\"Element\" data-xref-for=\"Element\" data-lt=\"getBoundingClientRect()\" data-cite=\"cssom-view\" data-cite-path=\"\" data-cite-frag=\"dom-element-getboundingclientrect\" href=\"https://www.w3.org/TR/cssom-view-1/#dom-element-getboundingclientrect\"><code>getBoundingClientRect</code></a><code>()</code>.<a data-link-type=\"attribute\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"DOMRect\" data-xref-for=\"DOMRect\" data-cite=\"geometry-1\" data-cite-path=\"\" data-cite-frag=\"dom-domrect-height\" href=\"https://www.w3.org/TR/geometry-1/#dom-domrect-height\"><code>height</code></a>)</code>."
        },
        {
          "html": "Let <var>surfaceWidth</var> be <var>controller</var>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[Source]]\" data-cite=\"screen-capture\" data-cite-path=\"\" data-cite-frag=\"dfn-source\" href=\"https://www.w3.org/TR/screen-capture/#dfn-source\"><code>[[Source]]</code></a>'s viewport's width."
        },
        {
          "html": "Let <var>surfaceHeight</var> be <var>controller</var>.<a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"CaptureController\" data-xref-for=\"CaptureController\" data-lt=\"[[Source]]\" data-cite=\"screen-capture\" data-cite-path=\"\" data-cite-frag=\"dfn-source\" href=\"https://www.w3.org/TR/screen-capture/#dfn-source\"><code>[[Source]]</code></a>'s viewport's\n            height."
        },
        {
          "html": "Let <var>scaledX</var> be <code>(|scaleFactorX| * |surfaceWidth|)</code>."
        },
        {
          "html": "Let <var>scaledY</var> be <code>(|scaleFactorY| * |surfaceHeight|)</code>."
        },
        {
          "html": "Return [<var>scaledX</var>, <var>scaledY</var>]."
        }
      ]
    }
  ]
}