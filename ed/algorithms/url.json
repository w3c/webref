{
  "spec": {
    "title": "URL Standard",
    "url": "https://url.spec.whatwg.org/"
  },
  "algorithms": [
    {
      "name": "byte sequence/percent-decode",
      "href": "https://url.spec.whatwg.org/#percent-decode",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"byte sequence\" data-dfn-type=\"dfn\" data-export=\"\" id=\"percent-decode\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">percent-decode</dfn> a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#byte-sequence\" id=\"ref-for-byte-sequence\">byte sequence</a> <var>input</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>output</var> be an empty <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#byte-sequence\" id=\"ref-for-byte-sequence①\">byte sequence</a>. </p>"
        },
        {
          "html": "For each byte <var>byte</var> in <var>input</var>:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>byte</var> is not 0x25 (%), then append <var>byte</var> to <var>output</var>. </p>"
            },
            {
              "html": "<p>Otherwise, if <var>byte</var> is 0x25 (%) and the next two bytes after <var>byte</var> in <var>input</var> are not in the ranges 0x30 (0) to 0x39 (9),\n   0x41 (A) to 0x46 (F), and 0x61 (a) to 0x66 (f), all inclusive, append <var>byte</var> to <var>output</var>. </p>"
            },
            {
              "html": "Otherwise:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>bytePoint</var> be the two bytes after <var>byte</var> in <var>input</var>, <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#isomorphic-decode\" id=\"ref-for-isomorphic-decode\">decoded</a>, and then interpreted as hexadecimal number. </p>"
                },
                {
                  "html": "<p>Append a byte whose value is <var>bytePoint</var> to <var>output</var>. </p>"
                },
                {
                  "html": "<p>Skip the next two bytes in <var>input</var>. </p>"
                }
              ]
            }
          ]
        },
        {
          "html": "<p>Return <var>output</var>. </p>"
        }
      ]
    },
    {
      "name": "string/percent-decode",
      "href": "https://url.spec.whatwg.org/#string-percent-decode",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"string\" data-dfn-type=\"dfn\" data-export=\"\" id=\"string-percent-decode\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">percent-decode</dfn> a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#scalar-value-string\" id=\"ref-for-scalar-value-string\">scalar value string</a> <var>input</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>bytes</var> be the <a data-link-type=\"dfn\" href=\"https://encoding.spec.whatwg.org/#utf-8-encode\" id=\"ref-for-utf-8-encode\">UTF-8 encoding</a> of <var>input</var>. </p>"
        },
        {
          "html": "<p>Return the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#percent-decode\" id=\"ref-for-percent-decode\">percent-decoding</a> of <var>bytes</var>. </p>"
        }
      ]
    },
    {
      "name": "string/percent-encode after encoding",
      "href": "https://url.spec.whatwg.org/#string-percent-encode-after-encoding",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"string\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"string-percent-encode-after-encoding\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">percent-encode after encoding</dfn>, given an <a data-link-type=\"dfn\" href=\"https://encoding.spec.whatwg.org/#encoding\" id=\"ref-for-encoding\">encoding</a> <var>encoding</var>, <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#scalar-value-string\" id=\"ref-for-scalar-value-string①\">scalar value string</a> <var>input</var>, a <var>percentEncodeSet</var>, and an optional boolean <var>spaceAsPlus</var> (default false):",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>encoder</var> be the result of <a data-link-type=\"dfn\" href=\"https://encoding.spec.whatwg.org/#get-an-encoder\" id=\"ref-for-get-an-encoder\">getting an encoder</a> from <var>encoding</var>. </p>"
        },
        {
          "html": "<p>Let <var>inputQueue</var> be <var>input</var> converted to an <a data-link-type=\"dfn\" href=\"https://encoding.spec.whatwg.org/#concept-stream\" id=\"ref-for-concept-stream\">I/O queue</a>. </p>"
        },
        {
          "html": "<p>Let <var>output</var> be the empty string. </p>"
        },
        {
          "html": "<p>Let <var>potentialError</var> be 0. </p>"
        },
        {
          "html": "While <var>potentialError</var> is non-null:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>encodeOutput</var> be an empty <a data-link-type=\"dfn\" href=\"https://encoding.spec.whatwg.org/#concept-stream\" id=\"ref-for-concept-stream①\">I/O queue</a>. </p>"
            },
            {
              "html": "<p>Set <var>potentialError</var> to the result of running <a data-link-type=\"dfn\" href=\"https://encoding.spec.whatwg.org/#encode-or-fail\" id=\"ref-for-encode-or-fail\">encode or fail</a> with <var>inputQueue</var>, <var>encoder</var>, and <var>encodeOutput</var>. </p>"
            },
            {
              "html": "For each <var>byte</var> of <var>encodeOutput</var> converted to a byte sequence:",
              "rationale": "if",
              "steps": [
                {
                  "html": "<p>If <var>spaceAsPlus</var> is true and <var>byte</var> is 0x20 (SP), then append\n     U+002B (+) to <var>output</var> and <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue\">continue</a>. </p>"
                },
                {
                  "html": "<p>Let <var>isomorph</var> be a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-point\" id=\"ref-for-code-point③\">code point</a> whose <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-point-value\" id=\"ref-for-code-point-value\">value</a> is <var>byte</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#byte-value\" id=\"ref-for-byte-value\">value</a>. </p>"
                },
                {
                  "html": "<p>Assert: <var>percentEncodeSet</var> includes all non-<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-code-point\" id=\"ref-for-ascii-code-point\">ASCII code points</a>. </p>"
                },
                {
                  "html": "<p>If <var>isomorph</var> is not in <var>percentEncodeSet</var>, then append <var>isomorph</var> to <var>output</var>. </p>"
                },
                {
                  "html": "<p>Otherwise, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#percent-encode\" id=\"ref-for-percent-encode\">percent-encode</a> <var>byte</var> and append the result to <var>output</var>. </p>"
                }
              ]
            },
            {
              "html": "<p>If <var>potentialError</var> is non-null, then append \"<code>%26%23</code>\", followed by the\n    shortest sequence of <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-digit\" id=\"ref-for-ascii-digit①\">ASCII digits</a> representing <var>potentialError</var> in base\n    ten, followed by \"<code>%3B</code>\", to <var>output</var>. </p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>output</var>. </p>"
        }
      ]
    },
    {
      "name": "string/UTF-8 percent-encode",
      "href": "https://url.spec.whatwg.org/#string-utf-8-percent-encode",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"string\" data-dfn-type=\"dfn\" data-export=\"\" id=\"string-utf-8-percent-encode\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">UTF-8 percent-encode</dfn> a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#scalar-value-string\" id=\"ref-for-scalar-value-string②\">scalar value string</a> <var>input</var> using a <var>percentEncodeSet</var>, return the result of running <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#string-percent-encode-after-encoding\" id=\"ref-for-string-percent-encode-after-encoding①\">percent-encode after encoding</a> with <a data-link-type=\"dfn\" href=\"https://encoding.spec.whatwg.org/#utf-8\" id=\"ref-for-utf-8②\">UTF-8</a>, <var>input</var>, and <var>percentEncodeSet</var>.",
      "rationale": "To <dfn>"
    },
    {
      "name": "host/public suffix",
      "href": "https://url.spec.whatwg.org/#host-public-suffix",
      "html": "To obtain the <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"host\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-public-suffix\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">public suffix</dfn> of a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-host\" id=\"ref-for-concept-host①⓪\">host</a> <var>host</var>,\nrun these steps. They return null or a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-domain\" id=\"ref-for-concept-domain⑤\">domain</a> representing a portion of <var>host</var> that is included on the <cite>Public Suffix List</cite>. <a data-link-type=\"biblio\" href=\"https://url.spec.whatwg.org/#biblio-psl\" title=\"Public Suffix List\">[PSL]</a>",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>host</var> is not a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-domain\" id=\"ref-for-concept-domain⑥\">domain</a>, then return null. </p>"
        },
        {
          "html": "<p>Let <var>trailingDot</var> be \"<code>.</code>\" if <var>host</var> <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string-ends-with\" id=\"ref-for-string-ends-with\">ends with</a> \"<code>.</code>\"; otherwise the empty string. </p>"
        },
        {
          "html": "<p>Let <var>publicSuffix</var> be the public suffix determined by running the <a href=\"https://github.com/publicsuffix/list/wiki/Format#formal-algorithm\">Public Suffix List algorithm</a> with <var>host</var> as domain. <a data-link-type=\"biblio\" href=\"https://url.spec.whatwg.org/#biblio-psl\" title=\"Public Suffix List\">[PSL]</a> </p>"
        },
        {
          "html": "<p>Assert: <var>publicSuffix</var> is an <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-string\" id=\"ref-for-ascii-string③\">ASCII string</a> that does not <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string-ends-with\" id=\"ref-for-string-ends-with①\">end with</a> \"<code>.</code>\". </p>"
        },
        {
          "html": "<p>Return <var>publicSuffix</var> and <var>trailingDot</var> concatenated. </p>"
        }
      ]
    },
    {
      "name": "host/registrable domain",
      "href": "https://url.spec.whatwg.org/#host-registrable-domain",
      "html": "To obtain the <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"host\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-registrable-domain\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">registrable domain</dfn> of a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-host\" id=\"ref-for-concept-host①①\">host</a> <var>host</var>, run these steps. They return null or a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-domain\" id=\"ref-for-concept-domain⑦\">domain</a> formed by <var>host</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#host-public-suffix\" id=\"ref-for-host-public-suffix\">public suffix</a> and the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#domain-label\" id=\"ref-for-domain-label\">domain label</a> preceding it, if\nany.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>host</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#host-public-suffix\" id=\"ref-for-host-public-suffix①\">public suffix</a> is null or <var>host</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#host-public-suffix\" id=\"ref-for-host-public-suffix②\">public suffix</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-host-equals\" id=\"ref-for-concept-host-equals①\">equals</a> <var>host</var>, then return null. </p>"
        },
        {
          "html": "<p>Let <var>trailingDot</var> be \"<code>.</code>\" if <var>host</var> <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string-ends-with\" id=\"ref-for-string-ends-with②\">ends with</a> \"<code>.</code>\"; otherwise the empty string. </p>"
        },
        {
          "html": "<p>Let <var>registrableDomain</var> be the registrable domain determined by running the <a href=\"https://github.com/publicsuffix/list/wiki/Format#formal-algorithm\">Public Suffix List algorithm</a> with <var>host</var> as domain. <a data-link-type=\"biblio\" href=\"https://url.spec.whatwg.org/#biblio-psl\" title=\"Public Suffix List\">[PSL]</a> </p>"
        },
        {
          "html": "<p>Assert: <var>registrableDomain</var> is an <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-string\" id=\"ref-for-ascii-string④\">ASCII string</a> that does not <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string-ends-with\" id=\"ref-for-string-ends-with③\">end with</a> \"<code>.</code>\". </p>"
        },
        {
          "html": "<p>Return <var>registrableDomain</var> and <var>trailingDot</var> concatenated. </p>"
        }
      ]
    },
    {
      "name": "domain to ASCII",
      "href": "https://url.spec.whatwg.org/#concept-domain-to-ascii",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"concept-domain-to-ascii\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">domain to ASCII</dfn> algorithm, given a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string\" id=\"ref-for-string④\">string</a> <var>domain</var> and a boolean <var>beStrict</var>, runs these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>result</var> be the result of running <a data-link-type=\"abstract-op\" href=\"https://www.unicode.org/reports/tr46/#ToASCII\" id=\"ref-for-ToASCII②\">Unicode ToASCII</a> with <i>domain_name</i> set to <var>domain</var>, <i>CheckHyphens</i> set to <var>beStrict</var>, <i>CheckBidi</i> set to true, <i>CheckJoiners</i> set to true, <i>UseSTD3ASCIIRules</i> set to <var>beStrict</var>, <i>Transitional_Processing</i> set to false, <i>VerifyDnsLength</i> set to <var>beStrict</var>, and <i>IgnoreInvalidPunycode</i> set to false. <a data-link-type=\"biblio\" href=\"https://url.spec.whatwg.org/#biblio-uts46\" title=\"Unicode IDNA Compatibility Processing\">[UTS46]</a> </p>"
        },
        {
          "html": "<p>If <var>result</var> is a failure value, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error-domain-to-ascii\" id=\"ref-for-validation-error-domain-to-ascii①\">domain-to-ASCII</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error③\">validation error</a>,\n return failure. </p>"
        },
        {
          "html": "If <var>beStrict</var> is false:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>result</var> is the empty string, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error-domain-to-ascii\" id=\"ref-for-validation-error-domain-to-ascii②\">domain-to-ASCII</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error④\">validation error</a>,\n   return failure. </p>"
            },
            {
              "html": "<p>If <var>result</var> contains a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#forbidden-domain-code-point\" id=\"ref-for-forbidden-domain-code-point①\">forbidden domain code point</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#domain-invalid-code-point\" id=\"ref-for-domain-invalid-code-point\">domain-invalid-code-point</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error⑤\">validation error</a>, return failure. </p>"
            }
          ]
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert\">Assert</a>: <var>result</var> is not the empty string and does not contain a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#forbidden-domain-code-point\" id=\"ref-for-forbidden-domain-code-point③\">forbidden domain code point</a>. </p>"
        },
        {
          "html": "<p>Return <var>result</var>. </p>"
        }
      ]
    },
    {
      "name": "domain to Unicode",
      "href": "https://url.spec.whatwg.org/#concept-domain-to-unicode",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"concept-domain-to-unicode\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">domain to Unicode</dfn> algorithm, given a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-domain\" id=\"ref-for-concept-domain⑧\">domain</a> <var>domain</var> and a boolean <var>beStrict</var>, runs these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>result</var> be the result of running <a data-link-type=\"abstract-op\" href=\"https://www.unicode.org/reports/tr46/#ToUnicode\" id=\"ref-for-ToUnicode①\">Unicode ToUnicode</a> with <i>domain_name</i> set to <var>domain</var>, <i>CheckHyphens</i> set to <var>beStrict</var>, <i>CheckBidi</i> set to true, <i>CheckJoiners</i> set to true, <i>UseSTD3ASCIIRules</i> set to <var>beStrict</var>, <i>Transitional_Processing</i> set to false, and <i>IgnoreInvalidPunycode</i> set to false. <a data-link-type=\"biblio\" href=\"https://url.spec.whatwg.org/#biblio-uts46\" title=\"Unicode IDNA Compatibility Processing\">[UTS46]</a> </p>"
        },
        {
          "html": "<p>Signify <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#domain-to-unicode\" id=\"ref-for-domain-to-unicode\">domain-to-Unicode</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error⑥\">validation errors</a> for any returned errors, and then,\n return <var>result</var>. </p>"
        }
      ]
    },
    {
      "name": "valid domain",
      "href": "https://url.spec.whatwg.org/#valid-domain",
      "html": "A <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string\" id=\"ref-for-string⑤\">string</a> <var>input</var> is a <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"valid-domain\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">valid domain</dfn> if these steps return true:",
      "rationale": "let",
      "steps": [
        {
          "html": "<p>Let <var>domain</var> be the result of running <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-domain-to-ascii\" id=\"ref-for-concept-domain-to-ascii\">domain to ASCII</a> with <var>input</var> and true. </p>"
        },
        {
          "html": "<p>Return false if <var>domain</var> is failure; otherwise true. </p>"
        }
      ]
    },
    {
      "name": "host parser",
      "href": "https://url.spec.whatwg.org/#concept-host-parser",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-export=\"\" data-lt=\"host parser|host parsing\" id=\"concept-host-parser\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host parser</dfn> takes a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#scalar-value-string\" id=\"ref-for-scalar-value-string④\">scalar value string</a> <var>input</var> with an optional boolean <var>isOpaque</var> (default\nfalse), and then runs these steps. They return failure or a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-host\" id=\"ref-for-concept-host①②\">host</a>.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "If <var>input</var> starts with U+005B ([), then:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>input</var> does not end with U+005D (]), <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#ipv6-unclosed\" id=\"ref-for-ipv6-unclosed\">IPv6-unclosed</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error⑦\">validation error</a>, return failure. </p>"
            },
            {
              "html": "<p>Return the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-ipv6-parser\" id=\"ref-for-concept-ipv6-parser\">IPv6 parsing</a> <var>input</var> with its\n   leading U+005B ([) and trailing U+005D (]) removed. </p>"
            }
          ]
        },
        {
          "html": "<p>If <var>isOpaque</var> is true, then return the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-opaque-host-parser\" id=\"ref-for-concept-opaque-host-parser\">opaque-host parsing</a> <var>input</var>. </p>"
        },
        {
          "html": "<p>Assert: <var>input</var> is not the empty string. </p>"
        },
        {
          "html": "<p>Let <var>domain</var> be the result of running <a data-link-type=\"dfn\" href=\"https://encoding.spec.whatwg.org/#utf-8-decode-without-bom\" id=\"ref-for-utf-8-decode-without-bom①\">UTF-8 decode without BOM</a> on the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#string-percent-decode\" id=\"ref-for-string-percent-decode④\">percent-decoding</a> of <var>input</var>. </p>"
        },
        {
          "html": "<p>Let <var>asciiDomain</var> be the result of running <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-domain-to-ascii\" id=\"ref-for-concept-domain-to-ascii②\">domain to ASCII</a> with <var>domain</var> and false. </p>"
        },
        {
          "html": "<p>If <var>asciiDomain</var> is failure, then return failure. </p>"
        },
        {
          "html": "<p>If <var>asciiDomain</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#ends-in-a-number-checker\" id=\"ref-for-ends-in-a-number-checker\">ends in a number</a>, then return\n the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-ipv4-parser\" id=\"ref-for-concept-ipv4-parser\">IPv4 parsing</a> <var>asciiDomain</var>. </p>"
        },
        {
          "html": "<p>Return <var>asciiDomain</var>. </p>"
        }
      ]
    },
    {
      "name": "ends in a number checker",
      "href": "https://url.spec.whatwg.org/#ends-in-a-number-checker",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"ends-in-a-number-checker\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">ends in a number checker</dfn> takes an <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-string\" id=\"ref-for-ascii-string⑥\">ASCII string</a> <var>input</var> and then\nruns these steps. They return a boolean.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>parts</var> be the result of <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#strictly-split\" id=\"ref-for-strictly-split②\">strictly splitting</a> <var>input</var> on\n U+002E (.). </p>"
        },
        {
          "html": "If the last <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-item\" id=\"ref-for-list-item①\">item</a> in <var>parts</var> is the empty string, then:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>parts</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size\">size</a> is 1, then return false. </p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-remove\" id=\"ref-for-list-remove\">Remove</a> the last <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-item\" id=\"ref-for-list-item②\">item</a> from <var>parts</var>. </p>"
            }
          ]
        },
        {
          "html": "<p>Let <var>last</var> be the last <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-item\" id=\"ref-for-list-item③\">item</a> in <var>parts</var>. </p>"
        },
        {
          "html": "<p>If <var>last</var> is non-empty and contains only <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-digit\" id=\"ref-for-ascii-digit③\">ASCII digits</a>, then return true. </p>"
        },
        {
          "html": "<p>If parsing <var>last</var> as an <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#ipv4-number-parser\" id=\"ref-for-ipv4-number-parser\">IPv4 number</a> does not return\n  failure, then return true. </p>"
        },
        {
          "html": "<p>Return false. </p>"
        }
      ]
    },
    {
      "name": "IPv4 parser",
      "href": "https://url.spec.whatwg.org/#concept-ipv4-parser",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"concept-ipv4-parser\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">IPv4 parser</dfn> takes an <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-string\" id=\"ref-for-ascii-string⑦\">ASCII string</a> <var>input</var> and then runs these steps. They return failure or an <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-ipv4\" id=\"ref-for-concept-ipv4①②\">IPv4 address</a>.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>parts</var> be the result of <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#strictly-split\" id=\"ref-for-strictly-split③\">strictly splitting</a> <var>input</var> on\n U+002E (.). </p>"
        },
        {
          "html": "If the last <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-item\" id=\"ref-for-list-item④\">item</a> in <var>parts</var> is the empty string, then:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#ipv4-empty-part\" id=\"ref-for-ipv4-empty-part\">IPv4-empty-part</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error⑧\">validation error</a>. </p>"
            },
            {
              "html": "<p>If <var>parts</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size①\">size</a> is greater than 1, then <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-remove\" id=\"ref-for-list-remove①\">remove</a> the last <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-item\" id=\"ref-for-list-item⑤\">item</a> from <var>parts</var>. </p>"
            }
          ]
        },
        {
          "html": "<p>If <var>parts</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size②\">size</a> is greater than 4, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#ipv4-too-many-parts\" id=\"ref-for-ipv4-too-many-parts\">IPv4-too-many-parts</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error⑨\">validation error</a>, return failure. </p>"
        },
        {
          "html": "<p>Let <var>numbers</var> be an empty <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list①\">list</a>. </p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate\">For each</a> <var>part</var> of <var>parts</var>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>result</var> be the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#ipv4-number-parser\" id=\"ref-for-ipv4-number-parser①\">parsing</a> <var>part</var>. </p>"
            },
            {
              "html": "<p>If <var>result</var> is failure, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#ipv4-non-numeric-part\" id=\"ref-for-ipv4-non-numeric-part\">IPv4-non-numeric-part</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error①⓪\">validation error</a>,\n   return failure. </p>"
            },
            {
              "html": "<p>If <var>result</var>[1] is true, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#ipv4-non-decimal-part\" id=\"ref-for-ipv4-non-decimal-part\">IPv4-non-decimal-part</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error①①\">validation error</a>. </p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append\">Append</a> <var>result</var>[0] to <var>numbers</var>. </p>"
            }
          ]
        },
        {
          "html": "<p>If any item in <var>numbers</var> is greater than 255, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#ipv4-out-of-range-part\" id=\"ref-for-ipv4-out-of-range-part\">IPv4-out-of-range-part</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error①②\">validation error</a>. </p>"
        },
        {
          "html": "<p>If any but the last <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-item\" id=\"ref-for-list-item⑥\">item</a> in <var>numbers</var> is greater than 255, then\n return failure. </p>"
        },
        {
          "html": "<p>If the last <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-item\" id=\"ref-for-list-item⑦\">item</a> in <var>numbers</var> is greater than or equal to\n 256<sup>(5 − <var>numbers</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size③\">size</a>)</sup>, then return failure. </p>"
        },
        {
          "html": "<p>Let <var>ipv4</var> be the last <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-item\" id=\"ref-for-list-item⑧\">item</a> in <var>numbers</var>. </p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-remove\" id=\"ref-for-list-remove②\">Remove</a> the last <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-item\" id=\"ref-for-list-item⑨\">item</a> from <var>numbers</var>. </p>"
        },
        {
          "html": "<p>Let <var>counter</var> be 0. </p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate①\">For each</a> <var>n</var> of <var>numbers</var>:",
          "rationale": "increment",
          "steps": [
            {
              "html": "<p>Increment <var>ipv4</var> by <var>n</var> ×\n   256<sup>(3 − <var>counter</var>)</sup>. </p>"
            },
            {
              "html": "<p>Increment <var>counter</var> by 1. </p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>ipv4</var>. </p>"
        }
      ]
    },
    {
      "name": "IPv4 number parser",
      "href": "https://url.spec.whatwg.org/#ipv4-number-parser",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"ipv4-number-parser\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">IPv4 number parser</dfn> takes an <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-string\" id=\"ref-for-ascii-string⑧\">ASCII string</a> <var>input</var> and then runs\nthese steps. They return failure or a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#tuple\" id=\"ref-for-tuple\">tuple</a> of a number and a boolean.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>input</var> is the empty string, then return failure. </p>"
        },
        {
          "html": "<p>Let <var>validationError</var> be false. </p>"
        },
        {
          "html": "<p>Let <var>R</var> be 10. </p>"
        },
        {
          "html": "If <var>input</var> contains at least two code points and the first two code points are either\n  \"<code>0X</code>\" or \"<code>0x</code>\", then:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>validationError</var> to true. </p>"
            },
            {
              "html": "<p>Remove the first two code points from <var>input</var>. </p>"
            },
            {
              "html": "<p>Set <var>R</var> to 16. </p>"
            }
          ]
        },
        {
          "html": "Otherwise, if <var>input</var> contains at least two code points and the first code point is\n  U+0030 (0), then:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>validationError</var> to true. </p>"
            },
            {
              "html": "<p>Remove the first code point from <var>input</var>. </p>"
            },
            {
              "html": "<p>Set <var>R</var> to 8. </p>"
            }
          ]
        },
        {
          "html": "<p>If <var>input</var> is the empty string, then return (0, true). </p>"
        },
        {
          "html": "<p>If <var>input</var> contains a code point that is not a radix-<var>R</var> digit, then\n return failure. </p>"
        },
        {
          "html": "<p>Let <var>output</var> be the mathematical integer value that is represented by <var>input</var> in radix-<var>R</var> notation, using <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-hex-digit\" id=\"ref-for-ascii-hex-digit③\">ASCII hex digits</a> for digits with\n values 0 through 15. </p>"
        },
        {
          "html": "<p>Return (<var>output</var>, <var>validationError</var>). </p>"
        }
      ]
    },
    {
      "name": "IPv6 parser",
      "href": "https://url.spec.whatwg.org/#concept-ipv6-parser",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"concept-ipv6-parser\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">IPv6 parser</dfn> takes a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#scalar-value-string\" id=\"ref-for-scalar-value-string⑤\">scalar value string</a> <var>input</var> and then runs these steps. They return failure or an <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-ipv6\" id=\"ref-for-concept-ipv6①③\">IPv6 address</a>.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>address</var> be a new <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-ipv6\" id=\"ref-for-concept-ipv6①④\">IPv6 address</a> whose <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-ipv6-piece\" id=\"ref-for-concept-ipv6-piece\">pieces</a> are all 0. </p>"
        },
        {
          "html": "<p>Let <var>pieceIndex</var> be 0. </p>"
        },
        {
          "html": "<p>Let <var>compress</var> be null. </p>"
        },
        {
          "html": "<p>Let <var>pointer</var> be a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#pointer\" id=\"ref-for-pointer⑦\">pointer</a> for <var>input</var>. </p>"
        },
        {
          "html": "If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑤\">c</a> is U+003A (:), then:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#remaining\" id=\"ref-for-remaining③\">remaining</a> does not start with U+003A (:), <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#ipv6-invalid-compression\" id=\"ref-for-ipv6-invalid-compression\">IPv6-invalid-compression</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error①③\">validation error</a>, return failure. </p>"
            },
            {
              "html": "<p>Increase <var>pointer</var> by 2. </p>"
            },
            {
              "html": "<p>Increase <var>pieceIndex</var> by 1 and then set <var>compress</var> to <var>pieceIndex</var>. </p>"
            }
          ]
        },
        {
          "html": "While <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑥\">c</a> is not the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point③\">EOF code point</a>:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>pieceIndex</var> is 8, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#ipv6-too-many-pieces\" id=\"ref-for-ipv6-too-many-pieces\">IPv6-too-many-pieces</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error①④\">validation error</a>, return\n   failure. </p>"
            },
            {
              "html": "If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑦\">c</a> is U+003A (:), then:",
              "rationale": "if",
              "steps": [
                {
                  "html": "<p>If <var>compress</var> is non-null, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#ipv6-multiple-compression\" id=\"ref-for-ipv6-multiple-compression\">IPv6-multiple-compression</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error①⑤\">validation error</a>, return failure. </p>"
                },
                {
                  "html": "Increase <var>pointer</var> and <var>pieceIndex</var> by 1, set <var>compress</var> to <var>pieceIndex</var>, and then <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue①\">continue</a>."
                }
              ]
            },
            {
              "html": "<p>Let <var>value</var> and <var>length</var> be 0. </p>"
            },
            {
              "html": "<p>While <var>length</var> is less than 4 and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑧\">c</a> is an <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-hex-digit\" id=\"ref-for-ascii-hex-digit④\">ASCII hex digit</a>, set <var>value</var> to <var>value</var> × 0x10 + <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑨\">c</a> interpreted as hexadecimal number,\n   and increase <var>pointer</var> and <var>length</var> by 1. </p>"
            },
            {
              "html": "If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c①⓪\">c</a> is U+002E (.), then:",
              "rationale": "if",
              "steps": [
                {
                  "html": "<p>If <var>length</var> is 0, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#ipv4-in-ipv6-invalid-code-point\" id=\"ref-for-ipv4-in-ipv6-invalid-code-point\">IPv4-in-IPv6-invalid-code-point</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error①⑥\">validation error</a>, return failure. </p>"
                },
                {
                  "html": "<p>Decrease <var>pointer</var> by <var>length</var>. </p>"
                },
                {
                  "html": "<p>If <var>pieceIndex</var> is greater than 6, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#ipv4-in-ipv6-too-many-pieces\" id=\"ref-for-ipv4-in-ipv6-too-many-pieces\">IPv4-in-IPv6-too-many-pieces</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error①⑦\">validation error</a>, return failure. </p>"
                },
                {
                  "html": "<p>Let <var>numbersSeen</var> be 0. </p>"
                },
                {
                  "html": "While <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c①①\">c</a> is not the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point④\">EOF code point</a>:",
                  "rationale": "let",
                  "steps": [
                    {
                      "html": "<p>Let <var>ipv4Piece</var> be null. </p>"
                    },
                    {
                      "html": "If <var>numbersSeen</var> is greater than 0, then:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c①②\">c</a> is a U+002E (.) and <var>numbersSeen</var> is less than 4, then increase <var>pointer</var> by 1. </p>"
                        },
                        {
                          "html": "Otherwise, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#ipv4-in-ipv6-invalid-code-point\" id=\"ref-for-ipv4-in-ipv6-invalid-code-point①\">IPv4-in-IPv6-invalid-code-point</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error①⑧\">validation error</a>, return\n         failure."
                        }
                      ]
                    },
                    {
                      "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c①③\">c</a> is not an <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-digit\" id=\"ref-for-ascii-digit④\">ASCII digit</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#ipv4-in-ipv6-invalid-code-point\" id=\"ref-for-ipv4-in-ipv6-invalid-code-point②\">IPv4-in-IPv6-invalid-code-point</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error①⑨\">validation error</a>, return failure. </p>"
                    },
                    {
                      "html": "While <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c①④\">c</a> is an <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-digit\" id=\"ref-for-ascii-digit⑤\">ASCII digit</a>:",
                      "rationale": "let",
                      "steps": [
                        {
                          "html": "<p>Let <var>number</var> be <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c①⑤\">c</a> interpreted as decimal number. </p>"
                        },
                        {
                          "html": "<p>If <var>ipv4Piece</var> is null, then set <var>ipv4Piece</var> to <var>number</var>. </p>\n              <p>Otherwise, if <var>ipv4Piece</var> is 0, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#ipv4-in-ipv6-invalid-code-point\" id=\"ref-for-ipv4-in-ipv6-invalid-code-point③\">IPv4-in-IPv6-invalid-code-point</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error②⓪\">validation error</a>, return failure. </p>\n              <p>Otherwise, set <var>ipv4Piece</var> to <var>ipv4Piece</var> × 10 + <var>number</var>. </p>"
                        },
                        {
                          "html": "<p>If <var>ipv4Piece</var> is greater than 255, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#ipv4-in-ipv6-out-of-range-part\" id=\"ref-for-ipv4-in-ipv6-out-of-range-part\">IPv4-in-IPv6-out-of-range-part</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error②①\">validation error</a>, return failure. </p>"
                        },
                        {
                          "html": "<p>Increase <var>pointer</var> by 1. </p>"
                        }
                      ]
                    },
                    {
                      "html": "<p>Set <var>address</var>[<var>pieceIndex</var>] to <var>address</var>[<var>pieceIndex</var>] × 0x100 + <var>ipv4Piece</var>. </p>"
                    },
                    {
                      "html": "<p>Increase <var>numbersSeen</var> by 1. </p>"
                    },
                    {
                      "html": "<p>If <var>numbersSeen</var> is 2 or 4, then increase <var>pieceIndex</var> by 1. </p>"
                    }
                  ]
                },
                {
                  "html": "<p>If <var>numbersSeen</var> is not 4, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#ipv4-in-ipv6-too-few-parts\" id=\"ref-for-ipv4-in-ipv6-too-few-parts\">IPv4-in-IPv6-too-few-parts</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error②②\">validation error</a>, return failure. </p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-break\" id=\"ref-for-iteration-break\">Break</a>. </p>"
                }
              ]
            },
            {
              "html": "Otherwise, if <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c①⑥\">c</a> is U+003A (:):",
              "rationale": "increase",
              "steps": [
                {
                  "html": "<p>Increase <var>pointer</var> by 1. </p>"
                },
                {
                  "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c①⑦\">c</a> is the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑤\">EOF code point</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#ipv6-invalid-code-point\" id=\"ref-for-ipv6-invalid-code-point\">IPv6-invalid-code-point</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error②③\">validation error</a>, return failure. </p>"
                }
              ]
            },
            {
              "html": "<p>Otherwise, if <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c①⑧\">c</a> is not the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑥\">EOF code point</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#ipv6-invalid-code-point\" id=\"ref-for-ipv6-invalid-code-point①\">IPv6-invalid-code-point</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error②④\">validation error</a>, return failure. </p>"
            },
            {
              "html": "<p>Set <var>address</var>[<var>pieceIndex</var>] to <var>value</var>. </p>"
            },
            {
              "html": "<p>Increase <var>pieceIndex</var> by 1. </p>"
            }
          ]
        },
        {
          "html": "If <var>compress</var> is non-null, then:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>swaps</var> be <var>pieceIndex</var> − <var>compress</var>. </p>"
            },
            {
              "html": "<p>Set <var>pieceIndex</var> to 7. </p>"
            },
            {
              "html": "<p>While <var>pieceIndex</var> is not 0 and <var>swaps</var> is greater than 0, swap <var>address</var>[<var>pieceIndex</var>] with <var>address</var>[<var>compress</var> + <var>swaps</var> − 1], and then decrease both <var>pieceIndex</var> and <var>swaps</var> by 1. </p>"
            }
          ]
        },
        {
          "html": "<p>Otherwise, if <var>compress</var> is null and <var>pieceIndex</var> is not 8, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#ipv6-too-few-pieces\" id=\"ref-for-ipv6-too-few-pieces\">IPv6-too-few-pieces</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error②⑤\">validation error</a>, return failure. </p>"
        },
        {
          "html": "<p>Return <var>address</var>. </p>"
        }
      ]
    },
    {
      "name": "opaque-host parser",
      "href": "https://url.spec.whatwg.org/#concept-opaque-host-parser",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-export=\"\" id=\"concept-opaque-host-parser\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opaque-host parser</dfn> takes a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#scalar-value-string\" id=\"ref-for-scalar-value-string⑥\">scalar value string</a> <var>input</var>, and then runs these steps. They return failure or an <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#opaque-host\" id=\"ref-for-opaque-host①③\">opaque host</a>.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>input</var> contains a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#forbidden-host-code-point\" id=\"ref-for-forbidden-host-code-point③\">forbidden host code point</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#host-invalid-code-point\" id=\"ref-for-host-invalid-code-point\">host-invalid-code-point</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error②⑥\">validation error</a>, return failure. </p>"
        },
        {
          "html": "<p>If <var>input</var> contains a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-point\" id=\"ref-for-code-point⑤\">code point</a> that is not a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-code-points\" id=\"ref-for-url-code-points\">URL code point</a> and not\n U+0025 (%), <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#invalid-url-unit\" id=\"ref-for-invalid-url-unit\">invalid-URL-unit</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error②⑦\">validation error</a>. </p>"
        },
        {
          "html": "<p>If <var>input</var> contains a U+0025 (%) and the two <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-point\" id=\"ref-for-code-point⑥\">code points</a> following it are\n not <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-hex-digit\" id=\"ref-for-ascii-hex-digit⑤\">ASCII hex digits</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#invalid-url-unit\" id=\"ref-for-invalid-url-unit①\">invalid-URL-unit</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error②⑧\">validation error</a>. </p>"
        },
        {
          "html": "<p>Return the result of running <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#string-utf-8-percent-encode\" id=\"ref-for-string-utf-8-percent-encode②\">UTF-8 percent-encode</a> on <var>input</var> using the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c0-control-percent-encode-set\" id=\"ref-for-c0-control-percent-encode-set②\">C0 control percent-encode set</a>. </p>"
        }
      ]
    },
    {
      "name": "host serializer",
      "href": "https://url.spec.whatwg.org/#concept-host-serializer",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"concept-host-serializer\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host serializer</dfn> takes a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-host\" id=\"ref-for-concept-host①③\">host</a> <var>host</var> and then runs these steps. They return an <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-string\" id=\"ref-for-ascii-string⑨\">ASCII string</a>.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>host</var> is an <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-ipv4\" id=\"ref-for-concept-ipv4①④\">IPv4 address</a>, return the result of\n running the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-ipv4-serializer\" id=\"ref-for-concept-ipv4-serializer\">IPv4 serializer</a> on <var>host</var>. </p>"
        },
        {
          "html": "<p>Otherwise, if <var>host</var> is an <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-ipv6\" id=\"ref-for-concept-ipv6①⑤\">IPv6 address</a>, return U+005B ([), followed by the\n result of running the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-ipv6-serializer\" id=\"ref-for-concept-ipv6-serializer\">IPv6 serializer</a> on <var>host</var>, followed by U+005D (]). </p>"
        },
        {
          "html": "<p>Otherwise, <var>host</var> is a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-domain\" id=\"ref-for-concept-domain⑨\">domain</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#opaque-host\" id=\"ref-for-opaque-host①④\">opaque host</a>, or <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#empty-host\" id=\"ref-for-empty-host①\">empty host</a>,\n return <var>host</var>. </p>"
        }
      ]
    },
    {
      "name": "IPv4 serializer",
      "href": "https://url.spec.whatwg.org/#concept-ipv4-serializer",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"concept-ipv4-serializer\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">IPv4 serializer</dfn> takes an <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-ipv4\" id=\"ref-for-concept-ipv4①⑤\">IPv4 address</a> <var>address</var> and then runs these steps. They return an <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-string\" id=\"ref-for-ascii-string①⓪\">ASCII string</a>.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>output</var> be the empty string. </p>"
        },
        {
          "html": "<p>Let <var>n</var> be the value of <var>address</var>. </p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate②\">For each</a> <var>i</var> in the range 1 to 4, inclusive:",
          "rationale": "prepend",
          "steps": [
            {
              "html": "<p>Prepend <var>n</var> % 256, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#serialize-an-integer\" id=\"ref-for-serialize-an-integer\">serialized</a>, to <var>output</var>. </p>"
            },
            {
              "html": "<p>If <var>i</var> is not 4, then prepend U+002E (.) to <var>output</var>. </p>"
            },
            {
              "html": "<p>Set <var>n</var> to floor(<var>n</var> / 256). </p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>output</var>. </p>"
        }
      ]
    },
    {
      "name": "IPv6 serializer",
      "href": "https://url.spec.whatwg.org/#concept-ipv6-serializer",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"concept-ipv6-serializer\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">IPv6 serializer</dfn> takes an <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-ipv6\" id=\"ref-for-concept-ipv6①⑥\">IPv6 address</a> <var>address</var> and then runs these steps. They return an <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-string\" id=\"ref-for-ascii-string①①\">ASCII string</a>.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>output</var> be the empty string. </p>"
        },
        {
          "html": "<p>Let <var>compress</var> be the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#find-the-ipv6-address-compressed-piece-index\" id=\"ref-for-find-the-ipv6-address-compressed-piece-index\">finding the IPv6 address compressed piece index</a> given <var>address</var>. </p>"
        },
        {
          "html": "<p>Let <var>ignore0</var> be false. </p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate③\">For each</a> <var>pieceIndex</var> of <var>address</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-ipv6-piece\" id=\"ref-for-concept-ipv6-piece①\">pieces</a>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-get-the-indices\" id=\"ref-for-list-get-the-indices\">indices</a>:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>ignore0</var> is true and <var>address</var>[<var>pieceIndex</var>] is 0, then <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue②\">continue</a>. </p>"
            },
            {
              "html": "<p>Otherwise, if <var>ignore0</var> is true, set <var>ignore0</var> to false. </p>"
            },
            {
              "html": "If <var>compress</var> is <var>pieceIndex</var>, then:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>separator</var> be \"<code>::</code>\" if <var>pieceIndex</var> is 0; otherwise\n     U+003A (:). </p>"
                },
                {
                  "html": "<p>Append <var>separator</var> to <var>output</var>. </p>"
                },
                {
                  "html": "<p>Set <var>ignore0</var> to true and <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue③\">continue</a>. </p>"
                }
              ]
            },
            {
              "html": "<p>Append <var>address</var>[<var>pieceIndex</var>], represented as the shortest possible\n   lowercase hexadecimal number, to <var>output</var>. </p>"
            },
            {
              "html": "<p>If <var>pieceIndex</var> is not 7, then append U+003A (:) to <var>output</var>. </p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>output</var>. </p>"
        }
      ]
    },
    {
      "name": "find the IPv6 address compressed piece index",
      "href": "https://url.spec.whatwg.org/#find-the-ipv6-address-compressed-piece-index",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"find-the-ipv6-address-compressed-piece-index\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">find the IPv6 address compressed piece index</dfn> given an <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-ipv6\" id=\"ref-for-concept-ipv6①⑦\">IPv6 address</a> <var>address</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>longestIndex</var> be null. </p>"
        },
        {
          "html": "<p>Let <var>longestSize</var> be 1. </p>"
        },
        {
          "html": "<p>Let <var>foundIndex</var> be null. </p>"
        },
        {
          "html": "<p>Let <var>foundSize</var> be 0. </p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate④\">For each</a> <var>pieceIndex</var> of <var>address</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-ipv6-piece\" id=\"ref-for-concept-ipv6-piece②\">pieces</a>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-get-the-indices\" id=\"ref-for-list-get-the-indices①\">indices</a>:",
          "rationale": "if",
          "steps": [
            {
              "html": "If <var>address</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-ipv6-piece\" id=\"ref-for-concept-ipv6-piece③\">pieces</a>[<var>pieceIndex</var>] is not 0:",
              "rationale": "if",
              "steps": [
                {
                  "html": "<p>If <var>foundSize</var> is greater than <var>longestSize</var>, then set <var>longestIndex</var> to <var>foundIndex</var> and <var>longestSize</var> to <var>foundSize</var>. </p>"
                },
                {
                  "html": "Set <var>foundIndex</var> to null."
                },
                {
                  "html": "Set <var>foundSize</var> to 0."
                }
              ]
            },
            {
              "html": "Otherwise:",
              "rationale": "if",
              "steps": [
                {
                  "html": "<p>If <var>foundIndex</var> is null, then set <var>foundIndex</var> to <var>pieceIndex</var>. </p>"
                },
                {
                  "html": "<p>Increment <var>foundSize</var> by 1. </p>"
                }
              ]
            }
          ]
        },
        {
          "html": "<p>If <var>foundSize</var> is greater than <var>longestSize</var>, then return <var>foundIndex</var>. </p>"
        },
        {
          "html": "<p>Return <var>longestIndex</var>. </p>"
        }
      ]
    },
    {
      "name": "shorten a url’s path",
      "href": "https://url.spec.whatwg.org/#shorten-a-urls-path",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-local-lt=\"shorten\" data-noexport=\"\" id=\"shorten-a-urls-path\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">shorten a <var>url</var>’s path</dfn>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①\">Assert</a>: <var>url</var> does not have an <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-opaque-path\" id=\"ref-for-url-opaque-path③\">opaque path</a>. </p>"
        },
        {
          "html": "<p>Let <var>path</var> be <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path④\">path</a>. </p>"
        },
        {
          "html": "<p>If <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme①⓪\">scheme</a> is \"<code>file</code>\", <var>path</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size④\">size</a> is 1, and <var>path</var>[0] is a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#normalized-windows-drive-letter\" id=\"ref-for-normalized-windows-drive-letter①\">normalized Windows drive letter</a>, then\n return. </p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-remove\" id=\"ref-for-list-remove③\">Remove</a> <var>path</var>’s last item, if any. </p>"
        }
      ]
    },
    {
      "name": "relative-URL string",
      "href": "https://url.spec.whatwg.org/#relative-url-string",
      "html": "A <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-url-string\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative-URL string<span id=\"syntax-url-relative\"></span></dfn> must be one of the following,\nswitching on <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-base-url\" id=\"ref-for-concept-base-url⑦\">base URL</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme①①\">scheme</a>:",
      "rationale": ".switch",
      "steps": [
        {
          "operation": "switch",
          "steps": [
            {
              "case": "A special scheme that is not \"file\"",
              "html": "<p>a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#scheme-relative-special-url-string\" id=\"ref-for-scheme-relative-special-url-string①\">scheme-relative-special-URL string</a> </p>"
            },
            {
              "case": "\"file\"",
              "html": "<p>a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#scheme-relative-file-url-string\" id=\"ref-for-scheme-relative-file-url-string①\">scheme-relative-file-URL string</a> </p>"
            },
            {
              "case": "Otherwise",
              "html": "<p>a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#scheme-relative-url-string\" id=\"ref-for-scheme-relative-url-string\">scheme-relative-URL string</a> </p>"
            }
          ]
        }
      ]
    },
    {
      "name": "URL parser",
      "href": "https://url.spec.whatwg.org/#concept-url-parser",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-export=\"\" id=\"concept-url-parser\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">URL parser</dfn> takes a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#scalar-value-string\" id=\"ref-for-scalar-value-string⑧\">scalar value string</a> <var>input</var>, with an optional null or <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-base-url\" id=\"ref-for-concept-base-url①①\">base URL</a> <var>base</var> (default null) and an optional <a data-link-type=\"dfn\" href=\"https://encoding.spec.whatwg.org/#encoding\" id=\"ref-for-encoding①\">encoding</a> <var>encoding</var> (default <a data-link-type=\"dfn\" href=\"https://encoding.spec.whatwg.org/#utf-8\" id=\"ref-for-utf-8④\">UTF-8</a>), and then runs these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>url</var> be the result of running the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-basic-url-parser\" id=\"ref-for-concept-basic-url-parser①\">basic URL parser</a> on <var>input</var> with <var>base</var> and <var>encoding</var>. </p>"
        },
        {
          "html": "<p>If <var>url</var> is failure, return failure. </p>"
        },
        {
          "html": "<p>If <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme①②\">scheme</a> is not\n \"<code>blob</code>\", return <var>url</var>. </p>"
        },
        {
          "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-blob-entry\" id=\"ref-for-concept-url-blob-entry①\">blob URL entry</a> to the result of <a data-link-type=\"dfn\" href=\"https://w3c.github.io/FileAPI/#blob-url-resolve\" id=\"ref-for-blob-url-resolve\">resolving the blob URL</a> <var>url</var>, if that did not return\n failure, and null otherwise. </p>"
        },
        {
          "html": "<p>Return <var>url</var>. </p>"
        }
      ]
    },
    {
      "name": "basic URL parser",
      "href": "https://url.spec.whatwg.org/#concept-basic-url-parser",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-export=\"\" id=\"concept-basic-url-parser\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">basic URL parser</dfn> takes a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#scalar-value-string\" id=\"ref-for-scalar-value-string⑨\">scalar value string</a> <var>input</var>, with an optional null or <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-base-url\" id=\"ref-for-concept-base-url①②\">base URL</a> <var>base</var> (default null), an optional <a data-link-type=\"dfn\" href=\"https://encoding.spec.whatwg.org/#encoding\" id=\"ref-for-encoding②\">encoding</a> <var>encoding</var> (default <a data-link-type=\"dfn\" href=\"https://encoding.spec.whatwg.org/#utf-8\" id=\"ref-for-utf-8⑤\">UTF-8</a>), an optional <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url④①\">URL</a> <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"basic-url-parser-url\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><var>url</var></dfn>,\nand an optional state override <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"basic-url-parser-state-override\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><var>state override</var></dfn>,\nand then runs these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "If <var>url</var> is not given:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>url</var> to a new <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url④③\">URL</a>. </p>"
            },
            {
              "html": "<p>If <var>input</var> contains any leading or trailing <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#c0-control-or-space\" id=\"ref-for-c0-control-or-space\">C0 control or space</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#invalid-url-unit\" id=\"ref-for-invalid-url-unit②\">invalid-URL-unit</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error③①\">validation error</a>. </p>"
            },
            {
              "html": "<p>Remove any leading and trailing <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#c0-control-or-space\" id=\"ref-for-c0-control-or-space①\">C0 control or space</a> from <var>input</var>. </p>"
            }
          ]
        },
        {
          "html": "<p>If <var>input</var> contains any <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-tab-or-newline\" id=\"ref-for-ascii-tab-or-newline\">ASCII tab or newline</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#invalid-url-unit\" id=\"ref-for-invalid-url-unit③\">invalid-URL-unit</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error③②\">validation error</a>. </p>"
        },
        {
          "html": "<p>Remove all <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-tab-or-newline\" id=\"ref-for-ascii-tab-or-newline①\">ASCII tab or newline</a> from <var>input</var>. </p>"
        },
        {
          "html": "<p>Let <var>state</var> be <var>state override</var> if given, or <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#scheme-start-state\" id=\"ref-for-scheme-start-state\">scheme start state</a> otherwise. </p>"
        },
        {
          "html": "<p>Set <var>encoding</var> to the result of <a data-link-type=\"dfn\" href=\"https://encoding.spec.whatwg.org/#get-an-output-encoding\" id=\"ref-for-get-an-output-encoding\">getting an output encoding</a> from <var>encoding</var>. </p>"
        },
        {
          "html": "<p>Let <var>buffer</var> be the empty string. </p>"
        },
        {
          "html": "<p>Let <var>atSignSeen</var>, <var>insideBrackets</var>, and <var>passwordTokenSeen</var> be\n false. </p>"
        },
        {
          "html": "<p>Let <var>pointer</var> be a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#pointer\" id=\"ref-for-pointer⑧\">pointer</a> for <var>input</var>. </p>"
        },
        {
          "html": "Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑦\">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by 1 and continue with the state machine.",
          "rationale": ".switch",
          "steps": [
            {
              "operation": "switch",
              "steps": [
                {
                  "case": "scheme start state",
                  "html": "<p>Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑦\">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by 1 and continue with the state machine. </p>\n      <dl class=\"switch\">\n       <dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"no-scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">no scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-relative-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special relative or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-ignore-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority ignore slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host state</dfn> \n       </dt><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"hostname-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">hostname state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"port-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">port state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file host state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cannot-be-a-base-url-path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opaque path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"query-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">query state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"fragment-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fragment state</dfn> \n       </dt><dd>\n        \n      </dd></dl>",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c①⑨\">c</a> is an <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-alpha\" id=\"ref-for-ascii-alpha③\">ASCII alpha</a>,\n     append <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c②⓪\">c</a>, <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-lowercase\" id=\"ref-for-ascii-lowercase①\">lowercased</a>, to <var>buffer</var>, and\n     set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#scheme-state\" id=\"ref-for-scheme-state\">scheme state</a>. </p>"
                    },
                    {
                      "html": "<p>Otherwise, if <var>state override</var> is not given, set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#no-scheme-state\" id=\"ref-for-no-scheme-state\">no scheme state</a> and decrease <var>pointer</var> by 1. </p>"
                    },
                    {
                      "html": "<p>Otherwise, return failure. </p>"
                    }
                  ]
                },
                {
                  "case": "scheme state",
                  "html": "<p>Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑦\">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by 1 and continue with the state machine. </p>\n      <dl class=\"switch\">\n       <dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"no-scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">no scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-relative-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special relative or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-ignore-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority ignore slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host state</dfn> \n       </dt><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"hostname-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">hostname state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"port-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">port state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file host state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cannot-be-a-base-url-path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opaque path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"query-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">query state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"fragment-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fragment state</dfn> \n       </dt><dd>\n        \n      </dd></dl>",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c②①\">c</a> is an <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-alphanumeric\" id=\"ref-for-ascii-alphanumeric③\">ASCII alphanumeric</a>, U+002B (+), U+002D (-), or U+002E (.),\n     append <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c②②\">c</a>, <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-lowercase\" id=\"ref-for-ascii-lowercase②\">lowercased</a>, to <var>buffer</var>. </p>"
                    },
                    {
                      "html": "Otherwise, if <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c②③\">c</a> is U+003A (:), then:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "If <var>state override</var> is given, then:",
                          "rationale": "if",
                          "steps": [
                            {
                              "html": "<p>If <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme①③\">scheme</a> is a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#special-scheme\" id=\"ref-for-special-scheme①⓪\">special scheme</a> and <var>buffer</var> is not a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#special-scheme\" id=\"ref-for-special-scheme①①\">special scheme</a>, then return. </p>"
                            },
                            {
                              "html": "<p>If <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme①④\">scheme</a> is not a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#special-scheme\" id=\"ref-for-special-scheme①②\">special scheme</a> and <var>buffer</var> is a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#special-scheme\" id=\"ref-for-special-scheme①③\">special scheme</a>, then return. </p>"
                            },
                            {
                              "html": "<p>If <var>url</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#include-credentials\" id=\"ref-for-include-credentials①\">includes credentials</a> or has a non-null <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port①\">port</a>,\n         and <var>buffer</var> is \"<code>file</code>\", then return. </p>"
                            },
                            {
                              "html": "<p>If <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme①⑤\">scheme</a> is \"<code>file</code>\" and its <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host⑦\">host</a> is an <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#empty-host\" id=\"ref-for-empty-host⑤\">empty host</a>, then return. </p>"
                            }
                          ]
                        },
                        {
                          "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme①⑥\">scheme</a> to <var>buffer</var>. </p>"
                        },
                        {
                          "html": "If <var>state override</var> is given, then:",
                          "rationale": "if",
                          "steps": [
                            {
                              "html": "<p>If <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port②\">port</a> is <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme①⑦\">scheme</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#default-port\" id=\"ref-for-default-port②\">default port</a>, then set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port③\">port</a> to null. </p>"
                            },
                            {
                              "html": "<p>Return. </p>"
                            }
                          ]
                        },
                        {
                          "html": "<p>Set <var>buffer</var> to the empty string. </p>"
                        },
                        {
                          "html": "If <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme①⑧\">scheme</a> is \"<code>file</code>\", then:",
                          "rationale": "if",
                          "steps": [
                            {
                              "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#remaining\" id=\"ref-for-remaining④\">remaining</a> does not start with \"<code>//</code>\", <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#special-scheme-missing-following-solidus\" id=\"ref-for-special-scheme-missing-following-solidus\">special-scheme-missing-following-solidus</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error③③\">validation error</a>. </p>"
                            },
                            {
                              "html": "<p>Set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#file-state\" id=\"ref-for-file-state\">file state</a>. </p>"
                            }
                          ]
                        },
                        {
                          "html": "Otherwise, if <var>url</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#is-special\" id=\"ref-for-is-special②\">is special</a>, <var>base</var> is non-null, and <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme①⑨\">scheme</a> is <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme②⓪\">scheme</a>:",
                          "rationale": "assert",
                          "steps": [
                            {
                              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert②\">Assert</a>: <var>base</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#is-special\" id=\"ref-for-is-special③\">is special</a> (and therefore does not have\n         an <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-opaque-path\" id=\"ref-for-url-opaque-path④\">opaque path</a>). </p>"
                            },
                            {
                              "html": "<p>Set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#special-relative-or-authority-state\" id=\"ref-for-special-relative-or-authority-state\">special relative or authority state</a>. </p>"
                            }
                          ]
                        },
                        {
                          "html": "<p>Otherwise, if <var>url</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#is-special\" id=\"ref-for-is-special④\">is special</a>, set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#special-authority-slashes-state\" id=\"ref-for-special-authority-slashes-state\">special authority slashes state</a>. </p>"
                        },
                        {
                          "html": "<p>Otherwise, if <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#remaining\" id=\"ref-for-remaining⑤\">remaining</a> starts with an U+002F (/), set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#path-or-authority-state\" id=\"ref-for-path-or-authority-state\">path or authority state</a> and increase <var>pointer</var> by 1. </p>"
                        },
                        {
                          "html": "<p>Otherwise, set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path⑤\">path</a> to the empty string and set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#cannot-be-a-base-url-path-state\" id=\"ref-for-cannot-be-a-base-url-path-state\">opaque path state</a>. </p>"
                        }
                      ]
                    },
                    {
                      "html": "<p>Otherwise, if <var>state override</var> is not given, set <var>buffer</var> to the empty string, <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#no-scheme-state\" id=\"ref-for-no-scheme-state①\">no scheme state</a>, and start over (from the first code point\n     in <var>input</var>). </p>"
                    },
                    {
                      "html": "<p>Otherwise, return failure. </p>"
                    }
                  ]
                },
                {
                  "case": "no scheme state",
                  "html": "<p>Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑦\">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by 1 and continue with the state machine. </p>\n      <dl class=\"switch\">\n       <dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"no-scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">no scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-relative-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special relative or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-ignore-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority ignore slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host state</dfn> \n       </dt><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"hostname-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">hostname state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"port-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">port state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file host state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cannot-be-a-base-url-path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opaque path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"query-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">query state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"fragment-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fragment state</dfn> \n       </dt><dd>\n        \n      </dd></dl>",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <var>base</var> is null, or <var>base</var> has an <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-opaque-path\" id=\"ref-for-url-opaque-path⑤\">opaque path</a> and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c②④\">c</a> is not U+0023 (#), <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#missing-scheme-non-relative-url\" id=\"ref-for-missing-scheme-non-relative-url\">missing-scheme-non-relative-URL</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error③④\">validation error</a>,\n     return failure. </p>"
                    },
                    {
                      "html": "<p>Otherwise, if <var>base</var> has an <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-opaque-path\" id=\"ref-for-url-opaque-path⑥\">opaque path</a> and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c②⑤\">c</a> is\n     U+0023 (#), set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme②①\">scheme</a> to <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme②②\">scheme</a>, <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path⑥\">path</a> to <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path⑦\">path</a>, <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query③\">query</a> to <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query④\">query</a>, <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-fragment\" id=\"ref-for-concept-url-fragment②\">fragment</a> to the empty string, and set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#fragment-state\" id=\"ref-for-fragment-state\">fragment state</a>. </p>"
                    },
                    {
                      "html": "<p>Otherwise, if <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme②③\">scheme</a> is not \"<code>file</code>\", set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#relative-state\" id=\"ref-for-relative-state\">relative state</a> and decrease <var>pointer</var> by 1. </p>"
                    },
                    {
                      "html": "<p>Otherwise, set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#file-state\" id=\"ref-for-file-state①\">file state</a> and decrease <var>pointer</var> by 1. </p>"
                    }
                  ]
                },
                {
                  "case": "special relative or authority state",
                  "html": "<p>Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑦\">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by 1 and continue with the state machine. </p>\n      <dl class=\"switch\">\n       <dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"no-scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">no scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-relative-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special relative or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-ignore-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority ignore slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host state</dfn> \n       </dt><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"hostname-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">hostname state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"port-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">port state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file host state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cannot-be-a-base-url-path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opaque path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"query-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">query state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"fragment-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fragment state</dfn> \n       </dt><dd>\n        \n      </dd></dl>",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c②⑥\">c</a> is U+002F (/) and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#remaining\" id=\"ref-for-remaining⑥\">remaining</a> starts with U+002F (/), then set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#special-authority-ignore-slashes-state\" id=\"ref-for-special-authority-ignore-slashes-state\">special authority ignore slashes state</a> and increase <var>pointer</var> by 1. </p>"
                    },
                    {
                      "html": "<p>Otherwise, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#special-scheme-missing-following-solidus\" id=\"ref-for-special-scheme-missing-following-solidus①\">special-scheme-missing-following-solidus</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error③⑤\">validation error</a>, set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#relative-state\" id=\"ref-for-relative-state①\">relative state</a> and decrease <var>pointer</var> by 1. </p>"
                    }
                  ]
                },
                {
                  "case": "path or authority state",
                  "html": "<p>Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑦\">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by 1 and continue with the state machine. </p>\n      <dl class=\"switch\">\n       <dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"no-scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">no scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-relative-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special relative or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-ignore-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority ignore slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host state</dfn> \n       </dt><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"hostname-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">hostname state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"port-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">port state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file host state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cannot-be-a-base-url-path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opaque path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"query-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">query state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"fragment-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fragment state</dfn> \n       </dt><dd>\n        \n      </dd></dl>",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c②⑦\">c</a> is U+002F (/), then set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#authority-state\" id=\"ref-for-authority-state\">authority state</a>. </p>"
                    },
                    {
                      "html": "<p>Otherwise, set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#path-state\" id=\"ref-for-path-state\">path state</a>, and decrease <var>pointer</var> by 1. </p>"
                    }
                  ]
                },
                {
                  "case": "relative state",
                  "html": "<p>Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑦\">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by 1 and continue with the state machine. </p>\n      <dl class=\"switch\">\n       <dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"no-scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">no scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-relative-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special relative or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-ignore-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority ignore slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host state</dfn> \n       </dt><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"hostname-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">hostname state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"port-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">port state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file host state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cannot-be-a-base-url-path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opaque path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"query-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">query state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"fragment-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fragment state</dfn> \n       </dt><dd>\n        \n      </dd></dl>",
                  "rationale": "assert",
                  "steps": [
                    {
                      "html": "<p>Assert: <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme②④\">scheme</a> is not \"<code>file</code>\". </p>"
                    },
                    {
                      "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme②⑤\">scheme</a> to <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme②⑥\">scheme</a>. </p>"
                    },
                    {
                      "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c②⑧\">c</a> is U+002F (/), then set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#relative-slash-state\" id=\"ref-for-relative-slash-state\">relative slash state</a>. </p>"
                    },
                    {
                      "html": "<p>Otherwise, if <var>url</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#is-special\" id=\"ref-for-is-special⑤\">is special</a> and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c②⑨\">c</a> is U+005C (\\), <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#invalid-reverse-solidus\" id=\"ref-for-invalid-reverse-solidus\">invalid-reverse-solidus</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error③⑥\">validation error</a>, set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#relative-slash-state\" id=\"ref-for-relative-slash-state①\">relative slash state</a>. </p>"
                    },
                    {
                      "html": "Otherwise:",
                      "rationale": "set",
                      "steps": [
                        {
                          "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-username\" id=\"ref-for-concept-url-username③\">username</a> to <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-username\" id=\"ref-for-concept-url-username④\">username</a>, <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-password\" id=\"ref-for-concept-url-password③\">password</a> to <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-password\" id=\"ref-for-concept-url-password④\">password</a>, <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host⑧\">host</a> to <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host⑨\">host</a>, <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port④\">port</a> to <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port⑤\">port</a>, <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path⑧\">path</a> to a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-clone\" id=\"ref-for-list-clone\">clone</a> of <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path⑨\">path</a>, and <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query⑤\">query</a> to <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query⑥\">query</a>. </p>"
                        },
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c③⓪\">c</a> is U+003F (?), then set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query⑦\">query</a> to the empty\n       string, and <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#query-state\" id=\"ref-for-query-state\">query state</a>. </p>"
                        },
                        {
                          "html": "<p>Otherwise, if <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c③①\">c</a> is U+0023 (#), set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-fragment\" id=\"ref-for-concept-url-fragment③\">fragment</a> to\n       the empty string and <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#fragment-state\" id=\"ref-for-fragment-state①\">fragment state</a>. </p>"
                        },
                        {
                          "html": "Otherwise, if <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c③②\">c</a> is not the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑧\">EOF code point</a>:",
                          "rationale": "set",
                          "steps": [
                            {
                              "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query⑧\">query</a> to null. </p>"
                            },
                            {
                              "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#shorten-a-urls-path\" id=\"ref-for-shorten-a-urls-path\">Shorten</a> <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path①⓪\">path</a>. </p>"
                            },
                            {
                              "html": "<p>Set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#path-state\" id=\"ref-for-path-state①\">path state</a> and decrease <var>pointer</var> by 1. </p>"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "case": "relative slash state",
                  "html": "<p>Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑦\">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by 1 and continue with the state machine. </p>\n      <dl class=\"switch\">\n       <dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"no-scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">no scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-relative-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special relative or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-ignore-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority ignore slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host state</dfn> \n       </dt><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"hostname-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">hostname state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"port-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">port state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file host state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cannot-be-a-base-url-path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opaque path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"query-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">query state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"fragment-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fragment state</dfn> \n       </dt><dd>\n        \n      </dd></dl>",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "If <var>url</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#is-special\" id=\"ref-for-is-special⑥\">is special</a> and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c③③\">c</a> is U+002F (/) or U+005C (\\), then:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c③④\">c</a> is U+005C (\\), <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#invalid-reverse-solidus\" id=\"ref-for-invalid-reverse-solidus①\">invalid-reverse-solidus</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error③⑦\">validation error</a>. </p>"
                        },
                        {
                          "html": "<p>Set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#special-authority-ignore-slashes-state\" id=\"ref-for-special-authority-ignore-slashes-state①\">special authority ignore slashes state</a>. </p>"
                        }
                      ]
                    },
                    {
                      "html": "<p>Otherwise, if <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c③⑤\">c</a> is U+002F (/), then set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#authority-state\" id=\"ref-for-authority-state①\">authority state</a>. </p>"
                    },
                    {
                      "html": "<p>Otherwise, set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-username\" id=\"ref-for-concept-url-username⑤\">username</a> to <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-username\" id=\"ref-for-concept-url-username⑥\">username</a>, <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-password\" id=\"ref-for-concept-url-password⑤\">password</a> to <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-password\" id=\"ref-for-concept-url-password⑥\">password</a>, <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host①⓪\">host</a> to <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host①①\">host</a>, <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port⑥\">port</a> to <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port⑦\">port</a>, <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#path-state\" id=\"ref-for-path-state②\">path state</a>, and then, decrease <var>pointer</var> by 1. </p>"
                    }
                  ]
                },
                {
                  "case": "special authority slashes state",
                  "html": "<p>Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑦\">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by 1 and continue with the state machine. </p>\n      <dl class=\"switch\">\n       <dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"no-scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">no scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-relative-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special relative or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-ignore-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority ignore slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host state</dfn> \n       </dt><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"hostname-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">hostname state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"port-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">port state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file host state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cannot-be-a-base-url-path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opaque path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"query-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">query state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"fragment-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fragment state</dfn> \n       </dt><dd>\n        \n      </dd></dl>",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c③⑥\">c</a> is U+002F (/) and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#remaining\" id=\"ref-for-remaining⑦\">remaining</a> starts with U+002F (/), then set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#special-authority-ignore-slashes-state\" id=\"ref-for-special-authority-ignore-slashes-state②\">special authority ignore slashes state</a> and increase <var>pointer</var> by 1. </p>"
                    },
                    {
                      "html": "<p>Otherwise, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#special-scheme-missing-following-solidus\" id=\"ref-for-special-scheme-missing-following-solidus②\">special-scheme-missing-following-solidus</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error③⑧\">validation error</a>, set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#special-authority-ignore-slashes-state\" id=\"ref-for-special-authority-ignore-slashes-state③\">special authority ignore slashes state</a> and decrease <var>pointer</var> by 1. </p>"
                    }
                  ]
                },
                {
                  "case": "special authority ignore slashes state",
                  "html": "<p>Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑦\">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by 1 and continue with the state machine. </p>\n      <dl class=\"switch\">\n       <dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"no-scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">no scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-relative-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special relative or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-ignore-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority ignore slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host state</dfn> \n       </dt><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"hostname-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">hostname state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"port-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">port state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file host state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cannot-be-a-base-url-path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opaque path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"query-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">query state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"fragment-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fragment state</dfn> \n       </dt><dd>\n        \n      </dd></dl>",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c③⑦\">c</a> is neither U+002F (/) nor U+005C (\\), then set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#authority-state\" id=\"ref-for-authority-state②\">authority state</a> and decrease <var>pointer</var> by 1. </p>"
                    },
                    {
                      "html": "<p>Otherwise, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#special-scheme-missing-following-solidus\" id=\"ref-for-special-scheme-missing-following-solidus③\">special-scheme-missing-following-solidus</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error③⑨\">validation error</a>. </p>"
                    }
                  ]
                },
                {
                  "case": "authority state",
                  "html": "<p>Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑦\">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by 1 and continue with the state machine. </p>\n      <dl class=\"switch\">\n       <dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"no-scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">no scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-relative-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special relative or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-ignore-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority ignore slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host state</dfn> \n       </dt><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"hostname-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">hostname state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"port-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">port state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file host state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cannot-be-a-base-url-path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opaque path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"query-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">query state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"fragment-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fragment state</dfn> \n       </dt><dd>\n        \n      </dd></dl>",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c③⑧\">c</a> is U+0040 (@), then:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#invalid-credentials\" id=\"ref-for-invalid-credentials\">Invalid-credentials</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error④⓪\">validation error</a>. </p>"
                        },
                        {
                          "html": "<p>If <var>atSignSeen</var> is true, then prepend \"<code>%40</code>\" to <var>buffer</var>. </p>"
                        },
                        {
                          "html": "<p>Set <var>atSignSeen</var> to true. </p>"
                        },
                        {
                          "html": "For each <var>codePoint</var> in <var>buffer</var>:",
                          "rationale": "if",
                          "steps": [
                            {
                              "html": "<p>If <var>codePoint</var> is U+003A (:) and <var>passwordTokenSeen</var> is false,\n         then set <var>passwordTokenSeen</var> to true and <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue④\">continue</a>. </p>"
                            },
                            {
                              "html": "<p>Let <var>encodedCodePoints</var> be the result of running <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#utf-8-percent-encode\" id=\"ref-for-utf-8-percent-encode②\">UTF-8 percent-encode</a> <var>codePoint</var> using the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#userinfo-percent-encode-set\" id=\"ref-for-userinfo-percent-encode-set⑥\">userinfo percent-encode set</a>. </p>"
                            },
                            {
                              "html": "<p>If <var>passwordTokenSeen</var> is true, then append <var>encodedCodePoints</var> to <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-password\" id=\"ref-for-concept-url-password⑦\">password</a>. </p>"
                            },
                            {
                              "html": "<p>Otherwise, append <var>encodedCodePoints</var> to <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-username\" id=\"ref-for-concept-url-username⑦\">username</a>. </p>"
                            }
                          ]
                        },
                        {
                          "html": "<p>Set <var>buffer</var> to the empty string. </p>"
                        }
                      ]
                    },
                    {
                      "html": "then:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If <var>atSignSeen</var> is true and <var>buffer</var> is the empty string, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#host-missing\" id=\"ref-for-host-missing\">host-missing</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error④①\">validation error</a>, return failure. </p>"
                        },
                        {
                          "html": "<p>Decrease <var>pointer</var> by <var>buffer</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string-code-point-length\" id=\"ref-for-string-code-point-length①\">code point length</a> + 1, set <var>buffer</var> to the empty string, and set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#host-state\" id=\"ref-for-host-state\">host state</a>. </p>"
                        }
                      ]
                    },
                    {
                      "html": "<p>Otherwise, append <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c④①\">c</a> to <var>buffer</var>. </p>"
                    }
                  ]
                },
                {
                  "case": "host state",
                  "html": "<p>Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑦\">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by 1 and continue with the state machine. </p>\n      <dl class=\"switch\">\n       <dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"no-scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">no scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-relative-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special relative or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-ignore-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority ignore slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host state</dfn> \n       </dt><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"hostname-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">hostname state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"port-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">port state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file host state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cannot-be-a-base-url-path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opaque path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"query-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">query state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"fragment-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fragment state</dfn> \n       </dt><dd>\n        \n      </dd></dl>",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <var>state override</var> is given and <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme②⑦\">scheme</a> is\n     \"<code>file</code>\", then decrease <var>pointer</var> by 1 and set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#file-host-state\" id=\"ref-for-file-host-state\">file host state</a>. </p>"
                    },
                    {
                      "html": "Otherwise, if <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c④②\">c</a> is U+003A (:) and <var>insideBrackets</var> is false, then:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If <var>buffer</var> is the empty string, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#host-missing\" id=\"ref-for-host-missing①\">host-missing</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error④②\">validation error</a>,\n       return failure. </p>"
                        },
                        {
                          "html": "<p>If <var>state override</var> is given and <var>state override</var> is <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#hostname-state\" id=\"ref-for-hostname-state\">hostname state</a>, then return. </p>"
                        },
                        {
                          "html": "<p>Let <var>host</var> be the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-host-parser\" id=\"ref-for-concept-host-parser⑧\">host parsing</a> <var>buffer</var> with <var>url</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#is-not-special\" id=\"ref-for-is-not-special①\">is not special</a>. </p>"
                        },
                        {
                          "html": "<p>If <var>host</var> is failure, then return failure. </p>"
                        },
                        {
                          "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host①②\">host</a> to <var>host</var>, <var>buffer</var> to the empty string,\n       and <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#port-state\" id=\"ref-for-port-state\">port state</a>. </p>"
                        }
                      ]
                    },
                    {
                      "html": "then decrease <var>pointer</var> by 1, and then:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If <var>url</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#is-special\" id=\"ref-for-is-special⑨\">is special</a> and <var>buffer</var> is the empty string, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#host-missing\" id=\"ref-for-host-missing②\">host-missing</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error④③\">validation error</a>, return failure. </p>"
                        },
                        {
                          "html": "<p>Otherwise, if <var>state override</var> is given, <var>buffer</var> is the empty\n       string, and either <var>url</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#include-credentials\" id=\"ref-for-include-credentials②\">includes credentials</a> or <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port⑧\">port</a> is non-null, return. </p>"
                        },
                        {
                          "html": "<p>Let <var>host</var> be the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-host-parser\" id=\"ref-for-concept-host-parser⑨\">host parsing</a> <var>buffer</var> with <var>url</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#is-not-special\" id=\"ref-for-is-not-special②\">is not special</a>. </p>"
                        },
                        {
                          "html": "<p>If <var>host</var> is failure, then return failure. </p>"
                        },
                        {
                          "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host①③\">host</a> to <var>host</var>, <var>buffer</var> to the empty string,\n       and <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#path-start-state\" id=\"ref-for-path-start-state\">path start state</a>. </p>"
                        },
                        {
                          "html": "<p>If <var>state override</var> is given, then return. </p>"
                        }
                      ]
                    },
                    {
                      "html": "Otherwise:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c④⑤\">c</a> is U+005B ([), then set <var>insideBrackets</var> to true. </p>"
                        },
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c④⑥\">c</a> is U+005D (]), then set <var>insideBrackets</var> to false. </p>"
                        },
                        {
                          "html": "<p>Append <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c④⑦\">c</a> to <var>buffer</var>. </p>"
                        }
                      ]
                    }
                  ]
                },
                {
                  "case": "hostname state",
                  "html": "<p>Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑦\">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by 1 and continue with the state machine. </p>\n      <dl class=\"switch\">\n       <dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"no-scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">no scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-relative-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special relative or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-ignore-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority ignore slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host state</dfn> \n       </dt><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"hostname-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">hostname state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"port-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">port state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file host state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cannot-be-a-base-url-path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opaque path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"query-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">query state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"fragment-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fragment state</dfn> \n       </dt><dd>\n        \n      </dd></dl>",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <var>state override</var> is given and <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme②⑦\">scheme</a> is\n     \"<code>file</code>\", then decrease <var>pointer</var> by 1 and set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#file-host-state\" id=\"ref-for-file-host-state\">file host state</a>. </p>"
                    },
                    {
                      "html": "Otherwise, if <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c④②\">c</a> is U+003A (:) and <var>insideBrackets</var> is false, then:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If <var>buffer</var> is the empty string, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#host-missing\" id=\"ref-for-host-missing①\">host-missing</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error④②\">validation error</a>,\n       return failure. </p>"
                        },
                        {
                          "html": "<p>If <var>state override</var> is given and <var>state override</var> is <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#hostname-state\" id=\"ref-for-hostname-state\">hostname state</a>, then return. </p>"
                        },
                        {
                          "html": "<p>Let <var>host</var> be the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-host-parser\" id=\"ref-for-concept-host-parser⑧\">host parsing</a> <var>buffer</var> with <var>url</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#is-not-special\" id=\"ref-for-is-not-special①\">is not special</a>. </p>"
                        },
                        {
                          "html": "<p>If <var>host</var> is failure, then return failure. </p>"
                        },
                        {
                          "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host①②\">host</a> to <var>host</var>, <var>buffer</var> to the empty string,\n       and <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#port-state\" id=\"ref-for-port-state\">port state</a>. </p>"
                        }
                      ]
                    },
                    {
                      "html": "then decrease <var>pointer</var> by 1, and then:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If <var>url</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#is-special\" id=\"ref-for-is-special⑨\">is special</a> and <var>buffer</var> is the empty string, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#host-missing\" id=\"ref-for-host-missing②\">host-missing</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error④③\">validation error</a>, return failure. </p>"
                        },
                        {
                          "html": "<p>Otherwise, if <var>state override</var> is given, <var>buffer</var> is the empty\n       string, and either <var>url</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#include-credentials\" id=\"ref-for-include-credentials②\">includes credentials</a> or <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port⑧\">port</a> is non-null, return. </p>"
                        },
                        {
                          "html": "<p>Let <var>host</var> be the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-host-parser\" id=\"ref-for-concept-host-parser⑨\">host parsing</a> <var>buffer</var> with <var>url</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#is-not-special\" id=\"ref-for-is-not-special②\">is not special</a>. </p>"
                        },
                        {
                          "html": "<p>If <var>host</var> is failure, then return failure. </p>"
                        },
                        {
                          "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host①③\">host</a> to <var>host</var>, <var>buffer</var> to the empty string,\n       and <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#path-start-state\" id=\"ref-for-path-start-state\">path start state</a>. </p>"
                        },
                        {
                          "html": "<p>If <var>state override</var> is given, then return. </p>"
                        }
                      ]
                    },
                    {
                      "html": "Otherwise:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c④⑤\">c</a> is U+005B ([), then set <var>insideBrackets</var> to true. </p>"
                        },
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c④⑥\">c</a> is U+005D (]), then set <var>insideBrackets</var> to false. </p>"
                        },
                        {
                          "html": "<p>Append <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c④⑦\">c</a> to <var>buffer</var>. </p>"
                        }
                      ]
                    }
                  ]
                },
                {
                  "case": "port state",
                  "html": "<p>Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑦\">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by 1 and continue with the state machine. </p>\n      <dl class=\"switch\">\n       <dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"no-scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">no scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-relative-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special relative or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-ignore-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority ignore slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host state</dfn> \n       </dt><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"hostname-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">hostname state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"port-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">port state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file host state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cannot-be-a-base-url-path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opaque path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"query-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">query state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"fragment-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fragment state</dfn> \n       </dt><dd>\n        \n      </dd></dl>",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c④⑧\">c</a> is an <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-digit\" id=\"ref-for-ascii-digit⑦\">ASCII digit</a>, append <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c④⑨\">c</a> to <var>buffer</var>. </p>"
                    },
                    {
                      "html": "then:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "If <var>buffer</var> is not the empty string, then:",
                          "rationale": "let",
                          "steps": [
                            {
                              "html": "<p>Let <var>port</var> be the mathematical integer value that is represented\n         by <var>buffer</var> in radix-10 using <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-digit\" id=\"ref-for-ascii-digit⑧\">ASCII digits</a> for digits with values\n         0 through 9. </p>"
                            },
                            {
                              "html": "<p>If <var>port</var> is not a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#16-bit-unsigned-integer\" id=\"ref-for-16-bit-unsigned-integer③\">16-bit unsigned integer</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#port-out-of-range\" id=\"ref-for-port-out-of-range\">port-out-of-range</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error④④\">validation error</a>, return failure. </p>"
                            },
                            {
                              "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port⑨\">port</a> to null, if <var>port</var> is <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme②⑧\">scheme</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#default-port\" id=\"ref-for-default-port③\">default port</a>; otherwise to <var>port</var>. </p>"
                            },
                            {
                              "html": "<p>Set <var>buffer</var> to the empty string. </p>"
                            }
                          ]
                        },
                        {
                          "html": "<p>If <var>state override</var> is given, then return. </p>"
                        },
                        {
                          "html": "<p>Set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#path-start-state\" id=\"ref-for-path-start-state①\">path start state</a> and decrease <var>pointer</var> by 1. </p>"
                        }
                      ]
                    },
                    {
                      "html": "<p>Otherwise, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#port-invalid\" id=\"ref-for-port-invalid\">port-invalid</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error④⑤\">validation error</a>, return failure. </p>"
                    }
                  ]
                },
                {
                  "case": "file state",
                  "html": "<p>Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑦\">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by 1 and continue with the state machine. </p>\n      <dl class=\"switch\">\n       <dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"no-scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">no scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-relative-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special relative or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-ignore-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority ignore slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host state</dfn> \n       </dt><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"hostname-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">hostname state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"port-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">port state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file host state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cannot-be-a-base-url-path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opaque path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"query-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">query state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"fragment-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fragment state</dfn> \n       </dt><dd>\n        \n      </dd></dl>",
                  "rationale": "set",
                  "steps": [
                    {
                      "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme②⑨\">scheme</a> to \"<code>file</code>\". </p>"
                    },
                    {
                      "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host①④\">host</a> to the empty string. </p>"
                    },
                    {
                      "html": "If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑤②\">c</a> is U+002F (/) or U+005C (\\), then:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑤③\">c</a> is U+005C (\\), <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#invalid-reverse-solidus\" id=\"ref-for-invalid-reverse-solidus②\">invalid-reverse-solidus</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error④⑥\">validation error</a>. </p>"
                        },
                        {
                          "html": "<p>Set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#file-slash-state\" id=\"ref-for-file-slash-state\">file slash state</a>. </p>"
                        }
                      ]
                    },
                    {
                      "html": "Otherwise, if <var>base</var> is non-null and <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme③⓪\">scheme</a> is\n      \"<code>file</code>\":",
                      "rationale": "set",
                      "steps": [
                        {
                          "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host①⑤\">host</a> to <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host①⑥\">host</a>, <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path①①\">path</a> to a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-clone\" id=\"ref-for-list-clone①\">clone</a> of <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path①②\">path</a>, and <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query⑨\">query</a> to <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query①⓪\">query</a>. </p>"
                        },
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑤④\">c</a> is U+003F (?), then set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query①①\">query</a> to the empty\n       string and <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#query-state\" id=\"ref-for-query-state①\">query state</a>. </p>"
                        },
                        {
                          "html": "<p>Otherwise, if <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑤⑤\">c</a> is U+0023 (#), set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-fragment\" id=\"ref-for-concept-url-fragment④\">fragment</a> to\n       the empty string and <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#fragment-state\" id=\"ref-for-fragment-state②\">fragment state</a>. </p>"
                        },
                        {
                          "html": "Otherwise, if <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑤⑥\">c</a> is not the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point①②\">EOF code point</a>:",
                          "rationale": "set",
                          "steps": [
                            {
                              "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query①②\">query</a> to null. </p>"
                            },
                            {
                              "html": "<p>If the <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-point-substring-to-the-end-of-the-string\" id=\"ref-for-code-point-substring-to-the-end-of-the-string①\">code point substring</a> from <var>pointer</var> to the end of <var>input</var> does not <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#start-with-a-windows-drive-letter\" id=\"ref-for-start-with-a-windows-drive-letter①\">start with a Windows drive letter</a>, then <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#shorten-a-urls-path\" id=\"ref-for-shorten-a-urls-path①\">shorten</a> <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path①③\">path</a>. </p>"
                            },
                            {
                              "html": "Otherwise:",
                              "rationale": "set",
                              "steps": [
                                {
                                  "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#file-invalid-windows-drive-letter\" id=\"ref-for-file-invalid-windows-drive-letter\">File-invalid-Windows-drive-letter</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error④⑦\">validation error</a>. </p>"
                                },
                                {
                                  "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path①④\">path</a> to « ». </p>"
                                }
                              ]
                            },
                            {
                              "html": "<p>Set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#path-state\" id=\"ref-for-path-state③\">path state</a> and decrease <var>pointer</var> by 1. </p>"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "html": "<p>Otherwise, set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#path-state\" id=\"ref-for-path-state④\">path state</a>, and decrease <var>pointer</var> by 1. </p>"
                    }
                  ]
                },
                {
                  "case": "file slash state",
                  "html": "<p>Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑦\">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by 1 and continue with the state machine. </p>\n      <dl class=\"switch\">\n       <dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"no-scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">no scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-relative-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special relative or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-ignore-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority ignore slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host state</dfn> \n       </dt><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"hostname-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">hostname state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"port-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">port state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file host state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cannot-be-a-base-url-path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opaque path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"query-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">query state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"fragment-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fragment state</dfn> \n       </dt><dd>\n        \n      </dd></dl>",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑤⑦\">c</a> is U+002F (/) or U+005C (\\), then:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑤⑧\">c</a> is U+005C (\\), <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#invalid-reverse-solidus\" id=\"ref-for-invalid-reverse-solidus③\">invalid-reverse-solidus</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error④⑧\">validation error</a>. </p>"
                        },
                        {
                          "html": "<p>Set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#file-host-state\" id=\"ref-for-file-host-state①\">file host state</a>. </p>"
                        }
                      ]
                    },
                    {
                      "html": "Otherwise:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "If <var>base</var> is non-null and <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme③①\">scheme</a> is\n        \"<code>file</code>\", then:",
                          "rationale": "set",
                          "steps": [
                            {
                              "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host①⑦\">host</a> to <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host①⑧\">host</a>. </p>"
                            },
                            {
                              "html": "<p>If the <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-point-substring-to-the-end-of-the-string\" id=\"ref-for-code-point-substring-to-the-end-of-the-string②\">code point substring</a> from <var>pointer</var> to the end of <var>input</var> does not <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#start-with-a-windows-drive-letter\" id=\"ref-for-start-with-a-windows-drive-letter②\">start with a Windows drive letter</a> and <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path①⑤\">path</a>[0] is a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#normalized-windows-drive-letter\" id=\"ref-for-normalized-windows-drive-letter②\">normalized Windows drive letter</a>, then <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append①\">append</a> <var>base</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path①⑥\">path</a>[0] to <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path①⑦\">path</a>. </p>"
                            }
                          ]
                        },
                        {
                          "html": "<p>Set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#path-state\" id=\"ref-for-path-state⑤\">path state</a>, and decrease <var>pointer</var> by 1. </p>"
                        }
                      ]
                    }
                  ]
                },
                {
                  "case": "file host state",
                  "html": "<p>Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑦\">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by 1 and continue with the state machine. </p>\n      <dl class=\"switch\">\n       <dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"no-scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">no scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-relative-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special relative or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-ignore-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority ignore slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host state</dfn> \n       </dt><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"hostname-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">hostname state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"port-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">port state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file host state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cannot-be-a-base-url-path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opaque path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"query-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">query state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"fragment-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fragment state</dfn> \n       </dt><dd>\n        \n      </dd></dl>",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑤⑨\">c</a> is the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point①③\">EOF code point</a>, U+002F (/), U+005C (\\), U+003F (?), or\n      U+0023 (#), then decrease <var>pointer</var> by 1 and then:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If <var>state override</var> is not given and <var>buffer</var> is a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#windows-drive-letter\" id=\"ref-for-windows-drive-letter③\">Windows drive letter</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#file-invalid-windows-drive-letter-host\" id=\"ref-for-file-invalid-windows-drive-letter-host\">file-invalid-Windows-drive-letter-host</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error④⑨\">validation error</a>, set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#path-state\" id=\"ref-for-path-state⑥\">path state</a>. </p>"
                        },
                        {
                          "html": "Otherwise, if <var>buffer</var> is the empty string, then:",
                          "rationale": "set",
                          "steps": [
                            {
                              "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host①⑨\">host</a> to the empty string. </p>"
                            },
                            {
                              "html": "<p>If <var>state override</var> is given, then return. </p>"
                            },
                            {
                              "html": "<p>Set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#path-start-state\" id=\"ref-for-path-start-state②\">path start state</a>. </p>"
                            }
                          ]
                        },
                        {
                          "html": "Otherwise, run these steps:",
                          "rationale": "let",
                          "steps": [
                            {
                              "html": "<p>Let <var>host</var> be the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-host-parser\" id=\"ref-for-concept-host-parser①⓪\">host parsing</a> <var>buffer</var> with <var>url</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#is-not-special\" id=\"ref-for-is-not-special③\">is not special</a>. </p>"
                            },
                            {
                              "html": "<p>If <var>host</var> is failure, then return failure. </p>"
                            },
                            {
                              "html": "<p>If <var>host</var> is \"<code title=\"\">localhost</code>\", then set <var>host</var> to\n         the empty string. </p>"
                            },
                            {
                              "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host②⓪\">host</a> to <var>host</var>. </p>"
                            },
                            {
                              "html": "<p>If <var>state override</var> is given, then return. </p>"
                            },
                            {
                              "html": "<p>Set <var>buffer</var> to the empty string and <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#path-start-state\" id=\"ref-for-path-start-state③\">path start state</a>. </p>"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "html": "<p>Otherwise, append <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑥⓪\">c</a> to <var>buffer</var>. </p>"
                    }
                  ]
                },
                {
                  "case": "path start state",
                  "html": "<p>Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑦\">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by 1 and continue with the state machine. </p>\n      <dl class=\"switch\">\n       <dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"no-scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">no scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-relative-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special relative or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-ignore-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority ignore slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host state</dfn> \n       </dt><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"hostname-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">hostname state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"port-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">port state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file host state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cannot-be-a-base-url-path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opaque path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"query-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">query state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"fragment-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fragment state</dfn> \n       </dt><dd>\n        \n      </dd></dl>",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "If <var>url</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#is-special\" id=\"ref-for-is-special①①\">is special</a>, then:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑥①\">c</a> is U+005C (\\), <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#invalid-reverse-solidus\" id=\"ref-for-invalid-reverse-solidus④\">invalid-reverse-solidus</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error⑤⓪\">validation error</a>. </p>"
                        },
                        {
                          "html": "<p>Set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#path-state\" id=\"ref-for-path-state⑧\">path state</a>. </p>"
                        },
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑥②\">c</a> is neither U+002F (/) nor U+005C (\\), then decrease <var>pointer</var> by 1. </p>"
                        }
                      ]
                    },
                    {
                      "html": "<p>Otherwise, if <var>state override</var> is not given and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑥③\">c</a> is U+003F (?), set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query①③\">query</a> to the empty string and <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#query-state\" id=\"ref-for-query-state②\">query state</a>. </p>"
                    },
                    {
                      "html": "<p>Otherwise, if <var>state override</var> is not given and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑥④\">c</a> is U+0023 (#), set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-fragment\" id=\"ref-for-concept-url-fragment⑤\">fragment</a> to the empty string and <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#fragment-state\" id=\"ref-for-fragment-state③\">fragment state</a>. </p>"
                    },
                    {
                      "html": "Otherwise, if <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑥⑤\">c</a> is not the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point①④\">EOF code point</a>:",
                      "rationale": "set",
                      "steps": [
                        {
                          "html": "<p>Set <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#path-state\" id=\"ref-for-path-state⑨\">path state</a>. </p>"
                        },
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑥⑥\">c</a> is not U+002F (/), then decrease <var>pointer</var> by 1. </p>"
                        }
                      ]
                    },
                    {
                      "html": "<p>Otherwise, if <var>state override</var> is given and <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host②①\">host</a> is null, <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append②\">append</a> the empty string to <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path①⑧\">path</a>. </p>"
                    }
                  ]
                },
                {
                  "case": "path state",
                  "html": "<p>Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑦\">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by 1 and continue with the state machine. </p>\n      <dl class=\"switch\">\n       <dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"no-scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">no scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-relative-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special relative or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-ignore-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority ignore slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host state</dfn> \n       </dt><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"hostname-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">hostname state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"port-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">port state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file host state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cannot-be-a-base-url-path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opaque path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"query-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">query state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"fragment-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fragment state</dfn> \n       </dt><dd>\n        \n      </dd></dl>",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "then:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If <var>url</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#is-special\" id=\"ref-for-is-special①③\">is special</a> and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑦⓪\">c</a> is U+005C (\\), <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#invalid-reverse-solidus\" id=\"ref-for-invalid-reverse-solidus⑤\">invalid-reverse-solidus</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error⑤①\">validation error</a>. </p>"
                        },
                        {
                          "html": "If <var>buffer</var> is a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#double-dot-path-segment\" id=\"ref-for-double-dot-path-segment②\">double-dot URL path segment</a>, then:",
                          "rationale": "if",
                          "steps": [
                            {
                              "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#shorten-a-urls-path\" id=\"ref-for-shorten-a-urls-path②\">Shorten</a> <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path①⑨\">path</a>. </p>"
                            },
                            {
                              "html": "<p>If neither <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑦①\">c</a> is U+002F (/), nor <var>url</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#is-special\" id=\"ref-for-is-special①④\">is special</a> and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑦②\">c</a> is\n          U+005C (\\), <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append③\">append</a> the empty string to <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path②⓪\">path</a>. </p>"
                            }
                          ]
                        },
                        {
                          "html": "<p>Otherwise, if <var>buffer</var> is a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#single-dot-path-segment\" id=\"ref-for-single-dot-path-segment②\">single-dot URL path segment</a> and if neither <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑦③\">c</a> is U+002F (/), nor <var>url</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#is-special\" id=\"ref-for-is-special①⑤\">is special</a> and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑦④\">c</a> is U+005C (\\), <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append④\">append</a> the empty string to <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path②①\">path</a>. </p>"
                        },
                        {
                          "html": "Otherwise, if <var>buffer</var> is not a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#single-dot-path-segment\" id=\"ref-for-single-dot-path-segment③\">single-dot URL path segment</a>, then:",
                          "rationale": "if",
                          "steps": [
                            {
                              "html": "<p>If <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme③②\">scheme</a> is \"<code>file</code>\", <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path②②\">path</a> <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-is-empty\" id=\"ref-for-list-is-empty\">is empty</a>, and <var>buffer</var> is a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#windows-drive-letter\" id=\"ref-for-windows-drive-letter④\">Windows drive letter</a>, then replace the second code point in <var>buffer</var> with\n          U+003A (:). </p>"
                            },
                            {
                              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append⑤\">Append</a> <var>buffer</var> to <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path②③\">path</a>. </p>"
                            }
                          ]
                        },
                        {
                          "html": "<p>Set <var>buffer</var> to the empty string. </p>"
                        },
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑦⑤\">c</a> is U+003F (?), then set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query①④\">query</a> to the empty\n       string and <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#query-state\" id=\"ref-for-query-state③\">query state</a>. </p>"
                        },
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑦⑥\">c</a> is U+0023 (#), then set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-fragment\" id=\"ref-for-concept-url-fragment⑥\">fragment</a> to the\n       empty string and <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#fragment-state\" id=\"ref-for-fragment-state④\">fragment state</a>. </p>"
                        }
                      ]
                    },
                    {
                      "html": "Otherwise, run these steps:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑦⑦\">c</a> is not a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-code-points\" id=\"ref-for-url-code-points③\">URL code point</a> and not U+0025 (%), <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#invalid-url-unit\" id=\"ref-for-invalid-url-unit④\">invalid-URL-unit</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error⑤②\">validation error</a>. </p>"
                        },
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑦⑧\">c</a> is U+0025 (%) and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#remaining\" id=\"ref-for-remaining⑧\">remaining</a> does not start with two <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-hex-digit\" id=\"ref-for-ascii-hex-digit⑥\">ASCII hex digits</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#invalid-url-unit\" id=\"ref-for-invalid-url-unit⑤\">invalid-URL-unit</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error⑤③\">validation error</a>. </p>"
                        },
                        {
                          "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#utf-8-percent-encode\" id=\"ref-for-utf-8-percent-encode③\">UTF-8 percent-encode</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑦⑨\">c</a> using the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#path-percent-encode-set\" id=\"ref-for-path-percent-encode-set①\">path percent-encode set</a> and append the result to <var>buffer</var>. </p>"
                        }
                      ]
                    }
                  ]
                },
                {
                  "case": "opaque path state",
                  "html": "<p>Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑦\">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by 1 and continue with the state machine. </p>\n      <dl class=\"switch\">\n       <dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"no-scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">no scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-relative-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special relative or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-ignore-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority ignore slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host state</dfn> \n       </dt><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"hostname-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">hostname state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"port-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">port state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file host state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cannot-be-a-base-url-path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opaque path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"query-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">query state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"fragment-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fragment state</dfn> \n       </dt><dd>\n        \n      </dd></dl>",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑧⓪\">c</a> is U+003F (?), then set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query①⑤\">query</a> to the empty\n     string and <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#query-state\" id=\"ref-for-query-state④\">query state</a>. </p>"
                    },
                    {
                      "html": "<p>Otherwise, if <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑧①\">c</a> is U+0023 (#), then set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-fragment\" id=\"ref-for-concept-url-fragment⑦\">fragment</a> to the empty string and <var>state</var> to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#fragment-state\" id=\"ref-for-fragment-state⑤\">fragment state</a>. </p>"
                    },
                    {
                      "html": "Otherwise:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑧②\">c</a> is not the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point①⑥\">EOF code point</a>, not a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-code-points\" id=\"ref-for-url-code-points④\">URL code point</a>, and not\n       U+0025 (%), <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#invalid-url-unit\" id=\"ref-for-invalid-url-unit⑥\">invalid-URL-unit</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error⑤④\">validation error</a>. </p>"
                        },
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑧③\">c</a> is U+0025 (%) and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#remaining\" id=\"ref-for-remaining⑨\">remaining</a> does not start with two <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-hex-digit\" id=\"ref-for-ascii-hex-digit⑦\">ASCII hex digits</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#invalid-url-unit\" id=\"ref-for-invalid-url-unit⑦\">invalid-URL-unit</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error⑤⑤\">validation error</a>. </p>"
                        },
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑧④\">c</a> is not the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point①⑦\">EOF code point</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#utf-8-percent-encode\" id=\"ref-for-utf-8-percent-encode④\">UTF-8 percent-encode</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑧⑤\">c</a> using the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c0-control-percent-encode-set\" id=\"ref-for-c0-control-percent-encode-set③\">C0 control percent-encode set</a> and append the result to <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path②④\">path</a>. </p>"
                        }
                      ]
                    }
                  ]
                },
                {
                  "case": "query state",
                  "html": "<p>Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑦\">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by 1 and continue with the state machine. </p>\n      <dl class=\"switch\">\n       <dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"no-scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">no scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-relative-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special relative or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-ignore-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority ignore slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host state</dfn> \n       </dt><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"hostname-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">hostname state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"port-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">port state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file host state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cannot-be-a-base-url-path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opaque path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"query-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">query state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"fragment-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fragment state</dfn> \n       </dt><dd>\n        \n      </dd></dl>",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <var>encoding</var> is not <a data-link-type=\"dfn\" href=\"https://encoding.spec.whatwg.org/#utf-8\" id=\"ref-for-utf-8⑥\">UTF-8</a> and one of the following is true: </p>\n          <ul class=\"brief\">\n           <li>\n            <p><var>url</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#is-not-special\" id=\"ref-for-is-not-special④\">is not special</a> </p>\n           </li><li>\n            <p><var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme③③\">scheme</a> is \"<code>ws</code>\" or \"<code>wss</code>\" </p>\n          </li></ul>\n          <p>then set <var>encoding</var> to <a data-link-type=\"dfn\" href=\"https://encoding.spec.whatwg.org/#utf-8\" id=\"ref-for-utf-8⑦\">UTF-8</a>. </p>"
                    },
                    {
                      "html": "then:",
                      "rationale": "let",
                      "steps": [
                        {
                          "html": "<p>Let <var>queryPercentEncodeSet</var> be the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#special-query-percent-encode-set\" id=\"ref-for-special-query-percent-encode-set\">special-query percent-encode set</a> if <var>url</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#is-special\" id=\"ref-for-is-special①⑥\">is special</a>; otherwise the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#query-percent-encode-set\" id=\"ref-for-query-percent-encode-set③\">query percent-encode set</a>. </p>"
                        },
                        {
                          "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#string-percent-encode-after-encoding\" id=\"ref-for-string-percent-encode-after-encoding⑤\">Percent-encode after encoding</a>, with <var>encoding</var>, <var>buffer</var>, and <var>queryPercentEncodeSet</var>, and append the result to <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query①⑥\">query</a>. </p>"
                        },
                        {
                          "html": "<p>Set <var>buffer</var> to the empty string. </p>"
                        },
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑧⑧\">c</a> is U+0023 (#), then set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-fragment\" id=\"ref-for-concept-url-fragment⑧\">fragment</a> to\n       the empty string and state to <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#fragment-state\" id=\"ref-for-fragment-state⑥\">fragment state</a>. </p>"
                        }
                      ]
                    },
                    {
                      "html": "Otherwise, if <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑧⑨\">c</a> is not the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point①⑨\">EOF code point</a>:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑨⓪\">c</a> is not a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-code-points\" id=\"ref-for-url-code-points⑤\">URL code point</a> and not U+0025 (%), <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#invalid-url-unit\" id=\"ref-for-invalid-url-unit⑧\">invalid-URL-unit</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error⑤⑥\">validation error</a>. </p>"
                        },
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑨①\">c</a> is U+0025 (%) and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#remaining\" id=\"ref-for-remaining①⓪\">remaining</a> does not start with two <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-hex-digit\" id=\"ref-for-ascii-hex-digit⑧\">ASCII hex digits</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#invalid-url-unit\" id=\"ref-for-invalid-url-unit⑨\">invalid-URL-unit</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error⑤⑦\">validation error</a>. </p>"
                        },
                        {
                          "html": "<p>Append <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑨②\">c</a> to <var>buffer</var>. </p>"
                        }
                      ]
                    }
                  ]
                },
                {
                  "case": "fragment state",
                  "html": "<p>Keep running the following state machine by switching on <var>state</var>. If after a run <var>pointer</var> points to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point⑦\">EOF code point</a>, go to the next step. Otherwise, increase <var>pointer</var> by 1 and continue with the state machine. </p>\n      <dl class=\"switch\">\n       <dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"no-scheme-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">no scheme state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-relative-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special relative or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-or-authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path or authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"relative-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relative slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"special-authority-ignore-slashes-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">special authority ignore slashes state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"authority-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">authority state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">host state</dfn> \n       </dt><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"hostname-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">hostname state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"port-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">port state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-slash-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file slash state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"file-host-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">file host state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-start-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path start state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cannot-be-a-base-url-path-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opaque path state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"query-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">query state</dfn> \n       </dt><dd>\n        \n       </dd><dt><dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"basic URL parser\" data-dfn-type=\"dfn\" data-export=\"\" id=\"fragment-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fragment state</dfn> \n       </dt><dd>\n        \n      </dd></dl>",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑨③\">c</a> is not the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#eof-code-point\" id=\"ref-for-eof-code-point②⓪\">EOF code point</a>, then:",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑨④\">c</a> is not a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-code-points\" id=\"ref-for-url-code-points⑥\">URL code point</a> and not U+0025 (%), <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#invalid-url-unit\" id=\"ref-for-invalid-url-unit①⓪\">invalid-URL-unit</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error⑤⑧\">validation error</a>. </p>"
                        },
                        {
                          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑨⑤\">c</a> is U+0025 (%) and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#remaining\" id=\"ref-for-remaining①①\">remaining</a> does not start with two <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-hex-digit\" id=\"ref-for-ascii-hex-digit⑨\">ASCII hex digits</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#invalid-url-unit\" id=\"ref-for-invalid-url-unit①①\">invalid-URL-unit</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#validation-error\" id=\"ref-for-validation-error⑤⑨\">validation error</a>. </p>"
                        },
                        {
                          "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#utf-8-percent-encode\" id=\"ref-for-utf-8-percent-encode⑤\">UTF-8 percent-encode</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#c\" id=\"ref-for-c⑨⑥\">c</a> using the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#fragment-percent-encode-set\" id=\"ref-for-fragment-percent-encode-set①\">fragment percent-encode set</a> and append the result to <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-fragment\" id=\"ref-for-concept-url-fragment⑨\">fragment</a>. </p>"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "html": "<p>Return <var>url</var>. </p>"
        }
      ]
    },
    {
      "name": "url/set the username",
      "href": "https://url.spec.whatwg.org/#set-the-username",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"url\" data-dfn-type=\"dfn\" data-export=\"\" id=\"set-the-username\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">set the username</dfn> given a <var>url</var> and <var>username</var>, set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-username\" id=\"ref-for-concept-url-username⑧\">username</a> to the result of running <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#string-utf-8-percent-encode\" id=\"ref-for-string-utf-8-percent-encode③\">UTF-8 percent-encode</a> on <var>username</var> using the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#userinfo-percent-encode-set\" id=\"ref-for-userinfo-percent-encode-set⑦\">userinfo percent-encode set</a>.",
      "rationale": "To <dfn>"
    },
    {
      "name": "url/set the password",
      "href": "https://url.spec.whatwg.org/#set-the-password",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"url\" data-dfn-type=\"dfn\" data-export=\"\" id=\"set-the-password\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">set the password</dfn> given a <var>url</var> and <var>password</var>, set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-password\" id=\"ref-for-concept-url-password⑧\">password</a> to the result of running <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#string-utf-8-percent-encode\" id=\"ref-for-string-utf-8-percent-encode④\">UTF-8 percent-encode</a> on <var>password</var> using the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#userinfo-percent-encode-set\" id=\"ref-for-userinfo-percent-encode-set⑧\">userinfo percent-encode set</a>.",
      "rationale": "To <dfn>"
    },
    {
      "name": "URL serializer",
      "href": "https://url.spec.whatwg.org/#concept-url-serializer",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-export=\"\" id=\"concept-url-serializer\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">URL serializer</dfn> takes a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url④④\">URL</a> <var>url</var>, with an optional boolean <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"URL serializer\" data-dfn-type=\"dfn\" data-export=\"\" id=\"url-serializer-exclude-fragment\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><var>exclude fragment</var></dfn> (default false), and then runs\nthese steps. They return an <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-string\" id=\"ref-for-ascii-string②①\">ASCII string</a>.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>output</var> be <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme③④\">scheme</a> and U+003A (:) concatenated. </p>"
        },
        {
          "html": "If <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host②②\">host</a> is non-null:",
          "rationale": "append",
          "steps": [
            {
              "html": "<p>Append \"<code>//</code>\" to <var>output</var>. </p>"
            },
            {
              "html": "If <var>url</var> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#include-credentials\" id=\"ref-for-include-credentials③\">includes credentials</a>, then:",
              "rationale": "append",
              "steps": [
                {
                  "html": "<p>Append <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-username\" id=\"ref-for-concept-url-username⑨\">username</a> to <var>output</var>. </p>"
                },
                {
                  "html": "<p>If <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-password\" id=\"ref-for-concept-url-password⑨\">password</a> is not the empty string, then append\n     U+003A (:), followed by <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-password\" id=\"ref-for-concept-url-password①⓪\">password</a>, to <var>output</var>. </p>"
                },
                {
                  "html": "<p>Append U+0040 (@) to <var>output</var>. </p>"
                }
              ]
            },
            {
              "html": "<p>Append <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host②③\">host</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-host-serializer\" id=\"ref-for-concept-host-serializer④\">serialized</a>, to <var>output</var>. </p>"
            },
            {
              "html": "<p>If <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port①⓪\">port</a> is non-null, append U+003A (:) followed by <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port①①\">port</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#serialize-an-integer\" id=\"ref-for-serialize-an-integer①\">serialized</a>, to <var>output</var>. </p>"
            }
          ]
        },
        {
          "html": "<p>If <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host②④\">host</a> is null, <var>url</var> does not have an <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-opaque-path\" id=\"ref-for-url-opaque-path⑦\">opaque path</a>, <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path②⑤\">path</a>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size⑤\">size</a> is greater\n  than 1, and <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path②⑥\">path</a>[0] is the empty string, then append U+002F (/)\n  followed by U+002E (.) to <var>output</var>. </p>"
        },
        {
          "html": "<p>Append the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-path-serializer\" id=\"ref-for-url-path-serializer\">URL path serializing</a> <var>url</var> to <var>output</var>. </p>"
        },
        {
          "html": "<p>If <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query①⑦\">query</a> is non-null, append\n U+003F (?), followed by <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query①⑧\">query</a>, to <var>output</var>. </p>"
        },
        {
          "html": "<p>If <var>exclude fragment</var> is false and <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-fragment\" id=\"ref-for-concept-url-fragment①⓪\">fragment</a> is\n non-null, then append U+0023 (#), followed by <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-fragment\" id=\"ref-for-concept-url-fragment①①\">fragment</a>, to <var>output</var>. </p>"
        },
        {
          "html": "<p>Return <var>output</var>. </p>"
        }
      ]
    },
    {
      "name": "URL path serializer",
      "href": "https://url.spec.whatwg.org/#url-path-serializer",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-export=\"\" data-lt=\"URL path serializer|URL path serializing\" id=\"url-path-serializer\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">URL path serializer</dfn> takes a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url④⑤\">URL</a> <var>url</var> and then runs these steps. They return an <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-string\" id=\"ref-for-ascii-string②②\">ASCII string</a>.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>url</var> has an <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-opaque-path\" id=\"ref-for-url-opaque-path⑧\">opaque path</a>, then return <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path②⑦\">path</a>. </p>"
        },
        {
          "html": "<p>Let <var>output</var> be the empty string. </p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate⑤\">For each</a> <var>segment</var> of <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path②⑧\">path</a>: append\n U+002F (/) followed by <var>segment</var> to <var>output</var>. </p>"
        },
        {
          "html": "<p>Return <var>output</var>. </p>"
        }
      ]
    },
    {
      "name": "equal",
      "href": "https://url.spec.whatwg.org/#concept-url-equals",
      "html": "To determine whether a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url④⑥\">URL</a> <var>A</var> <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"url\" data-dfn-type=\"dfn\" data-export=\"\" data-lt=\"equal\" id=\"concept-url-equals\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">equals</dfn> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url④⑦\">URL</a> <var>B</var>, with\nan optional boolean <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"url/equals\" data-dfn-type=\"dfn\" data-export=\"\" id=\"url-equals-exclude-fragments\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><var>exclude fragments</var></dfn> (default false),\nrun these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>serializedA</var> be the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-serializer\" id=\"ref-for-concept-url-serializer⑥\">serializing</a> <var>A</var>, with <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-serializer-exclude-fragment\" id=\"ref-for-url-serializer-exclude-fragment\"><i>exclude fragment</i></a> set to <var>exclude fragments</var>. </p>"
        },
        {
          "html": "<p>Let <var>serializedB</var> be the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-serializer\" id=\"ref-for-concept-url-serializer⑦\">serializing</a> <var>B</var>, with <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-serializer-exclude-fragment\" id=\"ref-for-url-serializer-exclude-fragment①\"><i>exclude fragment</i></a> set to <var>exclude fragments</var>. </p>"
        },
        {
          "html": "<p>Return true if <var>serializedA</var> is <var>serializedB</var>; otherwise false. </p>"
        }
      ]
    },
    {
      "name": "url/origin",
      "href": "https://url.spec.whatwg.org/#concept-url-origin",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"url\" data-dfn-type=\"dfn\" data-export=\"\" id=\"concept-url-origin\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">origin</dfn> of a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url④⑧\">URL</a> <var>url</var> is the <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin\" id=\"ref-for-concept-origin②\">origin</a> returned by running these steps, switching on <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme③⑤\">scheme</a>:",
      "rationale": ".switch",
      "steps": [
        {
          "operation": "switch",
          "steps": [
            {
              "case": "\"blob\"",
              "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"url\" data-dfn-type=\"dfn\" data-export=\"\" id=\"concept-url-origin\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">origin</dfn> of a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url④⑧\">URL</a> <var>url</var> is the <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin\" id=\"ref-for-concept-origin②\">origin</a> returned by running these steps, switching on <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme③⑤\">scheme</a>:",
              "rationale": "if",
              "steps": [
                {
                  "html": "<p>If <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-blob-entry\" id=\"ref-for-concept-url-blob-entry②\">blob URL entry</a> is non-null, then return <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-blob-entry\" id=\"ref-for-concept-url-blob-entry③\">blob URL entry</a>’s <a data-link-type=\"dfn\" href=\"https://w3c.github.io/FileAPI/#blob-url-entry-environment\" id=\"ref-for-blob-url-entry-environment\">environment</a>’s <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin\" id=\"ref-for-concept-settings-object-origin\">origin</a>. </p>"
                },
                {
                  "html": "<p>Let <var>pathURL</var> be the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-basic-url-parser\" id=\"ref-for-concept-basic-url-parser③\">parsing</a> the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-path-serializer\" id=\"ref-for-url-path-serializer①\">URL path serializing</a> <var>url</var>. </p>"
                },
                {
                  "html": "<p>If <var>pathURL</var> is failure, then return a new <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque\" id=\"ref-for-concept-origin-opaque\">opaque origin</a>. </p>"
                },
                {
                  "html": "<p>If <var>pathURL</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme③⑥\">scheme</a> is \"<code>http</code>\",\n   \"<code>https</code>\", or \"<code>file</code>\", then return <var>pathURL</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-origin\" id=\"ref-for-concept-url-origin\">origin</a>. </p>"
                },
                {
                  "html": "<p>Return a new <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque\" id=\"ref-for-concept-origin-opaque①\">opaque origin</a>. </p>"
                }
              ]
            },
            {
              "case": "\"ftp\"",
              "html": "<p>Return the <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-tuple\" id=\"ref-for-concept-origin-tuple①\">tuple origin</a> (<var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme③⑦\">scheme</a>, <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host②⑤\">host</a>, <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port①②\">port</a>, null). </p>"
            },
            {
              "case": "\"http\"",
              "html": "<p>Return the <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-tuple\" id=\"ref-for-concept-origin-tuple①\">tuple origin</a> (<var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme③⑦\">scheme</a>, <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host②⑤\">host</a>, <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port①②\">port</a>, null). </p>"
            },
            {
              "case": "\"https\"",
              "html": "<p>Return the <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-tuple\" id=\"ref-for-concept-origin-tuple①\">tuple origin</a> (<var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme③⑦\">scheme</a>, <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host②⑤\">host</a>, <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port①②\">port</a>, null). </p>"
            },
            {
              "case": "\"ws\"",
              "html": "<p>Return the <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-tuple\" id=\"ref-for-concept-origin-tuple①\">tuple origin</a> (<var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme③⑦\">scheme</a>, <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host②⑤\">host</a>, <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port①②\">port</a>, null). </p>"
            },
            {
              "case": "\"wss\"",
              "html": "<p>Return the <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-tuple\" id=\"ref-for-concept-origin-tuple①\">tuple origin</a> (<var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme③⑦\">scheme</a>, <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host②⑤\">host</a>, <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port①②\">port</a>, null). </p>"
            },
            {
              "case": "\"file\"",
              "html": "<p>Unfortunate as it is, this is left as an exercise to the reader. When in doubt,\n return a new <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque\" id=\"ref-for-concept-origin-opaque②\">opaque origin</a>. </p>"
            },
            {
              "case": "Otherwise",
              "html": "<p>Return a new <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque\" id=\"ref-for-concept-origin-opaque③\">opaque origin</a>. </p>"
            }
          ]
        }
      ]
    },
    {
      "name": "urlencoded parser",
      "href": "https://url.spec.whatwg.org/#concept-urlencoded-parser",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-export=\"\" data-lt=\"urlencoded parser\" id=\"concept-urlencoded-parser\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>application/x-www-form-urlencoded</code> parser</dfn> takes a byte sequence <var>input</var>, and then runs these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>sequences</var> be the result of splitting <var>input</var> on\n 0x26 (&amp;). </p>"
        },
        {
          "html": "<p>Let <var>output</var> be an initially empty <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list⑤\">list</a> of name-value tuples where\n both name and value hold a string. </p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate⑥\">For each</a> byte sequence <var>bytes</var> in <var>sequences</var>:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>bytes</var> is the empty byte sequence, then <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue⑤\">continue</a>. </p>"
            },
            {
              "html": "<p>If <var>bytes</var> contains a 0x3D (=), then let <var>name</var> be the bytes from the start of <var>bytes</var> up to but\n   excluding its first 0x3D (=), and let <var>value</var> be the\n   bytes, if any, after the first 0x3D (=) up to the end of <var>bytes</var>. If 0x3D (=) is the first byte, then <var>name</var> will be the empty byte sequence. If it is the last, then <var>value</var> will be the empty byte sequence. </p>"
            },
            {
              "html": "<p>Otherwise, let <var>name</var> have the value of <var>bytes</var> and let <var>value</var> be the empty byte sequence. </p>"
            },
            {
              "html": "<p>Replace any 0x2B (+) in <var>name</var> and <var>value</var> with 0x20 (SP). </p>"
            },
            {
              "html": "<p>Let <var>nameString</var> and <var>valueString</var> be the result of running <a data-link-type=\"dfn\" href=\"https://encoding.spec.whatwg.org/#utf-8-decode-without-bom\" id=\"ref-for-utf-8-decode-without-bom③\">UTF-8\n   decode without BOM</a> on the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#percent-decode\" id=\"ref-for-percent-decode②\">percent-decoding</a> of <var>name</var> and <var>value</var>, respectively. </p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append⑥\">Append</a> (<var>nameString</var>, <var>valueString</var>) to <var>output</var>. </p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>output</var>. </p>"
        }
      ]
    },
    {
      "name": "urlencoded serializer",
      "href": "https://url.spec.whatwg.org/#concept-urlencoded-serializer",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-export=\"\" data-lt=\"urlencoded serializer\" id=\"concept-urlencoded-serializer\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>application/x-www-form-urlencoded</code> serializer</dfn> takes a list of name-value tuples <var>tuples</var>, with an optional <a data-link-type=\"dfn\" href=\"https://encoding.spec.whatwg.org/#encoding\" id=\"ref-for-encoding④\">encoding</a> <var>encoding</var> (default <a data-link-type=\"dfn\" href=\"https://encoding.spec.whatwg.org/#utf-8\" id=\"ref-for-utf-8①⓪\">UTF-8</a>), and then runs these steps. They return an <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-string\" id=\"ref-for-ascii-string②③\">ASCII string</a>.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Set <var>encoding</var> to the result of <a data-link-type=\"dfn\" href=\"https://encoding.spec.whatwg.org/#get-an-output-encoding\" id=\"ref-for-get-an-output-encoding①\">getting an output encoding</a> from <var>encoding</var>. </p>"
        },
        {
          "html": "<p>Let <var>output</var> be the empty string. </p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate⑦\">For each</a> <var>tuple</var> of <var>tuples</var>:",
          "rationale": "assert",
          "steps": [
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert③\">Assert</a>: <var>tuple</var>’s name and <var>tuple</var>’s value are <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#scalar-value-string\" id=\"ref-for-scalar-value-string①⓪\">scalar value strings</a>. </p>"
            },
            {
              "html": "<p>Let <var>name</var> be the result of running <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#string-percent-encode-after-encoding\" id=\"ref-for-string-percent-encode-after-encoding⑥\">percent-encode after encoding</a> with <var>encoding</var>, <var>tuple</var>’s name, the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#application-x-www-form-urlencoded-percent-encode-set\" id=\"ref-for-application-x-www-form-urlencoded-percent-encode-set②\"><code>application/x-www-form-urlencoded</code> percent-encode set</a>, and true. </p>"
            },
            {
              "html": "<p>Let <var>value</var> be the result of running <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#string-percent-encode-after-encoding\" id=\"ref-for-string-percent-encode-after-encoding⑦\">percent-encode after encoding</a> with <var>encoding</var>, <var>tuple</var>’s\n   value, the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#application-x-www-form-urlencoded-percent-encode-set\" id=\"ref-for-application-x-www-form-urlencoded-percent-encode-set③\"><code>application/x-www-form-urlencoded</code> percent-encode set</a>, and true. </p>"
            },
            {
              "html": "<p>If <var>output</var> is not the empty string, then append U+0026 (&amp;) to <var>output</var>. </p>"
            },
            {
              "html": "Append <var>name</var>, followed by U+003D (=), followed by <var>value</var>, to <var>output</var>."
            }
          ]
        },
        {
          "html": "Return <var>output</var>."
        }
      ]
    },
    {
      "name": "potentially strip trailing spaces from an opaque path",
      "href": "https://url.spec.whatwg.org/#potentially-strip-trailing-spaces-from-an-opaque-path",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"potentially-strip-trailing-spaces-from-an-opaque-path\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">potentially strip trailing spaces from an opaque path</dfn> given a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://url.spec.whatwg.org/#url\" id=\"ref-for-url③\">URL</a></code> object <var>url</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url\">URL</a> does not have an <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-opaque-path\" id=\"ref-for-url-opaque-path⑨\">opaque path</a>, then\n return. </p>"
        },
        {
          "html": "<p>If <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url①\">URL</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-fragment\" id=\"ref-for-concept-url-fragment①②\">fragment</a> is non-null, then return. </p>"
        },
        {
          "html": "<p>If <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url②\">URL</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query①⑨\">query</a> is non-null, then return. </p>"
        },
        {
          "html": "<p>Remove all trailing U+0020 SPACE <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-point\" id=\"ref-for-code-point⑧\">code points</a> from <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url③\">URL</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path③⓪\">path</a>. </p>"
        }
      ]
    },
    {
      "name": "API URL parser",
      "href": "https://url.spec.whatwg.org/#api-url-parser",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"api-url-parser\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">API URL parser</dfn> takes a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#scalar-value-string\" id=\"ref-for-scalar-value-string①②\">scalar value string</a> <var>url</var> and an optional\nnull-or-<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#scalar-value-string\" id=\"ref-for-scalar-value-string①③\">scalar value string</a> <var>base</var> (default null), and then runs these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>parsedBase</var> be null. </p>"
        },
        {
          "html": "If <var>base</var> is non-null:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>parsedBase</var> to the result of running the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-basic-url-parser\" id=\"ref-for-concept-basic-url-parser④\">basic URL parser</a> on <var>base</var>. </p>"
            },
            {
              "html": "<p>If <var>parsedBase</var> is failure, then return failure. </p>"
            }
          ]
        },
        {
          "html": "<p>Return the result of running the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-basic-url-parser\" id=\"ref-for-concept-basic-url-parser⑤\">basic URL parser</a> on <var>url</var> with <var>parsedBase</var>. </p>"
        }
      ]
    },
    {
      "name": "URL/initialize",
      "href": "https://url.spec.whatwg.org/#url-initialize",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"URL\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"url-initialize\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">initialize</dfn> a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://url.spec.whatwg.org/#url\" id=\"ref-for-url④\">URL</a></code> object <var>url</var> with a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url⑥⓪\">URL</a> <var>urlRecord</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>query</var> be <var>urlRecord</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query②⓪\">query</a>, if that is non-null;\n otherwise the empty string. </p>"
        },
        {
          "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url④\">URL</a> to <var>urlRecord</var>. </p>"
        },
        {
          "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query-object\" id=\"ref-for-concept-url-query-object\">query object</a> to a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://url.spec.whatwg.org/#urlsearchparams\" id=\"ref-for-urlsearchparams②\">URLSearchParams</a></code> object. </p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#urlsearchparams-initialize\" id=\"ref-for-urlsearchparams-initialize\">Initialize</a> <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query-object\" id=\"ref-for-concept-url-query-object①\">query object</a> with <var>query</var>. </p>"
        },
        {
          "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query-object\" id=\"ref-for-concept-url-query-object②\">query object</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-url-object\" id=\"ref-for-concept-urlsearchparams-url-object\">URL object</a> to <var>url</var>. </p>"
        }
      ]
    },
    {
      "name": "URL/URL(url, base)",
      "href": "https://url.spec.whatwg.org/#dom-url-url",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URL\" data-dfn-type=\"constructor\" data-export=\"\" data-lt=\"URL(url, base)|constructor(url, base)|URL(url)|constructor(url)\" id=\"dom-url-url\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>new URL(<var>url</var>, <var>base</var>)</code></dfn> constructor steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>parsedURL</var> be the result of running the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#api-url-parser\" id=\"ref-for-api-url-parser\">API URL parser</a> on <var>url</var> with <var>base</var>, if given. </p>"
        },
        {
          "html": "<p>If <var>parsedURL</var> is failure, then <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw\">throw</a> a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror\">TypeError</a></code>. </p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-initialize\" id=\"ref-for-url-initialize\">Initialize</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this\">this</a> with <var>parsedURL</var>. </p>"
        }
      ]
    },
    {
      "name": "URL/parse(url, base)",
      "href": "https://url.spec.whatwg.org/#dom-url-parse",
      "html": "The static <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URL\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"parse(url, base)|parse(url)\" id=\"dom-url-parse\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>parse(<var>url</var>, <var>base</var>)</code></dfn> method\nsteps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>parsedURL</var> be the result of running the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#api-url-parser\" id=\"ref-for-api-url-parser①\">API URL parser</a> on <var>url</var> with <var>base</var>, if given. </p>"
        },
        {
          "html": "<p>If <var>parsedURL</var> is failure, then return null. </p>"
        },
        {
          "html": "<p>Let <var>url</var> be a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://url.spec.whatwg.org/#url\" id=\"ref-for-url⑧\">URL</a></code> object. </p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-initialize\" id=\"ref-for-url-initialize①\">Initialize</a> <var>url</var> with <var>parsedURL</var>. </p>"
        },
        {
          "html": "<p>Return <var>url</var>. </p>"
        }
      ]
    },
    {
      "name": "URL/canParse(url, base)",
      "href": "https://url.spec.whatwg.org/#dom-url-canparse",
      "html": "The static <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URL\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"canParse(url, base)|canParse(url)\" id=\"dom-url-canparse\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>canParse(<var>url</var>, <var>base</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>parsedURL</var> be the result of running the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#api-url-parser\" id=\"ref-for-api-url-parser②\">API URL parser</a> on <var>url</var> with <var>base</var>, if given. </p>"
        },
        {
          "html": "<p>If <var>parsedURL</var> is failure, then return false. </p>"
        },
        {
          "html": "<p>Return true. </p>"
        }
      ]
    },
    {
      "name": "href setter",
      "html": "The <code><a class=\"idl-code\" data-link-type=\"attribute\" href=\"https://url.spec.whatwg.org/#dom-url-href\" id=\"ref-for-dom-url-href②\">href</a></code> setter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>parsedURL</var> be the result of running the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-basic-url-parser\" id=\"ref-for-concept-basic-url-parser⑦\">basic URL parser</a> on the given\n value. </p>"
        },
        {
          "html": "<p>If <var>parsedURL</var> is failure, then <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①\">throw</a> a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror①\">TypeError</a></code>. </p>"
        },
        {
          "html": "<p>Set <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url⑥\">URL</a> to <var>parsedURL</var>. </p>"
        },
        {
          "html": "<p>Empty <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query-object\" id=\"ref-for-concept-url-query-object③\">query object</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-list\" id=\"ref-for-concept-urlsearchparams-list\">list</a>. </p>"
        },
        {
          "html": "<p>Let <var>query</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url⑦\">URL</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query②①\">query</a>. </p>"
        },
        {
          "html": "<p>If <var>query</var> is non-null, then set <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query-object\" id=\"ref-for-concept-url-query-object④\">query object</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-list\" id=\"ref-for-concept-urlsearchparams-list①\">list</a> to the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlencoded-string-parser\" id=\"ref-for-concept-urlencoded-string-parser\">parsing</a> <var>query</var>. </p>"
        }
      ]
    },
    {
      "name": "username setter",
      "html": "The <code><a class=\"idl-code\" data-link-type=\"attribute\" href=\"https://url.spec.whatwg.org/#dom-url-username\" id=\"ref-for-dom-url-username①\">username</a></code> setter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⓪\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url①②\">URL</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#cannot-have-a-username-password-port\" id=\"ref-for-cannot-have-a-username-password-port\">cannot have a username/password/port</a>, then\n return. </p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#set-the-username\" id=\"ref-for-set-the-username\">Set the username</a> given <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①①\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url①③\">URL</a> and the given value. </p>"
        }
      ]
    },
    {
      "name": "password setter",
      "html": "The <code><a class=\"idl-code\" data-link-type=\"attribute\" href=\"https://url.spec.whatwg.org/#dom-url-password\" id=\"ref-for-dom-url-password①\">password</a></code> setter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url①⑤\">URL</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#cannot-have-a-username-password-port\" id=\"ref-for-cannot-have-a-username-password-port①\">cannot have a username/password/port</a>, then\n return. </p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#set-the-password\" id=\"ref-for-set-the-password\">Set the password</a> given <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url①⑥\">URL</a> and the given value. </p>"
        }
      ]
    },
    {
      "name": "URL/host",
      "href": "https://url.spec.whatwg.org/#dom-url-host",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URL\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-url-host\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>host</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>url</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑤\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url①⑦\">URL</a>. </p>"
        },
        {
          "html": "<p>If <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host③②\">host</a> is null, then return the empty string. </p>"
        },
        {
          "html": "<p>If <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port①③\">port</a> is null, return <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host③③\">host</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-host-serializer\" id=\"ref-for-concept-host-serializer⑤\">serialized</a>. </p>"
        },
        {
          "html": "<p>Return <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host③④\">host</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-host-serializer\" id=\"ref-for-concept-host-serializer⑥\">serialized</a>,\n followed by U+003A (:) and <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port①④\">port</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#serialize-an-integer\" id=\"ref-for-serialize-an-integer②\">serialized</a>. </p>"
        }
      ]
    },
    {
      "name": "host setter",
      "html": "The <code><a class=\"idl-code\" data-link-type=\"attribute\" href=\"https://url.spec.whatwg.org/#dom-url-host\" id=\"ref-for-dom-url-host①\">host</a></code> setter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑥\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url①⑧\">URL</a> has an <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-opaque-path\" id=\"ref-for-url-opaque-path①⓪\">opaque path</a>, then return. </p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-basic-url-parser\" id=\"ref-for-concept-basic-url-parser⑨\">Basic URL parse</a> the given value with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑦\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url①⑨\">URL</a> as <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-url\" id=\"ref-for-basic-url-parser-url①\"><i>url</i></a> and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#host-state\" id=\"ref-for-host-state①\">host state</a> as <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-state-override\" id=\"ref-for-basic-url-parser-state-override①\"><i>state override</i></a>. </p>"
        }
      ]
    },
    {
      "name": "URL/hostname",
      "href": "https://url.spec.whatwg.org/#dom-url-hostname",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URL\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-url-hostname\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>hostname</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑨\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url②①\">URL</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host③⑤\">host</a> is null, then return the empty\n string. </p>"
        },
        {
          "html": "<p>Return <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②⓪\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url②②\">URL</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host③⑥\">host</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-host-serializer\" id=\"ref-for-concept-host-serializer⑦\">serialized</a>. </p>"
        }
      ]
    },
    {
      "name": "hostname setter",
      "html": "The <code><a class=\"idl-code\" data-link-type=\"attribute\" href=\"https://url.spec.whatwg.org/#dom-url-hostname\" id=\"ref-for-dom-url-hostname①\">hostname</a></code> setter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②①\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url②③\">URL</a> has an <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-opaque-path\" id=\"ref-for-url-opaque-path①①\">opaque path</a>, then return. </p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-basic-url-parser\" id=\"ref-for-concept-basic-url-parser①⓪\">Basic URL parse</a> the given value with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②②\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url②④\">URL</a> as <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-url\" id=\"ref-for-basic-url-parser-url②\"><i>url</i></a> and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#hostname-state\" id=\"ref-for-hostname-state①\">hostname state</a> as <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-state-override\" id=\"ref-for-basic-url-parser-state-override②\"><i>state override</i></a>. </p>"
        }
      ]
    },
    {
      "name": "URL/port",
      "href": "https://url.spec.whatwg.org/#dom-url-port",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URL\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-url-port\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>port</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②③\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url②⑤\">URL</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port①⑥\">port</a> is null, then return the empty\n string. </p>"
        },
        {
          "html": "<p>Return <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②④\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url②⑥\">URL</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port①⑦\">port</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#serialize-an-integer\" id=\"ref-for-serialize-an-integer③\">serialized</a>. </p>"
        }
      ]
    },
    {
      "name": "port setter",
      "html": "The <code><a class=\"idl-code\" data-link-type=\"attribute\" href=\"https://url.spec.whatwg.org/#dom-url-port\" id=\"ref-for-dom-url-port①\">port</a></code> setter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②⑤\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url②⑦\">URL</a> <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#cannot-have-a-username-password-port\" id=\"ref-for-cannot-have-a-username-password-port②\">cannot have a username/password/port</a>, then\n return. </p>"
        },
        {
          "html": "<p>If the given value is the empty string, then set <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②⑥\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url②⑧\">URL</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port①⑧\">port</a> to null.</p>"
        },
        {
          "html": "<p>Otherwise, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-basic-url-parser\" id=\"ref-for-concept-basic-url-parser①①\">basic URL parse</a> the given value with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②⑦\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url②⑨\">URL</a> as <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-url\" id=\"ref-for-basic-url-parser-url③\"><i>url</i></a> and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#port-state\" id=\"ref-for-port-state①\">port state</a> as <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-state-override\" id=\"ref-for-basic-url-parser-state-override③\"><i>state override</i></a>. </p>"
        }
      ]
    },
    {
      "name": "pathname setter",
      "html": "The <code><a class=\"idl-code\" data-link-type=\"attribute\" href=\"https://url.spec.whatwg.org/#dom-url-pathname\" id=\"ref-for-dom-url-pathname①\">pathname</a></code> setter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②⑨\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url③①\">URL</a> has an <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-opaque-path\" id=\"ref-for-url-opaque-path①②\">opaque path</a>, then return. </p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-empty\" id=\"ref-for-list-empty\">Empty</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③⓪\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url③②\">URL</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path③①\">path</a>. </p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-basic-url-parser\" id=\"ref-for-concept-basic-url-parser①②\">Basic URL parse</a> the given value with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③①\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url③③\">URL</a> as <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-url\" id=\"ref-for-basic-url-parser-url④\"><i>url</i></a> and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#path-start-state\" id=\"ref-for-path-start-state④\">path start state</a> as <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-state-override\" id=\"ref-for-basic-url-parser-state-override④\"><i>state override</i></a>. </p>"
        }
      ]
    },
    {
      "name": "URL/search",
      "href": "https://url.spec.whatwg.org/#dom-url-search",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URL\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-url-search\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>search</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③②\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url③④\">URL</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query②②\">query</a> is either null or the empty\n string, then return the empty string. </p>"
        },
        {
          "html": "<p>Return U+003F (?), followed by <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③③\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url③⑤\">URL</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query②③\">query</a>. </p>"
        }
      ]
    },
    {
      "name": "search setter",
      "html": "The <code><a class=\"idl-code\" data-link-type=\"attribute\" href=\"https://url.spec.whatwg.org/#dom-url-search\" id=\"ref-for-dom-url-search①\">search</a></code> setter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>url</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③④\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url③⑥\">URL</a>. </p>"
        },
        {
          "html": "If the given value is the empty string:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query②④\">query</a> to null. </p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-empty\" id=\"ref-for-list-empty①\">Empty</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③⑤\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query-object\" id=\"ref-for-concept-url-query-object⑤\">query object</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-list\" id=\"ref-for-concept-urlsearchparams-list②\">list</a>. </p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#potentially-strip-trailing-spaces-from-an-opaque-path\" id=\"ref-for-potentially-strip-trailing-spaces-from-an-opaque-path\">Potentially strip trailing spaces from an opaque path</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③⑥\">this</a>. </p>"
            },
            {
              "html": "<p>Return. </p>"
            }
          ]
        },
        {
          "html": "<p>Let <var>input</var> be the given value with a single leading U+003F (?) removed, if any. </p>"
        },
        {
          "html": "<p>Set <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query②⑤\">query</a> to the empty string. </p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-basic-url-parser\" id=\"ref-for-concept-basic-url-parser①③\">Basic URL parse</a> <var>input</var> with <var>url</var> as <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-url\" id=\"ref-for-basic-url-parser-url⑤\"><i>url</i></a> and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#query-state\" id=\"ref-for-query-state⑤\">query state</a> as <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-state-override\" id=\"ref-for-basic-url-parser-state-override⑤\"><i>state override</i></a>. </p>"
        },
        {
          "html": "<p>Set <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③⑦\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query-object\" id=\"ref-for-concept-url-query-object⑥\">query object</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-list\" id=\"ref-for-concept-urlsearchparams-list③\">list</a> to the\n result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlencoded-string-parser\" id=\"ref-for-concept-urlencoded-string-parser①\">parsing</a> <var>input</var>. </p>"
        }
      ]
    },
    {
      "name": "URL/hash",
      "href": "https://url.spec.whatwg.org/#dom-url-hash",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URL\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-url-hash\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>hash</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④①\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url③⑨\">URL</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-fragment\" id=\"ref-for-concept-url-fragment①③\">fragment</a> is either null or the empty\n string, then return the empty string. </p>"
        },
        {
          "html": "<p>Return U+0023 (#), followed by <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④②\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url④⓪\">URL</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-fragment\" id=\"ref-for-concept-url-fragment①④\">fragment</a>. </p>"
        }
      ]
    },
    {
      "name": "hash setter",
      "html": "The <code><a class=\"idl-code\" data-link-type=\"attribute\" href=\"https://url.spec.whatwg.org/#dom-url-hash\" id=\"ref-for-dom-url-hash①\">hash</a></code> setter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "If the given value is the empty string:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④③\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url④①\">URL</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-fragment\" id=\"ref-for-concept-url-fragment①⑤\">fragment</a> to null. </p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#potentially-strip-trailing-spaces-from-an-opaque-path\" id=\"ref-for-potentially-strip-trailing-spaces-from-an-opaque-path①\">Potentially strip trailing spaces from an opaque path</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④④\">this</a>. </p>"
            },
            {
              "html": "<p>Return. </p>"
            }
          ]
        },
        {
          "html": "<p>Let <var>input</var> be the given value with a single leading U+0023 (#) removed, if any. </p>"
        },
        {
          "html": "<p>Set <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④⑤\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url④②\">URL</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-fragment\" id=\"ref-for-concept-url-fragment①⑥\">fragment</a> to the empty string. </p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-basic-url-parser\" id=\"ref-for-concept-basic-url-parser①④\">Basic URL parse</a> <var>input</var> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④⑥\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url④③\">URL</a> as <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-url\" id=\"ref-for-basic-url-parser-url⑥\"><i>url</i></a> and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#fragment-state\" id=\"ref-for-fragment-state⑦\">fragment state</a> as <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-state-override\" id=\"ref-for-basic-url-parser-state-override⑥\"><i>state override</i></a>. </p>"
        }
      ]
    },
    {
      "name": "URLSearchParams/initialize",
      "href": "https://url.spec.whatwg.org/#urlsearchparams-initialize",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"URLSearchParams\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"urlsearchparams-initialize\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">initialize<span id=\"concept-urlsearchparams-new\"></span></dfn> a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://url.spec.whatwg.org/#urlsearchparams\" id=\"ref-for-urlsearchparams⑧\">URLSearchParams</a></code> object <var>query</var> with <var>init</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "If <var>init</var> is a <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#idl-sequence\" id=\"ref-for-idl-sequence③\">sequence</a>, then <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate⑧\">for each</a> <var>innerSequence</var> of <var>init</var>:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>innerSequence</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size⑥\">size</a> is not 2, then <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②\">throw</a> a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror②\">TypeError</a></code>. </p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append⑦\">Append</a> (<var>innerSequence</var>[0], <var>innerSequence</var>[1]) to <var>query</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-list\" id=\"ref-for-concept-urlsearchparams-list④\">list</a>. </p>"
            }
          ]
        },
        {
          "html": "<p>Otherwise, if <var>init</var> is a <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#idl-record\" id=\"ref-for-idl-record①\">record</a>, then <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-iterate\" id=\"ref-for-map-iterate\">for each</a> <var>name</var> → <var>value</var> of <var>init</var>, <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append⑧\">append</a> (<var>name</var>, <var>value</var>) to <var>query</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-list\" id=\"ref-for-concept-urlsearchparams-list⑤\">list</a>. </p>"
        },
        {
          "html": "Otherwise:",
          "rationale": "assert",
          "steps": [
            {
              "html": "<p>Assert: <var>init</var> is a string. </p>"
            },
            {
              "html": "<p>Set <var>query</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-list\" id=\"ref-for-concept-urlsearchparams-list⑥\">list</a> to the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlencoded-string-parser\" id=\"ref-for-concept-urlencoded-string-parser②\">parsing</a> <var>init</var>. </p>"
            }
          ]
        }
      ]
    },
    {
      "name": "URLSearchParams/update",
      "href": "https://url.spec.whatwg.org/#concept-urlsearchparams-update",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"URLSearchParams\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"concept-urlsearchparams-update\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">update</dfn> a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://url.spec.whatwg.org/#urlsearchparams\" id=\"ref-for-urlsearchparams⑨\">URLSearchParams</a></code> object <var>query</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>query</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-url-object\" id=\"ref-for-concept-urlsearchparams-url-object②\">URL object</a> is null, then return. </p>"
        },
        {
          "html": "<p>Let <var>serializedQuery</var> be the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlencoded-serializer\" id=\"ref-for-concept-urlencoded-serializer\">serialization</a> of <var>query</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-list\" id=\"ref-for-concept-urlsearchparams-list⑦\">list</a>. </p>"
        },
        {
          "html": "<p>If <var>serializedQuery</var> is the empty string, then set <var>serializedQuery</var> to\n null. </p>"
        },
        {
          "html": "<p>Set <var>query</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-url-object\" id=\"ref-for-concept-urlsearchparams-url-object③\">URL object</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-url\" id=\"ref-for-concept-url-url④⑤\">URL</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query②⑦\">query</a> to <var>serializedQuery</var>. </p>"
        },
        {
          "html": "<p>If <var>serializedQuery</var> is null, then <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#potentially-strip-trailing-spaces-from-an-opaque-path\" id=\"ref-for-potentially-strip-trailing-spaces-from-an-opaque-path②\">potentially strip trailing spaces from an opaque path</a> with <var>query</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-url-object\" id=\"ref-for-concept-urlsearchparams-url-object④\">URL object</a>. </p>"
        }
      ]
    },
    {
      "name": "URLSearchParams/URLSearchParams(init)",
      "href": "https://url.spec.whatwg.org/#dom-urlsearchparams-urlsearchparams",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URLSearchParams\" data-dfn-type=\"constructor\" data-export=\"\" data-lt=\"URLSearchParams(init)|constructor(init)|URLSearchParams()|constructor()\" id=\"dom-urlsearchparams-urlsearchparams\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>new URLSearchParams(<var>init</var>)</code></dfn> constructor steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>init</var> is a string and starts with U+003F (?), then remove the first code point\n from <var>init</var>. </p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#urlsearchparams-initialize\" id=\"ref-for-urlsearchparams-initialize①\">Initialize</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④⑧\">this</a> with <var>init</var>. </p>"
        }
      ]
    },
    {
      "name": "URLSearchParams/append(name, value)",
      "href": "https://url.spec.whatwg.org/#dom-urlsearchparams-append",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URLSearchParams\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-urlsearchparams-append\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>append(<var>name</var>, <var>value</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append⑨\">Append</a> (<var>name</var>, <var>value</var>) to <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤⓪\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-list\" id=\"ref-for-concept-urlsearchparams-list⑨\">list</a>. </p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-update\" id=\"ref-for-concept-urlsearchparams-update\">Update</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤①\">this</a>. </p>"
        }
      ]
    },
    {
      "name": "URLSearchParams/delete(name, value)",
      "href": "https://url.spec.whatwg.org/#dom-urlsearchparams-delete",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URLSearchParams\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"delete(name, value)|delete(name)\" id=\"dom-urlsearchparams-delete\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>delete(<var>name</var>, <var>value</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>value</var> is given, then <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-remove\" id=\"ref-for-list-remove④\">remove</a> all <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#tuple\" id=\"ref-for-tuple③\">tuples</a> whose name\n is <var>name</var> and value is <var>value</var> from <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤②\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-list\" id=\"ref-for-concept-urlsearchparams-list①⓪\">list</a>. </p>"
        },
        {
          "html": "<p>Otherwise, <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-remove\" id=\"ref-for-list-remove⑤\">remove</a> all <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#tuple\" id=\"ref-for-tuple④\">tuples</a> whose name is <var>name</var> from <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤③\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-list\" id=\"ref-for-concept-urlsearchparams-list①①\">list</a>. </p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-update\" id=\"ref-for-concept-urlsearchparams-update①\">Update</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤④\">this</a>. </p>"
        }
      ]
    },
    {
      "name": "URLSearchParams/has(name, value)",
      "href": "https://url.spec.whatwg.org/#dom-urlsearchparams-has",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URLSearchParams\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"has(name, value)|has(name)\" id=\"dom-urlsearchparams-has\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>has(<var>name</var>, <var>value</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>value</var> is given and there is a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#tuple\" id=\"ref-for-tuple⑧\">tuple</a> whose name is <var>name</var> and value is <var>value</var> in <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤⑦\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-list\" id=\"ref-for-concept-urlsearchparams-list①④\">list</a>, then return true. </p>"
        },
        {
          "html": "<p>If <var>value</var> is not given and there is a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#tuple\" id=\"ref-for-tuple⑨\">tuple</a> whose name is <var>name</var> in <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤⑧\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-list\" id=\"ref-for-concept-urlsearchparams-list①⑤\">list</a>, then return true. </p>"
        },
        {
          "html": "<p>Return false. </p>"
        }
      ]
    },
    {
      "name": "URLSearchParams/set(name, value)",
      "href": "https://url.spec.whatwg.org/#dom-urlsearchparams-set",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URLSearchParams\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-urlsearchparams-set\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>set(<var>name</var>, <var>value</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤⑨\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-list\" id=\"ref-for-concept-urlsearchparams-list①⑥\">list</a> <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-contain\" id=\"ref-for-list-contain\">contains</a> any <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#tuple\" id=\"ref-for-tuple①⓪\">tuples</a> whose name is <var>name</var>, then set the value of the first such <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#tuple\" id=\"ref-for-tuple①①\">tuple</a> to <var>value</var> and <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-remove\" id=\"ref-for-list-remove⑥\">remove</a> the others. </p>"
        },
        {
          "html": "<p>Otherwise, <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append①⓪\">append</a> (<var>name</var>, <var>value</var>) to <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥⓪\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-list\" id=\"ref-for-concept-urlsearchparams-list①⑦\">list</a>. </p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-update\" id=\"ref-for-concept-urlsearchparams-update②\">Update</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥①\">this</a>. </p>"
        }
      ]
    },
    {
      "name": "URLSearchParams/sort()",
      "href": "https://url.spec.whatwg.org/#dom-urlsearchparams-sort",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URLSearchParams\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-urlsearchparams-sort\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>sort()</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Sort all <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#tuple\" id=\"ref-for-tuple①②\">tuples</a> in <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥②\">this</a>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-list\" id=\"ref-for-concept-urlsearchparams-list①⑧\">list</a>, if any, by\n their names. Sorting must be done by comparison of code units. The relative order between <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#tuple\" id=\"ref-for-tuple①③\">tuples</a> with equal names must be preserved. </p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-urlsearchparams-update\" id=\"ref-for-concept-urlsearchparams-update③\">Update</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥③\">this</a>. </p>"
        }
      ]
    }
  ]
}