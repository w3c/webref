{
  "spec": {
    "title": "URL Pattern Standard",
    "url": "https://urlpattern.spec.whatwg.org/"
  },
  "algorithms": [
    {
      "name": "URLPattern/URLPattern(input, baseURL, options)",
      "href": "https://urlpattern.spec.whatwg.org/#dom-urlpattern-urlpattern",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URLPattern\" data-dfn-type=\"constructor\" data-export=\"\" data-lt=\"URLPattern(input, baseURL, options)|constructor(input, baseURL, options)|URLPattern(input, baseURL)|constructor(input, baseURL)\" id=\"dom-urlpattern-urlpattern\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>new URLPattern(<var>input</var>, <var>baseURL</var>, <var>options</var>)</code></dfn> constructor steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#urlpattern-initialize\" id=\"ref-for-urlpattern-initialize\">initialize</a> given <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this\">this</a>, <var>input</var>, <var>baseURL</var>, and <var>options</var>.</p>"
        }
      ]
    },
    {
      "name": "URLPattern/URLPattern(input, options)",
      "href": "https://urlpattern.spec.whatwg.org/#dom-urlpattern-urlpattern-input-options",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URLPattern\" data-dfn-type=\"constructor\" data-export=\"\" data-lt=\"URLPattern(input, options)|constructor(input, options)|URLPattern(input)|constructor(input)|URLPattern()|constructor()\" id=\"dom-urlpattern-urlpattern-input-options\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>new URLPattern(<var>input</var>, <var>options</var>)</code></dfn> constructor steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#urlpattern-initialize\" id=\"ref-for-urlpattern-initialize①\">initialize</a> given <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①\">this</a>, <var>input</var>, null, and <var>options</var>.</p>"
        }
      ]
    },
    {
      "name": "URLPattern/initialize",
      "href": "https://urlpattern.spec.whatwg.org/#urlpattern-initialize",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"URLPattern\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"urlpattern-initialize\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">initialize</dfn> a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#urlpattern\" id=\"ref-for-urlpattern⑥\">URLPattern</a></code> given a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#urlpattern\" id=\"ref-for-urlpattern⑦\">URLPattern</a></code> <var>this</var>, <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#typedefdef-urlpatterninput\" id=\"ref-for-typedefdef-urlpatterninput⑤\">URLPatternInput</a></code> <var>input</var>, string or null <var>baseURL</var>, and <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dictdef-urlpatternoptions\" id=\"ref-for-dictdef-urlpatternoptions③\">URLPatternOptions</a></code> <var>options</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Set <var>this</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#urlpattern-associated-url-pattern\" id=\"ref-for-urlpattern-associated-url-pattern\">associated URL pattern</a> to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-create\" id=\"ref-for-url-pattern-create\">create</a> given <var>input</var>, <var>baseURL</var>, and <var>options</var>.</p>"
        }
      ]
    },
    {
      "name": "URLPattern/protocol",
      "href": "https://urlpattern.spec.whatwg.org/#dom-urlpattern-protocol",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URLPattern\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-urlpattern-protocol\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>protocol</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Return <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②\">this</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#urlpattern-associated-url-pattern\" id=\"ref-for-urlpattern-associated-url-pattern①\">associated URL pattern</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-protocol-component\" id=\"ref-for-url-pattern-protocol-component③\">protocol component</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-pattern-string\" id=\"ref-for-component-pattern-string\">pattern string</a>.</p>"
        }
      ]
    },
    {
      "name": "URLPattern/username",
      "href": "https://urlpattern.spec.whatwg.org/#dom-urlpattern-username",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URLPattern\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-urlpattern-username\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>username</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Return <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③\">this</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#urlpattern-associated-url-pattern\" id=\"ref-for-urlpattern-associated-url-pattern②\">associated URL pattern</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-username-component\" id=\"ref-for-url-pattern-username-component③\">username component</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-pattern-string\" id=\"ref-for-component-pattern-string①\">pattern string</a>.</p>"
        }
      ]
    },
    {
      "name": "URLPattern/password",
      "href": "https://urlpattern.spec.whatwg.org/#dom-urlpattern-password",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URLPattern\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-urlpattern-password\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>password</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Return <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④\">this</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#urlpattern-associated-url-pattern\" id=\"ref-for-urlpattern-associated-url-pattern③\">associated URL pattern</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-password-component\" id=\"ref-for-url-pattern-password-component③\">password component</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-pattern-string\" id=\"ref-for-component-pattern-string②\">pattern string</a>.</p>"
        }
      ]
    },
    {
      "name": "URLPattern/hostname",
      "href": "https://urlpattern.spec.whatwg.org/#dom-urlpattern-hostname",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URLPattern\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-urlpattern-hostname\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>hostname</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Return <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤\">this</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#urlpattern-associated-url-pattern\" id=\"ref-for-urlpattern-associated-url-pattern④\">associated URL pattern</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-hostname-component\" id=\"ref-for-url-pattern-hostname-component③\">hostname component</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-pattern-string\" id=\"ref-for-component-pattern-string③\">pattern string</a>.</p>"
        }
      ]
    },
    {
      "name": "URLPattern/port",
      "href": "https://urlpattern.spec.whatwg.org/#dom-urlpattern-port",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URLPattern\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-urlpattern-port\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>port</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Return <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥\">this</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#urlpattern-associated-url-pattern\" id=\"ref-for-urlpattern-associated-url-pattern⑤\">associated URL pattern</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-port-component\" id=\"ref-for-url-pattern-port-component③\">port component</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-pattern-string\" id=\"ref-for-component-pattern-string④\">pattern string</a>.</p>"
        }
      ]
    },
    {
      "name": "URLPattern/pathname",
      "href": "https://urlpattern.spec.whatwg.org/#dom-urlpattern-pathname",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URLPattern\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-urlpattern-pathname\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>pathname</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Return <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑦\">this</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#urlpattern-associated-url-pattern\" id=\"ref-for-urlpattern-associated-url-pattern⑥\">associated URL pattern</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-pathname-component\" id=\"ref-for-url-pattern-pathname-component④\">pathname component</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-pattern-string\" id=\"ref-for-component-pattern-string⑤\">pattern string</a>.</p>"
        }
      ]
    },
    {
      "name": "URLPattern/search",
      "href": "https://urlpattern.spec.whatwg.org/#dom-urlpattern-search",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URLPattern\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-urlpattern-search\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>search</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Return <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧\">this</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#urlpattern-associated-url-pattern\" id=\"ref-for-urlpattern-associated-url-pattern⑦\">associated URL pattern</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-search-component\" id=\"ref-for-url-pattern-search-component③\">search component</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-pattern-string\" id=\"ref-for-component-pattern-string⑥\">pattern string</a>.</p>"
        }
      ]
    },
    {
      "name": "URLPattern/hash",
      "href": "https://urlpattern.spec.whatwg.org/#dom-urlpattern-hash",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URLPattern\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-urlpattern-hash\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>hash</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Return <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑨\">this</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#urlpattern-associated-url-pattern\" id=\"ref-for-urlpattern-associated-url-pattern⑧\">associated URL pattern</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-hash-component\" id=\"ref-for-url-pattern-hash-component③\">hash component</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-pattern-string\" id=\"ref-for-component-pattern-string⑦\">pattern string</a>.</p>"
        }
      ]
    },
    {
      "name": "URLPattern/hasRegExpGroups",
      "href": "https://urlpattern.spec.whatwg.org/#dom-urlpattern-hasregexpgroups",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URLPattern\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-urlpattern-hasregexpgroups\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>hasRegExpGroups</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⓪\">this</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#urlpattern-associated-url-pattern\" id=\"ref-for-urlpattern-associated-url-pattern⑨\">associated URL pattern</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-has-regexp-groups\" id=\"ref-for-url-pattern-has-regexp-groups\">has regexp groups</a>, then return true.</p>"
        },
        {
          "html": "<p>Return false.</p>"
        }
      ]
    },
    {
      "name": "URLPattern/test(input, baseURL)",
      "href": "https://urlpattern.spec.whatwg.org/#dom-urlpattern-test",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URLPattern\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"test(input, baseURL)|test(input)|test()\" id=\"dom-urlpattern-test\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>test(<var>input</var>, <var>baseURL</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>result</var> be the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-match\" id=\"ref-for-url-pattern-match\">match</a> given <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①①\">this</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#urlpattern-associated-url-pattern\" id=\"ref-for-urlpattern-associated-url-pattern①⓪\">associated URL pattern</a>, <var>input</var>, and <var>baseURL</var> if given.</p>"
        },
        {
          "html": "<p>If <var>result</var> is null, return false.</p>"
        },
        {
          "html": "<p>Return true.</p>"
        }
      ]
    },
    {
      "name": "URLPattern/exec(input, baseURL)",
      "href": "https://urlpattern.spec.whatwg.org/#dom-urlpattern-exec",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"URLPattern\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"exec(input, baseURL)|exec(input)|exec()\" id=\"dom-urlpattern-exec\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>exec(<var>input</var>, <var>baseURL</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Return the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-match\" id=\"ref-for-url-pattern-match①\">match</a> given <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①②\">this</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#urlpattern-associated-url-pattern\" id=\"ref-for-urlpattern-associated-url-pattern①①\">associated URL pattern</a>, <var>input</var>, and <var>baseURL</var> if given.</p>"
        }
      ]
    },
    {
      "name": "URL pattern/create",
      "href": "https://urlpattern.spec.whatwg.org/#url-pattern-create",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"URL pattern\" data-dfn-type=\"dfn\" data-export=\"\" id=\"url-pattern-create\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">create</dfn> a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern\" id=\"ref-for-url-pattern②\">URL pattern</a> given a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#typedefdef-urlpatterninput\" id=\"ref-for-typedefdef-urlpatterninput⑥\">URLPatternInput</a></code> <var>input</var>, string or null <var>baseURL</var>, and <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dictdef-urlpatternoptions\" id=\"ref-for-dictdef-urlpatternoptions④\">URLPatternOptions</a></code> <var>options</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>init</var> be null.</p>"
        },
        {
          "html": "If <var>input</var> is a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#scalar-value-string\" id=\"ref-for-scalar-value-string\">scalar value string</a> then:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>init</var> to the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#parse-a-constructor-string\" id=\"ref-for-parse-a-constructor-string\">parse a constructor string</a> given <var>input</var>.</p>"
            },
            {
              "html": "<p>If <var>baseURL</var> is null and <var>init</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-protocol\" id=\"ref-for-dom-urlpatterninit-protocol\">protocol</a></code>\"] does not <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists\">exist</a>, then throw a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror\">TypeError</a></code>.</p>"
            },
            {
              "html": "<p>If <var>baseURL</var> is not null, <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-set\" id=\"ref-for-map-set\">set</a> <var>init</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-baseurl\" id=\"ref-for-dom-urlpatterninit-baseurl②\">baseURL</a></code>\"] to <var>baseURL</var>.</p>"
            }
          ]
        },
        {
          "html": "Otherwise:",
          "rationale": "assert",
          "steps": [
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert\">Assert</a>: <var>input</var> is a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dictdef-urlpatterninit\" id=\"ref-for-dictdef-urlpatterninit①\">URLPatternInit</a></code>.</p>"
            },
            {
              "html": "<p>If <var>baseURL</var> is not null, then throw a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror①\">TypeError</a></code>.</p>"
            },
            {
              "html": "<p>Set <var>init</var> to <var>input</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Let <var>processedInit</var> be the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-a-urlpatterninit\" id=\"ref-for-process-a-urlpatterninit\">process a URLPatternInit</a> given <var>init</var>, \"<code>pattern</code>\", null, null, null, null, null, null, null, and null.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate\">For each</a> <var>componentName</var> of « \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-protocol\" id=\"ref-for-dom-urlpatterninit-protocol①\">protocol</a></code>\", \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-username\" id=\"ref-for-dom-urlpatterninit-username\">username</a></code>\", \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-password\" id=\"ref-for-dom-urlpatterninit-password\">password</a></code>\", \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hostname\" id=\"ref-for-dom-urlpatterninit-hostname\">hostname</a></code>\", \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-port\" id=\"ref-for-dom-urlpatterninit-port\">port</a></code>\", \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-pathname\" id=\"ref-for-dom-urlpatterninit-pathname\">pathname</a></code>\", \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-search\" id=\"ref-for-dom-urlpatterninit-search\">search</a></code>\", \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hash\" id=\"ref-for-dom-urlpatterninit-hash\">hash</a></code>\" »:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>processedInit</var>[<var>componentName</var>] does not <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists①\">exist</a>, then <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-set\" id=\"ref-for-map-set①\">set</a> <var>processedInit</var>[<var>componentName</var>] to \"<code>*</code>\".</p>"
            }
          ]
        },
        {
          "html": "<p>If <var>processedInit</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-protocol\" id=\"ref-for-dom-urlpatterninit-protocol②\">protocol</a></code>\"] is a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#special-scheme\" id=\"ref-for-special-scheme\">special scheme</a> and <var>processedInit</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-port\" id=\"ref-for-dom-urlpatterninit-port①\">port</a></code>\"] is a string which represents its corresponding <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#default-port\" id=\"ref-for-default-port\">default port</a> in radix-10 using <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-digit\" id=\"ref-for-ascii-digit\">ASCII digits</a> then set <var>processedInit</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-port\" id=\"ref-for-dom-urlpatterninit-port②\">port</a></code>\"] to the empty string.</p>"
        },
        {
          "html": "<p>Let <var>urlPattern</var> be a new <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern\" id=\"ref-for-url-pattern③\">URL pattern</a>.</p>"
        },
        {
          "html": "<p>Set <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-protocol-component\" id=\"ref-for-url-pattern-protocol-component④\">protocol component</a> to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#compile-a-component\" id=\"ref-for-compile-a-component\">compiling a component</a> given <var>processedInit</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-protocol\" id=\"ref-for-dom-urlpatterninit-protocol③\">protocol</a></code>\"], <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#canonicalize-a-protocol\" id=\"ref-for-canonicalize-a-protocol\">canonicalize a protocol</a>, and <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#default-options\" id=\"ref-for-default-options\">default options</a>.</p>"
        },
        {
          "html": "<p>Set <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-username-component\" id=\"ref-for-url-pattern-username-component④\">username component</a> to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#compile-a-component\" id=\"ref-for-compile-a-component①\">compiling a component</a> given <var>processedInit</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-username\" id=\"ref-for-dom-urlpatterninit-username①\">username</a></code>\"], <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#canonicalize-a-username\" id=\"ref-for-canonicalize-a-username\">canonicalize a username</a>, and <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#default-options\" id=\"ref-for-default-options①\">default options</a>.</p>"
        },
        {
          "html": "<p>Set <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-password-component\" id=\"ref-for-url-pattern-password-component④\">password component</a> to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#compile-a-component\" id=\"ref-for-compile-a-component②\">compiling a component</a> given <var>processedInit</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-password\" id=\"ref-for-dom-urlpatterninit-password①\">password</a></code>\"], <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#canonicalize-a-password\" id=\"ref-for-canonicalize-a-password\">canonicalize a password</a>, and <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#default-options\" id=\"ref-for-default-options②\">default options</a>.</p>"
        },
        {
          "html": "<p>If the result running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#hostname-pattern-is-an-ipv6-address\" id=\"ref-for-hostname-pattern-is-an-ipv6-address\">hostname pattern is an IPv6 address</a> given <var>processedInit</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hostname\" id=\"ref-for-dom-urlpatterninit-hostname①\">hostname</a></code>\"] is true, then set <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-hostname-component\" id=\"ref-for-url-pattern-hostname-component④\">hostname component</a> to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#compile-a-component\" id=\"ref-for-compile-a-component③\">compiling a component</a> given <var>processedInit</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hostname\" id=\"ref-for-dom-urlpatterninit-hostname②\">hostname</a></code>\"], <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#canonicalize-an-ipv6-hostname\" id=\"ref-for-canonicalize-an-ipv6-hostname\">canonicalize an IPv6 hostname</a>, and <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#hostname-options\" id=\"ref-for-hostname-options\">hostname options</a>.</p>"
        },
        {
          "html": "<p>Otherwise, set <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-hostname-component\" id=\"ref-for-url-pattern-hostname-component⑤\">hostname component</a> to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#compile-a-component\" id=\"ref-for-compile-a-component④\">compiling a component</a> given <var>processedInit</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hostname\" id=\"ref-for-dom-urlpatterninit-hostname③\">hostname</a></code>\"], <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#canonicalize-a-hostname\" id=\"ref-for-canonicalize-a-hostname\">canonicalize a hostname</a>, and <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#hostname-options\" id=\"ref-for-hostname-options①\">hostname options</a>.</p>"
        },
        {
          "html": "<p>Set <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-port-component\" id=\"ref-for-url-pattern-port-component④\">port component</a> to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#compile-a-component\" id=\"ref-for-compile-a-component⑤\">compiling a component</a> given <var>processedInit</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-port\" id=\"ref-for-dom-urlpatterninit-port③\">port</a></code>\"], <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#canonicalize-a-port\" id=\"ref-for-canonicalize-a-port\">canonicalize a port</a>, and <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#default-options\" id=\"ref-for-default-options③\">default options</a>.</p>"
        },
        {
          "html": "<p>Let <var>compileOptions</var> be a copy of the <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#default-options\" id=\"ref-for-default-options④\">default options</a> with the <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#options-ignore-case\" id=\"ref-for-options-ignore-case\">ignore case</a> property set to <var>options</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatternoptions-ignorecase\" id=\"ref-for-dom-urlpatternoptions-ignorecase①\">ignoreCase</a></code>\"].</p>"
        },
        {
          "html": "If the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#protocol-component-matches-a-special-scheme\" id=\"ref-for-protocol-component-matches-a-special-scheme\">protocol component matches a special scheme</a> given <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-protocol-component\" id=\"ref-for-url-pattern-protocol-component⑤\">protocol component</a> is true, then:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>pathCompileOptions</var> be copy of the <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pathname-options\" id=\"ref-for-pathname-options\">pathname options</a> with the <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#options-ignore-case\" id=\"ref-for-options-ignore-case①\">ignore case</a> property set to <var>options</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatternoptions-ignorecase\" id=\"ref-for-dom-urlpatternoptions-ignorecase②\">ignoreCase</a></code>\"].</p>"
            },
            {
              "html": "<p>Set <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-pathname-component\" id=\"ref-for-url-pattern-pathname-component⑤\">pathname component</a> to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#compile-a-component\" id=\"ref-for-compile-a-component⑥\">compiling a component</a> given <var>processedInit</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-pathname\" id=\"ref-for-dom-urlpatterninit-pathname①\">pathname</a></code>\"], <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#canonicalize-a-pathname\" id=\"ref-for-canonicalize-a-pathname\">canonicalize a pathname</a>, and <var>pathCompileOptions</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Otherwise set <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-pathname-component\" id=\"ref-for-url-pattern-pathname-component⑥\">pathname component</a> to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#compile-a-component\" id=\"ref-for-compile-a-component⑦\">compiling a component</a> given <var>processedInit</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-pathname\" id=\"ref-for-dom-urlpatterninit-pathname②\">pathname</a></code>\"], <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#canonicalize-an-opaque-pathname\" id=\"ref-for-canonicalize-an-opaque-pathname\">canonicalize an opaque pathname</a>, and <var>compileOptions</var>.</p>"
        },
        {
          "html": "<p>Set <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-search-component\" id=\"ref-for-url-pattern-search-component④\">search component</a> to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#compile-a-component\" id=\"ref-for-compile-a-component⑧\">compiling a component</a> given <var>processedInit</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-search\" id=\"ref-for-dom-urlpatterninit-search①\">search</a></code>\"], <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#canonicalize-a-search\" id=\"ref-for-canonicalize-a-search\">canonicalize a search</a>, and <var>compileOptions</var>.</p>"
        },
        {
          "html": "<p>Set <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-hash-component\" id=\"ref-for-url-pattern-hash-component④\">hash component</a> to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#compile-a-component\" id=\"ref-for-compile-a-component⑨\">compiling a component</a> given <var>processedInit</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hash\" id=\"ref-for-dom-urlpatterninit-hash①\">hash</a></code>\"], <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#canonicalize-a-hash\" id=\"ref-for-canonicalize-a-hash\">canonicalize a hash</a>, and <var>compileOptions</var>.</p>"
        },
        {
          "html": "<p>Return <var>urlPattern</var>.</p>"
        }
      ]
    },
    {
      "name": "URL pattern/match",
      "href": "https://urlpattern.spec.whatwg.org/#url-pattern-match",
      "html": "To perform a <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"URL pattern\" data-dfn-type=\"dfn\" data-export=\"\" id=\"url-pattern-match\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">match</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern\" id=\"ref-for-url-pattern④\">URL pattern</a> <var>urlPattern</var>, a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#typedefdef-urlpatterninput\" id=\"ref-for-typedefdef-urlpatterninput⑦\">URLPatternInput</a></code> or <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url①\">URL</a> <var>input</var>, and an optional string <var>baseURLString</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>protocol</var> be the empty string.</p>"
        },
        {
          "html": "<p>Let <var>username</var> be the empty string.</p>"
        },
        {
          "html": "<p>Let <var>password</var> be the empty string.</p>"
        },
        {
          "html": "<p>Let <var>hostname</var> be the empty string.</p>"
        },
        {
          "html": "<p>Let <var>port</var> be the empty string.</p>"
        },
        {
          "html": "<p>Let <var>pathname</var> be the empty string.</p>"
        },
        {
          "html": "<p>Let <var>search</var> be the empty string.</p>"
        },
        {
          "html": "<p>Let <var>hash</var> be the empty string.</p>"
        },
        {
          "html": "<p>Let <var>inputs</var> be an empty <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list①\">list</a>.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append\">Append</a> <var>input</var> to <var>inputs</var>.</p>"
        },
        {
          "html": "If <var>input</var> is a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dictdef-urlpatterninit\" id=\"ref-for-dictdef-urlpatterninit②\">URLPatternInit</a></code> then:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>baseURLString</var> was given, throw a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror②\">TypeError</a></code>.</p>"
            },
            {
              "html": "<p>Let <var>applyResult</var> be the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-a-urlpatterninit\" id=\"ref-for-process-a-urlpatterninit①\">process a URLPatternInit</a> given <var>input</var>, \"url\", <var>protocol</var>, <var>username</var>, <var>password</var>, <var>hostname</var>, <var>port</var>, <var>pathname</var>, <var>search</var>, and <var>hash</var>. If this throws an exception, catch it, and return null.</p>"
            },
            {
              "html": "<p>Set <var>protocol</var> to <var>applyResult</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-protocol\" id=\"ref-for-dom-urlpatterninit-protocol④\">protocol</a></code>\"].</p>"
            },
            {
              "html": "<p>Set <var>username</var> to <var>applyResult</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-username\" id=\"ref-for-dom-urlpatterninit-username②\">username</a></code>\"].</p>"
            },
            {
              "html": "<p>Set <var>password</var> to <var>applyResult</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-password\" id=\"ref-for-dom-urlpatterninit-password②\">password</a></code>\"].</p>"
            },
            {
              "html": "<p>Set <var>hostname</var> to <var>applyResult</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hostname\" id=\"ref-for-dom-urlpatterninit-hostname④\">hostname</a></code>\"].</p>"
            },
            {
              "html": "<p>Set <var>port</var> to <var>applyResult</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-port\" id=\"ref-for-dom-urlpatterninit-port④\">port</a></code>\"].</p>"
            },
            {
              "html": "<p>Set <var>pathname</var> to <var>applyResult</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-pathname\" id=\"ref-for-dom-urlpatterninit-pathname③\">pathname</a></code>\"].</p>"
            },
            {
              "html": "<p>Set <var>search</var> to <var>applyResult</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-search\" id=\"ref-for-dom-urlpatterninit-search②\">search</a></code>\"].</p>"
            },
            {
              "html": "<p>Set <var>hash</var> to <var>applyResult</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hash\" id=\"ref-for-dom-urlpatterninit-hash②\">hash</a></code>\"].</p>"
            }
          ]
        },
        {
          "html": "Otherwise:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>url</var> be <var>input</var>.</p>"
            },
            {
              "html": "If <var>input</var> is a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-USVString\" id=\"ref-for-idl-USVString②④\">USVString</a></code>:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>baseURL</var> be null.</p>"
                },
                {
                  "html": "If <var>baseURLString</var> was given, then:",
                  "rationale": "set",
                  "steps": [
                    {
                      "html": "<p>Set <var>baseURL</var> to the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-parser\" id=\"ref-for-concept-url-parser\">parsing</a> <var>baseURLString</var>.</p>"
                    },
                    {
                      "html": "<p>If <var>baseURL</var> is failure, return null.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append①\">Append</a> <var>baseURLString</var> to <var>inputs</var>.</p>"
                    }
                  ]
                },
                {
                  "html": "<p>Set <var>url</var> to the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-parser\" id=\"ref-for-concept-url-parser①\">parsing</a> <var>input</var> given <var>baseURL</var>.</p>"
                },
                {
                  "html": "<p>If <var>url</var> is failure, return null.</p>"
                }
              ]
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①\">Assert</a>: <var>url</var> is a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url②\">URL</a>.</p>"
            },
            {
              "html": "<p>Set <var>protocol</var> to <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme\">scheme</a>.</p>"
            },
            {
              "html": "<p>Set <var>username</var> to <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-username\" id=\"ref-for-concept-url-username\">username</a>.</p>"
            },
            {
              "html": "<p>Set <var>password</var> to <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-password\" id=\"ref-for-concept-url-password\">password</a>.</p>"
            },
            {
              "html": "<p>Set <var>hostname</var> to <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host\">host</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-host-serializer\" id=\"ref-for-concept-host-serializer\">serialized</a>, or the empty string if the value is null.</p>"
            },
            {
              "html": "<p>Set <var>port</var> to <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port\">port</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#serialize-an-integer\" id=\"ref-for-serialize-an-integer\">serialized</a>, or the empty string if the value is null.</p>"
            },
            {
              "html": "<p>Set <var>pathname</var> to the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-path-serializer\" id=\"ref-for-url-path-serializer\">URL path serializing</a> <var>url</var>.</p>"
            },
            {
              "html": "<p>Set <var>search</var> to <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query\">query</a> or the empty string if the value is null.</p>"
            },
            {
              "html": "<p>Set <var>hash</var> to <var>url</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-fragment\" id=\"ref-for-concept-url-fragment\">fragment</a> or the empty string if the value is null.</p>"
            }
          ]
        },
        {
          "html": "<p>Let <var>protocolExecResult</var> be <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/text-processing.html#sec-regexpbuiltinexec\" id=\"ref-for-sec-regexpbuiltinexec\">RegExpBuiltinExec</a>(<var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-protocol-component\" id=\"ref-for-url-pattern-protocol-component⑥\">protocol component</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-regular-expression\" id=\"ref-for-component-regular-expression\">regular expression</a>, <var>protocol</var>).</p>"
        },
        {
          "html": "<p>Let <var>usernameExecResult</var> be <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/text-processing.html#sec-regexpbuiltinexec\" id=\"ref-for-sec-regexpbuiltinexec①\">RegExpBuiltinExec</a>(<var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-username-component\" id=\"ref-for-url-pattern-username-component⑤\">username component</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-regular-expression\" id=\"ref-for-component-regular-expression①\">regular expression</a>, <var>username</var>).</p>"
        },
        {
          "html": "<p>Let <var>passwordExecResult</var> be <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/text-processing.html#sec-regexpbuiltinexec\" id=\"ref-for-sec-regexpbuiltinexec②\">RegExpBuiltinExec</a>(<var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-password-component\" id=\"ref-for-url-pattern-password-component⑤\">password component</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-regular-expression\" id=\"ref-for-component-regular-expression②\">regular expression</a>, <var>password</var>).</p>"
        },
        {
          "html": "<p>Let <var>hostnameExecResult</var> be <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/text-processing.html#sec-regexpbuiltinexec\" id=\"ref-for-sec-regexpbuiltinexec③\">RegExpBuiltinExec</a>(<var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-hostname-component\" id=\"ref-for-url-pattern-hostname-component⑥\">hostname component</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-regular-expression\" id=\"ref-for-component-regular-expression③\">regular expression</a>, <var>hostname</var>).</p>"
        },
        {
          "html": "<p>Let <var>portExecResult</var> be <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/text-processing.html#sec-regexpbuiltinexec\" id=\"ref-for-sec-regexpbuiltinexec④\">RegExpBuiltinExec</a>(<var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-port-component\" id=\"ref-for-url-pattern-port-component⑤\">port component</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-regular-expression\" id=\"ref-for-component-regular-expression④\">regular expression</a>, <var>port</var>).</p>"
        },
        {
          "html": "<p>Let <var>pathnameExecResult</var> be <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/text-processing.html#sec-regexpbuiltinexec\" id=\"ref-for-sec-regexpbuiltinexec⑤\">RegExpBuiltinExec</a>(<var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-pathname-component\" id=\"ref-for-url-pattern-pathname-component⑦\">pathname component</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-regular-expression\" id=\"ref-for-component-regular-expression⑤\">regular expression</a>, <var>pathname</var>).</p>"
        },
        {
          "html": "<p>Let <var>searchExecResult</var> be <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/text-processing.html#sec-regexpbuiltinexec\" id=\"ref-for-sec-regexpbuiltinexec⑥\">RegExpBuiltinExec</a>(<var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-search-component\" id=\"ref-for-url-pattern-search-component⑤\">search component</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-regular-expression\" id=\"ref-for-component-regular-expression⑥\">regular expression</a>, <var>search</var>).</p>"
        },
        {
          "html": "<p>Let <var>hashExecResult</var> be <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/text-processing.html#sec-regexpbuiltinexec\" id=\"ref-for-sec-regexpbuiltinexec⑦\">RegExpBuiltinExec</a>(<var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-hash-component\" id=\"ref-for-url-pattern-hash-component⑤\">hash component</a>'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-regular-expression\" id=\"ref-for-component-regular-expression⑦\">regular expression</a>, <var>hash</var>).</p>"
        },
        {
          "html": "<p>If <var>protocolExecResult</var>, <var>usernameExecResult</var>, <var>passwordExecResult</var>, <var>hostnameExecResult</var>, <var>portExecResult</var>, <var>pathnameExecResult</var>, <var>searchExecResult</var>, or <var>hashExecResult</var> are null then return null.</p>"
        },
        {
          "html": "<p>Let <var>result</var> be a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dictdef-urlpatternresult\" id=\"ref-for-dictdef-urlpatternresult①\">URLPatternResult</a></code>.</p>"
        },
        {
          "html": "<p>Set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatternresult-inputs\" id=\"ref-for-dom-urlpatternresult-inputs\">inputs</a></code>\"] to <var>inputs</var>.</p>"
        },
        {
          "html": "<p>Set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatternresult-protocol\" id=\"ref-for-dom-urlpatternresult-protocol\">protocol</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#create-a-component-match-result\" id=\"ref-for-create-a-component-match-result\">creating a component match result</a> given <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-protocol-component\" id=\"ref-for-url-pattern-protocol-component⑦\">protocol component</a>, <var>protocol</var>, and <var>protocolExecResult</var>.</p>"
        },
        {
          "html": "<p>Set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatternresult-username\" id=\"ref-for-dom-urlpatternresult-username\">username</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#create-a-component-match-result\" id=\"ref-for-create-a-component-match-result①\">creating a component match result</a> given <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-username-component\" id=\"ref-for-url-pattern-username-component⑥\">username component</a>, <var>username</var>, and <var>usernameExecResult</var>.</p>"
        },
        {
          "html": "<p>Set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatternresult-password\" id=\"ref-for-dom-urlpatternresult-password\">password</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#create-a-component-match-result\" id=\"ref-for-create-a-component-match-result②\">creating a component match result</a> given <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-password-component\" id=\"ref-for-url-pattern-password-component⑥\">password component</a>, <var>password</var>, and <var>passwordExecResult</var>.</p>"
        },
        {
          "html": "<p>Set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatternresult-hostname\" id=\"ref-for-dom-urlpatternresult-hostname\">hostname</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#create-a-component-match-result\" id=\"ref-for-create-a-component-match-result③\">creating a component match result</a> given <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-hostname-component\" id=\"ref-for-url-pattern-hostname-component⑦\">hostname component</a>, <var>hostname</var>, and <var>hostnameExecResult</var>.</p>"
        },
        {
          "html": "<p>Set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatternresult-port\" id=\"ref-for-dom-urlpatternresult-port\">port</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#create-a-component-match-result\" id=\"ref-for-create-a-component-match-result④\">creating a component match result</a> given <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-port-component\" id=\"ref-for-url-pattern-port-component⑥\">port component</a>, <var>port</var>, and <var>portExecResult</var>.</p>"
        },
        {
          "html": "<p>Set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatternresult-pathname\" id=\"ref-for-dom-urlpatternresult-pathname\">pathname</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#create-a-component-match-result\" id=\"ref-for-create-a-component-match-result⑤\">creating a component match result</a> given <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-pathname-component\" id=\"ref-for-url-pattern-pathname-component⑧\">pathname component</a>, <var>pathname</var>, and <var>pathnameExecResult</var>.</p>"
        },
        {
          "html": "<p>Set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatternresult-search\" id=\"ref-for-dom-urlpatternresult-search\">search</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#create-a-component-match-result\" id=\"ref-for-create-a-component-match-result⑥\">creating a component match result</a> given <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-search-component\" id=\"ref-for-url-pattern-search-component⑥\">search component</a>, <var>search</var>, and <var>searchExecResult</var>.</p>"
        },
        {
          "html": "<p>Set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatternresult-hash\" id=\"ref-for-dom-urlpatternresult-hash\">hash</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#create-a-component-match-result\" id=\"ref-for-create-a-component-match-result⑦\">creating a component match result</a> given <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-hash-component\" id=\"ref-for-url-pattern-hash-component⑥\">hash component</a>, <var>hash</var>, and <var>hashExecResult</var>.</p>"
        },
        {
          "html": "<p>Return <var>result</var>.</p>"
        }
      ]
    },
    {
      "name": "URL pattern/has regexp groups",
      "href": "https://urlpattern.spec.whatwg.org/#url-pattern-has-regexp-groups",
      "html": "A <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern\" id=\"ref-for-url-pattern⑤\">URL pattern</a> <var>urlPattern</var> <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"URL pattern\" data-dfn-type=\"dfn\" data-export=\"\" id=\"url-pattern-has-regexp-groups\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">has regexp groups</dfn> if the following steps return true:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-protocol-component\" id=\"ref-for-url-pattern-protocol-component⑧\">protocol component</a> <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-has-regexp-groups\" id=\"ref-for-component-has-regexp-groups\">has regexp groups</a> is true, then return true.</p>"
        },
        {
          "html": "<p>If <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-username-component\" id=\"ref-for-url-pattern-username-component⑦\">username component</a> <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-has-regexp-groups\" id=\"ref-for-component-has-regexp-groups①\">has regexp groups</a> is true, then return true.</p>"
        },
        {
          "html": "<p>If <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-password-component\" id=\"ref-for-url-pattern-password-component⑦\">password component</a> <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-has-regexp-groups\" id=\"ref-for-component-has-regexp-groups②\">has regexp groups</a> is true, then return true.</p>"
        },
        {
          "html": "<p>If <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-hostname-component\" id=\"ref-for-url-pattern-hostname-component⑧\">hostname component</a> <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-has-regexp-groups\" id=\"ref-for-component-has-regexp-groups③\">has regexp groups</a> is true, then return true.</p>"
        },
        {
          "html": "<p>If <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-port-component\" id=\"ref-for-url-pattern-port-component⑦\">port component</a> <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-has-regexp-groups\" id=\"ref-for-component-has-regexp-groups④\">has regexp groups</a> is true, then return true.</p>"
        },
        {
          "html": "<p>If <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-pathname-component\" id=\"ref-for-url-pattern-pathname-component⑨\">pathname component</a> <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-has-regexp-groups\" id=\"ref-for-component-has-regexp-groups⑤\">has regexp groups</a> is true, then return true.</p>"
        },
        {
          "html": "<p>If <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-search-component\" id=\"ref-for-url-pattern-search-component⑦\">search component</a> <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-has-regexp-groups\" id=\"ref-for-component-has-regexp-groups⑥\">has regexp groups</a> is true, then return true.</p>"
        },
        {
          "html": "<p>If <var>urlPattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-hash-component\" id=\"ref-for-url-pattern-hash-component⑦\">hash component</a> <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-has-regexp-groups\" id=\"ref-for-component-has-regexp-groups⑦\">has regexp groups</a> is true, then return true.</p>"
        },
        {
          "html": "<p>Return false.</p>"
        }
      ]
    },
    {
      "name": "compile a component",
      "href": "https://urlpattern.spec.whatwg.org/#compile-a-component",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"compile-a-component\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">compile a component</dfn> given a string <var>input</var>, <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#encoding-callback\" id=\"ref-for-encoding-callback\">encoding callback</a> <var>encoding callback</var>, and <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#options\" id=\"ref-for-options\">options</a> <var>options</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>part list</var> be the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#parse-a-pattern-string\" id=\"ref-for-parse-a-pattern-string\">parse a pattern string</a> given <var>input</var>, <var>options</var>, and <var>encoding callback</var>.</p>"
        },
        {
          "html": "<p>Let (<var>regular expression string</var>, <var>name list</var>) be the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#generate-a-regular-expression-and-name-list\" id=\"ref-for-generate-a-regular-expression-and-name-list\">generate a regular expression and name list</a> given <var>part list</var> and <var>options</var>.</p>"
        },
        {
          "html": "<p>Let <var>flags</var> be an empty string.</p>"
        },
        {
          "html": "<p>If <var>options</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#options-ignore-case\" id=\"ref-for-options-ignore-case②\">ignore case</a> is true then set <var>flags</var> to \"<code>vi</code>\".</p>"
        },
        {
          "html": "<p>Otherwise set <var>flags</var> to \"<code>v</code>\"</p>"
        },
        {
          "html": "<p>Let <var>regular expression</var> be <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/text-processing.html#sec-regexpcreate\" id=\"ref-for-sec-regexpcreate\">RegExpCreate</a>(<var>regular expression string</var>, <var>flags</var>).  If this throws an exception, catch it, and throw a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror③\">TypeError</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>pattern string</var> be the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#generate-a-pattern-string\" id=\"ref-for-generate-a-pattern-string\">generate a pattern string</a> given <var>part list</var> and <var>options</var>.</p>"
        },
        {
          "html": "<p>Let <var>has regexp groups</var> be false.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate①\">For each</a> <var>part</var> of <var>part list</var>:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type\" id=\"ref-for-part-type\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type-regexp\" id=\"ref-for-part-type-regexp①\"><code>regexp</code></a>\", then set <var>has regexp groups</var> to true.</p>"
            }
          ]
        },
        {
          "html": "<p>Return a new <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component\" id=\"ref-for-component⑨\">component</a> whose <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-pattern-string\" id=\"ref-for-component-pattern-string⑧\">pattern string</a> is <var>pattern string</var>, <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-regular-expression\" id=\"ref-for-component-regular-expression⑧\">regular expression</a> is <var>regular expression</var>, <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-group-name-list\" id=\"ref-for-component-group-name-list\">group name list</a> is <var>name list</var>, and <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-has-regexp-groups\" id=\"ref-for-component-has-regexp-groups⑧\">has regexp groups</a> is <var>has regexp groups</var>.</p>"
        }
      ]
    },
    {
      "name": "create a component match result",
      "href": "https://urlpattern.spec.whatwg.org/#create-a-component-match-result",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"create-a-component-match-result\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">create a component match result</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component\" id=\"ref-for-component①⓪\">component</a> <var>component</var>, a string <var>input</var>, and an array representing the output of <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/text-processing.html#sec-regexpbuiltinexec\" id=\"ref-for-sec-regexpbuiltinexec⑧\">RegExpBuiltinExec</a> <var>execResult</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>result</var> be a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dictdef-urlpatterncomponentresult\" id=\"ref-for-dictdef-urlpatterncomponentresult⑧\">URLPatternComponentResult</a></code>.</p>"
        },
        {
          "html": "<p>Set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterncomponentresult-input\" id=\"ref-for-dom-urlpatterncomponentresult-input\">input</a></code>\"] to <var>input</var>.</p>"
        },
        {
          "html": "<p>Let <var>groups</var> be a <code><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#idl-record\" id=\"ref-for-idl-record①\">record</a>&lt;<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-USVString\" id=\"ref-for-idl-USVString②⑤\">USVString</a></code>, (<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-USVString\" id=\"ref-for-idl-USVString②⑥\">USVString</a></code> or <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-undefined\" id=\"ref-for-idl-undefined①\">undefined</a></code>)&gt;</code>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be 1.</p>"
        },
        {
          "html": "While <var>index</var> is less than <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-get-o-p\" id=\"ref-for-sec-get-o-p\">Get</a>(<var>execResult</var>, \"<code>length</code>\"):",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>name</var> be <var>component</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-group-name-list\" id=\"ref-for-component-group-name-list①\">group name list</a>[<var>index</var> − 1].</p>"
            },
            {
              "html": "<p>Let <var>value</var> be <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-get-o-p\" id=\"ref-for-sec-get-o-p①\">Get</a>(<var>execResult</var>, <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-tostring\" id=\"ref-for-sec-tostring\">ToString</a>(<var>index</var>)).</p>"
            },
            {
              "html": "<p>Set <var>groups</var>[<var>name</var>] to <var>value</var>.</p>"
            },
            {
              "html": "<p>Increment <var>index</var> by 1.</p>"
            }
          ]
        },
        {
          "html": "<p>Set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterncomponentresult-groups\" id=\"ref-for-dom-urlpatterncomponentresult-groups\">groups</a></code>\"] to <var>groups</var>.</p>"
        },
        {
          "html": "<p>Return <var>result</var>.</p>"
        }
      ]
    },
    {
      "name": "protocol component matches a special scheme",
      "href": "https://urlpattern.spec.whatwg.org/#protocol-component-matches-a-special-scheme",
      "html": "To determine if a <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"protocol-component-matches-a-special-scheme\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">protocol component matches a special scheme</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component\" id=\"ref-for-component①①\">component</a> <var>protocol component</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>special scheme list</var> be a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list②\">list</a> populated with all of the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#special-scheme\" id=\"ref-for-special-scheme①\">special schemes</a>.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate②\">For each</a> <var>scheme</var> of <var>special scheme list</var>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>test result</var> be <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/text-processing.html#sec-regexpbuiltinexec\" id=\"ref-for-sec-regexpbuiltinexec⑨\">RegExpBuiltinExec</a>(<var>protocol component</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#component-regular-expression\" id=\"ref-for-component-regular-expression⑨\">regular expression</a>, <var>scheme</var>).</p>"
            },
            {
              "html": "<p>If <var>test result</var> is not null, then return true.</p>"
            }
          ]
        },
        {
          "html": "<p>Return false.</p>"
        }
      ]
    },
    {
      "name": "hostname pattern is an IPv6 address",
      "href": "https://urlpattern.spec.whatwg.org/#hostname-pattern-is-an-ipv6-address",
      "html": "To determine if a <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"hostname-pattern-is-an-ipv6-address\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">hostname pattern is an IPv6 address</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-string\" id=\"ref-for-pattern-string②\">pattern string</a> <var>input</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>input</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string-code-point-length\" id=\"ref-for-string-code-point-length\">code point length</a> is less than 2, then return false.</p>"
        },
        {
          "html": "<p>Let <var>input code points</var> be <var>input</var> interpreted as a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list③\">list</a> of <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-point\" id=\"ref-for-code-point\">code points</a>.</p>"
        },
        {
          "html": "<p>If <var>input code points</var>[0] is U+005B (<code>[</code>), then return true.</p>"
        },
        {
          "html": "<p>If <var>input code points</var>[0] is U+007B (<code>{</code>) and <var>input code points</var>[1] is U+005B (<code>[</code>), then return true.</p>"
        },
        {
          "html": "<p>If <var>input code points</var>[0] is U+005C (<code>\\</code>) and <var>input code points</var>[1] is U+005B (<code>[</code>), then return true.</p>"
        },
        {
          "html": "<p>Return false.</p>"
        }
      ]
    },
    {
      "name": "parse a constructor string",
      "href": "https://urlpattern.spec.whatwg.org/#parse-a-constructor-string",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"parse-a-constructor-string\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">parse a constructor string</dfn> given a string <var>input</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>parser</var> be a new <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser\" id=\"ref-for-constructor-string-parser①⓪\">constructor string parser</a> whose <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-input\" id=\"ref-for-constructor-string-parser-input\">input</a> is <var>input</var> and <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-list\" id=\"ref-for-constructor-string-parser-token-list\">token list</a> is the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenize\" id=\"ref-for-tokenize\">tokenize</a> given <var>input</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenize-policy-lenient\" id=\"ref-for-tokenize-policy-lenient\"><code>lenient</code></a>\".</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-while\" id=\"ref-for-iteration-while\">While</a> <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index\">token index</a> is less than <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-list\" id=\"ref-for-constructor-string-parser-token-list①\">token list</a> <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size\">size</a>:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-increment\" id=\"ref-for-constructor-string-parser-token-increment\">token increment</a> to 1.</p>"
            },
            {
              "html": "If <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-list\" id=\"ref-for-constructor-string-parser-token-list②\">token list</a>[<var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index②\">token index</a>]'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type\" id=\"ref-for-token-type\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-end\" id=\"ref-for-token-type-end\"><code>end</code></a>\" then:",
              "rationale": "if",
              "steps": [
                {
                  "html": "If <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state\" id=\"ref-for-constructor-string-parser-state\">state</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-init\" id=\"ref-for-constructor-string-parser-state-init①\"><code>init</code></a>\":",
                  "rationale": "run",
                  "steps": [
                    {
                      "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#rewind\" id=\"ref-for-rewind\">rewind</a> given <var>parser</var>.</p>"
                    },
                    {
                      "html": "<p>If the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-hash-prefix\" id=\"ref-for-is-a-hash-prefix\">is a hash prefix</a> given <var>parser</var> is true, then run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#change-state\" id=\"ref-for-change-state\">change state</a> given <var>parser</var>, \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-hash\" id=\"ref-for-constructor-string-parser-state-hash\"><code>hash</code></a>\" and 1.</p>"
                    },
                    {
                      "html": "Otherwise if the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-search-prefix\" id=\"ref-for-is-a-search-prefix\">is a search prefix</a> given <var>parser</var> is true:",
                      "rationale": "run",
                      "steps": [
                        {
                          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#change-state\" id=\"ref-for-change-state①\">change state</a> given <var>parser</var>, \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-search\" id=\"ref-for-constructor-string-parser-state-search\"><code>search</code></a>\" and 1.</p>"
                        }
                      ]
                    },
                    {
                      "html": "Otherwise:",
                      "rationale": "run",
                      "steps": [
                        {
                          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#change-state\" id=\"ref-for-change-state②\">change state</a> given <var>parser</var>, \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-pathname\" id=\"ref-for-constructor-string-parser-state-pathname\"><code>pathname</code></a>\" and 0.</p>"
                        }
                      ]
                    },
                    {
                      "html": "<p>Increment <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index③\">token index</a> by <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-increment\" id=\"ref-for-constructor-string-parser-token-increment③\">token increment</a>.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue\">Continue</a>.</p>"
                    }
                  ]
                },
                {
                  "html": "If <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state\" id=\"ref-for-constructor-string-parser-state②\">state</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-authority\" id=\"ref-for-constructor-string-parser-state-authority\"><code>authority</code></a>\":",
                  "rationale": "run",
                  "steps": [
                    {
                      "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#rewind-and-set-state\" id=\"ref-for-rewind-and-set-state\">rewind and set state</a> given <var>parser</var>, and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-hostname\" id=\"ref-for-constructor-string-parser-state-hostname\"><code>hostname</code></a>\".</p>"
                    },
                    {
                      "html": "<p>Increment <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index④\">token index</a> by <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-increment\" id=\"ref-for-constructor-string-parser-token-increment④\">token increment</a>.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue①\">Continue</a>.</p>"
                    }
                  ]
                },
                {
                  "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#change-state\" id=\"ref-for-change-state③\">change state</a> given <var>parser</var>, \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-done\" id=\"ref-for-constructor-string-parser-state-done\"><code>done</code></a>\" and 0.</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-break\" id=\"ref-for-iteration-break\">Break</a>.</p>"
                }
              ]
            },
            {
              "html": "If the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-group-open\" id=\"ref-for-is-a-group-open\">is a group open</a> given <var>parser</var> is true:",
              "rationale": "increment",
              "steps": [
                {
                  "html": "<p>Increment <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-group-depth\" id=\"ref-for-constructor-string-parser-group-depth\">group depth</a> by 1.</p>"
                },
                {
                  "html": "<p>Increment <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index⑤\">token index</a> by <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-increment\" id=\"ref-for-constructor-string-parser-token-increment⑤\">token increment</a>.</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue②\">Continue</a>.</p>"
                }
              ]
            },
            {
              "html": "If <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-group-depth\" id=\"ref-for-constructor-string-parser-group-depth①\">group depth</a> is greater than 0:",
              "rationale": "if",
              "steps": [
                {
                  "html": "<p>If the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-group-close\" id=\"ref-for-is-a-group-close\">is a group close</a> given <var>parser</var> is true, then decrement <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-group-depth\" id=\"ref-for-constructor-string-parser-group-depth②\">group depth</a> by 1.</p>"
                },
                {
                  "html": "Otherwise:",
                  "rationale": "increment",
                  "steps": [
                    {
                      "html": "<p>Increment <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index⑥\">token index</a> by <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-increment\" id=\"ref-for-constructor-string-parser-token-increment⑥\">token increment</a>.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue③\">Continue</a>.</p>"
                    }
                  ]
                }
              ]
            },
            {
              "html": "Switch on <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state\" id=\"ref-for-constructor-string-parser-state④\">state</a> and run the associated steps:",
              "rationale": ".switch",
              "steps": [
                {
                  "operation": "switch",
                  "steps": [
                    {
                      "case": "\"init\"",
                      "html": "",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "If the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-protocol-suffix\" id=\"ref-for-is-a-protocol-suffix\">is a protocol suffix</a> given <var>parser</var> is true:",
                          "rationale": "run",
                          "steps": [
                            {
                              "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#rewind-and-set-state\" id=\"ref-for-rewind-and-set-state①\">rewind and set state</a> given <var>parser</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-protocol\" id=\"ref-for-constructor-string-parser-state-protocol\"><code>protocol</code></a>\".</p>"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "case": "\"protocol\"",
                      "html": "",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "If the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-protocol-suffix\" id=\"ref-for-is-a-protocol-suffix①\">is a protocol suffix</a> given <var>parser</var> is true:",
                          "rationale": "run",
                          "steps": [
                            {
                              "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#compute-protocol-matches-a-special-scheme-flag\" id=\"ref-for-compute-protocol-matches-a-special-scheme-flag\">compute protocol matches a special scheme flag</a> given <var>parser</var>.</p>"
                            },
                            {
                              "html": "<p>Let <var>next state</var> be \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-pathname\" id=\"ref-for-constructor-string-parser-state-pathname①\"><code>pathname</code></a>\".</p>"
                            },
                            {
                              "html": "<p>Let <var>skip</var> be 1.</p>"
                            },
                            {
                              "html": "If the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#next-is-authority-slashes\" id=\"ref-for-next-is-authority-slashes\">next is authority slashes</a> given <var>parser</var> is true:",
                              "rationale": "set",
                              "steps": [
                                {
                                  "html": "<p>Set <var>next state</var> to \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-authority\" id=\"ref-for-constructor-string-parser-state-authority②\"><code>authority</code></a>\".</p>"
                                },
                                {
                                  "html": "<p>Set <var>skip</var> to 3.</p>"
                                }
                              ]
                            },
                            {
                              "html": "<p>Otherwise if <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-protocol-matches-a-special-scheme-flag\" id=\"ref-for-constructor-string-parser-protocol-matches-a-special-scheme-flag\">protocol matches a special scheme flag</a> is true, then set <var>next state</var> to \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-authority\" id=\"ref-for-constructor-string-parser-state-authority③\"><code>authority</code></a>\".</p>"
                            },
                            {
                              "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#change-state\" id=\"ref-for-change-state④\">change state</a> given <var>parser</var>, <var>next state</var>, and <var>skip</var>.</p>"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "case": "\"authority\"",
                      "html": "",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-an-identity-terminator\" id=\"ref-for-is-an-identity-terminator\">is an identity terminator</a> given <var>parser</var> is true, then run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#rewind-and-set-state\" id=\"ref-for-rewind-and-set-state②\">rewind and set state</a> given <var>parser</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-username\" id=\"ref-for-constructor-string-parser-state-username\"><code>username</code></a>\".</p>"
                        },
                        {
                          "html": "<p>Otherwise if any of the following are true:</p>\n            <ul>\n             <li>the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-pathname-start\" id=\"ref-for-is-a-pathname-start\">is a pathname start</a> given <var>parser</var>;\n             </li><li>the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-search-prefix\" id=\"ref-for-is-a-search-prefix①\">is a search prefix</a> given <var>parser</var>; or\n             </li><li>the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-hash-prefix\" id=\"ref-for-is-a-hash-prefix①\">is a hash prefix</a> given <var>parser</var>,\n            </li></ul>\n            <p>then run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#rewind-and-set-state\" id=\"ref-for-rewind-and-set-state③\">rewind and set state</a> given <var>parser</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-hostname\" id=\"ref-for-constructor-string-parser-state-hostname①\"><code>hostname</code></a>\". </p>"
                        }
                      ]
                    },
                    {
                      "case": "\"username\"",
                      "html": "",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-password-prefix\" id=\"ref-for-is-a-password-prefix\">is a password prefix</a> given <var>parser</var> is true, then run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#change-state\" id=\"ref-for-change-state⑤\">change state</a> given <var>parser</var>, \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-password\" id=\"ref-for-constructor-string-parser-state-password\"><code>password</code></a>\", and 1.</p>"
                        },
                        {
                          "html": "<p>Otherwise if the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-an-identity-terminator\" id=\"ref-for-is-an-identity-terminator①\">is an identity terminator</a> given <var>parser</var> is true, then run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#change-state\" id=\"ref-for-change-state⑥\">change state</a> given <var>parser</var>, \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-hostname\" id=\"ref-for-constructor-string-parser-state-hostname②\"><code>hostname</code></a>\", and 1.</p>"
                        }
                      ]
                    },
                    {
                      "case": "\"password\"",
                      "html": "",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-an-identity-terminator\" id=\"ref-for-is-an-identity-terminator②\">is an identity terminator</a> given <var>parser</var> is true, then run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#change-state\" id=\"ref-for-change-state⑦\">change state</a> given <var>parser</var>, \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-hostname\" id=\"ref-for-constructor-string-parser-state-hostname③\"><code>hostname</code></a>\", and 1.</p>"
                        }
                      ]
                    },
                    {
                      "case": "\"hostname\"",
                      "html": "",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-an-ipv6-open\" id=\"ref-for-is-an-ipv6-open\">is an IPv6 open</a> given <var>parser</var> is true, then increment <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-hostname-ipv6-bracket-depth\" id=\"ref-for-constructor-string-parser-hostname-ipv6-bracket-depth\">hostname IPv6 bracket depth</a> by 1.</p>"
                        },
                        {
                          "html": "<p>Otherwise if the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-an-ipv6-close\" id=\"ref-for-is-an-ipv6-close\">is an IPv6 close</a> given <var>parser</var> is true, then decrement <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-hostname-ipv6-bracket-depth\" id=\"ref-for-constructor-string-parser-hostname-ipv6-bracket-depth①\">hostname IPv6 bracket depth</a> by 1.</p>"
                        },
                        {
                          "html": "<p>Otherwise if the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-port-prefix\" id=\"ref-for-is-a-port-prefix\">is a port prefix</a> given <var>parser</var> is true and <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-hostname-ipv6-bracket-depth\" id=\"ref-for-constructor-string-parser-hostname-ipv6-bracket-depth②\">hostname IPv6 bracket depth</a> is zero, then run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#change-state\" id=\"ref-for-change-state⑧\">change state</a> given <var>parser</var>, \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-port\" id=\"ref-for-constructor-string-parser-state-port\"><code>port</code></a>\", and 1.</p>"
                        },
                        {
                          "html": "<p>Otherwise if the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-pathname-start\" id=\"ref-for-is-a-pathname-start①\">is a pathname start</a> given <var>parser</var> is true, then run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#change-state\" id=\"ref-for-change-state⑨\">change state</a> given <var>parser</var>, \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-pathname\" id=\"ref-for-constructor-string-parser-state-pathname②\"><code>pathname</code></a>\", and 0.</p>"
                        },
                        {
                          "html": "<p>Otherwise if the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-search-prefix\" id=\"ref-for-is-a-search-prefix②\">is a search prefix</a> given <var>parser</var> is true, then run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#change-state\" id=\"ref-for-change-state①⓪\">change state</a> given <var>parser</var>, \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-search\" id=\"ref-for-constructor-string-parser-state-search①\"><code>search</code></a>\", and 1.</p>"
                        },
                        {
                          "html": "<p>Otherwise if the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-hash-prefix\" id=\"ref-for-is-a-hash-prefix②\">is a hash prefix</a> given <var>parser</var> is true, then run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#change-state\" id=\"ref-for-change-state①①\">change state</a> given <var>parser</var>, \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-hash\" id=\"ref-for-constructor-string-parser-state-hash①\"><code>hash</code></a>\", and 1.</p>"
                        }
                      ]
                    },
                    {
                      "case": "\"port\"",
                      "html": "",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-pathname-start\" id=\"ref-for-is-a-pathname-start②\">is a pathname start</a> given <var>parser</var> is true, then run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#change-state\" id=\"ref-for-change-state①②\">change state</a> given <var>parser</var>, \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-pathname\" id=\"ref-for-constructor-string-parser-state-pathname③\"><code>pathname</code></a>\", and 0.</p>"
                        },
                        {
                          "html": "<p>Otherwise if the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-search-prefix\" id=\"ref-for-is-a-search-prefix③\">is a search prefix</a> given <var>parser</var> is true, then run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#change-state\" id=\"ref-for-change-state①③\">change state</a> given <var>parser</var>, \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-search\" id=\"ref-for-constructor-string-parser-state-search②\"><code>search</code></a>\", and 1.</p>"
                        },
                        {
                          "html": "<p>Otherwise if the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-hash-prefix\" id=\"ref-for-is-a-hash-prefix③\">is a hash prefix</a> given <var>parser</var> is true, then run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#change-state\" id=\"ref-for-change-state①④\">change state</a> given <var>parser</var>, \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-hash\" id=\"ref-for-constructor-string-parser-state-hash②\"><code>hash</code></a>\", and 1.</p>"
                        }
                      ]
                    },
                    {
                      "case": "\"pathname\"",
                      "html": "",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-search-prefix\" id=\"ref-for-is-a-search-prefix④\">is a search prefix</a> given <var>parser</var> is true, then run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#change-state\" id=\"ref-for-change-state①⑤\">change state</a> given <var>parser</var>, \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-search\" id=\"ref-for-constructor-string-parser-state-search③\"><code>search</code></a>\", and 1.</p>"
                        },
                        {
                          "html": "<p>Otherwise if the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-hash-prefix\" id=\"ref-for-is-a-hash-prefix④\">is a hash prefix</a> given <var>parser</var> is true, then run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#change-state\" id=\"ref-for-change-state①⑥\">change state</a> given <var>parser</var>, \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-hash\" id=\"ref-for-constructor-string-parser-state-hash③\"><code>hash</code></a>\", and 1.</p>"
                        }
                      ]
                    },
                    {
                      "case": "\"search\"",
                      "html": "",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "<p>If the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-hash-prefix\" id=\"ref-for-is-a-hash-prefix⑤\">is a hash prefix</a> given <var>parser</var> is true, then run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#change-state\" id=\"ref-for-change-state①⑦\">change state</a> given <var>parser</var>, \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-hash\" id=\"ref-for-constructor-string-parser-state-hash④\"><code>hash</code></a>\", and 1.</p>"
                        }
                      ]
                    },
                    {
                      "case": "\"hash\"",
                      "html": "",
                      "rationale": "do",
                      "steps": [
                        {
                          "html": "<p>Do nothing.</p>"
                        }
                      ]
                    },
                    {
                      "case": "\"done\"",
                      "html": "",
                      "rationale": "assert",
                      "steps": [
                        {
                          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert②\">Assert</a>: This step is never reached.</p>"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "html": "<p>Increment <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index⑦\">token index</a> by <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-increment\" id=\"ref-for-constructor-string-parser-token-increment⑦\">token increment</a>.</p>"
            }
          ]
        },
        {
          "html": "<p>If <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-result\" id=\"ref-for-constructor-string-parser-result\">result</a> <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists②\">contains</a> \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hostname\" id=\"ref-for-dom-urlpatterninit-hostname⑤\">hostname</a></code>\" and not \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-port\" id=\"ref-for-dom-urlpatterninit-port⑤\">port</a></code>\", then set <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-result\" id=\"ref-for-constructor-string-parser-result①\">result</a>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-port\" id=\"ref-for-dom-urlpatterninit-port⑥\">port</a></code>\"] to the empty string.</p>"
        },
        {
          "html": "<p>Return <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-result\" id=\"ref-for-constructor-string-parser-result②\">result</a>.</p>"
        }
      ]
    },
    {
      "name": "change state",
      "href": "https://urlpattern.spec.whatwg.org/#change-state",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"change-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">change state</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser\" id=\"ref-for-constructor-string-parser①①\">constructor string parser</a> <var>parser</var>, a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state\" id=\"ref-for-constructor-string-parser-state⑤\">state</a> <var>new state</var>, and a number <var>skip</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state\" id=\"ref-for-constructor-string-parser-state⑥\">state</a> is not \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-init\" id=\"ref-for-constructor-string-parser-state-init④\"><code>init</code></a>\", not \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-authority\" id=\"ref-for-constructor-string-parser-state-authority⑤\"><code>authority</code></a>\", and not \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-done\" id=\"ref-for-constructor-string-parser-state-done②\"><code>done</code></a>\", then set <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-result\" id=\"ref-for-constructor-string-parser-result③\">result</a>[<var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state\" id=\"ref-for-constructor-string-parser-state⑦\">state</a>] to the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#make-a-component-string\" id=\"ref-for-make-a-component-string\">make a component string</a> given <var>parser</var>.</p>"
        },
        {
          "html": "If <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state\" id=\"ref-for-constructor-string-parser-state⑧\">state</a> is not \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-init\" id=\"ref-for-constructor-string-parser-state-init⑤\"><code>init</code></a>\" and <var>new state</var> is not \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-done\" id=\"ref-for-constructor-string-parser-state-done③\"><code>done</code></a>\", then:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state\" id=\"ref-for-constructor-string-parser-state⑨\">state</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-protocol\" id=\"ref-for-constructor-string-parser-state-protocol②\"><code>protocol</code></a>\", \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-authority\" id=\"ref-for-constructor-string-parser-state-authority⑥\"><code>authority</code></a>\", \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-username\" id=\"ref-for-constructor-string-parser-state-username②\"><code>username</code></a>\", or \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-password\" id=\"ref-for-constructor-string-parser-state-password②\"><code>password</code></a>\"; <var>new state</var> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-port\" id=\"ref-for-constructor-string-parser-state-port②\"><code>port</code></a>\", \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-pathname\" id=\"ref-for-constructor-string-parser-state-pathname⑤\"><code>pathname</code></a>\", \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-search\" id=\"ref-for-constructor-string-parser-state-search⑤\"><code>search</code></a>\", or \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-hash\" id=\"ref-for-constructor-string-parser-state-hash⑥\"><code>hash</code></a>\"; and <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-result\" id=\"ref-for-constructor-string-parser-result④\">result</a>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hostname\" id=\"ref-for-dom-urlpatterninit-hostname⑥\">hostname</a></code>\"] does not <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists③\">exist</a>, then set <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-result\" id=\"ref-for-constructor-string-parser-result⑤\">result</a>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hostname\" id=\"ref-for-dom-urlpatterninit-hostname⑦\">hostname</a></code>\"] to the empty string.</p>"
            },
            {
              "html": "If <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state\" id=\"ref-for-constructor-string-parser-state①⓪\">state</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-protocol\" id=\"ref-for-constructor-string-parser-state-protocol③\"><code>protocol</code></a>\", \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-authority\" id=\"ref-for-constructor-string-parser-state-authority⑦\"><code>authority</code></a>\", \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-username\" id=\"ref-for-constructor-string-parser-state-username③\"><code>username</code></a>\", \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-password\" id=\"ref-for-constructor-string-parser-state-password③\"><code>password</code></a>\", \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-hostname\" id=\"ref-for-constructor-string-parser-state-hostname⑤\"><code>hostname</code></a>\", or \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-port\" id=\"ref-for-constructor-string-parser-state-port③\"><code>port</code></a>\"; <var>new state</var> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-search\" id=\"ref-for-constructor-string-parser-state-search⑥\"><code>search</code></a>\" or \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-hash\" id=\"ref-for-constructor-string-parser-state-hash⑦\"><code>hash</code></a>\"; and <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-result\" id=\"ref-for-constructor-string-parser-result⑥\">result</a>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-pathname\" id=\"ref-for-dom-urlpatterninit-pathname④\">pathname</a></code>\"] does not <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists④\">exist</a>, then:",
              "rationale": "if",
              "steps": [
                {
                  "html": "<p>If <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-protocol-matches-a-special-scheme-flag\" id=\"ref-for-constructor-string-parser-protocol-matches-a-special-scheme-flag①\">protocol matches a special scheme flag</a> is true, then set <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-result\" id=\"ref-for-constructor-string-parser-result⑦\">result</a>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-pathname\" id=\"ref-for-dom-urlpatterninit-pathname⑤\">pathname</a></code>\"] to \"<code>/</code>\".</p>"
                },
                {
                  "html": "<p>Otherwise, set <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-result\" id=\"ref-for-constructor-string-parser-result⑧\">result</a>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-pathname\" id=\"ref-for-dom-urlpatterninit-pathname⑥\">pathname</a></code>\"] to the empty string.</p>"
                }
              ]
            },
            {
              "html": "<p>If <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state\" id=\"ref-for-constructor-string-parser-state①①\">state</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-protocol\" id=\"ref-for-constructor-string-parser-state-protocol④\"><code>protocol</code></a>\", \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-authority\" id=\"ref-for-constructor-string-parser-state-authority⑧\"><code>authority</code></a>\", \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-username\" id=\"ref-for-constructor-string-parser-state-username④\"><code>username</code></a>\", \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-password\" id=\"ref-for-constructor-string-parser-state-password④\"><code>password</code></a>\", \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-hostname\" id=\"ref-for-constructor-string-parser-state-hostname⑥\"><code>hostname</code></a>\", \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-port\" id=\"ref-for-constructor-string-parser-state-port④\"><code>port</code></a>\", or \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-pathname\" id=\"ref-for-constructor-string-parser-state-pathname⑥\"><code>pathname</code></a>\"; <var>new state</var> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state-hash\" id=\"ref-for-constructor-string-parser-state-hash⑧\"><code>hash</code></a>\"; and <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-result\" id=\"ref-for-constructor-string-parser-result⑨\">result</a>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-search\" id=\"ref-for-dom-urlpatterninit-search③\">search</a></code>\"] does not <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists⑤\">exist</a>, then set <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-result\" id=\"ref-for-constructor-string-parser-result①⓪\">result</a>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-search\" id=\"ref-for-dom-urlpatterninit-search④\">search</a></code>\"] to the empty string.</p>"
            }
          ]
        },
        {
          "html": "<p>Set <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state\" id=\"ref-for-constructor-string-parser-state①②\">state</a> to <var>new state</var>.</p>"
        },
        {
          "html": "<p>Increment <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index⑧\">token index</a> by <var>skip</var>.</p>"
        },
        {
          "html": "<p>Set <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-component-start\" id=\"ref-for-constructor-string-parser-component-start\">component start</a> to <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index⑨\">token index</a>.</p>"
        },
        {
          "html": "<p>Set <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-increment\" id=\"ref-for-constructor-string-parser-token-increment⑧\">token increment</a> to 0.</p>"
        }
      ]
    },
    {
      "name": "rewind",
      "href": "https://urlpattern.spec.whatwg.org/#rewind",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"rewind\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">rewind</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser\" id=\"ref-for-constructor-string-parser①②\">constructor string parser</a> <var>parser</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Set <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index①⓪\">token index</a> to <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-component-start\" id=\"ref-for-constructor-string-parser-component-start①\">component start</a>.</p>"
        },
        {
          "html": "<p>Set <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-increment\" id=\"ref-for-constructor-string-parser-token-increment⑨\">token increment</a> to 0.</p>"
        }
      ]
    },
    {
      "name": "rewind and set state",
      "href": "https://urlpattern.spec.whatwg.org/#rewind-and-set-state",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"rewind-and-set-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">rewind and set state</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser\" id=\"ref-for-constructor-string-parser①③\">constructor string parser</a> <var>parser</var> and a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state\" id=\"ref-for-constructor-string-parser-state①③\">state</a> <var>state</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#rewind\" id=\"ref-for-rewind①\">rewind</a> given <var>parser</var>.</p>"
        },
        {
          "html": "<p>Set <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-state\" id=\"ref-for-constructor-string-parser-state①④\">state</a> to <var>state</var>.</p>"
        }
      ]
    },
    {
      "name": "get a safe token",
      "href": "https://urlpattern.spec.whatwg.org/#get-a-safe-token",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"get-a-safe-token\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">get a safe token</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser\" id=\"ref-for-constructor-string-parser①④\">constructor string parser</a> <var>parser</var> and a number <var>index</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>index</var> is less than <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-list\" id=\"ref-for-constructor-string-parser-token-list③\">token list</a>'s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size①\">size</a>, then return <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-list\" id=\"ref-for-constructor-string-parser-token-list④\">token list</a>[<var>index</var>].</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert③\">Assert</a>: <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-list\" id=\"ref-for-constructor-string-parser-token-list⑤\">token list</a>'s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size②\">size</a> is greater than or equal to 1.</p>"
        },
        {
          "html": "<p>Let <var>last index</var> be <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-list\" id=\"ref-for-constructor-string-parser-token-list⑥\">token list</a>'s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size③\">size</a> − 1.</p>"
        },
        {
          "html": "<p>Let <var>token</var> be <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-list\" id=\"ref-for-constructor-string-parser-token-list⑦\">token list</a>[<var>last index</var>].</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert④\">Assert</a>: <var>token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type\" id=\"ref-for-token-type①\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-end\" id=\"ref-for-token-type-end①\"><code>end</code></a>\".</p>"
        },
        {
          "html": "<p>Return <var>token</var>.</p>"
        }
      ]
    },
    {
      "name": "is a non-special pattern char",
      "href": "https://urlpattern.spec.whatwg.org/#is-a-non-special-pattern-char",
      "html": "To run <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"is-a-non-special-pattern-char\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">is a non-special pattern char</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser\" id=\"ref-for-constructor-string-parser①⑤\">constructor string parser</a> <var>parser</var>, a number <var>index</var>, and a string <var>value</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>token</var> be the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#get-a-safe-token\" id=\"ref-for-get-a-safe-token\">get a safe token</a> given <var>parser</var> and <var>index</var>.</p>"
        },
        {
          "html": "<p>If <var>token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-value\" id=\"ref-for-token-value\">value</a> is not <var>value</var>, then return false.</p>"
        },
        {
          "html": "<p>If any of the following are true:</p>\n      <ul>\n       <li><var>token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type\" id=\"ref-for-token-type②\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-char\" id=\"ref-for-token-type-char\"><code>char</code></a>\"; \n       </li><li><var>token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type\" id=\"ref-for-token-type③\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-escaped-char\" id=\"ref-for-token-type-escaped-char\"><code>escaped-char</code></a>\"; or \n       </li><li><var>token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type\" id=\"ref-for-token-type④\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-invalid-char\" id=\"ref-for-token-type-invalid-char\"><code>invalid-char</code></a>\", \n      </li></ul>\n      <p>then return true. </p>"
        },
        {
          "html": "<p>Return false.</p>"
        }
      ]
    },
    {
      "name": "is a protocol suffix",
      "href": "https://urlpattern.spec.whatwg.org/#is-a-protocol-suffix",
      "html": "To run <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"is-a-protocol-suffix\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">is a protocol suffix</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser\" id=\"ref-for-constructor-string-parser①⑥\">constructor string parser</a> <var>parser</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Return the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-non-special-pattern-char\" id=\"ref-for-is-a-non-special-pattern-char\">is a non-special pattern char</a> given <var>parser</var>, <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index①①\">token index</a>, and \"<code>:</code>\".</p>"
        }
      ]
    },
    {
      "name": "next is authority slashes",
      "href": "https://urlpattern.spec.whatwg.org/#next-is-authority-slashes",
      "html": "To run <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"next-is-authority-slashes\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">next is authority slashes</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser\" id=\"ref-for-constructor-string-parser①⑦\">constructor string parser</a> <var>parser</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-non-special-pattern-char\" id=\"ref-for-is-a-non-special-pattern-char①\">is a non-special pattern char</a> given <var>parser</var>, <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index①②\">token index</a> + 1, and \"<code>/</code>\" is false, then return false.</p>"
        },
        {
          "html": "<p>If the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-non-special-pattern-char\" id=\"ref-for-is-a-non-special-pattern-char②\">is a non-special pattern char</a> given <var>parser</var>, <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index①③\">token index</a> + 2, and \"<code>/</code>\" is false, then return false.</p>"
        },
        {
          "html": "<p>Return true.</p>"
        }
      ]
    },
    {
      "name": "is an identity terminator",
      "href": "https://urlpattern.spec.whatwg.org/#is-an-identity-terminator",
      "html": "To run <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"is-an-identity-terminator\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">is an identity terminator</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser\" id=\"ref-for-constructor-string-parser①⑧\">constructor string parser</a> <var>parser</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Return the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-non-special-pattern-char\" id=\"ref-for-is-a-non-special-pattern-char③\">is a non-special pattern char</a> given <var>parser</var>, <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index①④\">token index</a>, and \"<code>@</code>\".</p>"
        }
      ]
    },
    {
      "name": "is a password prefix",
      "href": "https://urlpattern.spec.whatwg.org/#is-a-password-prefix",
      "html": "To run <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"is-a-password-prefix\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">is a password prefix</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser\" id=\"ref-for-constructor-string-parser①⑨\">constructor string parser</a> <var>parser</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Return the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-non-special-pattern-char\" id=\"ref-for-is-a-non-special-pattern-char④\">is a non-special pattern char</a> given <var>parser</var>, <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index①⑤\">token index</a>, and \"<code>:</code>\".</p>"
        }
      ]
    },
    {
      "name": "is a port prefix",
      "href": "https://urlpattern.spec.whatwg.org/#is-a-port-prefix",
      "html": "To run <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"is-a-port-prefix\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">is a port prefix</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser\" id=\"ref-for-constructor-string-parser②⓪\">constructor string parser</a> <var>parser</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Return the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-non-special-pattern-char\" id=\"ref-for-is-a-non-special-pattern-char⑤\">is a non-special pattern char</a> given <var>parser</var>, <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index①⑥\">token index</a>, and \"<code>:</code>\".</p>"
        }
      ]
    },
    {
      "name": "is a pathname start",
      "href": "https://urlpattern.spec.whatwg.org/#is-a-pathname-start",
      "html": "To run <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"is-a-pathname-start\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">is a pathname start</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser\" id=\"ref-for-constructor-string-parser②①\">constructor string parser</a> <var>parser</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Return the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-non-special-pattern-char\" id=\"ref-for-is-a-non-special-pattern-char⑥\">is a non-special pattern char</a> given <var>parser</var>, <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index①⑦\">token index</a>, and \"<code>/</code>\".</p>"
        }
      ]
    },
    {
      "name": "is a search prefix",
      "href": "https://urlpattern.spec.whatwg.org/#is-a-search-prefix",
      "html": "To run <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"is-a-search-prefix\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">is a search prefix</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser\" id=\"ref-for-constructor-string-parser②②\">constructor string parser</a> <var>parser</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-non-special-pattern-char\" id=\"ref-for-is-a-non-special-pattern-char⑦\">is a non-special pattern char</a> given <var>parser</var>, <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index①⑧\">token index</a> and \"<code>?</code>\" is true, then return true.</p>"
        },
        {
          "html": "<p>If <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-list\" id=\"ref-for-constructor-string-parser-token-list⑧\">token list</a>[<var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index①⑨\">token index</a>]'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-value\" id=\"ref-for-token-value①\">value</a> is not \"<code>?</code>\", then return false.</p>"
        },
        {
          "html": "<p>Let <var>previous index</var> be <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index②⓪\">token index</a> − 1.</p>"
        },
        {
          "html": "<p>If <var>previous index</var> is less than 0, then return true.</p>"
        },
        {
          "html": "<p>Let <var>previous token</var> be the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#get-a-safe-token\" id=\"ref-for-get-a-safe-token①\">get a safe token</a> given <var>parser</var> and <var>previous index</var>.</p>"
        },
        {
          "html": "<p>If any of the following are true, then return false:</p>\n      <ul>\n       <li><var>previous token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type\" id=\"ref-for-token-type⑤\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-name\" id=\"ref-for-token-type-name\"><code>name</code></a>\".\n       </li><li><var>previous token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type\" id=\"ref-for-token-type⑥\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-regexp\" id=\"ref-for-token-type-regexp\"><code>regexp</code></a>\".\n       </li><li><var>previous token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type\" id=\"ref-for-token-type⑦\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-close\" id=\"ref-for-token-type-close\"><code>close</code></a>\".\n       </li><li><var>previous token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type\" id=\"ref-for-token-type⑧\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-asterisk\" id=\"ref-for-token-type-asterisk\"><code>asterisk</code></a>\".\n      </li></ul>"
        },
        {
          "html": "<p>Return true.</p>"
        }
      ]
    },
    {
      "name": "is a hash prefix",
      "href": "https://urlpattern.spec.whatwg.org/#is-a-hash-prefix",
      "html": "To run <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"is-a-hash-prefix\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">is a hash prefix</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser\" id=\"ref-for-constructor-string-parser②③\">constructor string parser</a> <var>parser</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Return the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-non-special-pattern-char\" id=\"ref-for-is-a-non-special-pattern-char⑧\">is a non-special pattern char</a> given <var>parser</var>, <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index②①\">token index</a> and \"<code>#</code>\".</p>"
        }
      ]
    },
    {
      "name": "is a group open",
      "href": "https://urlpattern.spec.whatwg.org/#is-a-group-open",
      "html": "To run <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"is-a-group-open\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">is a group open</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser\" id=\"ref-for-constructor-string-parser②④\">constructor string parser</a> <var>parser</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-list\" id=\"ref-for-constructor-string-parser-token-list⑨\">token list</a>[<var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index②②\">token index</a>]'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type\" id=\"ref-for-token-type⑨\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-open\" id=\"ref-for-token-type-open\"><code>open</code></a>\", then return true.</p>"
        },
        {
          "html": "<p>Otherwise return false.</p>"
        }
      ]
    },
    {
      "name": "is a group close",
      "href": "https://urlpattern.spec.whatwg.org/#is-a-group-close",
      "html": "To run <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"is-a-group-close\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">is a group close</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser\" id=\"ref-for-constructor-string-parser②⑤\">constructor string parser</a> <var>parser</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-list\" id=\"ref-for-constructor-string-parser-token-list①⓪\">token list</a>[<var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index②③\">token index</a>]'s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type\" id=\"ref-for-token-type①⓪\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-close\" id=\"ref-for-token-type-close①\"><code>close</code></a>\", then return true.</p>"
        },
        {
          "html": "<p>Otherwise return false.</p>"
        }
      ]
    },
    {
      "name": "is an IPv6 open",
      "href": "https://urlpattern.spec.whatwg.org/#is-an-ipv6-open",
      "html": "To run <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"is-an-ipv6-open\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">is an IPv6 open</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser\" id=\"ref-for-constructor-string-parser②⑥\">constructor string parser</a> <var>parser</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Return the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-non-special-pattern-char\" id=\"ref-for-is-a-non-special-pattern-char⑨\">is a non-special pattern char</a> given <var>parser</var>, <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index②④\">token index</a>, and \"<code>[</code>\".</p>"
        }
      ]
    },
    {
      "name": "is an IPv6 close",
      "href": "https://urlpattern.spec.whatwg.org/#is-an-ipv6-close",
      "html": "To run <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"is-an-ipv6-close\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">is an IPv6 close</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser\" id=\"ref-for-constructor-string-parser②⑦\">constructor string parser</a> <var>parser</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Return the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-non-special-pattern-char\" id=\"ref-for-is-a-non-special-pattern-char①⓪\">is a non-special pattern char</a> given <var>parser</var>, <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index②⑤\">token index</a>, and \"<code>]</code>\".</p>"
        }
      ]
    },
    {
      "name": "make a component string",
      "href": "https://urlpattern.spec.whatwg.org/#make-a-component-string",
      "html": "To run <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"make-a-component-string\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">make a component string</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser\" id=\"ref-for-constructor-string-parser②⑧\">constructor string parser</a> <var>parser</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert⑤\">Assert</a>: <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index②⑥\">token index</a> is less than <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-list\" id=\"ref-for-constructor-string-parser-token-list①①\">token list</a>'s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size④\">size</a>.</p>"
        },
        {
          "html": "<p>Let <var>token</var> be <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-list\" id=\"ref-for-constructor-string-parser-token-list①②\">token list</a>[<var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-token-index\" id=\"ref-for-constructor-string-parser-token-index②⑦\">token index</a>].</p>"
        },
        {
          "html": "<p>Let <var>component start token</var> be the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#get-a-safe-token\" id=\"ref-for-get-a-safe-token②\">get a safe token</a> given <var>parser</var> and <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-component-start\" id=\"ref-for-constructor-string-parser-component-start②\">component start</a>.</p>"
        },
        {
          "html": "<p>Let <var>component start input index</var> be <var>component start token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-index\" id=\"ref-for-token-index\">index</a>.</p>"
        },
        {
          "html": "<p>Let <var>end index</var> be <var>token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-index\" id=\"ref-for-token-index①\">index</a>.</p>"
        },
        {
          "html": "<p>Return the <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-point-substring-by-positions\" id=\"ref-for-code-point-substring-by-positions\">code point substring</a> from <var>component start input index</var> to <var>end index</var> within <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-input\" id=\"ref-for-constructor-string-parser-input①\">input</a>.</p>"
        }
      ]
    },
    {
      "name": "compute protocol matches a special scheme flag",
      "href": "https://urlpattern.spec.whatwg.org/#compute-protocol-matches-a-special-scheme-flag",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"compute-protocol-matches-a-special-scheme-flag\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">compute protocol matches a special scheme flag</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser\" id=\"ref-for-constructor-string-parser②⑨\">constructor string parser</a> <var>parser</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>protocol string</var> be the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#make-a-component-string\" id=\"ref-for-make-a-component-string①\">make a component string</a> given <var>parser</var>.</p>"
        },
        {
          "html": "<p>Let <var>protocol component</var> be the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#compile-a-component\" id=\"ref-for-compile-a-component①①\">compiling a component</a> given <var>protocol string</var>, <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#canonicalize-a-protocol\" id=\"ref-for-canonicalize-a-protocol①\">canonicalize a protocol</a>, and <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#default-options\" id=\"ref-for-default-options⑤\">default options</a>.</p>"
        },
        {
          "html": "<p>If the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#protocol-component-matches-a-special-scheme\" id=\"ref-for-protocol-component-matches-a-special-scheme①\">protocol component matches a special scheme</a> given <var>protocol component</var> is true, then set <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#constructor-string-parser-protocol-matches-a-special-scheme-flag\" id=\"ref-for-constructor-string-parser-protocol-matches-a-special-scheme-flag②\">protocol matches a special scheme flag</a> to true.</p>"
        }
      ]
    },
    {
      "name": "tokenize",
      "href": "https://urlpattern.spec.whatwg.org/#tokenize",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"tokenize\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">tokenize</dfn> a given string <var>input</var> and <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenize-policy\" id=\"ref-for-tokenize-policy②\">tokenize policy</a> <var>policy</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>tokenizer</var> be a new <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer\" id=\"ref-for-tokenizer⑥\">tokenizer</a>.</p>"
        },
        {
          "html": "<p>Set <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-input\" id=\"ref-for-tokenizer-input\">input</a> to <var>input</var>.</p>"
        },
        {
          "html": "<p>Set <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-policy\" id=\"ref-for-tokenizer-policy\">policy</a> to <var>policy</var>.</p>"
        },
        {
          "html": "While <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-index\" id=\"ref-for-tokenizer-index\">index</a> is less than <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-input\" id=\"ref-for-tokenizer-input①\">input</a>'s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string-code-point-length\" id=\"ref-for-string-code-point-length①\">code point length</a>:",
          "rationale": "run",
          "steps": [
            {
              "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#seek-and-get-the-next-code-point\" id=\"ref-for-seek-and-get-the-next-code-point\">seek and get the next code point</a> given <var>tokenizer</var> and <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-index\" id=\"ref-for-tokenizer-index①\">index</a>.</p>"
            },
            {
              "html": "If <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-code-point\" id=\"ref-for-tokenizer-code-point\">code point</a> is U+002A (<code>*</code>):",
              "rationale": "run",
              "steps": [
                {
                  "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#add-a-token-with-default-position-and-length\" id=\"ref-for-add-a-token-with-default-position-and-length\">add a token with default position and length</a> given <var>tokenizer</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-asterisk\" id=\"ref-for-token-type-asterisk①\"><code>asterisk</code></a>\".</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue④\">Continue</a>.</p>"
                }
              ]
            },
            {
              "html": "If <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-code-point\" id=\"ref-for-tokenizer-code-point①\">code point</a> is U+002B (<code>+</code>) or U+003F (<code>?</code>):",
              "rationale": "run",
              "steps": [
                {
                  "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#add-a-token-with-default-position-and-length\" id=\"ref-for-add-a-token-with-default-position-and-length①\">add a token with default position and length</a> given <var>tokenizer</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-other-modifier\" id=\"ref-for-token-type-other-modifier\"><code>other-modifier</code></a>\".</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue⑤\">Continue</a>.</p>"
                }
              ]
            },
            {
              "html": "If <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-code-point\" id=\"ref-for-tokenizer-code-point②\">code point</a> is U+005C (<code>\\</code>):",
              "rationale": "if",
              "steps": [
                {
                  "html": "If <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-index\" id=\"ref-for-tokenizer-index②\">index</a> is equal to <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-input\" id=\"ref-for-tokenizer-input②\">input</a>'s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string-code-point-length\" id=\"ref-for-string-code-point-length②\">code point length</a> − 1:",
                  "rationale": "run",
                  "steps": [
                    {
                      "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-a-tokenizing-error\" id=\"ref-for-process-a-tokenizing-error\">process a tokenizing error</a> given <var>tokenizer</var>, <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-next-index\" id=\"ref-for-tokenizer-next-index\">next index</a>, and <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-index\" id=\"ref-for-tokenizer-index③\">index</a>.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue⑥\">Continue</a>.</p>"
                    }
                  ]
                },
                {
                  "html": "<p>Let <var>escaped index</var> be <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-next-index\" id=\"ref-for-tokenizer-next-index①\">next index</a>.</p>"
                },
                {
                  "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#get-the-next-code-point\" id=\"ref-for-get-the-next-code-point\">get the next code point</a> given <var>tokenizer</var>.</p>"
                },
                {
                  "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#add-a-token-with-default-length\" id=\"ref-for-add-a-token-with-default-length\">add a token with default length</a> given <var>tokenizer</var>, \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-escaped-char\" id=\"ref-for-token-type-escaped-char①\"><code>escaped-char</code></a>\", <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-next-index\" id=\"ref-for-tokenizer-next-index②\">next index</a>, and <var>escaped index</var>.</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue⑦\">Continue</a>.</p>"
                }
              ]
            },
            {
              "html": "If <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-code-point\" id=\"ref-for-tokenizer-code-point③\">code point</a> is U+007B (<code>{</code>):",
              "rationale": "run",
              "steps": [
                {
                  "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#add-a-token-with-default-position-and-length\" id=\"ref-for-add-a-token-with-default-position-and-length②\">add a token with default position and length</a> given <var>tokenizer</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-open\" id=\"ref-for-token-type-open①\"><code>open</code></a>\".</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue⑧\">Continue</a>.</p>"
                }
              ]
            },
            {
              "html": "If <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-code-point\" id=\"ref-for-tokenizer-code-point④\">code point</a> is U+007D (<code>}</code>):",
              "rationale": "run",
              "steps": [
                {
                  "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#add-a-token-with-default-position-and-length\" id=\"ref-for-add-a-token-with-default-position-and-length③\">add a token with default position and length</a> given <var>tokenizer</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-close\" id=\"ref-for-token-type-close②\"><code>close</code></a>\".</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue⑨\">Continue</a>.</p>"
                }
              ]
            },
            {
              "html": "If <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-code-point\" id=\"ref-for-tokenizer-code-point⑤\">code point</a> is U+003A (<code>:</code>):",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>name position</var> be <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-next-index\" id=\"ref-for-tokenizer-next-index③\">next index</a>.</p>"
                },
                {
                  "html": "<p>Let <var>name start</var> be <var>name position</var>.</p>"
                },
                {
                  "html": "While <var>name position</var> is less than <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-input\" id=\"ref-for-tokenizer-input③\">input</a>'s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string-code-point-length\" id=\"ref-for-string-code-point-length③\">code point length</a>:",
                  "rationale": "run",
                  "steps": [
                    {
                      "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#seek-and-get-the-next-code-point\" id=\"ref-for-seek-and-get-the-next-code-point①\">seek and get the next code point</a> given <var>tokenizer</var> and <var>name position</var>.</p>"
                    },
                    {
                      "html": "<p>Let <var>first code point</var> be true if <var>name position</var> equals <var>name start</var> and false otherwise.</p>"
                    },
                    {
                      "html": "<p>Let <var>valid code point</var> be the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-valid-name-code-point\" id=\"ref-for-is-a-valid-name-code-point\">is a valid name code point</a> given <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-code-point\" id=\"ref-for-tokenizer-code-point⑥\">code point</a> and <var>first code point</var>.</p>"
                    },
                    {
                      "html": "<p>If <var>valid code point</var> is false <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-break\" id=\"ref-for-iteration-break①\">break</a>.</p>"
                    },
                    {
                      "html": "<p>Set <var>name position</var> to <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-next-index\" id=\"ref-for-tokenizer-next-index④\">next index</a>.</p>"
                    }
                  ]
                },
                {
                  "html": "If <var>name position</var> is less than or equal to <var>name start</var>:",
                  "rationale": "run",
                  "steps": [
                    {
                      "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-a-tokenizing-error\" id=\"ref-for-process-a-tokenizing-error①\">process a tokenizing error</a> given <var>tokenizer</var>, <var>name start</var>, and <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-index\" id=\"ref-for-tokenizer-index④\">index</a>.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue①⓪\">Continue</a>.</p>"
                    }
                  ]
                },
                {
                  "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#add-a-token-with-default-length\" id=\"ref-for-add-a-token-with-default-length①\">add a token with default length</a> given <var>tokenizer</var>, \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-name\" id=\"ref-for-token-type-name①\"><code>name</code></a>\", <var>name position</var>, and <var>name start</var>.</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue①①\">Continue</a>.</p>"
                }
              ]
            },
            {
              "html": "If <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-code-point\" id=\"ref-for-tokenizer-code-point⑦\">code point</a> is U+0028 (<code>(</code>):",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>depth</var> be 1.</p>"
                },
                {
                  "html": "<p>Let <var>regexp position</var> be <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-next-index\" id=\"ref-for-tokenizer-next-index⑤\">next index</a>.</p>"
                },
                {
                  "html": "<p>Let <var>regexp start</var> be <var>regexp position</var>.</p>"
                },
                {
                  "html": "<p>Let <var>error</var> be false.</p>"
                },
                {
                  "html": "While <var>regexp position</var> is less than <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-input\" id=\"ref-for-tokenizer-input④\">input</a>'s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string-code-point-length\" id=\"ref-for-string-code-point-length④\">code point length</a>:",
                  "rationale": "run",
                  "steps": [
                    {
                      "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#seek-and-get-the-next-code-point\" id=\"ref-for-seek-and-get-the-next-code-point②\">seek and get the next code point</a> given <var>tokenizer</var> and <var>regexp position</var>.</p>"
                    },
                    {
                      "html": "If the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-ascii\" id=\"ref-for-is-ascii\">is ASCII</a> given <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-code-point\" id=\"ref-for-tokenizer-code-point⑧\">code point</a> is false:",
                      "rationale": "run",
                      "steps": [
                        {
                          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-a-tokenizing-error\" id=\"ref-for-process-a-tokenizing-error②\">process a tokenizing error</a> given <var>tokenizer</var>, <var>regexp start</var>, and <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-index\" id=\"ref-for-tokenizer-index⑤\">index</a>.</p>"
                        },
                        {
                          "html": "<p>Set <var>error</var> to true.</p>"
                        },
                        {
                          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-break\" id=\"ref-for-iteration-break②\">Break</a>.</p>"
                        }
                      ]
                    },
                    {
                      "html": "If <var>regexp position</var> equals <var>regexp start</var> and <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-code-point\" id=\"ref-for-tokenizer-code-point⑨\">code point</a> is U+003F (<code>?</code>):",
                      "rationale": "run",
                      "steps": [
                        {
                          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-a-tokenizing-error\" id=\"ref-for-process-a-tokenizing-error③\">process a tokenizing error</a> given <var>tokenizer</var>, <var>regexp start</var>, and <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-index\" id=\"ref-for-tokenizer-index⑥\">index</a>.</p>"
                        },
                        {
                          "html": "<p>Set <var>error</var> to true.</p>"
                        },
                        {
                          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-break\" id=\"ref-for-iteration-break③\">Break</a>.</p>"
                        }
                      ]
                    },
                    {
                      "html": "If <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-code-point\" id=\"ref-for-tokenizer-code-point①⓪\">code point</a> is U+005C (<code>\\</code>):",
                      "rationale": "if",
                      "steps": [
                        {
                          "html": "If <var>regexp position</var> equals <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-input\" id=\"ref-for-tokenizer-input⑤\">input</a>'s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string-code-point-length\" id=\"ref-for-string-code-point-length⑤\">code point length</a> − 1:",
                          "rationale": "run",
                          "steps": [
                            {
                              "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-a-tokenizing-error\" id=\"ref-for-process-a-tokenizing-error④\">process a tokenizing error</a> given <var>tokenizer</var>, <var>regexp start</var>, and <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-index\" id=\"ref-for-tokenizer-index⑦\">index</a>.</p>"
                            },
                            {
                              "html": "<p>Set <var>error</var> to true.</p>"
                            },
                            {
                              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-break\" id=\"ref-for-iteration-break④\">Break</a></p>"
                            }
                          ]
                        },
                        {
                          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#get-the-next-code-point\" id=\"ref-for-get-the-next-code-point①\">get the next code point</a> given <var>tokenizer</var>.</p>"
                        },
                        {
                          "html": "If the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-ascii\" id=\"ref-for-is-ascii①\">is ASCII</a> given <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-code-point\" id=\"ref-for-tokenizer-code-point①①\">code point</a> is false:",
                          "rationale": "run",
                          "steps": [
                            {
                              "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-a-tokenizing-error\" id=\"ref-for-process-a-tokenizing-error⑤\">process a tokenizing error</a> given <var>tokenizer</var>, <var>regexp start</var>, and <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-index\" id=\"ref-for-tokenizer-index⑧\">index</a>.</p>"
                            },
                            {
                              "html": "<p>Set <var>error</var> to true.</p>"
                            },
                            {
                              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-break\" id=\"ref-for-iteration-break⑤\">Break</a>.</p>"
                            }
                          ]
                        },
                        {
                          "html": "<p>Set <var>regexp position</var> to <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-next-index\" id=\"ref-for-tokenizer-next-index⑥\">next index</a>.</p>"
                        },
                        {
                          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue①②\">Continue</a>.</p>"
                        }
                      ]
                    },
                    {
                      "html": "If <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-code-point\" id=\"ref-for-tokenizer-code-point①②\">code point</a> is U+0029 (<code>)</code>):",
                      "rationale": "decrement",
                      "steps": [
                        {
                          "html": "<p>Decrement <var>depth</var> by 1.</p>"
                        },
                        {
                          "html": "If <var>depth</var> is 0:",
                          "rationale": "set",
                          "steps": [
                            {
                              "html": "<p>Set <var>regexp position</var> to <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-next-index\" id=\"ref-for-tokenizer-next-index⑦\">next index</a>.</p>"
                            },
                            {
                              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-break\" id=\"ref-for-iteration-break⑥\">Break</a>.</p>"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "html": "Otherwise if <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-code-point\" id=\"ref-for-tokenizer-code-point①③\">code point</a> is U+0028 (<code>(</code>):",
                      "rationale": "increment",
                      "steps": [
                        {
                          "html": "<p>Increment <var>depth</var> by 1.</p>"
                        },
                        {
                          "html": "If <var>regexp position</var> equals <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-input\" id=\"ref-for-tokenizer-input⑥\">input</a>'s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string-code-point-length\" id=\"ref-for-string-code-point-length⑥\">code point length</a> − 1:",
                          "rationale": "run",
                          "steps": [
                            {
                              "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-a-tokenizing-error\" id=\"ref-for-process-a-tokenizing-error⑥\">process a tokenizing error</a> given <var>tokenizer</var>, <var>regexp start</var>, and <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-index\" id=\"ref-for-tokenizer-index⑨\">index</a>.</p>"
                            },
                            {
                              "html": "<p>Set <var>error</var> to true.</p>"
                            },
                            {
                              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-break\" id=\"ref-for-iteration-break⑦\">Break</a></p>"
                            }
                          ]
                        },
                        {
                          "html": "<p>Let <var>temporary position</var> be <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-next-index\" id=\"ref-for-tokenizer-next-index⑧\">next index</a>.</p>"
                        },
                        {
                          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#get-the-next-code-point\" id=\"ref-for-get-the-next-code-point②\">get the next code point</a> given <var>tokenizer</var>.</p>"
                        },
                        {
                          "html": "If <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-code-point\" id=\"ref-for-tokenizer-code-point①④\">code point</a> is not U+003F (<code>?</code>):",
                          "rationale": "run",
                          "steps": [
                            {
                              "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-a-tokenizing-error\" id=\"ref-for-process-a-tokenizing-error⑦\">process a tokenizing error</a> given <var>tokenizer</var>, <var>regexp start</var>, and <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-index\" id=\"ref-for-tokenizer-index①⓪\">index</a>.</p>"
                            },
                            {
                              "html": "<p>Set <var>error</var> to true.</p>"
                            },
                            {
                              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-break\" id=\"ref-for-iteration-break⑧\">Break</a>.</p>"
                            }
                          ]
                        },
                        {
                          "html": "<p>Set <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-next-index\" id=\"ref-for-tokenizer-next-index⑨\">next index</a> to <var>temporary position</var>.</p>"
                        }
                      ]
                    },
                    {
                      "html": "<p>Set <var>regexp position</var> to <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-next-index\" id=\"ref-for-tokenizer-next-index①⓪\">next index</a>.</p>"
                    }
                  ]
                },
                {
                  "html": "<p>If <var>error</var> is true <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue①③\">continue</a>.</p>"
                },
                {
                  "html": "If <var>depth</var> is not zero:",
                  "rationale": "run",
                  "steps": [
                    {
                      "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-a-tokenizing-error\" id=\"ref-for-process-a-tokenizing-error⑧\">process a tokenizing error</a> given <var>tokenizer</var>, <var>regexp start</var>, and <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-index\" id=\"ref-for-tokenizer-index①①\">index</a>.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue①④\">Continue</a>.</p>"
                    }
                  ]
                },
                {
                  "html": "<p>Let <var>regexp length</var> be <var>regexp position</var> − <var>regexp start</var> − 1.</p>"
                },
                {
                  "html": "If <var>regexp length</var> is zero:",
                  "rationale": "run",
                  "steps": [
                    {
                      "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-a-tokenizing-error\" id=\"ref-for-process-a-tokenizing-error⑨\">process a tokenizing error</a> given <var>tokenizer</var>, <var>regexp start</var>, and <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-index\" id=\"ref-for-tokenizer-index①②\">index</a>.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue①⑤\">Continue</a>.</p>"
                    }
                  ]
                },
                {
                  "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#add-a-token\" id=\"ref-for-add-a-token\">add a token</a> given <var>tokenizer</var>, \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-regexp\" id=\"ref-for-token-type-regexp①\"><code>regexp</code></a>\", <var>regexp position</var>, <var>regexp start</var>, and <var>regexp length</var>.</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue①⑥\">Continue</a>.</p>"
                }
              ]
            },
            {
              "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#add-a-token-with-default-position-and-length\" id=\"ref-for-add-a-token-with-default-position-and-length④\">add a token with default position and length</a> given <var>tokenizer</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-char\" id=\"ref-for-token-type-char①\"><code>char</code></a>\".</p>"
            }
          ]
        },
        {
          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#add-a-token-with-default-length\" id=\"ref-for-add-a-token-with-default-length②\">add a token with default length</a> given <var>tokenizer</var>, \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-end\" id=\"ref-for-token-type-end②\"><code>end</code></a>\", <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-index\" id=\"ref-for-tokenizer-index①③\">index</a>, and <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-index\" id=\"ref-for-tokenizer-index①④\">index</a>.</p>"
        },
        {
          "html": "<p>Return <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-token-list\" id=\"ref-for-tokenizer-token-list\">token list</a>.</p>"
        }
      ]
    },
    {
      "name": "get the next code point",
      "href": "https://urlpattern.spec.whatwg.org/#get-the-next-code-point",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"get-the-next-code-point\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">get the next code point</dfn> for a given <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer\" id=\"ref-for-tokenizer⑦\">tokenizer</a> <var>tokenizer</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Set <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-code-point\" id=\"ref-for-tokenizer-code-point①⑤\">code point</a> to the Unicode code point in <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-input\" id=\"ref-for-tokenizer-input⑦\">input</a> at the position indicated by <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-next-index\" id=\"ref-for-tokenizer-next-index①①\">next index</a>.</p>"
        },
        {
          "html": "<p>Increment <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-next-index\" id=\"ref-for-tokenizer-next-index①②\">next index</a> by 1.</p>"
        }
      ]
    },
    {
      "name": "seek and get the next code point",
      "href": "https://urlpattern.spec.whatwg.org/#seek-and-get-the-next-code-point",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"seek-and-get-the-next-code-point\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">seek and get the next code point</dfn> for a given <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer\" id=\"ref-for-tokenizer⑧\">tokenizer</a> <var>tokenizer</var> and number <var>index</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Set <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-next-index\" id=\"ref-for-tokenizer-next-index①③\">next index</a> to <var>index</var>.</p>"
        },
        {
          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#get-the-next-code-point\" id=\"ref-for-get-the-next-code-point③\">get the next code point</a> given <var>tokenizer</var>.</p>"
        }
      ]
    },
    {
      "name": "add a token",
      "href": "https://urlpattern.spec.whatwg.org/#add-a-token",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"add-a-token\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">add a token</dfn> for a given <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer\" id=\"ref-for-tokenizer⑨\">tokenizer</a> <var>tokenizer</var>, <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type\" id=\"ref-for-token-type①①\">type</a> <var>type</var>, number <var>next position</var>, number <var>value position</var>, and number <var>value length</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>token</var> be a new <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token\" id=\"ref-for-token①⑨\">token</a>.</p>"
        },
        {
          "html": "<p>Set <var>token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type\" id=\"ref-for-token-type①②\">type</a> to <var>type</var>.</p>"
        },
        {
          "html": "<p>Set <var>token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-index\" id=\"ref-for-token-index②\">index</a> to <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-index\" id=\"ref-for-tokenizer-index①⑤\">index</a>.</p>"
        },
        {
          "html": "<p>Set <var>token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-value\" id=\"ref-for-token-value②\">value</a> to the <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-point-substring\" id=\"ref-for-code-point-substring\">code point substring</a> from <var>value position</var> with length <var>value length</var> within <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-input\" id=\"ref-for-tokenizer-input⑧\">input</a>.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append②\">Append</a> <var>token</var> to the back of <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-token-list\" id=\"ref-for-tokenizer-token-list①\">token list</a>.</p>"
        },
        {
          "html": "<p>Set <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-index\" id=\"ref-for-token-index③\">index</a> to <var>next position</var>.</p>"
        }
      ]
    },
    {
      "name": "add a token with default length",
      "href": "https://urlpattern.spec.whatwg.org/#add-a-token-with-default-length",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"add-a-token-with-default-length\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">add a token with default length</dfn> for a given <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer\" id=\"ref-for-tokenizer①⓪\">tokenizer</a> <var>tokenizer</var>, <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type\" id=\"ref-for-token-type①③\">type</a> <var>type</var>, number <var>next position</var>, and number <var>value position</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>computed length</var> be <var>next position</var> − <var>value position</var>.</p>"
        },
        {
          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#add-a-token\" id=\"ref-for-add-a-token①\">add a token</a> given <var>tokenizer</var>, <var>type</var>, <var>next position</var>, <var>value position</var>, and <var>computed length</var>.</p>"
        }
      ]
    },
    {
      "name": "add a token with default position and length",
      "href": "https://urlpattern.spec.whatwg.org/#add-a-token-with-default-position-and-length",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"add-a-token-with-default-position-and-length\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">add a token with default position and length</dfn> for a given <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer\" id=\"ref-for-tokenizer①①\">tokenizer</a> <var>tokenizer</var> and <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type\" id=\"ref-for-token-type①④\">type</a> <var>type</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#add-a-token-with-default-length\" id=\"ref-for-add-a-token-with-default-length③\">add a token with default length</a> given <var>tokenizer</var>, <var>type</var>, <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-next-index\" id=\"ref-for-tokenizer-next-index①④\">next index</a>, and <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-index\" id=\"ref-for-tokenizer-index①⑥\">index</a>.</p>"
        }
      ]
    },
    {
      "name": "process a tokenizing error",
      "href": "https://urlpattern.spec.whatwg.org/#process-a-tokenizing-error",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"process-a-tokenizing-error\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">process a tokenizing error</dfn> for a given <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer\" id=\"ref-for-tokenizer①②\">tokenizer</a> <var>tokenizer</var>, a number <var>next position</var>, and a number <var>value position</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-policy\" id=\"ref-for-tokenizer-policy①\">policy</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenize-policy-strict\" id=\"ref-for-tokenize-policy-strict①\"><code>strict</code></a>\", then throw a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror④\">TypeError</a></code>.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert⑥\">Assert</a>: <var>tokenizer</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenizer-policy\" id=\"ref-for-tokenizer-policy②\">policy</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenize-policy-lenient\" id=\"ref-for-tokenize-policy-lenient①\"><code>lenient</code></a>\".</p>"
        },
        {
          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#add-a-token-with-default-length\" id=\"ref-for-add-a-token-with-default-length④\">add a token with default length</a> given <var>tokenizer</var>, \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-invalid-char\" id=\"ref-for-token-type-invalid-char②\"><code>invalid-char</code></a>\", <var>next position</var>, and <var>value position</var>.</p>"
        }
      ]
    },
    {
      "name": "is a valid name code point",
      "href": "https://urlpattern.spec.whatwg.org/#is-a-valid-name-code-point",
      "html": "To perform <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"is-a-valid-name-code-point\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">is a valid name code point</dfn> given a Unicode <var>code point</var> and a boolean <var>first</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>first</var> is true return the result of checking if <var>code point</var> is contained in the <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/#prod-IdentifierStart\" id=\"ref-for-prod-IdentifierStart\">IdentifierStart</a> set of code points.</p>"
        },
        {
          "html": "<p>Otherwise return the result of checking if <var>code point</var> is contained in the <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/#prod-IdentifierPart\" id=\"ref-for-prod-IdentifierPart\">IdentifierPart</a> set of code points.</p>"
        }
      ]
    },
    {
      "name": "is ASCII",
      "href": "https://urlpattern.spec.whatwg.org/#is-ascii",
      "html": "To determine if a Unicode <var>code point</var> <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"is-ascii\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">is ASCII</dfn>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>code point</var> is between U+0000 and U+007F inclusive, then return true.</p>"
        },
        {
          "html": "<p>Otherwise return false.</p>"
        }
      ]
    },
    {
      "name": "parse a pattern string",
      "href": "https://urlpattern.spec.whatwg.org/#parse-a-pattern-string",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"parse-a-pattern-string\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">parse a pattern string</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-string\" id=\"ref-for-pattern-string①②\">pattern string</a> <var>input</var>, <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#options\" id=\"ref-for-options⑦\">options</a> <var>options</var>, and <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#encoding-callback\" id=\"ref-for-encoding-callback②\">encoding callback</a> <var>encoding callback</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>parser</var> be a new <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser\" id=\"ref-for-pattern-parser⑦\">pattern parser</a> whose <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-encoding-callback\" id=\"ref-for-pattern-parser-encoding-callback\">encoding callback</a> is <var>encoding callback</var> and <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-segment-wildcard-regexp\" id=\"ref-for-pattern-parser-segment-wildcard-regexp\">segment wildcard regexp</a> is the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#generate-a-segment-wildcard-regexp\" id=\"ref-for-generate-a-segment-wildcard-regexp\">generate a segment wildcard regexp</a> given <var>options</var>.</p>"
        },
        {
          "html": "<p>Set <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-token-list\" id=\"ref-for-pattern-parser-token-list\">token list</a> to the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenize\" id=\"ref-for-tokenize②\">tokenize</a> given <var>input</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#tokenize-policy-strict\" id=\"ref-for-tokenize-policy-strict②\"><code>strict</code></a>\".</p>"
        },
        {
          "html": "While <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-index\" id=\"ref-for-pattern-parser-index\">index</a> is less than <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-token-list\" id=\"ref-for-pattern-parser-token-list①\">token list</a>'s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size⑤\">size</a>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>char token</var> be the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#try-to-consume-a-token\" id=\"ref-for-try-to-consume-a-token\">try to consume a token</a> given <var>parser</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-char\" id=\"ref-for-token-type-char⑦\"><code>char</code></a>\".</p>"
            },
            {
              "html": "<p>Let <var>name token</var> be the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#try-to-consume-a-token\" id=\"ref-for-try-to-consume-a-token①\">try to consume a token</a> given <var>parser</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-name\" id=\"ref-for-token-type-name⑤\"><code>name</code></a>\".</p>"
            },
            {
              "html": "<p>Let <var>regexp or wildcard token</var> be the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#try-to-consume-a-regexp-or-wildcard-token\" id=\"ref-for-try-to-consume-a-regexp-or-wildcard-token\">try to consume a regexp or wildcard token</a> given <var>parser</var> and <var>name token</var>.</p>"
            },
            {
              "html": "If <var>name token</var> is not null or <var>regexp or wildcard token</var> is not null:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>prefix</var> be the empty string.</p>"
                },
                {
                  "html": "<p>If <var>char token</var> is not null then set <var>prefix</var> to <var>char token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-value\" id=\"ref-for-token-value③\">value</a>.</p>"
                },
                {
                  "html": "If <var>prefix</var> is not the empty string and not <var>options</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#options-prefix-code-point\" id=\"ref-for-options-prefix-code-point④\">prefix code point</a>:",
                  "rationale": "append",
                  "steps": [
                    {
                      "html": "<p>Append <var>prefix</var> to the end of <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-pending-fixed-value\" id=\"ref-for-pattern-parser-pending-fixed-value\">pending fixed value</a>.</p>"
                    },
                    {
                      "html": "<p>Set <var>prefix</var> to the empty string.</p>"
                    }
                  ]
                },
                {
                  "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#maybe-add-a-part-from-the-pending-fixed-value\" id=\"ref-for-maybe-add-a-part-from-the-pending-fixed-value\">maybe add a part from the pending fixed value</a> given <var>parser</var>.</p>"
                },
                {
                  "html": "<p>Let <var>modifier token</var> be the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#try-to-consume-a-modifier-token\" id=\"ref-for-try-to-consume-a-modifier-token\">try to consume a modifier token</a> given <var>parser</var>.</p>"
                },
                {
                  "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#add-a-part\" id=\"ref-for-add-a-part\">add a part</a> given <var>parser</var>, <var>prefix</var>, <var>name token</var>, <var>regexp or wildcard token</var>, the empty string, and <var>modifier token</var>.</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue①⑦\">Continue</a>.</p>"
                }
              ]
            },
            {
              "html": "<p>Let <var>fixed token</var> be <var>char token</var>.</p>"
            },
            {
              "html": "<p>If <var>fixed token</var> is null, then set <var>fixed token</var> to the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#try-to-consume-a-token\" id=\"ref-for-try-to-consume-a-token②\">try to consume a token</a> given <var>parser</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-escaped-char\" id=\"ref-for-token-type-escaped-char②\"><code>escaped-char</code></a>\".</p>"
            },
            {
              "html": "If <var>fixed token</var> is not null:",
              "rationale": "append",
              "steps": [
                {
                  "html": "<p>Append <var>fixed token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-value\" id=\"ref-for-token-value④\">value</a> to <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-pending-fixed-value\" id=\"ref-for-pattern-parser-pending-fixed-value①\">pending fixed value</a>.</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue①⑧\">Continue</a>.</p>"
                }
              ]
            },
            {
              "html": "<p>Let <var>open token</var> be the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#try-to-consume-a-token\" id=\"ref-for-try-to-consume-a-token③\">try to consume a token</a> given <var>parser</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-open\" id=\"ref-for-token-type-open②\"><code>open</code></a>\".</p>"
            },
            {
              "html": "If <var>open token</var> is not null:",
              "rationale": "set",
              "steps": [
                {
                  "html": "<p>Set <var>prefix</var> be the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#consume-text\" id=\"ref-for-consume-text\">consume text</a> given <var>parser</var>.</p>"
                },
                {
                  "html": "<p>Set <var>name token</var> to the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#try-to-consume-a-token\" id=\"ref-for-try-to-consume-a-token④\">try to consume a token</a> given <var>parser</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-name\" id=\"ref-for-token-type-name⑦\"><code>name</code></a>\".</p>"
                },
                {
                  "html": "<p>Set <var>regexp or wildcard token</var> to the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#try-to-consume-a-regexp-or-wildcard-token\" id=\"ref-for-try-to-consume-a-regexp-or-wildcard-token①\">try to consume a regexp or wildcard token</a> given <var>parser</var> and <var>name token</var>.</p>"
                },
                {
                  "html": "<p>Let <var>suffix</var> be the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#consume-text\" id=\"ref-for-consume-text①\">consume text</a> given <var>parser</var>.</p>"
                },
                {
                  "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#consume-a-required-token\" id=\"ref-for-consume-a-required-token\">consume a required token</a> given <var>parser</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-close\" id=\"ref-for-token-type-close⑥\"><code>close</code></a>\".</p>"
                },
                {
                  "html": "<p>Set <var>modifier token</var> to the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#try-to-consume-a-modifier-token\" id=\"ref-for-try-to-consume-a-modifier-token①\">try to consume a modifier token</a> given <var>parser</var>.</p>"
                },
                {
                  "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#add-a-part\" id=\"ref-for-add-a-part①\">add a part</a> given <var>parser</var>, <var>prefix</var>, <var>name token</var>, <var>regexp or wildcard token</var>, <var>suffix</var>, and <var>modifier token</var>.</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue①⑨\">Continue</a>.</p>"
                }
              ]
            },
            {
              "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#maybe-add-a-part-from-the-pending-fixed-value\" id=\"ref-for-maybe-add-a-part-from-the-pending-fixed-value①\">maybe add a part from the pending fixed value</a> given <var>parser</var>.</p>"
            },
            {
              "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#consume-a-required-token\" id=\"ref-for-consume-a-required-token①\">consume a required token</a> given <var>parser</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-end\" id=\"ref-for-token-type-end③\"><code>end</code></a>\".</p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-part-list\" id=\"ref-for-pattern-parser-part-list\">part list</a>.</p>"
        }
      ]
    },
    {
      "name": "generate a segment wildcard regexp",
      "href": "https://urlpattern.spec.whatwg.org/#generate-a-segment-wildcard-regexp",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"generate-a-segment-wildcard-regexp\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">generate a segment wildcard regexp</dfn> given an <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#options\" id=\"ref-for-options⑧\">options</a> <var>options</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>result</var> be \"<code>[^</code>\".</p>"
        },
        {
          "html": "<p>Append the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#escape-a-regexp-string\" id=\"ref-for-escape-a-regexp-string\">escape a regexp string</a> given <var>options</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#options-delimiter-code-point\" id=\"ref-for-options-delimiter-code-point⑤\">delimiter code point</a> to the end of <var>result</var>.</p>"
        },
        {
          "html": "<p>Append \"<code>]+?</code>\" to the end of <var>result</var>.</p>"
        },
        {
          "html": "<p>Return <var>result</var>.</p>"
        }
      ]
    },
    {
      "name": "try to consume a token",
      "href": "https://urlpattern.spec.whatwg.org/#try-to-consume-a-token",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"try-to-consume-a-token\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">try to consume a token</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser\" id=\"ref-for-pattern-parser⑧\">pattern parser</a> <var>parser</var> and <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type\" id=\"ref-for-token-type①⑤\">type</a> <var>type</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert⑦\">Assert</a>: <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-index\" id=\"ref-for-pattern-parser-index①\">index</a> is less than <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-token-list\" id=\"ref-for-pattern-parser-token-list②\">token list</a> <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size⑥\">size</a>.</p>"
        },
        {
          "html": "<p>Let <var>next token</var> be <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-token-list\" id=\"ref-for-pattern-parser-token-list③\">token list</a>[<var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-index\" id=\"ref-for-pattern-parser-index②\">index</a>].</p>"
        },
        {
          "html": "<p>If <var>next token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type\" id=\"ref-for-token-type①⑥\">type</a> is not <var>type</var> return null.</p>"
        },
        {
          "html": "<p>Increment <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-index\" id=\"ref-for-pattern-parser-index③\">index</a> by 1.</p>"
        },
        {
          "html": "<p>Return <var>next token</var>.</p>"
        }
      ]
    },
    {
      "name": "try to consume a modifier token",
      "href": "https://urlpattern.spec.whatwg.org/#try-to-consume-a-modifier-token",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"try-to-consume-a-modifier-token\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">try to consume a modifier token</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser\" id=\"ref-for-pattern-parser⑨\">pattern parser</a> <var>parser</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>token</var> be the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#try-to-consume-a-token\" id=\"ref-for-try-to-consume-a-token⑤\">try to consume a token</a> given <var>parser</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-other-modifier\" id=\"ref-for-token-type-other-modifier⑥\"><code>other-modifier</code></a>\".</p>"
        },
        {
          "html": "<p>If <var>token</var> is not null, then return <var>token</var>.</p>"
        },
        {
          "html": "<p>Set <var>token</var> to the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#try-to-consume-a-token\" id=\"ref-for-try-to-consume-a-token⑥\">try to consume a token</a> given <var>parser</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-asterisk\" id=\"ref-for-token-type-asterisk②\"><code>asterisk</code></a>\".</p>"
        },
        {
          "html": "<p>Return <var>token</var>.</p>"
        }
      ]
    },
    {
      "name": "try to consume a regexp or wildcard token",
      "href": "https://urlpattern.spec.whatwg.org/#try-to-consume-a-regexp-or-wildcard-token",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"try-to-consume-a-regexp-or-wildcard-token\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">try to consume a regexp or wildcard token</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser\" id=\"ref-for-pattern-parser①⓪\">pattern parser</a> <var>parser</var> and <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token\" id=\"ref-for-token③②\">token</a> <var>name token</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>token</var> be the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#try-to-consume-a-token\" id=\"ref-for-try-to-consume-a-token⑦\">try to consume a token</a> given <var>parser</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-regexp\" id=\"ref-for-token-type-regexp⑥\"><code>regexp</code></a>\".</p>"
        },
        {
          "html": "<p>If <var>name token</var> is null and <var>token</var> is null, then set <var>token</var> to the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#try-to-consume-a-token\" id=\"ref-for-try-to-consume-a-token⑧\">try to consume a token</a> given <var>parser</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-asterisk\" id=\"ref-for-token-type-asterisk③\"><code>asterisk</code></a>\".</p>"
        },
        {
          "html": "<p>Return <var>token</var>.</p>"
        }
      ]
    },
    {
      "name": "consume a required token",
      "href": "https://urlpattern.spec.whatwg.org/#consume-a-required-token",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"consume-a-required-token\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">consume a required token</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser\" id=\"ref-for-pattern-parser①①\">pattern parser</a> <var>parser</var> and <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type\" id=\"ref-for-token-type①⑦\">type</a> <var>type</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>result</var> be the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#try-to-consume-a-token\" id=\"ref-for-try-to-consume-a-token⑨\">try to consume a token</a> given <var>parser</var> and <var>type</var>.</p>"
        },
        {
          "html": "<p>If <var>result</var> is null, then throw a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror⑤\">TypeError</a></code>.</p>"
        },
        {
          "html": "<p>Return <var>result</var>.</p>"
        }
      ]
    },
    {
      "name": "consume text",
      "href": "https://urlpattern.spec.whatwg.org/#consume-text",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"consume-text\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">consume text</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser\" id=\"ref-for-pattern-parser①②\">pattern parser</a> <var>parser</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>result</var> be the empty string.</p>"
        },
        {
          "html": "While true:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>token</var> be the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#try-to-consume-a-token\" id=\"ref-for-try-to-consume-a-token①⓪\">try to consume a token</a> given <var>parser</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-char\" id=\"ref-for-token-type-char⑨\"><code>char</code></a>\".</p>"
            },
            {
              "html": "<p>If <var>token</var> is null, then set <var>token</var> to the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#try-to-consume-a-token\" id=\"ref-for-try-to-consume-a-token①①\">try to consume a token</a> given <var>parser</var> and \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-escaped-char\" id=\"ref-for-token-type-escaped-char③\"><code>escaped-char</code></a>\".</p>"
            },
            {
              "html": "<p>If <var>token</var> is null, then <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-break\" id=\"ref-for-iteration-break⑨\">break</a>.</p>"
            },
            {
              "html": "<p>Append <var>token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-value\" id=\"ref-for-token-value⑤\">value</a> to the end of <var>result</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>result</var>.</p>"
        }
      ]
    },
    {
      "name": "maybe add a part from the pending fixed value",
      "href": "https://urlpattern.spec.whatwg.org/#maybe-add-a-part-from-the-pending-fixed-value",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"maybe-add-a-part-from-the-pending-fixed-value\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">maybe add a part from the pending fixed value</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser\" id=\"ref-for-pattern-parser①③\">pattern parser</a> <var>parser</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-pending-fixed-value\" id=\"ref-for-pattern-parser-pending-fixed-value②\">pending fixed value</a> is the empty string, then return.</p>"
        },
        {
          "html": "<p>Let <var>encoded value</var> be the result of running <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-encoding-callback\" id=\"ref-for-pattern-parser-encoding-callback①\">encoding callback</a> given <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-pending-fixed-value\" id=\"ref-for-pattern-parser-pending-fixed-value③\">pending fixed value</a>.</p>"
        },
        {
          "html": "<p>Set <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-pending-fixed-value\" id=\"ref-for-pattern-parser-pending-fixed-value④\">pending fixed value</a> to the empty string.</p>"
        },
        {
          "html": "<p>Let <var>part</var> be a new <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part\" id=\"ref-for-part①⑦\">part</a> whose <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type\" id=\"ref-for-part-type①\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type-fixed-text\" id=\"ref-for-part-type-fixed-text①\"><code>fixed-text</code></a>\", <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-value\" id=\"ref-for-part-value\">value</a> is <var>encoded value</var>, and <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier\" id=\"ref-for-part-modifier④\">modifier</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier-none\" id=\"ref-for-part-modifier-none\"><code>none</code></a>\".</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append③\">Append</a> <var>part</var> to <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-part-list\" id=\"ref-for-pattern-parser-part-list①\">part list</a>.</p>"
        }
      ]
    },
    {
      "name": "add a part",
      "href": "https://urlpattern.spec.whatwg.org/#add-a-part",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"add-a-part\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">add a part</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser\" id=\"ref-for-pattern-parser①④\">pattern parser</a> <var>parser</var>, a string <var>prefix</var>, a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token\" id=\"ref-for-token③③\">token</a> <var>name token</var>, a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token\" id=\"ref-for-token③④\">token</a> <var>regexp or wildcard token</var>, a string <var>suffix</var>, and a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token\" id=\"ref-for-token③⑤\">token</a> <var>modifier token</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>modifier</var> be \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier-none\" id=\"ref-for-part-modifier-none①\"><code>none</code></a>\".</p>"
        },
        {
          "html": "If <var>modifier token</var> is not null:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>modifier token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-value\" id=\"ref-for-token-value⑥\">value</a> is \"<code>?</code>\" then set <var>modifier</var> to \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier-optional\" id=\"ref-for-part-modifier-optional①\"><code>optional</code></a>\".</p>"
            },
            {
              "html": "<p>Otherwise if <var>modifier token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-value\" id=\"ref-for-token-value⑦\">value</a> is \"<code>*</code>\" then set <var>modifier</var> to \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier-zero-or-more\" id=\"ref-for-part-modifier-zero-or-more\"><code>zero-or-more</code></a>\".</p>"
            },
            {
              "html": "<p>Otherwise if <var>modifier token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-value\" id=\"ref-for-token-value⑧\">value</a> is \"<code>+</code>\" then set <var>modifier</var> to \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier-one-or-more\" id=\"ref-for-part-modifier-one-or-more\"><code>one-or-more</code></a>\".</p>"
            }
          ]
        },
        {
          "html": "If <var>name token</var> is null and <var>regexp or wildcard token</var> is null and <var>modifier</var> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier-none\" id=\"ref-for-part-modifier-none②\"><code>none</code></a>\":",
          "rationale": "append",
          "steps": [
            {
              "html": "<p>Append <var>prefix</var> to the end of <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-pending-fixed-value\" id=\"ref-for-pattern-parser-pending-fixed-value⑥\">pending fixed value</a>.</p>"
            },
            {
              "html": "<p>Return.</p>"
            }
          ]
        },
        {
          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#maybe-add-a-part-from-the-pending-fixed-value\" id=\"ref-for-maybe-add-a-part-from-the-pending-fixed-value②\">maybe add a part from the pending fixed value</a> given <var>parser</var>.</p>"
        },
        {
          "html": "If <var>name token</var> is null and <var>regexp or wildcard token</var> is null:",
          "rationale": "assert",
          "steps": [
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert⑧\">Assert</a>: <var>suffix</var> is the empty string.</p>"
            },
            {
              "html": "<p>If <var>prefix</var> is the empty string, then return.</p>"
            },
            {
              "html": "<p>Let <var>encoded value</var> be the result of running <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-encoding-callback\" id=\"ref-for-pattern-parser-encoding-callback②\">encoding callback</a> given <var>prefix</var>.</p>"
            },
            {
              "html": "<p>Let <var>part</var> be a new <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part\" id=\"ref-for-part①⑨\">part</a> whose <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type\" id=\"ref-for-part-type②\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type-fixed-text\" id=\"ref-for-part-type-fixed-text②\"><code>fixed-text</code></a>\", <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-value\" id=\"ref-for-part-value①\">value</a> is <var>encoded value</var>, and <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier\" id=\"ref-for-part-modifier⑤\">modifier</a> is <var>modifier</var>.</p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append④\">Append</a> <var>part</var> to <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-part-list\" id=\"ref-for-pattern-parser-part-list②\">part list</a>.</p>"
            },
            {
              "html": "<p>Return.</p>"
            }
          ]
        },
        {
          "html": "<p>Let <var>regexp value</var> be the empty string.</p>"
        },
        {
          "html": "<p>If <var>regexp or wildcard token</var> is null, then set <var>regexp value</var> to <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-segment-wildcard-regexp\" id=\"ref-for-pattern-parser-segment-wildcard-regexp①\">segment wildcard regexp</a>.</p>"
        },
        {
          "html": "<p>Otherwise if <var>regexp or wildcard token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type\" id=\"ref-for-token-type①⑧\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-type-asterisk\" id=\"ref-for-token-type-asterisk④\"><code>asterisk</code></a>\", then set <var>regexp value</var> to the <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#full-wildcard-regexp-value\" id=\"ref-for-full-wildcard-regexp-value\">full wildcard regexp value</a>.</p>"
        },
        {
          "html": "<p>Otherwise set <var>regexp value</var> to <var>regexp or wildcard token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-value\" id=\"ref-for-token-value⑨\">value</a>.</p>"
        },
        {
          "html": "<p>Let <var>type</var> be \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type-regexp\" id=\"ref-for-part-type-regexp②\"><code>regexp</code></a>\".</p>"
        },
        {
          "html": "If <var>regexp value</var> is <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-segment-wildcard-regexp\" id=\"ref-for-pattern-parser-segment-wildcard-regexp②\">segment wildcard regexp</a>:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>type</var> to \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type-segment-wildcard\" id=\"ref-for-part-type-segment-wildcard\"><code>segment-wildcard</code></a>\".</p>"
            },
            {
              "html": "<p>Set <var>regexp value</var> to the empty string.</p>"
            }
          ]
        },
        {
          "html": "Otherwise if <var>regexp value</var> is the <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#full-wildcard-regexp-value\" id=\"ref-for-full-wildcard-regexp-value①\">full wildcard regexp value</a>:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>type</var> to \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type-full-wildcard\" id=\"ref-for-part-type-full-wildcard\"><code>full-wildcard</code></a>\".</p>"
            },
            {
              "html": "<p>Set <var>regexp value</var> to the empty string.</p>"
            }
          ]
        },
        {
          "html": "<p>Let <var>name</var> be the empty string.</p>"
        },
        {
          "html": "<p>If <var>name token</var> is not null, then set <var>name</var> to <var>name token</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#token-value\" id=\"ref-for-token-value①⓪\">value</a>.</p>"
        },
        {
          "html": "Otherwise if <var>regexp or wildcard token</var> is not null:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>name</var> to <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-next-numeric-name\" id=\"ref-for-pattern-parser-next-numeric-name\">next numeric name</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#serialize-an-integer\" id=\"ref-for-serialize-an-integer①\">serialized</a>.</p>"
            },
            {
              "html": "<p>Increment <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-next-numeric-name\" id=\"ref-for-pattern-parser-next-numeric-name①\">next numeric name</a> by 1.</p>"
            }
          ]
        },
        {
          "html": "<p>If the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-duplicate-name\" id=\"ref-for-is-a-duplicate-name\">is a duplicate name</a> given <var>parser</var> and <var>name</var> is true, then throw a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror⑥\">TypeError</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>encoded prefix</var> be the result of running <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-encoding-callback\" id=\"ref-for-pattern-parser-encoding-callback③\">encoding callback</a> given <var>prefix</var>.</p>"
        },
        {
          "html": "<p>Let <var>encoded suffix</var> be the result of running <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-encoding-callback\" id=\"ref-for-pattern-parser-encoding-callback④\">encoding callback</a> given <var>suffix</var>.</p>"
        },
        {
          "html": "<p>Let <var>part</var> be a new <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part\" id=\"ref-for-part②③\">part</a> whose <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type\" id=\"ref-for-part-type④\">type</a> is <var>type</var>, <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-value\" id=\"ref-for-part-value②\">value</a> is <var>regexp value</var>, <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier\" id=\"ref-for-part-modifier⑥\">modifier</a> is <var>modifier</var>, <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-name\" id=\"ref-for-part-name①\">name</a> is <var>name</var>, <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-prefix\" id=\"ref-for-part-prefix\">prefix</a> is <var>encoded prefix</var>, and <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-suffix\" id=\"ref-for-part-suffix\">suffix</a> is <var>encoded suffix</var>.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append⑤\">Append</a> <var>part</var> to <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-part-list\" id=\"ref-for-pattern-parser-part-list③\">part list</a>.</p>"
        }
      ]
    },
    {
      "name": "is a duplicate name",
      "href": "https://urlpattern.spec.whatwg.org/#is-a-duplicate-name",
      "html": "To determine if a value <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"is-a-duplicate-name\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">is a duplicate name</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser\" id=\"ref-for-pattern-parser①⑤\">pattern parser</a> <var>parser</var> and a string <var>name</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate③\">For each</a> <var>part</var> of <var>parser</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-parser-part-list\" id=\"ref-for-pattern-parser-part-list④\">part list</a>:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-name\" id=\"ref-for-part-name②\">name</a> is <var>name</var>, then return true.</p>"
            }
          ]
        },
        {
          "html": "<p>Return false.</p>"
        }
      ]
    },
    {
      "name": "generate a regular expression and name list",
      "href": "https://urlpattern.spec.whatwg.org/#generate-a-regular-expression-and-name-list",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-export=\"\" id=\"generate-a-regular-expression-and-name-list\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">generate a regular expression and name list</dfn> from a given <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-list\" id=\"ref-for-part-list③\">part list</a> <var>part list</var> and <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#options\" id=\"ref-for-options⑨\">options</a> <var>options</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>result</var> be \"<code>^</code>\".</p>"
        },
        {
          "html": "<p>Let <var>name list</var> be a new <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list⑨\">list</a>.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate④\">For each</a> <var>part</var> of <var>part list</var>:",
          "rationale": "if",
          "steps": [
            {
              "html": "If <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type\" id=\"ref-for-part-type⑤\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type-fixed-text\" id=\"ref-for-part-type-fixed-text③\"><code>fixed-text</code></a>\":",
              "rationale": "if",
              "steps": [
                {
                  "html": "<p>If <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier\" id=\"ref-for-part-modifier⑦\">modifier</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier-none\" id=\"ref-for-part-modifier-none③\"><code>none</code></a>\", then append the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#escape-a-regexp-string\" id=\"ref-for-escape-a-regexp-string①\">escape a regexp string</a> given <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-value\" id=\"ref-for-part-value③\">value</a> to the end of <var>result</var>.</p>"
                },
                {
                  "html": "Otherwise:",
                  "rationale": "append",
                  "steps": [
                    {
                      "html": "<p>Append \"<code>(?:</code>\" to the end of <var>result</var>.</p>"
                    },
                    {
                      "html": "<p>Append the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#escape-a-regexp-string\" id=\"ref-for-escape-a-regexp-string②\">escape a regexp string</a> given <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-value\" id=\"ref-for-part-value④\">value</a> to the end of <var>result</var>.</p>"
                    },
                    {
                      "html": "<p>Append \"<code>)</code>\" to the end of <var>result</var>.</p>"
                    },
                    {
                      "html": "<p>Append the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#convert-a-modifier-to-a-string\" id=\"ref-for-convert-a-modifier-to-a-string\">convert a modifier to a string</a> given <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier\" id=\"ref-for-part-modifier⑧\">modifier</a> to the end of <var>result</var>.</p>"
                    }
                  ]
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue②⓪\">Continue</a>.</p>"
                }
              ]
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert⑨\">Assert</a>: <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-name\" id=\"ref-for-part-name③\">name</a> is not the empty string.</p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append⑥\">Append</a> <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-name\" id=\"ref-for-part-name④\">name</a> to <var>name list</var>.</p>"
            },
            {
              "html": "<p>Let <var>regexp value</var> be <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-value\" id=\"ref-for-part-value⑤\">value</a>.</p>"
            },
            {
              "html": "<p>If <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type\" id=\"ref-for-part-type⑥\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type-segment-wildcard\" id=\"ref-for-part-type-segment-wildcard①\"><code>segment-wildcard</code></a>\", then set <var>regexp value</var> to the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#generate-a-segment-wildcard-regexp\" id=\"ref-for-generate-a-segment-wildcard-regexp①\">generate a segment wildcard regexp</a> given <var>options</var>.</p>"
            },
            {
              "html": "<p>Otherwise if <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type\" id=\"ref-for-part-type⑦\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type-full-wildcard\" id=\"ref-for-part-type-full-wildcard①\"><code>full-wildcard</code></a>\", then set <var>regexp value</var> to <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#full-wildcard-regexp-value\" id=\"ref-for-full-wildcard-regexp-value②\">full wildcard regexp value</a>.</p>"
            },
            {
              "html": "If <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-prefix\" id=\"ref-for-part-prefix①\">prefix</a> is the empty string and <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-suffix\" id=\"ref-for-part-suffix①\">suffix</a> is the empty string:",
              "rationale": "if",
              "steps": [
                {
                  "html": "If <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier\" id=\"ref-for-part-modifier⑨\">modifier</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier-none\" id=\"ref-for-part-modifier-none④\"><code>none</code></a>\" or \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier-optional\" id=\"ref-for-part-modifier-optional②\"><code>optional</code></a>\", then:",
                  "rationale": "append",
                  "steps": [
                    {
                      "html": "<p>Append \"<code>(</code>\" to the end of <var>result</var>.</p>"
                    },
                    {
                      "html": "<p>Append <var>regexp value</var> to the end of <var>result</var>.</p>"
                    },
                    {
                      "html": "<p>Append \"<code>)</code>\" to the end of <var>result</var>.</p>"
                    },
                    {
                      "html": "<p>Append the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#convert-a-modifier-to-a-string\" id=\"ref-for-convert-a-modifier-to-a-string①\">convert a modifier to a string</a> given <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier\" id=\"ref-for-part-modifier①⓪\">modifier</a> to the end of <var>result</var>.</p>"
                    }
                  ]
                },
                {
                  "html": "Otherwise:",
                  "rationale": "append",
                  "steps": [
                    {
                      "html": "<p>Append \"<code>((?:</code>\" to the end of <var>result</var>.</p>"
                    },
                    {
                      "html": "<p>Append <var>regexp value</var> to the end of <var>result</var>.</p>"
                    },
                    {
                      "html": "<p>Append \"<code>)</code>\" to the end of <var>result</var>.</p>"
                    },
                    {
                      "html": "<p>Append the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#convert-a-modifier-to-a-string\" id=\"ref-for-convert-a-modifier-to-a-string②\">convert a modifier to a string</a> given <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier\" id=\"ref-for-part-modifier①①\">modifier</a> to the end of <var>result</var>.</p>"
                    },
                    {
                      "html": "<p>Append \"<code>)</code>\" to the end of <var>result</var>.</p>"
                    }
                  ]
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue②①\">Continue</a>.</p>"
                }
              ]
            },
            {
              "html": "If <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier\" id=\"ref-for-part-modifier①②\">modifier</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier-none\" id=\"ref-for-part-modifier-none⑤\"><code>none</code></a>\" or \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier-optional\" id=\"ref-for-part-modifier-optional③\"><code>optional</code></a>\":",
              "rationale": "append",
              "steps": [
                {
                  "html": "<p>Append \"<code>(?:</code>\" to the end of <var>result</var>.</p>"
                },
                {
                  "html": "<p>Append the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#escape-a-regexp-string\" id=\"ref-for-escape-a-regexp-string③\">escape a regexp string</a> given <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-prefix\" id=\"ref-for-part-prefix⑤\">prefix</a> to the end of <var>result</var>.</p>"
                },
                {
                  "html": "<p>Append \"<code>(</code>\" to the end of <var>result</var>.</p>"
                },
                {
                  "html": "<p>Append <var>regexp value</var> to the end of <var>result</var>.</p>"
                },
                {
                  "html": "<p>Append \"<code>)</code>\" to the end of <var>result</var>.</p>"
                },
                {
                  "html": "<p>Append the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#escape-a-regexp-string\" id=\"ref-for-escape-a-regexp-string④\">escape a regexp string</a> given <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-suffix\" id=\"ref-for-part-suffix⑤\">suffix</a> to the end of <var>result</var>.</p>"
                },
                {
                  "html": "<p>Append \"<code>)</code>\" to the end of <var>result</var>.</p>"
                },
                {
                  "html": "<p>Append the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#convert-a-modifier-to-a-string\" id=\"ref-for-convert-a-modifier-to-a-string③\">convert a modifier to a string</a> given <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier\" id=\"ref-for-part-modifier①③\">modifier</a> to the end of <var>result</var>.</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue②②\">Continue</a>.</p>"
                }
              ]
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①⓪\">Assert</a>: <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier\" id=\"ref-for-part-modifier①④\">modifier</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier-zero-or-more\" id=\"ref-for-part-modifier-zero-or-more①\"><code>zero-or-more</code></a>\" or \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier-one-or-more\" id=\"ref-for-part-modifier-one-or-more①\"><code>one-or-more</code></a>\".</p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①①\">Assert</a>: <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-prefix\" id=\"ref-for-part-prefix⑥\">prefix</a> is not the empty string or <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-suffix\" id=\"ref-for-part-suffix⑥\">suffix</a> is not the empty string.</p>"
            },
            {
              "html": "<p>Append \"<code>(?:</code>\" to the end of <var>result</var>.</p>"
            },
            {
              "html": "<p>Append the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#escape-a-regexp-string\" id=\"ref-for-escape-a-regexp-string⑤\">escape a regexp string</a> given <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-prefix\" id=\"ref-for-part-prefix①①\">prefix</a> to the end of <var>result</var>.</p>"
            },
            {
              "html": "<p>Append \"<code>((?:</code>\" to the end of <var>result</var>.</p>"
            },
            {
              "html": "<p>Append <var>regexp value</var> to the end of <var>result</var>.</p>"
            },
            {
              "html": "<p>Append \"<code>)(?:</code>\" to the end of <var>result</var>.</p>"
            },
            {
              "html": "<p>Append the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#escape-a-regexp-string\" id=\"ref-for-escape-a-regexp-string⑥\">escape a regexp string</a> given <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-suffix\" id=\"ref-for-part-suffix①⓪\">suffix</a> to the end of <var>result</var>.</p>"
            },
            {
              "html": "<p>Append the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#escape-a-regexp-string\" id=\"ref-for-escape-a-regexp-string⑦\">escape a regexp string</a> given <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-prefix\" id=\"ref-for-part-prefix①②\">prefix</a> to the end of <var>result</var>.</p>"
            },
            {
              "html": "<p>Append \"<code>(?:</code>\" to the end of <var>result</var>.</p>"
            },
            {
              "html": "<p>Append <var>regexp value</var> to the end of <var>result</var>.</p>"
            },
            {
              "html": "<p>Append \"<code>))*)</code>\" to the end of <var>result</var>.</p>"
            },
            {
              "html": "<p>Append the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#escape-a-regexp-string\" id=\"ref-for-escape-a-regexp-string⑧\">escape a regexp string</a> given <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-suffix\" id=\"ref-for-part-suffix①①\">suffix</a> to the end of <var>result</var>.</p>"
            },
            {
              "html": "<p>Append \"<code>)</code>\" to the end of <var>result</var>.</p>"
            },
            {
              "html": "<p>If <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier\" id=\"ref-for-part-modifier①⑤\">modifier</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier-zero-or-more\" id=\"ref-for-part-modifier-zero-or-more②\"><code>zero-or-more</code></a>\" then append \"<code>?</code>\" to the end of <var>result</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Append \"<code>$</code>\" to the end of <var>result</var>.</p>"
        },
        {
          "html": "<p>Return (<var>result</var>, <var>name list</var>).</p>"
        }
      ]
    },
    {
      "name": "escape a regexp string",
      "href": "https://urlpattern.spec.whatwg.org/#escape-a-regexp-string",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"escape-a-regexp-string\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">escape a regexp string</dfn> given a string <var>input</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①②\">Assert</a>: <var>input</var> is an <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-string\" id=\"ref-for-ascii-string\">ASCII string</a>.</p>"
        },
        {
          "html": "<p>Let <var>result</var> be the empty string.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be 0.</p>"
        },
        {
          "html": "While <var>index</var> is less than <var>input</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string-length\" id=\"ref-for-string-length\">length</a>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>c</var> be <var>input</var>[<var>index</var>].</p>"
            },
            {
              "html": "<p>Increment <var>index</var> by 1.</p>"
            },
            {
              "html": "<p>If <var>c</var> is one of:</p>\n        <ul>\n         <li>U+002E (<code>.</code>);\n         </li><li>U+002B (<code>+</code>);\n         </li><li>U+002A (<code>*</code>);\n         </li><li>U+003F (<code>?</code>);\n         </li><li>U+005E (<code>^</code>);\n         </li><li>U+0024 (<code>$</code>);\n         </li><li>U+007B (<code>{</code>);\n         </li><li>U+007D (<code>}</code>);\n         </li><li>U+0028 (<code>(</code>);\n         </li><li>U+0029 (<code>)</code>);\n         </li><li>U+005B (<code>[</code>);\n         </li><li>U+005D (<code>]</code>);\n         </li><li>U+007C (<code>|</code>);\n         </li><li>U+002F (<code>/</code>); or\n         </li><li>U+005C (<code>\\</code>),\n        </li></ul>\n        <p>then append \"<code>\\</code>\" to the end of <var>result</var>. </p>"
            },
            {
              "html": "<p>Append <var>c</var> to the end of <var>result</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>result</var>.</p>"
        }
      ]
    },
    {
      "name": "generate a pattern string",
      "href": "https://urlpattern.spec.whatwg.org/#generate-a-pattern-string",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-export=\"\" id=\"generate-a-pattern-string\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">generate a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-string\" id=\"ref-for-pattern-string①③\">pattern string</a></dfn> from a given <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-list\" id=\"ref-for-part-list④\">part list</a> <var>part list</var> and <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#options\" id=\"ref-for-options①⓪\">options</a> <var>options</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>result</var> be the empty string.</p>"
        },
        {
          "html": "<p>Let <var>index list</var> be the result of <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-get-the-indices\" id=\"ref-for-list-get-the-indices\">getting the indices</a> for <var>part list</var>.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate⑤\">For each</a> <var>index</var> of <var>index list</var>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>part</var> be <var>part list</var>[<var>index</var>].</p>"
            },
            {
              "html": "<p>Let <var>previous part</var> be <var>part list</var>[<var>index</var> - 1] if <var>index</var> is greater than 0, otherwise let it be null.</p>"
            },
            {
              "html": "<p>Let <var>next part</var> be <var>part list</var>[<var>index</var> + 1] if <var>index</var> is less than <var>index list</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size⑦\">size</a> - 1, otherwise let it be null.</p>"
            },
            {
              "html": "If <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type\" id=\"ref-for-part-type⑧\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type-fixed-text\" id=\"ref-for-part-type-fixed-text⑤\"><code>fixed-text</code></a>\" then:",
              "rationale": "if",
              "steps": [
                {
                  "html": "If <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier\" id=\"ref-for-part-modifier①⑥\">modifier</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier-none\" id=\"ref-for-part-modifier-none⑥\"><code>none</code></a>\" then:",
                  "rationale": "append",
                  "steps": [
                    {
                      "html": "<p>Append the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#escape-a-pattern-string\" id=\"ref-for-escape-a-pattern-string\">escape a pattern string</a> given <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-value\" id=\"ref-for-part-value⑥\">value</a> to the end of <var>result</var>.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue②③\">Continue</a>.</p>"
                    }
                  ]
                },
                {
                  "html": "<p>Append \"<code>{</code>\" to the end of <var>result</var>.</p>"
                },
                {
                  "html": "<p>Append the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#escape-a-pattern-string\" id=\"ref-for-escape-a-pattern-string①\">escape a pattern string</a> given <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-value\" id=\"ref-for-part-value⑦\">value</a> to the end of <var>result</var>.</p>"
                },
                {
                  "html": "<p>Append \"<code>}</code>\" to the end of <var>result</var>.</p>"
                },
                {
                  "html": "<p>Append the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#convert-a-modifier-to-a-string\" id=\"ref-for-convert-a-modifier-to-a-string④\">convert a modifier to a string</a> given <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier\" id=\"ref-for-part-modifier①⑦\">modifier</a> to the end of <var>result</var>.</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#iteration-continue\" id=\"ref-for-iteration-continue②④\">Continue</a>.</p>"
                }
              ]
            },
            {
              "html": "<p>Let <var>custom name</var> be true if <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-name\" id=\"ref-for-part-name⑤\">name</a>[0] is not an <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-digit\" id=\"ref-for-ascii-digit①\">ASCII digit</a>; otherwise false.</p>"
            },
            {
              "html": "<p>Let <var>needs grouping</var> be true if at least one of the following are true, otherwise let it be false:</p>\n        <ul>\n         <li><var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-suffix\" id=\"ref-for-part-suffix①②\">suffix</a> is not the empty string.\n         </li><li><var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-prefix\" id=\"ref-for-part-prefix①③\">prefix</a> is not the empty string and is not <var>options</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#options-prefix-code-point\" id=\"ref-for-options-prefix-code-point⑤\">prefix code point</a>.\n        </li></ul>"
            },
            {
              "html": "If all of the following are true:",
              "rationale": "if",
              "steps": [
                {
                  "html": "If <var>next part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type\" id=\"ref-for-part-type①⓪\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type-fixed-text\" id=\"ref-for-part-type-fixed-text⑥\"><code>fixed-text</code></a>\":",
                  "rationale": "set",
                  "steps": [
                    {
                      "html": "<p>Set <var>needs grouping</var> to true if the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-valid-name-code-point\" id=\"ref-for-is-a-valid-name-code-point①\">is a valid name code point</a> given <var>next part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-value\" id=\"ref-for-part-value⑧\">value</a>'s first <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-point\" id=\"ref-for-code-point①\">code point</a> and the boolean false is true.</p>"
                    }
                  ]
                },
                {
                  "html": "Otherwise:",
                  "rationale": "set",
                  "steps": [
                    {
                      "html": "<p>Set <var>needs grouping</var> to true if <var>next part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-name\" id=\"ref-for-part-name⑥\">name</a>[0] is an <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-digit\" id=\"ref-for-ascii-digit②\">ASCII digit</a>.</p>"
                    }
                  ]
                }
              ]
            },
            {
              "html": "<p>If all of the following are true:</p>\n        <ul>\n         <li><var>needs grouping</var> is false; and\n         </li><li><var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-prefix\" id=\"ref-for-part-prefix①⑤\">prefix</a> is the empty string; and\n         </li><li><var>previous part</var> is not null; and\n         </li><li><var>previous part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type\" id=\"ref-for-part-type①①\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type-fixed-text\" id=\"ref-for-part-type-fixed-text⑦\"><code>fixed-text</code></a>\"; and\n         </li><li><var>previous part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-value\" id=\"ref-for-part-value⑨\">value</a>'s last <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-point\" id=\"ref-for-code-point②\">code point</a> is <var>options</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#options-prefix-code-point\" id=\"ref-for-options-prefix-code-point⑥\">prefix code point</a>.\n        </li></ul>\n         then set <var>needs grouping</var> to true."
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①③\">Assert</a>: <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-name\" id=\"ref-for-part-name⑦\">name</a> is not the empty string or null.</p>"
            },
            {
              "html": "<p>If <var>needs grouping</var> is true, then append \"<code>{</code>\" to the end of <var>result</var>.</p>"
            },
            {
              "html": "<p>Append the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#escape-a-pattern-string\" id=\"ref-for-escape-a-pattern-string②\">escape a pattern string</a> given <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-prefix\" id=\"ref-for-part-prefix①⑥\">prefix</a> to the end of <var>result</var>.</p>"
            },
            {
              "html": "If <var>custom name</var> is true:",
              "rationale": "append",
              "steps": [
                {
                  "html": "<p>Append \"<code>:</code>\" to the end of <var>result</var>.</p>"
                },
                {
                  "html": "<p>Append <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-name\" id=\"ref-for-part-name⑧\">name</a> to the end of <var>result</var>.</p>"
                }
              ]
            },
            {
              "html": "If <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type\" id=\"ref-for-part-type①②\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type-regexp\" id=\"ref-for-part-type-regexp③\"><code>regexp</code></a>\" then:",
              "rationale": "append",
              "steps": [
                {
                  "html": "<p>Append \"<code>(</code>\" to the end of <var>result</var>.</p>"
                },
                {
                  "html": "<p>Append <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-value\" id=\"ref-for-part-value①⓪\">value</a> to the end of <var>result</var>.</p>"
                },
                {
                  "html": "<p>Append \"<code>)</code>\" to the end of <var>result</var>.</p>"
                }
              ]
            },
            {
              "html": "Otherwise if <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type\" id=\"ref-for-part-type①③\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type-segment-wildcard\" id=\"ref-for-part-type-segment-wildcard③\"><code>segment-wildcard</code></a>\" and <var>custom name</var> is false:",
              "rationale": "append",
              "steps": [
                {
                  "html": "<p>Append \"<code>(</code>\" to the end of <var>result</var>.</p>"
                },
                {
                  "html": "<p>Append the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#generate-a-segment-wildcard-regexp\" id=\"ref-for-generate-a-segment-wildcard-regexp②\">generate a segment wildcard regexp</a> given <var>options</var> to the end of <var>result</var>.</p>"
                },
                {
                  "html": "<p>Append \"<code>)</code>\" to the end of <var>result</var>.</p>"
                }
              ]
            },
            {
              "html": "Otherwise if <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type\" id=\"ref-for-part-type①④\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type-full-wildcard\" id=\"ref-for-part-type-full-wildcard②\"><code>full-wildcard</code></a>\":",
              "rationale": "if",
              "steps": [
                {
                  "html": "<p>If <var>custom name</var> is false and one of the following is true:</p>\n          <ul>\n           <li><var>previous part</var> is null; or\n           </li><li><var>previous part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type\" id=\"ref-for-part-type①⑤\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type-fixed-text\" id=\"ref-for-part-type-fixed-text⑧\"><code>fixed-text</code></a>\"; or\n           </li><li><var>previous part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier\" id=\"ref-for-part-modifier①⑨\">modifier</a> is not \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier-none\" id=\"ref-for-part-modifier-none⑧\"><code>none</code></a>\"; or\n           </li><li><var>needs grouping</var> is true; or\n           </li><li><var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-prefix\" id=\"ref-for-part-prefix①⑦\">prefix</a> is not the empty string\n          </li></ul>\n           then append \"<code>*</code>\" to the end of <var>result</var>."
                },
                {
                  "html": "Otherwise:",
                  "rationale": "append",
                  "steps": [
                    {
                      "html": "<p>Append \"<code>(</code>\" to the end of <var>result</var>.</p>"
                    },
                    {
                      "html": "<p>Append <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#full-wildcard-regexp-value\" id=\"ref-for-full-wildcard-regexp-value③\">full wildcard regexp value</a> to the end of <var>result</var>.</p>"
                    },
                    {
                      "html": "<p>Append \"<code>)</code>\" to the end of <var>result</var>.</p>"
                    }
                  ]
                }
              ]
            },
            {
              "html": "<p>If all of the following are true:</p>\n        <ul>\n         <li><var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type\" id=\"ref-for-part-type①⑥\">type</a> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-type-segment-wildcard\" id=\"ref-for-part-type-segment-wildcard④\"><code>segment-wildcard</code></a>\"; and\n         </li><li><var>custom name</var> is true; and\n         </li><li><var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-suffix\" id=\"ref-for-part-suffix①④\">suffix</a> is not the empty string; and\n         </li><li>The result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#is-a-valid-name-code-point\" id=\"ref-for-is-a-valid-name-code-point②\">is a valid name code point</a> given <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-suffix\" id=\"ref-for-part-suffix①⑤\">suffix</a>'s first <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-point\" id=\"ref-for-code-point③\">code point</a> and the boolean false is true\n        </li></ul>\n         then append U+005C (<code>\\</code>) to the end of <var>result</var>."
            },
            {
              "html": "<p>Append the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#escape-a-pattern-string\" id=\"ref-for-escape-a-pattern-string③\">escape a pattern string</a> given <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-suffix\" id=\"ref-for-part-suffix①⑥\">suffix</a> to the end of <var>result</var>.</p>"
            },
            {
              "html": "<p>If <var>needs grouping</var> is true, then append \"<code>}</code>\" to the end of <var>result</var>.</p>"
            },
            {
              "html": "<p>Append the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#convert-a-modifier-to-a-string\" id=\"ref-for-convert-a-modifier-to-a-string⑤\">convert a modifier to a string</a> given <var>part</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier\" id=\"ref-for-part-modifier②⓪\">modifier</a> to the end of <var>result</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>result</var>.</p>"
        }
      ]
    },
    {
      "name": "escape a pattern string",
      "href": "https://urlpattern.spec.whatwg.org/#escape-a-pattern-string",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"escape-a-pattern-string\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">escape a pattern string</dfn> given a string <var>input</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①④\">Assert</a>: <var>input</var> is an <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-string\" id=\"ref-for-ascii-string①\">ASCII string</a>.</p>"
        },
        {
          "html": "<p>Let <var>result</var> be the empty string.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be 0.</p>"
        },
        {
          "html": "While <var>index</var> is less than <var>input</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string-length\" id=\"ref-for-string-length①\">length</a>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>c</var> be <var>input</var>[<var>index</var>].</p>"
            },
            {
              "html": "<p>Increment <var>index</var> by 1.</p>"
            },
            {
              "html": "<p>If <var>c</var> is one of:</p>\n        <ul>\n         <li>U+002B (<code>+</code>);\n         </li><li>U+002A (<code>*</code>);\n         </li><li>U+003F (<code>?</code>);\n         </li><li>U+003A (<code>:</code>);\n         </li><li>U+007B (<code>{</code>);\n         </li><li>U+007D (<code>}</code>);\n         </li><li>U+0028 (<code>(</code>);\n         </li><li>U+0029 (<code>)</code>); or\n         </li><li>U+005C (<code>\\</code>),\n        </li></ul>\n        <p>then append U+005C (<code>\\</code>) to the end of <var>result</var>. </p>"
            },
            {
              "html": "<p>Append <var>c</var> to the end of <var>result</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>result</var>.</p>"
        }
      ]
    },
    {
      "name": "convert a modifier to a string",
      "href": "https://urlpattern.spec.whatwg.org/#convert-a-modifier-to-a-string",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"convert-a-modifier-to-a-string\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">convert a modifier to a string</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier\" id=\"ref-for-part-modifier②①\">modifier</a> <var>modifier</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>modifier</var> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier-zero-or-more\" id=\"ref-for-part-modifier-zero-or-more③\"><code>zero-or-more</code></a>\", then return \"<code>*</code>\".</p>"
        },
        {
          "html": "<p>If <var>modifier</var> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier-optional\" id=\"ref-for-part-modifier-optional④\"><code>optional</code></a>\", then return \"<code>?</code>\".</p>"
        },
        {
          "html": "<p>If <var>modifier</var> is \"<a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#part-modifier-one-or-more\" id=\"ref-for-part-modifier-one-or-more②\"><code>one-or-more</code></a>\", then return \"<code>+</code>\".</p>"
        },
        {
          "html": "<p>Return the empty string.</p>"
        }
      ]
    },
    {
      "name": "canonicalize a protocol",
      "href": "https://urlpattern.spec.whatwg.org/#canonicalize-a-protocol",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"canonicalize-a-protocol\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">canonicalize a protocol</dfn> given a string <var>value</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>value</var> is the empty string, return <var>value</var>.</p>"
        },
        {
          "html": "<p>Let <var>dummyURL</var> be a new <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url③\">URL record</a>.</p>"
        },
        {
          "html": "<p>Let <var>parseResult</var> be the result of running the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-basic-url-parser\" id=\"ref-for-concept-basic-url-parser④\">basic URL parser</a> given <var>value</var> followed by \"<code>://dummy.test</code>\", with <var>dummyURL</var> as <i><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-url\" id=\"ref-for-basic-url-parser-url\">url</a></i>.</p>"
        },
        {
          "html": "<p>If <var>parseResult</var> is failure, then throw a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror⑦\">TypeError</a></code>.</p>"
        },
        {
          "html": "<p>Return <var>dummyURL</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme①\">scheme</a>.</p>"
        }
      ]
    },
    {
      "name": "canonicalize a username",
      "href": "https://urlpattern.spec.whatwg.org/#canonicalize-a-username",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"canonicalize-a-username\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">canonicalize a username</dfn> given a string <var>value</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>value</var> is the empty string, return <var>value</var>.</p>"
        },
        {
          "html": "<p>Let <var>dummyURL</var> be a new <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url④\">URL record</a>.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#set-the-username\" id=\"ref-for-set-the-username\">Set the username</a> given <var>dummyURL</var> and <var>value</var>.</p>"
        },
        {
          "html": "<p>Return <var>dummyURL</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-username\" id=\"ref-for-concept-url-username①\">username</a>.</p>"
        }
      ]
    },
    {
      "name": "canonicalize a password",
      "href": "https://urlpattern.spec.whatwg.org/#canonicalize-a-password",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"canonicalize-a-password\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">canonicalize a password</dfn> given a string <var>value</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>value</var> is the empty string, return <var>value</var>.</p>"
        },
        {
          "html": "<p>Let <var>dummyURL</var> be a new <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url⑤\">URL record</a>.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#set-the-password\" id=\"ref-for-set-the-password\">Set the password</a> given <var>dummyURL</var> and <var>value</var>.</p>"
        },
        {
          "html": "<p>Return <var>dummyURL</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-password\" id=\"ref-for-concept-url-password①\">password</a>.</p>"
        }
      ]
    },
    {
      "name": "canonicalize a hostname",
      "href": "https://urlpattern.spec.whatwg.org/#canonicalize-a-hostname",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"canonicalize-a-hostname\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">canonicalize a hostname</dfn> given a string <var>value</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>value</var> is the empty string, return <var>value</var>.</p>"
        },
        {
          "html": "<p>Let <var>dummyURL</var> be a new <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url⑥\">URL record</a>.</p>"
        },
        {
          "html": "<p>Let <var>parseResult</var> be the result of running the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-basic-url-parser\" id=\"ref-for-concept-basic-url-parser⑤\">basic URL parser</a> given <var>value</var> with <var>dummyURL</var> as <i><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-url\" id=\"ref-for-basic-url-parser-url①\">url</a></i> and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#hostname-state\" id=\"ref-for-hostname-state\">hostname state</a> as <i><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-state-override\" id=\"ref-for-basic-url-parser-state-override①\">state override</a></i>.</p>"
        },
        {
          "html": "<p>If <var>parseResult</var> is failure, then throw a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror⑧\">TypeError</a></code>.</p>"
        },
        {
          "html": "<p>Return <var>dummyURL</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host①\">host</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-host-serializer\" id=\"ref-for-concept-host-serializer①\">serialized</a>, or empty string if it is null.</p>"
        }
      ]
    },
    {
      "name": "canonicalize an IPv6 hostname",
      "href": "https://urlpattern.spec.whatwg.org/#canonicalize-an-ipv6-hostname",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"canonicalize-an-ipv6-hostname\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">canonicalize an IPv6 hostname</dfn> given a string <var>value</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>result</var> be the empty string.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate⑥\">For each</a> <var>code point</var> in <var>value</var> interpreted as a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list①⓪\">list</a> of <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-point\" id=\"ref-for-code-point④\">code points</a>:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If all of the following are true:</p>\n        <ul>\n         <li><var>code point</var> is not an <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-hex-digit\" id=\"ref-for-ascii-hex-digit\">ASCII hex digit</a>;\n         </li><li><var>code point</var> is not U+005B (<code>[</code>);\n         </li><li><var>code point</var> is not U+005D (<code>]</code>); and\n         </li><li><var>code point</var> is not U+003A (<code>:</code>),\n        </li></ul>\n        <p>then throw a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror⑨\">TypeError</a></code>. </p>"
            },
            {
              "html": "<p>Append the result of running <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ascii-lowercase\" id=\"ref-for-ascii-lowercase\">ASCII lowercase</a> given <var>code point</var> to the end of <var>result</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>result</var>.</p>"
        }
      ]
    },
    {
      "name": "canonicalize a port",
      "href": "https://urlpattern.spec.whatwg.org/#canonicalize-a-port",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"canonicalize-a-port\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">canonicalize a port</dfn> given a string <var>portValue</var> and optionally a string <var>protocolValue</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>portValue</var> is the empty string, return <var>portValue</var>.</p>"
        },
        {
          "html": "<p>Let <var>dummyURL</var> be a new <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url⑦\">URL record</a>.</p>"
        },
        {
          "html": "<p>If <var>protocolValue</var> was given, then set <var>dummyURL</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme②\">scheme</a> to <var>protocolValue</var>.</p>"
        },
        {
          "html": "<p>Let <var>parseResult</var> be the result of running <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-basic-url-parser\" id=\"ref-for-concept-basic-url-parser⑦\">basic URL parser</a> given <var>portValue</var> with <var>dummyURL</var> as <i><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-url\" id=\"ref-for-basic-url-parser-url②\">url</a></i> and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#port-state\" id=\"ref-for-port-state\">port state</a> as <i><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-state-override\" id=\"ref-for-basic-url-parser-state-override②\">state override</a></i>.</p>"
        },
        {
          "html": "<p>If <var>parseResult</var> is failure, then throw a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror①⓪\">TypeError</a></code>.</p>"
        },
        {
          "html": "<p>Return <var>dummyURL</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port①\">port</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#serialize-an-integer\" id=\"ref-for-serialize-an-integer②\">serialized</a>, or empty string if it is null.</p>"
        }
      ]
    },
    {
      "name": "canonicalize a pathname",
      "href": "https://urlpattern.spec.whatwg.org/#canonicalize-a-pathname",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"canonicalize-a-pathname\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">canonicalize a pathname</dfn> given a string <var>value</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>value</var> is the empty string, then return <var>value</var>.</p>"
        },
        {
          "html": "<p>Let <var>leading slash</var> be true if the first <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-point\" id=\"ref-for-code-point⑤\">code point</a> in <var>value</var> is U+002F (<code>/</code>) and otherwise false.</p>"
        },
        {
          "html": "<p>Let <var>modified value</var> be \"<code>/-</code>\" if <var>leading slash</var> is false and otherwise the empty string.</p>"
        },
        {
          "html": "<p>Append <var>value</var> to the end of <var>modified value</var>.</p>"
        },
        {
          "html": "<p>Let <var>dummyURL</var> be a new <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url⑨\">URL record</a>.</p>"
        },
        {
          "html": "<p>Let <var>parseResult</var> be the result of running <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-basic-url-parser\" id=\"ref-for-concept-basic-url-parser⑧\">basic URL parser</a> given <var>modified value</var> with <var>dummyURL</var> as <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-url\" id=\"ref-for-basic-url-parser-url③\">url</a> and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#path-start-state\" id=\"ref-for-path-start-state\">path start state</a> as <i><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-state-override\" id=\"ref-for-basic-url-parser-state-override③\">state override</a></i>.</p>"
        },
        {
          "html": "<p>If <var>parseResult</var> is failure, then throw a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror①①\">TypeError</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>result</var> be the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-path-serializer\" id=\"ref-for-url-path-serializer①\">URL path serializing</a> <var>dummyURL</var>.</p>"
        },
        {
          "html": "<p>If <var>leading slash</var> is false, then set <var>result</var> to the <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-point-substring-to-the-end-of-the-string\" id=\"ref-for-code-point-substring-to-the-end-of-the-string\">code point substring</a> from 2 to the end of the string within <var>result</var>.</p>"
        },
        {
          "html": "<p>Return <var>result</var>.</p>"
        }
      ]
    },
    {
      "name": "canonicalize an opaque pathname",
      "href": "https://urlpattern.spec.whatwg.org/#canonicalize-an-opaque-pathname",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"canonicalize-an-opaque-pathname\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">canonicalize an opaque pathname</dfn> given a string <var>value</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>value</var> is the empty string, return <var>value</var>.</p>"
        },
        {
          "html": "<p>Let <var>dummyURL</var> be a new <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url①⓪\">URL record</a>.</p>"
        },
        {
          "html": "<p>Set <var>dummyURL</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-path\" id=\"ref-for-concept-url-path\">path</a> to the empty string.</p>"
        },
        {
          "html": "<p>Let <var>parseResult</var> be the result of running <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-basic-url-parser\" id=\"ref-for-concept-basic-url-parser⑨\">URL parsing</a> given <var>value</var> with <var>dummyURL</var> as <i><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-url\" id=\"ref-for-basic-url-parser-url④\">url</a></i> and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#cannot-be-a-base-url-path-state\" id=\"ref-for-cannot-be-a-base-url-path-state\">opaque path state</a> as <i><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-state-override\" id=\"ref-for-basic-url-parser-state-override④\">state override</a></i>.</p>"
        },
        {
          "html": "<p>If <var>parseResult</var> is failure, then throw a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror①②\">TypeError</a></code>.</p>"
        },
        {
          "html": "<p>Return the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-path-serializer\" id=\"ref-for-url-path-serializer②\">URL path serializing</a> <var>dummyURL</var>.</p>"
        }
      ]
    },
    {
      "name": "canonicalize a search",
      "href": "https://urlpattern.spec.whatwg.org/#canonicalize-a-search",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"canonicalize-a-search\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">canonicalize a search</dfn> given a string <var>value</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>value</var> is the empty string, return <var>value</var>.</p>"
        },
        {
          "html": "<p>Let <var>dummyURL</var> be a new <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url①①\">URL record</a>.</p>"
        },
        {
          "html": "<p>Set <var>dummyURL</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query①\">query</a> to the empty string.</p>"
        },
        {
          "html": "<p>Let <var>parseResult</var> be the result of running <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-basic-url-parser\" id=\"ref-for-concept-basic-url-parser①⓪\">basic URL parser</a> given <var>value</var> with <var>dummyURL</var> as <i><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-url\" id=\"ref-for-basic-url-parser-url⑤\">url</a></i> and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#query-state\" id=\"ref-for-query-state\">query state</a> as <i><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-state-override\" id=\"ref-for-basic-url-parser-state-override⑤\">state override</a></i>.</p>"
        },
        {
          "html": "<p>If <var>parseResult</var> is failure, then throw a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror①③\">TypeError</a></code>.</p>"
        },
        {
          "html": "<p>Return <var>dummyURL</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query②\">query</a>.</p>"
        }
      ]
    },
    {
      "name": "canonicalize a hash",
      "href": "https://urlpattern.spec.whatwg.org/#canonicalize-a-hash",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"canonicalize-a-hash\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">canonicalize a hash</dfn> given a string <var>value</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>value</var> is the empty string, return <var>value</var>.</p>"
        },
        {
          "html": "<p>Let <var>dummyURL</var> be a new <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url①②\">URL record</a>.</p>"
        },
        {
          "html": "<p>Set <var>dummyURL</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-fragment\" id=\"ref-for-concept-url-fragment①\">fragment</a> to the empty string.</p>"
        },
        {
          "html": "<p>Let <var>parseResult</var> be the result of running <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-basic-url-parser\" id=\"ref-for-concept-basic-url-parser①①\">basic URL parser</a> given <var>value</var> with <var>dummyURL</var> as <i><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-url\" id=\"ref-for-basic-url-parser-url⑥\">url</a></i> and <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#fragment-state\" id=\"ref-for-fragment-state\">fragment state</a> as <i><a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#basic-url-parser-state-override\" id=\"ref-for-basic-url-parser-state-override⑥\">state override</a></i>.</p>"
        },
        {
          "html": "<p>If <var>parseResult</var> is failure, then throw a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror①④\">TypeError</a></code>.</p>"
        },
        {
          "html": "<p>Return <var>dummyURL</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-fragment\" id=\"ref-for-concept-url-fragment②\">fragment</a>.</p>"
        }
      ]
    },
    {
      "name": "process a URLPatternInit",
      "href": "https://urlpattern.spec.whatwg.org/#process-a-urlpatterninit",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"process-a-urlpatterninit\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">process a URLPatternInit</dfn> given a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dictdef-urlpatterninit\" id=\"ref-for-dictdef-urlpatterninit⑦\">URLPatternInit</a></code> <var>init</var>, a string <var>type</var>, a string or null <var>protocol</var>, a string or null <var>username</var>, a string or null <var>password</var>, a string or null <var>hostname</var>, a string or null <var>port</var>, a string or null <var>pathname</var>, a string or null <var>search</var>, and a string or null <var>hash</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>result</var> be the result of creating a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dictdef-urlpatterninit\" id=\"ref-for-dictdef-urlpatterninit⑧\">URLPatternInit</a></code>.</p>"
        },
        {
          "html": "<p>If <var>protocol</var> is not null, <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-set\" id=\"ref-for-map-set②\">set</a> <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-protocol\" id=\"ref-for-dom-urlpatterninit-protocol⑤\">protocol</a></code>\"] to <var>protocol</var>.</p>"
        },
        {
          "html": "<p>If <var>username</var> is not null, <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-set\" id=\"ref-for-map-set③\">set</a> <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-username\" id=\"ref-for-dom-urlpatterninit-username③\">username</a></code>\"] to <var>username</var>.</p>"
        },
        {
          "html": "<p>If <var>password</var> is not null, <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-set\" id=\"ref-for-map-set④\">set</a> <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-password\" id=\"ref-for-dom-urlpatterninit-password③\">password</a></code>\"] to <var>password</var>.</p>"
        },
        {
          "html": "<p>If <var>hostname</var> is not null, <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-set\" id=\"ref-for-map-set⑤\">set</a> <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hostname\" id=\"ref-for-dom-urlpatterninit-hostname⑧\">hostname</a></code>\"] to <var>hostname</var>.</p>"
        },
        {
          "html": "<p>If <var>port</var> is not null, <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-set\" id=\"ref-for-map-set⑥\">set</a> <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-port\" id=\"ref-for-dom-urlpatterninit-port⑦\">port</a></code>\"] to <var>port</var>.</p>"
        },
        {
          "html": "<p>If <var>pathname</var> is not null, <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-set\" id=\"ref-for-map-set⑦\">set</a> <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-pathname\" id=\"ref-for-dom-urlpatterninit-pathname⑦\">pathname</a></code>\"] to <var>pathname</var>.</p>"
        },
        {
          "html": "<p>If <var>search</var> is not null, <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-set\" id=\"ref-for-map-set⑧\">set</a> <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-search\" id=\"ref-for-dom-urlpatterninit-search⑤\">search</a></code>\"] to <var>search</var>.</p>"
        },
        {
          "html": "<p>If <var>hash</var> is not null, <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-set\" id=\"ref-for-map-set⑨\">set</a> <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hash\" id=\"ref-for-dom-urlpatterninit-hash③\">hash</a></code>\"] to <var>hash</var>.</p>"
        },
        {
          "html": "<p>Let <var>baseURL</var> be null.</p>"
        },
        {
          "html": "If <var>init</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-baseurl\" id=\"ref-for-dom-urlpatterninit-baseurl③\">baseURL</a></code>\"] <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists⑥\">exists</a>:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>baseURL</var> to the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-parser\" id=\"ref-for-concept-url-parser②\">parsing</a> <var>init</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-baseurl\" id=\"ref-for-dom-urlpatterninit-baseurl④\">baseURL</a></code>\"].</p>"
            },
            {
              "html": "<p>If <var>baseURL</var> is failure, then throw a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror①⑤\">TypeError</a></code>.</p>"
            },
            {
              "html": "<p>If <var>init</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-protocol\" id=\"ref-for-dom-urlpatterninit-protocol⑥\">protocol</a></code>\"] does not <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists⑦\">exist</a>, then set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-protocol\" id=\"ref-for-dom-urlpatterninit-protocol⑦\">protocol</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-a-base-url-string\" id=\"ref-for-process-a-base-url-string\">processing a base URL string</a> given <var>baseURL</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\" id=\"ref-for-concept-url-scheme④\">scheme</a> and <var>type</var>.</p>"
            },
            {
              "html": "<p>If <var>type</var> is not \"<code>pattern</code>\" and <var>init</var> <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists⑧\">contains</a> none of \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-protocol\" id=\"ref-for-dom-urlpatterninit-protocol⑧\">protocol</a></code>\", \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hostname\" id=\"ref-for-dom-urlpatterninit-hostname⑨\">hostname</a></code>\", \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-port\" id=\"ref-for-dom-urlpatterninit-port⑧\">port</a></code>\" and \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-username\" id=\"ref-for-dom-urlpatterninit-username④\">username</a></code>\", then set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-username\" id=\"ref-for-dom-urlpatterninit-username⑤\">username</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-a-base-url-string\" id=\"ref-for-process-a-base-url-string①\">processing a base URL string</a> given <var>baseURL</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-username\" id=\"ref-for-concept-url-username②\">username</a> and <var>type</var>.</p>"
            },
            {
              "html": "<p>If <var>type</var> is not \"<code>pattern</code>\" and <var>init</var> <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists⑨\">contains</a> none of \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-protocol\" id=\"ref-for-dom-urlpatterninit-protocol⑨\">protocol</a></code>\", \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hostname\" id=\"ref-for-dom-urlpatterninit-hostname①⓪\">hostname</a></code>\", \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-port\" id=\"ref-for-dom-urlpatterninit-port⑨\">port</a></code>\", \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-username\" id=\"ref-for-dom-urlpatterninit-username⑥\">username</a></code>\" and \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-password\" id=\"ref-for-dom-urlpatterninit-password④\">password</a></code>\", then set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-password\" id=\"ref-for-dom-urlpatterninit-password⑤\">password</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-a-base-url-string\" id=\"ref-for-process-a-base-url-string②\">processing a base URL string</a> given <var>baseURL</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-password\" id=\"ref-for-concept-url-password②\">password</a> and <var>type</var>.</p>"
            },
            {
              "html": "If <var>init</var> <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists①⓪\">contains</a> neither \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-protocol\" id=\"ref-for-dom-urlpatterninit-protocol①⓪\">protocol</a></code>\" nor \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hostname\" id=\"ref-for-dom-urlpatterninit-hostname①①\">hostname</a></code>\", then:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>baseHost</var> be <var>baseURL</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-host\" id=\"ref-for-concept-url-host②\">host</a>.</p>"
                },
                {
                  "html": "<p>If <var>baseHost</var> is null, then set <var>baseHost</var> to the empty string.</p>"
                },
                {
                  "html": "<p>Set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hostname\" id=\"ref-for-dom-urlpatterninit-hostname①②\">hostname</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-a-base-url-string\" id=\"ref-for-process-a-base-url-string③\">processing a base URL string</a> given <var>baseHost</var> and <var>type</var>.</p>"
                }
              ]
            },
            {
              "html": "If <var>init</var> <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists①①\">contains</a> none of \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-protocol\" id=\"ref-for-dom-urlpatterninit-protocol①①\">protocol</a></code>\", \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hostname\" id=\"ref-for-dom-urlpatterninit-hostname①③\">hostname</a></code>\", and \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-port\" id=\"ref-for-dom-urlpatterninit-port①⓪\">port</a></code>\", then:",
              "rationale": "if",
              "steps": [
                {
                  "html": "<p>If <var>baseURL</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port②\">port</a> is null, then set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-port\" id=\"ref-for-dom-urlpatterninit-port①①\">port</a></code>\"] to the empty string.</p>"
                },
                {
                  "html": "<p>Otherwise, set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-port\" id=\"ref-for-dom-urlpatterninit-port①②\">port</a></code>\"] to <var>baseURL</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-port\" id=\"ref-for-concept-url-port③\">port</a>, <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#serialize-an-integer\" id=\"ref-for-serialize-an-integer③\">serialized</a>.</p>"
                }
              ]
            },
            {
              "html": "<p>If <var>init</var> <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists①②\">contains</a> none of \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-protocol\" id=\"ref-for-dom-urlpatterninit-protocol①②\">protocol</a></code>\", \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hostname\" id=\"ref-for-dom-urlpatterninit-hostname①④\">hostname</a></code>\", \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-port\" id=\"ref-for-dom-urlpatterninit-port①③\">port</a></code>\", and \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-pathname\" id=\"ref-for-dom-urlpatterninit-pathname⑧\">pathname</a></code>\", then set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-pathname\" id=\"ref-for-dom-urlpatterninit-pathname⑨\">pathname</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-a-base-url-string\" id=\"ref-for-process-a-base-url-string④\">processing a base URL string</a> given the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-path-serializer\" id=\"ref-for-url-path-serializer③\">URL path serializing</a> <var>baseURL</var> and <var>type</var>.</p>"
            },
            {
              "html": "If <var>init</var> <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists①③\">contains</a> none of \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-protocol\" id=\"ref-for-dom-urlpatterninit-protocol①③\">protocol</a></code>\", \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hostname\" id=\"ref-for-dom-urlpatterninit-hostname①⑤\">hostname</a></code>\", \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-port\" id=\"ref-for-dom-urlpatterninit-port①④\">port</a></code>\", \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-pathname\" id=\"ref-for-dom-urlpatterninit-pathname①⓪\">pathname</a></code>\", and \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-search\" id=\"ref-for-dom-urlpatterninit-search⑥\">search</a></code>\", then:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>baseQuery</var> be <var>baseURL</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-query\" id=\"ref-for-concept-url-query③\">query</a>.</p>"
                },
                {
                  "html": "<p>If <var>baseQuery</var> is null, then set <var>baseQuery</var> to the empty string.</p>"
                },
                {
                  "html": "<p>Set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-search\" id=\"ref-for-dom-urlpatterninit-search⑦\">search</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-a-base-url-string\" id=\"ref-for-process-a-base-url-string⑤\">processing a base URL string</a> given <var>baseQuery</var> and <var>type</var>.</p>"
                }
              ]
            },
            {
              "html": "If <var>init</var> <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists①④\">contains</a> none of \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-protocol\" id=\"ref-for-dom-urlpatterninit-protocol①④\">protocol</a></code>\", \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hostname\" id=\"ref-for-dom-urlpatterninit-hostname①⑥\">hostname</a></code>\", \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-port\" id=\"ref-for-dom-urlpatterninit-port①⑤\">port</a></code>\", \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-pathname\" id=\"ref-for-dom-urlpatterninit-pathname①①\">pathname</a></code>\", \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-search\" id=\"ref-for-dom-urlpatterninit-search⑧\">search</a></code>\", and \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hash\" id=\"ref-for-dom-urlpatterninit-hash④\">hash</a></code>\", then:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>baseFragment</var> be <var>baseURL</var>’s <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-fragment\" id=\"ref-for-concept-url-fragment③\">fragment</a>.</p>"
                },
                {
                  "html": "<p>If <var>baseFragment</var> is null, then set <var>baseFragment</var> to the empty string.</p>"
                },
                {
                  "html": "<p>Set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hash\" id=\"ref-for-dom-urlpatterninit-hash⑤\">hash</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-a-base-url-string\" id=\"ref-for-process-a-base-url-string⑥\">processing a base URL string</a> given <var>baseFragment</var> and <var>type</var>.</p>"
                }
              ]
            }
          ]
        },
        {
          "html": "<p>If <var>init</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-protocol\" id=\"ref-for-dom-urlpatterninit-protocol①⑤\">protocol</a></code>\"] <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists①⑤\">exists</a>, then set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-protocol\" id=\"ref-for-dom-urlpatterninit-protocol①⑥\">protocol</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-protocol-for-init\" id=\"ref-for-process-protocol-for-init\">process protocol for init</a> given <var>init</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-protocol\" id=\"ref-for-dom-urlpatterninit-protocol①⑦\">protocol</a></code>\"] and <var>type</var>.</p>"
        },
        {
          "html": "<p>If <var>init</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-username\" id=\"ref-for-dom-urlpatterninit-username⑦\">username</a></code>\"] <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists①⑥\">exists</a>, then set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-username\" id=\"ref-for-dom-urlpatterninit-username⑧\">username</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-username-for-init\" id=\"ref-for-process-username-for-init\">process username for init</a> given <var>init</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-username\" id=\"ref-for-dom-urlpatterninit-username⑨\">username</a></code>\"] and <var>type</var>.</p>"
        },
        {
          "html": "<p>If <var>init</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-password\" id=\"ref-for-dom-urlpatterninit-password⑥\">password</a></code>\"] <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists①⑦\">exists</a>, then set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-password\" id=\"ref-for-dom-urlpatterninit-password⑦\">password</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-password-for-init\" id=\"ref-for-process-password-for-init\">process password for init</a> given <var>init</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-password\" id=\"ref-for-dom-urlpatterninit-password⑧\">password</a></code>\"] and <var>type</var>.</p>"
        },
        {
          "html": "<p>If <var>init</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hostname\" id=\"ref-for-dom-urlpatterninit-hostname①⑦\">hostname</a></code>\"] <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists①⑧\">exists</a>, then set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hostname\" id=\"ref-for-dom-urlpatterninit-hostname①⑧\">hostname</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-hostname-for-init\" id=\"ref-for-process-hostname-for-init\">process hostname for init</a> given <var>init</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hostname\" id=\"ref-for-dom-urlpatterninit-hostname①⑨\">hostname</a></code>\"] and <var>type</var>.</p>"
        },
        {
          "html": "<p>If <var>init</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-port\" id=\"ref-for-dom-urlpatterninit-port①⑥\">port</a></code>\"] <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists①⑨\">exists</a>, then set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-port\" id=\"ref-for-dom-urlpatterninit-port①⑦\">port</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-port-for-init\" id=\"ref-for-process-port-for-init\">process port for init</a> given <var>init</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-port\" id=\"ref-for-dom-urlpatterninit-port①⑧\">port</a></code>\"], <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-protocol\" id=\"ref-for-dom-urlpatterninit-protocol①⑧\">protocol</a></code>\"], and <var>type</var>.</p>"
        },
        {
          "html": "If <var>init</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-pathname\" id=\"ref-for-dom-urlpatterninit-pathname①②\">pathname</a></code>\"] <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists②⓪\">exists</a>:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-pathname\" id=\"ref-for-dom-urlpatterninit-pathname①③\">pathname</a></code>\"] to <var>init</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-pathname\" id=\"ref-for-dom-urlpatterninit-pathname①④\">pathname</a></code>\"].</p>"
            },
            {
              "html": "then:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>baseURLPath</var> be the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-a-base-url-string\" id=\"ref-for-process-a-base-url-string⑦\">process a base URL string</a> given the result of <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#url-path-serializer\" id=\"ref-for-url-path-serializer④\">URL path serializing</a> <var>baseURL</var> and <var>type</var>.</p>"
                },
                {
                  "html": "<p>Let <var>slash index</var> be the index of the last U+002F (<code>/</code>) code point found in <var>baseURLPath</var>, interpreted as a sequence of <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-point\" id=\"ref-for-code-point⑥\">code points</a>, or null if there are no instances of the code point.</p>"
                },
                {
                  "html": "If <var>slash index</var> is not null:",
                  "rationale": "let",
                  "steps": [
                    {
                      "html": "<p>Let <var>new pathname</var> be the <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-point-substring-by-positions\" id=\"ref-for-code-point-substring-by-positions①\">code point substring</a> from 0 to <var>slash index</var> + 1 within <var>baseURLPath</var>.</p>"
                    },
                    {
                      "html": "<p>Append <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-pathname\" id=\"ref-for-dom-urlpatterninit-pathname①⑥\">pathname</a></code>\"] to the end of <var>new pathname</var>.</p>"
                    },
                    {
                      "html": "<p>Set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-pathname\" id=\"ref-for-dom-urlpatterninit-pathname①⑦\">pathname</a></code>\"] to <var>new pathname</var>.</p>"
                    }
                  ]
                }
              ]
            },
            {
              "html": "<p>Set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-pathname\" id=\"ref-for-dom-urlpatterninit-pathname①⑧\">pathname</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-pathname-for-init\" id=\"ref-for-process-pathname-for-init\">process pathname for init</a> given <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-pathname\" id=\"ref-for-dom-urlpatterninit-pathname①⑨\">pathname</a></code>\"], <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-protocol\" id=\"ref-for-dom-urlpatterninit-protocol①⑨\">protocol</a></code>\"], and <var>type</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>If <var>init</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-search\" id=\"ref-for-dom-urlpatterninit-search⑨\">search</a></code>\"] <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists②①\">exists</a> then set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-search\" id=\"ref-for-dom-urlpatterninit-search①⓪\">search</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-search-for-init\" id=\"ref-for-process-search-for-init\">process search for init</a> given <var>init</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-search\" id=\"ref-for-dom-urlpatterninit-search①①\">search</a></code>\"] and <var>type</var>.</p>"
        },
        {
          "html": "<p>If <var>init</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hash\" id=\"ref-for-dom-urlpatterninit-hash⑥\">hash</a></code>\"] <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists②②\">exists</a> then set <var>result</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hash\" id=\"ref-for-dom-urlpatterninit-hash⑦\">hash</a></code>\"] to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#process-hash-for-init\" id=\"ref-for-process-hash-for-init\">process hash for init</a> given <var>init</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-hash\" id=\"ref-for-dom-urlpatterninit-hash⑧\">hash</a></code>\"] and <var>type</var>.</p>"
        },
        {
          "html": "<p>Return <var>result</var>.</p>"
        }
      ]
    },
    {
      "name": "process a base URL string",
      "href": "https://urlpattern.spec.whatwg.org/#process-a-base-url-string",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"process-a-base-url-string\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">process a base URL string</dfn> given a string <var>input</var> and a string <var>type</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①⑤\">Assert</a>: <var>input</var> is not null.</p>"
        },
        {
          "html": "<p>If <var>type</var> is not \"<code>pattern</code>\" return <var>input</var>.</p>"
        },
        {
          "html": "<p>Return the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#escape-a-pattern-string\" id=\"ref-for-escape-a-pattern-string④\">escaping a pattern string</a> given <var>input</var>.</p>"
        }
      ]
    },
    {
      "name": "is an absolute pathname",
      "href": "https://urlpattern.spec.whatwg.org/#is-an-absolute-pathname",
      "html": "To run <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"is-an-absolute-pathname\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">is an absolute pathname</dfn> given a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#pattern-string\" id=\"ref-for-pattern-string①④\">pattern string</a> <var>input</var> and a string <var>type</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>input</var> is the empty string, then return false.</p>"
        },
        {
          "html": "<p>If <var>input</var>[0] is U+002F (<code>/</code>), then return true.</p>"
        },
        {
          "html": "<p>If <var>type</var> is \"<code>url</code>\", then return false.</p>"
        },
        {
          "html": "<p>If <var>input</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string-code-point-length\" id=\"ref-for-string-code-point-length⑦\">code point length</a> is less than 2, then return false.</p>"
        },
        {
          "html": "<p>If <var>input</var>[0] is U+005C (<code>\\</code>) and <var>input</var>[1] is U+002F (<code>/</code>), then return true.</p>"
        },
        {
          "html": "<p>If <var>input</var>[0] is U+007B (<code>{</code>) and <var>input</var>[1] is U+002F (<code>/</code>), then return true.</p>"
        },
        {
          "html": "<p>Return false.</p>"
        }
      ]
    },
    {
      "name": "process protocol for init",
      "href": "https://urlpattern.spec.whatwg.org/#process-protocol-for-init",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"process-protocol-for-init\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">process protocol for init</dfn> given a string <var>value</var> and a string <var>type</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>strippedValue</var> be the given <var>value</var> with a single trailing U+003A (<code>:</code>) removed, if any.</p>"
        },
        {
          "html": "<p>If <var>type</var> is \"<code>pattern</code>\" then return <var>strippedValue</var>.</p>"
        },
        {
          "html": "<p>Return the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#canonicalize-a-protocol\" id=\"ref-for-canonicalize-a-protocol②\">canonicalize a protocol</a> given <var>strippedValue</var>.</p>"
        }
      ]
    },
    {
      "name": "process username for init",
      "href": "https://urlpattern.spec.whatwg.org/#process-username-for-init",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"process-username-for-init\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">process username for init</dfn> given a string <var>value</var> and a string <var>type</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>type</var> is \"<code>pattern</code>\" then return <var>value</var>.</p>"
        },
        {
          "html": "<p>Return the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#canonicalize-a-username\" id=\"ref-for-canonicalize-a-username①\">canonicalize a username</a> given <var>value</var>.</p>"
        }
      ]
    },
    {
      "name": "process password for init",
      "href": "https://urlpattern.spec.whatwg.org/#process-password-for-init",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"process-password-for-init\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">process password for init</dfn> given a string <var>value</var> and a string <var>type</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>type</var> is \"<code>pattern</code>\" then return <var>value</var>.</p>"
        },
        {
          "html": "<p>Return the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#canonicalize-a-password\" id=\"ref-for-canonicalize-a-password①\">canonicalize a password</a> given <var>value</var>.</p>"
        }
      ]
    },
    {
      "name": "process hostname for init",
      "href": "https://urlpattern.spec.whatwg.org/#process-hostname-for-init",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"process-hostname-for-init\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">process hostname for init</dfn> given a string <var>value</var> and a string <var>type</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>type</var> is \"<code>pattern</code>\" then return <var>value</var>.</p>"
        },
        {
          "html": "<p>Return the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#canonicalize-a-hostname\" id=\"ref-for-canonicalize-a-hostname①\">canonicalize a hostname</a> given <var>value</var>.</p>"
        }
      ]
    },
    {
      "name": "process port for init",
      "href": "https://urlpattern.spec.whatwg.org/#process-port-for-init",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"process-port-for-init\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">process port for init</dfn> given a string <var>portValue</var>, a string <var>protocolValue</var>, and a string <var>type</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>type</var> is \"<code>pattern</code>\" then return <var>portValue</var>.</p>"
        },
        {
          "html": "<p>Return the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#canonicalize-a-port\" id=\"ref-for-canonicalize-a-port①\">canonicalize a port</a> given <var>portValue</var> and <var>protocolValue</var>.</p>"
        }
      ]
    },
    {
      "name": "process pathname for init",
      "href": "https://urlpattern.spec.whatwg.org/#process-pathname-for-init",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"process-pathname-for-init\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">process pathname for init</dfn> given a string <var>pathnameValue</var>, a string <var>protocolValue</var>, and a string <var>type</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>type</var> is \"<code>pattern</code>\" then return <var>pathnameValue</var>.</p>"
        },
        {
          "html": "<p>If <var>protocolValue</var> is a <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#special-scheme\" id=\"ref-for-special-scheme③\">special scheme</a> or the empty string, then return the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#canonicalize-a-pathname\" id=\"ref-for-canonicalize-a-pathname①\">canonicalize a pathname</a> given <var>pathnameValue</var>.</p>"
        },
        {
          "html": "<p>Return the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#canonicalize-an-opaque-pathname\" id=\"ref-for-canonicalize-an-opaque-pathname①\">canonicalize an opaque pathname</a> given <var>pathnameValue</var>.</p>"
        }
      ]
    },
    {
      "name": "process search for init",
      "href": "https://urlpattern.spec.whatwg.org/#process-search-for-init",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"process-search-for-init\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">process search for init</dfn> given a string <var>value</var> and a string <var>type</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>strippedValue</var> be the given <var>value</var> with a single leading U+003F (<code>?</code>) removed, if any.</p>"
        },
        {
          "html": "<p>If <var>type</var> is \"<code>pattern</code>\" then return <var>strippedValue</var>.</p>"
        },
        {
          "html": "<p>Return the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#canonicalize-a-search\" id=\"ref-for-canonicalize-a-search①\">canonicalize a search</a> given <var>strippedValue</var>.</p>"
        }
      ]
    },
    {
      "name": "process hash for init",
      "href": "https://urlpattern.spec.whatwg.org/#process-hash-for-init",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"process-hash-for-init\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">process hash for init</dfn> given a string <var>value</var> and a string <var>type</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>strippedValue</var> be the given <var>value</var> with a single leading U+0023 (<code>#</code>) removed, if any.</p>"
        },
        {
          "html": "<p>If <var>type</var> is \"<code>pattern</code>\" then return <var>strippedValue</var>.</p>"
        },
        {
          "html": "<p>Return the result of running <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#canonicalize-a-hash\" id=\"ref-for-canonicalize-a-hash①\">canonicalize a hash</a> given <var>strippedValue</var>.</p>"
        }
      ]
    },
    {
      "name": "build a URLPattern object from a Web IDL value",
      "href": "https://urlpattern.spec.whatwg.org/#build-a-urlpattern-object-from-a-web-idl-value",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-export=\"\" id=\"build-a-urlpattern-object-from-a-web-idl-value\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">build a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#urlpattern\" id=\"ref-for-urlpattern①③\">URLPattern</a></code> object from a Web IDL value</dfn> <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#typedefdef-urlpatterncompatible\" id=\"ref-for-typedefdef-urlpatterncompatible①\">URLPatternCompatible</a></code> <var>input</var> given <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url①③\">URL</a> <var>baseURL</var> and <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#realm\" id=\"ref-for-realm\">realm</a> <var>realm</var>, perform the following steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "If the <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-specific-type\" id=\"ref-for-dfn-specific-type\">specific type</a> of <var>input</var> is <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#urlpattern\" id=\"ref-for-urlpattern①④\">URLPattern</a></code>:",
          "rationale": "return",
          "steps": [
            {
              "html": "<p>Return <var>input</var>.</p>"
            }
          ]
        },
        {
          "html": "Otherwise:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>pattern</var> be a <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#new\" id=\"ref-for-new\">new</a> <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#urlpattern\" id=\"ref-for-urlpattern①⑤\">URLPattern</a></code> with <var>realm</var>.</p>"
            },
            {
              "html": "<p>Set <var>pattern</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#urlpattern-associated-url-pattern\" id=\"ref-for-urlpattern-associated-url-pattern①②\">associated URL pattern</a> to the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#build-a-url-pattern-from-a-web-idl-value\" id=\"ref-for-build-a-url-pattern-from-a-web-idl-value\">building a URL pattern from a Web IDL value</a> given <var>input</var> and <var>baseURL</var>.</p>"
            },
            {
              "html": "<p>Return <var>pattern</var>.</p>"
            }
          ]
        }
      ]
    },
    {
      "name": "build a URL pattern from a Web IDL value",
      "href": "https://urlpattern.spec.whatwg.org/#build-a-url-pattern-from-a-web-idl-value",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-export=\"\" id=\"build-a-url-pattern-from-a-web-idl-value\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">build a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern\" id=\"ref-for-url-pattern⑥\">URL pattern</a> from a Web IDL value</dfn> <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#typedefdef-urlpatterncompatible\" id=\"ref-for-typedefdef-urlpatterncompatible②\">URLPatternCompatible</a></code> <var>input</var> given <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url①④\">URL</a> <var>baseURL</var>, perform the following steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "If the <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-specific-type\" id=\"ref-for-dfn-specific-type①\">specific type</a> of <var>input</var> is <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#urlpattern\" id=\"ref-for-urlpattern①⑥\">URLPattern</a></code>:",
          "rationale": "return",
          "steps": [
            {
              "html": "<p>Return <var>input</var>’s <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#urlpattern-associated-url-pattern\" id=\"ref-for-urlpattern-associated-url-pattern①③\">associated URL pattern</a>.</p>"
            }
          ]
        },
        {
          "html": "Otherwise, if the <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-specific-type\" id=\"ref-for-dfn-specific-type②\">specific type</a> of <var>input</var> is <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dictdef-urlpatterninit\" id=\"ref-for-dictdef-urlpatterninit①⓪\">URLPatternInit</a></code>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>init</var> be a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-clone\" id=\"ref-for-map-clone\">clone</a> of <var>input</var>.</p>"
            },
            {
              "html": "<p>If <var>init</var>[\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-baseurl\" id=\"ref-for-dom-urlpatterninit-baseurl⑤\">baseURL</a></code>\"] does not <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists②③\">exist</a>, set it to the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-serializer\" id=\"ref-for-concept-url-serializer\">serialization</a> of <var>baseURL</var>.</p>"
            },
            {
              "html": "<p>Return the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-create\" id=\"ref-for-url-pattern-create①\">creating</a> a URL pattern given <var>init</var>, null, and an empty <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ordered-map\" id=\"ref-for-ordered-map\">map</a>.</p>"
            }
          ]
        },
        {
          "html": "Otherwise:",
          "rationale": "assert",
          "steps": [
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①⑥\">Assert</a>: The <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-specific-type\" id=\"ref-for-dfn-specific-type③\">specific type</a> of <var>input</var> is <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-USVString\" id=\"ref-for-idl-USVString②⑧\">USVString</a></code>.</p>"
            },
            {
              "html": "<p>Return the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-create\" id=\"ref-for-url-pattern-create②\">creating</a> a URL pattern given <var>input</var>, the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-serializer\" id=\"ref-for-concept-url-serializer①\">serialization</a> of <var>baseURL</var>, and an empty <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ordered-map\" id=\"ref-for-ordered-map①\">map</a>.</p>"
            }
          ]
        }
      ]
    },
    {
      "name": "build a URL pattern from an Infra value",
      "href": "https://urlpattern.spec.whatwg.org/#build-a-url-pattern-from-an-infra-value",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-export=\"\" id=\"build-a-url-pattern-from-an-infra-value\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">build a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern\" id=\"ref-for-url-pattern⑦\">URL pattern</a> from an Infra value</dfn> <var>rawPattern</var> given <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url①⑤\">URL</a> <var>baseURL</var>, perform the following steps.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>serializedBaseURL</var> be the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-serializer\" id=\"ref-for-concept-url-serializer②\">serialization</a> of <var>baseURL</var>.</p>"
        },
        {
          "html": "If <var>rawPattern</var> is a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string\" id=\"ref-for-string\">string</a>, then:",
          "rationale": "return",
          "steps": [
            {
              "html": "<p>Return the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-create\" id=\"ref-for-url-pattern-create③\">creating</a> a URL pattern given <var>rawPattern</var>, <var>serializedBaseURL</var>, and an empty <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ordered-map\" id=\"ref-for-ordered-map②\">map</a>.</p>"
            }
          ]
        },
        {
          "html": "Otherwise, if <var>rawPattern</var> is a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ordered-map\" id=\"ref-for-ordered-map③\">map</a>, then:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>init</var> be «[ \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dom-urlpatterninit-baseurl\" id=\"ref-for-dom-urlpatterninit-baseurl⑥\">baseURL</a></code>\" → <var>serializedBaseURL</var> ]», representing a dictionary of type <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dictdef-urlpatterninit\" id=\"ref-for-dictdef-urlpatterninit①①\">URLPatternInit</a></code>.</p>"
            },
            {
              "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-iterate\" id=\"ref-for-map-iterate\">For each</a> <var>key</var> → <var>value</var> of <var>rawPattern</var>:",
              "rationale": "if",
              "steps": [
                {
                  "html": "<p>If <var>key</var> is not the <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-identifier\" id=\"ref-for-dfn-identifier\">identifier</a> of a <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-dictionary-member\" id=\"ref-for-dfn-dictionary-member①\">dictionary member</a> of <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://urlpattern.spec.whatwg.org/#dictdef-urlpatterninit\" id=\"ref-for-dictdef-urlpatterninit①②\">URLPatternInit</a></code> or one of its <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-inherited-dictionaries\" id=\"ref-for-dfn-inherited-dictionaries\">inherited dictionaries</a>, <var>value</var> is not a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#string\" id=\"ref-for-string①\">string</a>, or the member’s type is not declared to be <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-USVString\" id=\"ref-for-idl-USVString②⑨\">USVString</a></code>, then return null.</p>"
                },
                {
                  "html": "<p>Set <var>init</var>[<var>key</var>] to <var>value</var>.</p>"
                }
              ]
            },
            {
              "html": "<p>Return the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-create\" id=\"ref-for-url-pattern-create④\">creating</a> a URL pattern given <var>init</var>, null, and an empty <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ordered-map\" id=\"ref-for-ordered-map④\">map</a>.</p>"
            }
          ]
        },
        {
          "html": "<p>Otherwise, return null.</p>"
        }
      ]
    },
    {
      "name": "build a URL pattern from an HTTP structured field value",
      "href": "https://urlpattern.spec.whatwg.org/#build-a-url-pattern-from-an-http-structured-field-value",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-export=\"\" id=\"build-a-url-pattern-from-an-http-structured-field-value\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">build a <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern\" id=\"ref-for-url-pattern⑨\">URL pattern</a> from an HTTP structured field value</dfn> <var>rawPattern</var> given <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\" id=\"ref-for-concept-url①⑥\">URL</a> <var>baseURL</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>serializedBaseURL</var> be the <a data-link-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-serializer\" id=\"ref-for-concept-url-serializer③\">serialization</a> of <var>baseURL</var>.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①⑦\">Assert</a>: <var>rawPattern</var> is a <a data-link-type=\"dfn\" href=\"https://httpwg.org/specs/rfc8941.html#string\" id=\"ref-for-string②\">string</a>.</p>"
        },
        {
          "html": "<p>Return the result of <a data-link-type=\"dfn\" href=\"https://urlpattern.spec.whatwg.org/#url-pattern-create\" id=\"ref-for-url-pattern-create⑤\">creating</a> a URL pattern given <var>rawPattern</var>, <var>serializedBaseURL</var>, and an empty <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ordered-map\" id=\"ref-for-ordered-map⑤\">map</a>.</p>"
        }
      ]
    }
  ]
}