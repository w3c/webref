{
  "spec": {
    "title": "CSS Borders and Box Decorations Module Level 4",
    "url": "https://drafts.csswg.org/css-borders-4/"
  },
  "algorithms": [
    {
      "name": "border-radius-outset",
      "href": "https://drafts.csswg.org/css-borders-4/#outset-adjusted-border-radius",
      "html": "To compute the <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-export=\"\" id=\"outset-adjusted-border-radius\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">outset-adjusted border radius</dfn> given the 2-dimensional <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#size\" id=\"ref-for-size\">size</a>’s <var>edge</var>, <var>radius</var>, and <var>outset</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>coverage</var> be <code>2 * min(<var>radius</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#width\" id=\"ref-for-width\">width</a> / <var>edge</var>’s <span id=\"ref-for-width①\">width</span>, <var>radius</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#height\" id=\"ref-for-height\">height</a> / <var>edge</var>’s <span id=\"ref-for-height①\">height</span>)</code>.</p>"
        },
        {
          "html": "<p>Let <var>adustedRadiusWidth</var> be the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#adjusted-radius-dimension\" id=\"ref-for-adjusted-radius-dimension\">adjusted radius dimension</a> given <var>coverage</var>, <var>radius</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#width\" id=\"ref-for-width②\">width</a>, and <var>outset</var>’s <span id=\"ref-for-width③\">width</span>.</p>"
        },
        {
          "html": "<p>Let <var>adustedRadiusHeight</var> be the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#adjusted-radius-dimension\" id=\"ref-for-adjusted-radius-dimension①\">adjusted radius dimension</a> given <var>coverage</var>, <var>radius</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#height\" id=\"ref-for-height②\">height</a>, and <var>outset</var>’s <span id=\"ref-for-height③\">height</span>.</p>"
        },
        {
          "html": "<p>Return (<var>adustedRadiusWidth</var>, <var>adustedRadiusHeight</var>).</p>"
        }
      ]
    },
    {
      "name": "border-radius-outset",
      "href": "https://drafts.csswg.org/css-borders-4/#outset-adjusted-border-radius",
      "html": "To compute the <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-export=\"\" id=\"outset-adjusted-border-radius\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">outset-adjusted border radius</dfn> given the 2-dimensional <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#size\" id=\"ref-for-size\">size</a>’s <var>edge</var>, <var>radius</var>, and <var>outset</var>:",
      "rationale": "if",
      "steps": [
        {
          "html": "<p>If <var>radius</var> is greater than <var>spread</var>, or if <var>coverage</var> is greater than 1, then return <code><var>radius</var> + <var>outset</var></code>.</p>"
        },
        {
          "html": "<p>Let <var>ratio</var> be <code><var>radius</var> / <var>outset</var></code>.</p>"
        },
        {
          "html": "<p>Return <code><var>radius</var> + <var>outset</var> * (1 - (1 - <var>ratio</var>)<sup>3</sup> * (1 - <var>coverage</var><sup>3</sup>))</code>.</p>"
        }
      ]
    },
    {
      "name": "extend-point",
      "href": "https://drafts.csswg.org/css-borders-4/#point-extended-by-vectors",
      "html": "A <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"point-extended-by-vectors\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">point extended by vectors</dfn> given a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/geometry-1/#dompointreadonly\" id=\"ref-for-dompointreadonly\">DOMPointReadOnly</a></code> <var>p</var> and a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list\">list</a> of <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#two-dimensional-vector\" id=\"ref-for-two-dimensional-vector\">two-dimensional vector</a>s <var>vectors</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>x</var> be <var>p</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/geometry-1/#dom-dompointreadonly-x\" id=\"ref-for-dom-dompointreadonly-x\">x</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>y</var> be <var>p</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/geometry-1/#dom-dompointreadonly-y\" id=\"ref-for-dom-dompointreadonly-y\">y</a></code>.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate\">For each</a> <var>v</var> in <var>vectors</var>:",
          "rationale": "increment",
          "steps": [
            {
              "html": "<p>Increment <var>x</var> by <var>v</var>[0];</p>"
            },
            {
              "html": "<p>Increment <var>y</var> by <var>v</var>[1];</p>"
            }
          ]
        },
        {
          "html": "<p>Return a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/geometry-1/#dompointreadonly\" id=\"ref-for-dompointreadonly①\">DOMPointReadOnly</a></code> whose <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/geometry-1/#dom-dompointreadonly-x\" id=\"ref-for-dom-dompointreadonly-x①\">x</a></code> is <var>x</var> and whose <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/geometry-1/#dom-dompointreadonly-y\" id=\"ref-for-dom-dompointreadonly-y①\">y</a></code> is <var>y</var>.</p>"
        }
      ]
    },
    {
      "name": "normalize-vector",
      "href": "https://drafts.csswg.org/css-borders-4/#two-dimensional-vector-normalize",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"two-dimensional vector\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"two-dimensional-vector-normalize\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">normalize</dfn> a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#two-dimensional-vector\" id=\"ref-for-two-dimensional-vector②\">two-dimensional vector</a> <var>v</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>l</var> be <code>hypot(<var>v</var>[0], <var>v</var>[1])</code>.</p>"
        },
        {
          "html": "<p>If <var>l</var> is 0, return <var>v</var>.</p>"
        },
        {
          "html": "<p>Return <code>(<var>v</var>[0] / <var>l</var>, <var>v</var>[1] / <var>l</var>)</code>.</p>"
        }
      ]
    },
    {
      "name": "border-aligned-contour-path",
      "href": "https://drafts.csswg.org/css-borders-4/#border-contour-path",
      "html": "To compute an <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-element\" id=\"ref-for-concept-element⑦\">element</a> <var>element</var>’s <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"border-contour-path\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">border contour path</dfn> given numbers <var>topInset</var>, <var>rightInset</var>, <var>bottomInset</var>, <var>leftInset</var>:\n\n    \n    <p>To get the <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"border-aligned-corner-clip-out-path\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">border-aligned corner clip-out path</dfn> given a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/geometry-1/#dompointreadonly\" id=\"ref-for-dompointreadonly②\">DOMPointReadOnly</a></code> <var>originalCornerOuter</var>, a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#two-dimensional-vector\" id=\"ref-for-two-dimensional-vector④\">two-dimensional vector</a> <var>vectorTowardsStart</var>, a <span id=\"ref-for-two-dimensional-vector⑤\">two-dimensional vector</span> <var>vectorTowardsEnd</var>, a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#superellipse-parameter\" id=\"ref-for-superellipse-parameter\">superellipse parameter</a> <var>curvature</var>, and numbers <var>startInset</var> and <var>endInset</var>:</p>",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>borderRect</var> be <var>element</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-box-4/#border-box\" id=\"ref-for-border-box⑦\">border box</a>.</p>"
        },
        {
          "html": "<p>Let <var>unshapedTargetRect</var> be <var>borderRect</var>, inset by <var>topInset</var>, <var>rightInset</var>, <var>bottomInset</var>, <var>leftInset</var>.</p>"
        },
        {
          "html": "<p>Let <var>path</var> be a path that contains <var>unshapedTargetRect</var>.</p>"
        },
        {
          "html": "<p>Let <var>scaleFactor</var> be the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#opposite-corner-scale-factor\" id=\"ref-for-opposite-corner-scale-factor\">opposite corner scale factor</a> given <var>element</var>.</p>"
        },
        {
          "html": "Let <var>adjustedRadius</var> be the following steps given a property <var>P</var>, and numbers <var>insetX</var> and <var>insetY</var>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>radius</var> be <var>element</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-cascade-5/#used-value\" id=\"ref-for-used-value⑥\">used value</a> of <var>P</var>.</p>"
            },
            {
              "html": "<p>If <var>insetX</var> and <var>insetY</var> are zero, return <var>radius</var>.</p>"
            },
            {
              "html": "<p>If <var>insetX</var> or <var>insetY</var> are positive, then return <code>(<var>radius</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#width\" id=\"ref-for-width④\">width</a> ⋅ <var>scaleFactor</var>, <var>radius</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#height\" id=\"ref-for-height④\">height</a> ⋅ <var>scaleFactor</var>)</code>.</p>"
            },
            {
              "html": "<p>Let <var>adjustedRadiusInOutsetCoordinates</var> be the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#outset-adjusted-border-radius\" id=\"ref-for-outset-adjusted-border-radius②\">outset-adjusted border radius</a> given <var>borderRect</var>’s size, <var>radius</var>, and <code>(-<var>insetX</var>, -<var>insetY</var>)</code>.</p>"
            },
            {
              "html": "<p>Return <code>(<var>adjustedRadiusInOutsetCoordinates</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#width\" id=\"ref-for-width⑤\">width</a> - <var>insetX</var>, <var>adjustedRadiusInOutsetCoordinates</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-sizing-3/#height\" id=\"ref-for-height⑤\">height</a> - <var>insetY</var>)</code>.</p>"
            }
          ]
        },
        {
          "html": "<p>Let <var>adjustedTopRightRadius</var> be the <var>adjustedRadius</var> given <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-border-top-right-radius\" id=\"ref-for-propdef-border-top-right-radius①\">border-top-right-radius</a>, <var>insetRight</var>, and <var>insetTop</var>.</p>"
        },
        {
          "html": "<p>Let <var>adjustedBottomRightRadius</var> be the <var>adjustedRadius</var> given <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-border-bottom-right-radius\" id=\"ref-for-propdef-border-bottom-right-radius①\">border-bottom-right-radius</a>, <var>insetRight</var>, and <var>insetBottom</var>.</p>"
        },
        {
          "html": "<p>Let <var>adjustedBottomLeftRadius</var> be the <var>adjustedRadius</var> given <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-border-bottom-left-radius\" id=\"ref-for-propdef-border-bottom-left-radius①\">border-bottom-left-radius</a>, <var>insetLeft</var>, and <var>insetBottom</var>.</p>"
        },
        {
          "html": "<p>Let <var>adjustedTopLeftRadius</var> be the <var>adjustedRadius</var> given <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-border-top-left-radius\" id=\"ref-for-propdef-border-top-left-radius③\">border-top-left-radius</a>, <var>insetLeft</var>, and <var>insetTop</var>.</p>"
        },
        {
          "html": "<p>Clip out from <var>path</var>, the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#border-aligned-corner-clip-out-path\" id=\"ref-for-border-aligned-corner-clip-out-path\">border-aligned corner clip-out path</a> given\n<var>borderRect</var>’s right, <var>borderRect</var>’s top,\n<code>(-<var>adjustedTopRightRadius</var>[0], 0)</code>, <code>(0, <var>adjustedTopRightRadius</var>[1])</code>,\n<var>element</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-cascade-5/#computed-value\" id=\"ref-for-computed-value\">computed</a> <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-corner-top-right-shape\" id=\"ref-for-propdef-corner-top-right-shape\">corner-top-right-shape</a>,\n<var>topInset</var>, and <var>rightInset</var>.</p>"
        },
        {
          "html": "<p>Clip out from <var>path</var>, the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#border-aligned-corner-clip-out-path\" id=\"ref-for-border-aligned-corner-clip-out-path①\">border-aligned corner clip-out path</a> given\n<var>borderRect</var>’s right, <var>borderRect</var>’s bottom,\n<code>(0, -<var>adjustedBottomRightRadius</var>[1])</code>, <code>(-<var>adjustedBottomRightRadius</var>[0], 0)</code>,\n<var>element</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-cascade-5/#computed-value\" id=\"ref-for-computed-value①\">computed</a> <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-corner-bottom-right-shape\" id=\"ref-for-propdef-corner-bottom-right-shape\">corner-bottom-right-shape</a>,\n<var>rightInset</var>, and <var>bottomInset</var>.</p>"
        },
        {
          "html": "<p>Clip out from <var>path</var>, the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#border-aligned-corner-clip-out-path\" id=\"ref-for-border-aligned-corner-clip-out-path②\">border-aligned corner clip-out path</a> given\n<var>borderRect</var>’s left, <var>borderRect</var>’s bottom,\n<code>(<var>adjustedBottomLeftRadius</var>[0], 0)</code>, <code>(0, -<var>adjustedBottomLeftRadius</var>[1])</code>,\n<var>element</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-cascade-5/#computed-value\" id=\"ref-for-computed-value②\">computed</a> <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-corner-bottom-left-shape\" id=\"ref-for-propdef-corner-bottom-left-shape\">corner-bottom-left-shape</a>,\n<var>bottomInset</var>, and <var>leftInset</var>.</p>"
        },
        {
          "html": "<p>Clip out from <var>path</var>, the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#border-aligned-corner-clip-out-path\" id=\"ref-for-border-aligned-corner-clip-out-path③\">border-aligned corner clip-out path</a> given\n<var>borderRect</var>’s left, <var>borderRect</var>’s top,\n<code>(0, <var>adjustedTopLeftRadius</var>[1])</code>, <code>(<var>adjustedTopLeftRadius</var>[0], 0)</code>,\n<var>element</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-cascade-5/#computed-value\" id=\"ref-for-computed-value③\">computed</a> <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-corner-top-left-shape\" id=\"ref-for-propdef-corner-top-left-shape⑤\">corner-top-left-shape</a>,\n<var>leftInset</var>, and <var>topInset</var>.</p>"
        },
        {
          "html": "<p>Return <var>path</var>.</p>"
        }
      ]
    },
    {
      "name": "border-aligned-contour-path",
      "href": "https://drafts.csswg.org/css-borders-4/#border-contour-path",
      "html": "To compute an <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-element\" id=\"ref-for-concept-element⑦\">element</a> <var>element</var>’s <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"border-contour-path\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">border contour path</dfn> given numbers <var>topInset</var>, <var>rightInset</var>, <var>bottomInset</var>, <var>leftInset</var>:\n\n    \n    <p>To get the <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"border-aligned-corner-clip-out-path\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">border-aligned corner clip-out path</dfn> given a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/geometry-1/#dompointreadonly\" id=\"ref-for-dompointreadonly②\">DOMPointReadOnly</a></code> <var>originalCornerOuter</var>, a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#two-dimensional-vector\" id=\"ref-for-two-dimensional-vector④\">two-dimensional vector</a> <var>vectorTowardsStart</var>, a <span id=\"ref-for-two-dimensional-vector⑤\">two-dimensional vector</span> <var>vectorTowardsEnd</var>, a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#superellipse-parameter\" id=\"ref-for-superellipse-parameter\">superellipse parameter</a> <var>curvature</var>, and numbers <var>startInset</var> and <var>endInset</var>:</p>",
      "rationale": "if",
      "steps": [
        {
          "html": "<p>If <var>curvature</var> is ∞, then return an empty path.</p>"
        },
        {
          "html": "<p>Let <var>clampedHalfCorner</var> be the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#normalized-superellipse-half-corner\" id=\"ref-for-normalized-superellipse-half-corner\">normalized superellipse half corner</a> given <code>clamp(<var>curvature</var>, -1, 1)</code>.</p>"
        },
        {
          "html": "<p>Let <var>originalCornerStart</var> be <var>originalCornerOuter</var>, <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#point-extended-by-vectors\" id=\"ref-for-point-extended-by-vectors\">extended by</a> « <var>vectorTowardsStart</var> ».</p>"
        },
        {
          "html": "<p>Let <var>originalCornerEnd</var> be <var>originalCornerOuter</var>, <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#point-extended-by-vectors\" id=\"ref-for-point-extended-by-vectors①\">extended by</a> « <var>vectorTowardsEnd</var> ».</p>"
        },
        {
          "html": "<p>Let <var>originalCornerCenter</var> be <var>originalCornerOuter</var>, <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#point-extended-by-vectors\" id=\"ref-for-point-extended-by-vectors②\">extended by</a> « <var>vectorTowardsStart</var>, <var>vectorTowardsEnd</var> ».</p>"
        },
        {
          "html": "<p>Let <var>extendStart</var> be a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#vector-between-two-points\" id=\"ref-for-vector-between-two-points\">vector between</a> <var>originalCornerStart</var> and <var>originalCornerCenter</var>, <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#two-dimensional-vector-normalize\" id=\"ref-for-two-dimensional-vector-normalize\">normalized</a> and <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#two-dimensional-vector-scale\" id=\"ref-for-two-dimensional-vector-scale\">scaled by</a> <var>startInset</var>.</p>"
        },
        {
          "html": "<p>Let <var>extendEnd</var> be a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#vector-between-two-points\" id=\"ref-for-vector-between-two-points①\">vector between</a> <var>originalCornerEnd</var> and <var>originalCornerCenter</var>, <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#two-dimensional-vector-normalize\" id=\"ref-for-two-dimensional-vector-normalize①\">normalized</a> and <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#two-dimensional-vector-scale\" id=\"ref-for-two-dimensional-vector-scale①\">scaled by</a> <var>endInset</var>.</p>"
        },
        {
          "html": "<p>Let <var>clipStart</var> be <var>originalCornerStart</var>, <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#point-extended-by-vectors\" id=\"ref-for-point-extended-by-vectors③\">extended by</a> « <var>extendStart</var> ».</p>"
        },
        {
          "html": "<p>Let <var>clipEnd</var> be <var>originalCornerEnd</var>, <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#point-extended-by-vectors\" id=\"ref-for-point-extended-by-vectors④\">extended by</a> « <var>extendEnd</var> ».</p>"
        },
        {
          "html": "<p>Let <var>clipOuter</var> be <var>originalCornerOuter</var>, <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#point-extended-by-vectors\" id=\"ref-for-point-extended-by-vectors⑤\">extended by</a> « <var>extendStart</var>, <var>extendEnd</var> ».</p>"
        },
        {
          "html": "<p>Let <var>vectorFromStartToControlPoint</var> be the the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#two-dimensional-vector\" id=\"ref-for-two-dimensional-vector⑥\">two-dimensional vector</a> <code>(2 ⋅ <var>clampedHalfCorner</var> - 0.5, 1.5 - 2 ⋅ <var>clampedHalfCorner</var>)</code>.</p>"
        },
        {
          "html": "<p>Let <var>singlePixelVectorFromStartToControlPoint</var> be the <var>vectorFromStartToControlPoint</var>, <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#two-dimensional-vector-normalize\" id=\"ref-for-two-dimensional-vector-normalize②\">normalized</a>.</p>"
        },
        {
          "html": "<p>Let <code><var>strokeA</var>, <var>strokeB</var></code> be the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#two-dimensional-vector-perpendicular\" id=\"ref-for-two-dimensional-vector-perpendicular\">perpendicular</a> of <var>singlePixelVectorFromStartToControlPoint</var>.</p>"
        },
        {
          "html": "<p>Let <var>offset1</var> be <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#vector-between-two-points\" id=\"ref-for-vector-between-two-points②\">the vector between</a> <var>originalCornerStart</var> and <var>outerCorner</var>, <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#two-dimensional-vector-normalize\" id=\"ref-for-two-dimensional-vector-normalize③\">normalized</a> and <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#two-dimensional-vector-scale\" id=\"ref-for-two-dimensional-vector-scale②\">scaled by</a> <code><var>startInset</var> ⋅ <var>strokeA</var></code>.</p>"
        },
        {
          "html": "<p>Let <var>offset2</var> be <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#vector-between-two-points\" id=\"ref-for-vector-between-two-points③\">the vector between</a> <var>outerCorner</var> and <var>originalCornerEnd</var>, <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#two-dimensional-vector-normalize\" id=\"ref-for-two-dimensional-vector-normalize④\">normalized</a> and <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#two-dimensional-vector-scale\" id=\"ref-for-two-dimensional-vector-scale③\">scaled by</a> <code><var>startInset</var> ⋅ <var>strokeB</var></code>.</p>"
        },
        {
          "html": "<p>Let <var>offset3</var> be <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#vector-between-two-points\" id=\"ref-for-vector-between-two-points④\">the vector between</a> <var>originalCornerEnd</var> and <var>originalCornerCenter</var>, <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#two-dimensional-vector-normalize\" id=\"ref-for-two-dimensional-vector-normalize⑤\">normalized</a> and <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#two-dimensional-vector-scale\" id=\"ref-for-two-dimensional-vector-scale④\">scaled by</a> <code><var>endInset</var> ⋅ <var>strokeB</var></code>.</p>"
        },
        {
          "html": "<p>Let <var>offset4</var> be <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#vector-between-two-points\" id=\"ref-for-vector-between-two-points⑤\">the vector between</a> <var>originalCornerCenter</var> and <var>originalCornerStart</var>, <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#two-dimensional-vector-normalize\" id=\"ref-for-two-dimensional-vector-normalize⑥\">normalized</a> and <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#two-dimensional-vector-scale\" id=\"ref-for-two-dimensional-vector-scale⑤\">scaled by</a> <code><var>endInset</var> ⋅ <var>strokeA</var></code>.</p>"
        },
        {
          "html": "<p>Let <var>adjustedCornerStart</var> be <var>originalCornerStart</var>, <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#point-extended-by-vectors\" id=\"ref-for-point-extended-by-vectors⑥\">extended by</a> « <var>offset1</var>, <var>offset2</var> ».</p>"
        },
        {
          "html": "<p>Let <var>adjustedCornerEnd</var> be <var>originalCornerEnd</var>, <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#point-extended-by-vectors\" id=\"ref-for-point-extended-by-vectors⑦\">extended by</a> « <var>offset3</var>, <var>offset4</var> ».</p>"
        },
        {
          "html": "<p>Let <var>adjustedCornerCenter</var> be <var>originalCornerCenter</var>, <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#point-extended-by-vectors\" id=\"ref-for-point-extended-by-vectors⑧\">extended by</a> « <var>offset4</var>, <var>offset1</var> ».</p>"
        },
        {
          "html": "<p>Let <var>adjustedCornerOuter</var> be <var>originalCornerOuter</var>, <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#point-extended-by-vectors\" id=\"ref-for-point-extended-by-vectors⑨\">extended by</a> « <var>offset2</var>, <var>offset3</var> ».</p>"
        },
        {
          "html": "<p>Let <var>curveCenter</var> be <var>adjustedCornerOuter</var> if <var>curvature</var> is less than 0, <var>adjustedCornerCenter</var> otherwise.</p>"
        },
        {
          "html": "Let <var>mapPointToCorner</var> be the following steps: given numbers <var>x</var> and <var>y</var>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>v1</var> be  <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#vector-between-two-points\" id=\"ref-for-vector-between-two-points⑥\">the vector between</a> <var>curveCenter</var> and <var>adjustedCornerEnd</var>, <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#two-dimensional-vector-scale\" id=\"ref-for-two-dimensional-vector-scale⑥\">scaled by</a> <var>x</var>.</p>"
            },
            {
              "html": "<p>Let <var>v2</var> be  <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#vector-between-two-points\" id=\"ref-for-vector-between-two-points⑦\">the vector between</a> <var>curveCenter</var> and <var>adjustedCornerStart</var>, <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#two-dimensional-vector-scale\" id=\"ref-for-two-dimensional-vector-scale⑦\">scaled by</a> <var>y</var>.</p>"
            },
            {
              "html": "<p>Return the <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/geometry-1/#dompointreadonly\" id=\"ref-for-dompointreadonly③\">DOMPointReadOnly</a></code> at <code>(<var>x</var>, <var>y</var>)</code>, <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#point-extended-by-vectors\" id=\"ref-for-point-extended-by-vectors①⓪\">extended by</a> « <var>v1</var>, <var>v2</var> ».</p>"
            }
          ]
        },
        {
          "html": "<p>Let <var>controlPoint</var> be the result of calling <var>mapPointToCorner</var> given <var>vectorFromStartToControlPoint</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/geometry-1/#dom-dompointreadonly-y\" id=\"ref-for-dom-dompointreadonly-y④\">y</a></code> and <code>1 - <var>unitVectorFromStartToControlPoint</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/geometry-1/#dom-dompointreadonly-x\" id=\"ref-for-dom-dompointreadonly-x④\">x</a></code></code>.</p>"
        },
        {
          "html": "<p>Let <var>axisAlignedCornerStart</var> be the intersection between the lines <code>(<var>adjustedCornerStart</var>, <var>controlPoint</var>)</code> and <code>(<var>clipStart</var>, <var>clipOuter</var>)</code>. If the lines are parallel, let it be <code>adjustedCornerStart</code>.</p>"
        },
        {
          "html": "<p>Let <var>axisAlignedCornerEnd</var> be the intersection between the lines <code>(<var>adjustedCornerEnd</var>, <var>controlPoint</var>)</code> and <code>(<var>clipEnd</var>, <var>clipOuter</var>)</code>. If the lines are parallel, let it be <code>adjustedCornerEnd</code>.</p>"
        },
        {
          "html": "<p>Let <var>path</var> be a path, starting at <var>axisAlignedCornerStart</var>.</p>"
        },
        {
          "html": "If <var>curvature</var> is -∞:",
          "rationale": "extend",
          "steps": [
            {
              "html": "<p>Extend <var>path</var> to <var>adjustedCornerStart</var>.</p>"
            },
            {
              "html": "<p>Extend <var>path</var> to <var>adjustedCornerCenter</var>.</p>"
            },
            {
              "html": "<p>Extend <var>path</var> to <var>adjustedCornerEnd</var>.</p>"
            }
          ]
        },
        {
          "html": "Otherwise:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>K</var> be <code>0.5<sup>-abs(<var>curvature</var>)</sup></code>.</p>"
            },
            {
              "html": "<p>For every <var>T</var> between 0 and 1, in an <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/overview.html#implementation-approximated\" id=\"ref-for-implementation-approximated\">implementation-approximated</a> manner,\n\textend <var>path</var> to the result of calling <var>mapPointToCorner</var> given <code><var>T</var><sup><var>K</var></sup></code> and <code>(1 - <var>T</var>)<sup><var>K</var></sup></code>.</p>"
            }
          ]
        },
        {
          "html": "<p>Extend <var>path</var> to <var>axisAlignedCornerEnd</var>.</p>"
        },
        {
          "html": "<p>Extend <var>path</var> to <var>clipOuter</var>.</p>"
        },
        {
          "html": "<p>Return <var>path</var>.</p>"
        }
      ]
    },
    {
      "name": "constrain-radii-for-concave-corner-shape",
      "href": "https://drafts.csswg.org/css-borders-4/#opposite-corner-scale-factor",
      "html": "To compute the <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"opposite-corner-scale-factor\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">opposite corner scale factor</dfn> given an <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-element\" id=\"ref-for-concept-element⑧\">element</a> <var>element</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>rect</var> be <var>element</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-box-4/#border-box\" id=\"ref-for-border-box⑧\">border box</a>.</p>"
        },
        {
          "html": "<p>Let <var>topRightHull</var> be a the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#normalized-inner-corner-hull\" id=\"ref-for-normalized-inner-corner-hull\">normalized inner corner hull</a> given <var>element</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-cascade-5/#computed-value\" id=\"ref-for-computed-value④\">computed</a> <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-corner-top-right-shape\" id=\"ref-for-propdef-corner-top-right-shape①\">corner-top-right-shape</a>,\nmapped to the rectangle (<var>rect</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/geometry-1/#rectangle-width-dimension\" id=\"ref-for-rectangle-width-dimension\">width dimension</a> - <var>element</var>’s <span id=\"ref-for-computed-value⑤\">computed</span> horizontal <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-border-top-right-radius\" id=\"ref-for-propdef-border-top-right-radius②\">border-top-right-radius</a>, 0, <var>rect</var>’s <span id=\"ref-for-computed-value⑥\">computed</span> <span class=\"property\" id=\"ref-for-propdef-border-top-right-radius③\">border-top-right-radius</span>).</p>"
        },
        {
          "html": "<p>Let <var>bottomRightHull</var> be a the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#normalized-inner-corner-hull\" id=\"ref-for-normalized-inner-corner-hull①\">normalized inner corner hull</a> given <var>element</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-cascade-5/#computed-value\" id=\"ref-for-computed-value⑦\">computed</a> <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-corner-bottom-right-shape\" id=\"ref-for-propdef-corner-bottom-right-shape①\">corner-bottom-right-shape</a>,\nrotated by 90deg with (0.5, 0.5) as an origin,\nand mapped to the rectangle (<var>rect</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/geometry-1/#rectangle-width-dimension\" id=\"ref-for-rectangle-width-dimension①\">width dimension</a> - <var>element</var>’s <span id=\"ref-for-computed-value⑧\">computed</span> horizontal <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-border-bottom-right-radius\" id=\"ref-for-propdef-border-bottom-right-radius②\">border-bottom-right-radius</a>, <var>rect</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/geometry-1/#rectangle-height-dimension\" id=\"ref-for-rectangle-height-dimension\">height dimension</a> - <var>element</var>’s <span id=\"ref-for-computed-value⑨\">computed</span> vertical <span class=\"property\" id=\"ref-for-propdef-border-bottom-right-radius③\">border-bottom-right-radius</span>,\n<var>element</var>’s <span id=\"ref-for-computed-value①⓪\">computed</span> <span class=\"property\" id=\"ref-for-propdef-border-bottom-right-radius④\">border-bottom-right-radius</span>).</p>"
        },
        {
          "html": "<p>Let <var>bottomLeftHull</var> be a the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#normalized-inner-corner-hull\" id=\"ref-for-normalized-inner-corner-hull②\">normalized inner corner hull</a> given <var>element</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-cascade-5/#computed-value\" id=\"ref-for-computed-value①①\">computed</a> <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-corner-bottom-right-shape\" id=\"ref-for-propdef-corner-bottom-right-shape②\">corner-bottom-right-shape</a>,\nrotated by 180deg with (0.5, 0.5) as an origin,\nand mapped to the rectangle (0, <var>rect</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/geometry-1/#rectangle-height-dimension\" id=\"ref-for-rectangle-height-dimension①\">height dimension</a> - <var>element</var>’s <span id=\"ref-for-computed-value①②\">computed</span> vertical <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-border-bottom-left-radius\" id=\"ref-for-propdef-border-bottom-left-radius②\">border-bottom-left-radius</a>,\n<var>element</var>’s <span id=\"ref-for-computed-value①③\">computed</span> <span class=\"property\" id=\"ref-for-propdef-border-bottom-left-radius③\">border-bottom-left-radius</span>).</p>"
        },
        {
          "html": "<p>Let <var>topLeftHull</var> be a the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#normalized-inner-corner-hull\" id=\"ref-for-normalized-inner-corner-hull③\">normalized inner corner hull</a> given <var>element</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-cascade-5/#computed-value\" id=\"ref-for-computed-value①④\">computed</a> <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-corner-top-left-shape\" id=\"ref-for-propdef-corner-top-left-shape⑥\">corner-top-left-shape</a>,\nrotated by 270deg with (0.5, 0.5) as an origin,\nmapped to (0, 0, <var>element</var>’s <span id=\"ref-for-computed-value①⑤\">computed</span> <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-border-top-left-radius\" id=\"ref-for-propdef-border-top-left-radius④\">border-top-left-radius</a>).</p>"
        },
        {
          "html": "<p>Let <var>scaleFactorA</var> be the highest number which, if both <var>topLeftHull</var> and <var>bottomRightHull</var> were scaled by, using their first point as the origin, those polygons would not intersect.</p>"
        },
        {
          "html": "<p>Let <var>scaleFactorB</var> be the highest number which, if both <var>topRightHull</var> and <var>bottomLeftHull</var> were scaled by, using their first point as the origin, those polygons would not intersect.</p>"
        },
        {
          "html": "<p>Return <code>min(1, <var>scaleFactorA</var>, <var>scaleFactorB</var>)</code>.</p>"
        }
      ]
    },
    {
      "name": "superellipse-param-to-interpolation-value",
      "href": "https://drafts.csswg.org/css-borders-4/#normalized-superellipse-half-corner",
      "html": "To compute the <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"normalized-superellipse-half-corner\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">normalized superellipse half corner</dfn> given a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#superellipse-parameter\" id=\"ref-for-superellipse-parameter⑤\">superellipse parameter</a> <var>s</var>, return the first matching statement, switching on <var>s</var>:\n\n\t\n    <dl class=\"switch\">\n     <dt data-md=\"\">-∞\n     </dt><dd data-md=\"\">\n      <p>Return 0.</p>\n     </dd><dt data-md=\"\">∞\n     </dt><dd data-md=\"\">\n      <p>Return 1.</p>\n     </dd><dt data-md=\"\">Otherwise\n     </dt><dd data-md=\"\">\n      \n    </dd></dl>",
      "rationale": ".switch",
      "steps": [
        {
          "operation": "switch",
          "steps": [
            {
              "case": "-∞",
              "html": "<p>Return 0.</p>"
            },
            {
              "case": "∞",
              "html": "<p>Return 1.</p>"
            },
            {
              "case": "Otherwise",
              "html": "To compute the <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"normalized-superellipse-half-corner\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">normalized superellipse half corner</dfn> given a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#superellipse-parameter\" id=\"ref-for-superellipse-parameter⑤\">superellipse parameter</a> <var>s</var>, return the first matching statement, switching on <var>s</var>:\n\n\t\n    <dl class=\"switch\">\n     <dt data-md=\"\">-∞\n     </dt><dd data-md=\"\">\n      <p>Return 0.</p>\n     </dd><dt data-md=\"\">∞\n     </dt><dd data-md=\"\">\n      <p>Return 1.</p>\n     </dd><dt data-md=\"\">Otherwise\n     </dt><dd data-md=\"\">\n      \n    </dd></dl>",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>k</var> be <code>0.5<sup>abs(<var>s</var>)</sup></code>.</p>"
                },
                {
                  "html": "<p>Let <var>convexHalfCorner</var> be <code>0.5<sup>1/<var>k</var></sup></code>.</p>"
                },
                {
                  "html": "<p>If <var>s</var> is less than 0, return <code>1 - <var>convexHalfCorner</var></code>.</p>"
                },
                {
                  "html": "<p>Return <var>convexHalfCorner</var>.</p>"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "superellipse-param-to-hull",
      "href": "https://drafts.csswg.org/css-borders-4/#normalized-inner-corner-hull",
      "html": "To compute the <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"normalized-inner-corner-hull\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">normalized inner corner hull</dfn> given a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#superellipse-parameter\" id=\"ref-for-superellipse-parameter⑥\">superellipse parameter</a> <var>curvature</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>curvature</var> is greater than or equal to zero, return a triangle betwen « (1, 1), (1, 0), (0, 1) ».</p>"
        },
        {
          "html": "<p>Let <var>axisLineA</var> be a line between <code>(1, 0)</code> and <code>(1, 1)</code>.</p>"
        },
        {
          "html": "<p>Let <var>axisLineB</var> be a line between <code>(0, 1)</code> and <code>(1, 1)</code>.</p>"
        },
        {
          "html": "<p>Let <var>normalizedHalfCorner</var> be the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#normalized-superellipse-half-corner\" id=\"ref-for-normalized-superellipse-half-corner①\">normalized superellipse half corner</a> given <var>curvature</var>.</p>"
        },
        {
          "html": "<p>Let <var>halfCornerPoint</var> be <code>(<var>normalizedHalfCorner</var>, 1 - <var>normalizedHalfCorner</var>)</code>.</p>"
        },
        {
          "html": "<p>Let <var>lineFromCenterToHalfCorner</var> be a line between <code>(0, 0)</code> and <var>halfCornerPoint</var>.</p>"
        },
        {
          "html": "<p>Let <var>tangentLine</var> be the line perpendicular to <var>lineFromCenterToHalfCorner</var>, at <var>halfCornerPoint</var>.</p>"
        },
        {
          "html": "<p>Let <var>intersectionA</var> be the intersection between <var>axisLineA</var> and <var>tangentLine</var>.</p>"
        },
        {
          "html": "<p>Let <var>intersectionB</var> be the intersection between <var>axisLineB</var> and <var>tangentLine</var>.</p>"
        },
        {
          "html": "<p>Return a pentagon between the points « (1, 1), (1, 0), <var>intersectionA</var>, <var>intersectionB</var>, (0, 1), (1, 1) ».</p>"
        }
      ]
    },
    {
      "name": "convert interpolation value to superellipse parameter",
      "html": "To convert a <a class=\"css production\" data-link-type=\"type\" href=\"https://www.w3.org/TR/css-values-4/#number-value\" id=\"ref-for-number-value①\">&lt;number [0,1]&gt;</a> <var>interpolationValue</var> back to a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#superellipse-parameter\" id=\"ref-for-superellipse-parameter⑧\">superellipse parameter</a>, switch on <var>interpolationValue</var>:",
      "rationale": ".switch",
      "steps": [
        {
          "operation": "switch",
          "steps": [
            {
              "case": "0",
              "html": "<p>Return -∞.</p>"
            },
            {
              "case": "0.5",
              "html": "<p>Return 0.</p>"
            },
            {
              "case": "1",
              "html": "<p>Return ∞.</p>"
            },
            {
              "case": "Otherwise",
              "html": "",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>convexHalfCorner</var> be <var>interpolationValue</var>.</p>"
                },
                {
                  "html": "<p>If <var>interpolationValue</var> is less than 0.5, set <var>convexHalfCorner</var> to 1 - <var>interpolationValue</var>.</p>"
                },
                {
                  "html": "<p>Let <var>k</var> be <code>ln(0.5) / ln(<var>convexHalfCorner</var>)</code>.</p>"
                },
                {
                  "html": "<p>Let <var>s</var> be <code>log2(<var>k</var>)</code>.</p>"
                },
                {
                  "html": "<p>If <var>interpolationValue</var> is less than 0.5, return -<var>s</var>.</p>"
                },
                {
                  "html": "<p>Return <var>s</var>.</p>"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "html": "After the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#border-image-dfn\" id=\"ref-for-border-image-dfn②\">border image</a> given by <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-border-image-source\" id=\"ref-for-propdef-border-image-source③\">border-image-source</a>\n\tis sliced by the <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-border-image-slice\" id=\"ref-for-propdef-border-image-slice⑤\">border-image-slice</a> values,\n\tthe resulting nine images are scaled, positioned, and tiled\n\tinto their corresponding <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#border-image-region\" id=\"ref-for-border-image-region④\">border image regions</a> in four steps:",
      "rationale": "if",
      "steps": [
        {
          "html": "Scale to <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-border-image-width\" id=\"ref-for-propdef-border-image-width⑨\">border-image-width</a>.\n\t\t\n     <ul>\n      <li>The two images for the top and bottom edges are made as tall\n\t\t\tas the top and bottom <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#border-image-region\" id=\"ref-for-border-image-region⑤\">border image regions</a>, respectively,\n\t\t\tand their width is scaled proportionally.\n\n\t\t\n      </li><li>The images for the left and right edges are made as wide\n\t\t\tas the left and right <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#border-image-region\" id=\"ref-for-border-image-region⑥\">border image regions</a>, respectively,\n\t\t\tand their height is scaled proportionally.\n\n\t\t\n      </li><li>The corner images are scaled to be as wide and as tall\n\t\t\tas the their respective <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#border-image-region\" id=\"ref-for-border-image-region⑦\">border image regions</a>.\n\n\t\t\n      </li><li>The middle image’s width is scaled by the same factor as the top image\n\t\t\tunless that factor is zero or infinity,\n\t\t\tin which case the scaling factor of the bottom is substituted,\n\t\t\tand failing that, the width is not scaled.\n\t\t\tThe height of the middle image is scaled by the same factor as the left image\n\t\t\tunless that factor is zero or infinity,\n\t\t\tin which case the scaling factor of the right image is substituted,\n\t\t\tand failing that, the height is not scaled.\n\t\t\n     </li></ul>"
        },
        {
          "html": "Scale to <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-border-image-repeat\" id=\"ref-for-propdef-border-image-repeat①\">border-image-repeat</a>.\n\t\t\n     <ul>\n      <li>If the first keyword is <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-borders-4/#valdef-border-image-repeat-stretch\" id=\"ref-for-valdef-border-image-repeat-stretch\">stretch</a>,\n\t\t\tthe top, middle and bottom images are further scaled\n\t\t\tto be as wide as the middle region of the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#border-image-area\" id=\"ref-for-border-image-area⑧\">border image area</a>.\n\t\t\tThe height is not changed any further.\n\n\t\t\n      </li><li>If the first keyword is <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-borders-4/#valdef-border-image-repeat-round\" id=\"ref-for-valdef-border-image-repeat-round\">round</a>,\n\t\t\tthe top, middle and bottom images are resized in width,\n\t\t\tso that exactly a whole number of them fit\n\t\t\tin the middle region of the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#border-image-area\" id=\"ref-for-border-image-area⑨\">border image area</a>,\n\t\t\texactly as for <a class=\"css\" data-link-type=\"maybe\" href=\"https://www.w3.org/TR/css-backgrounds-3/#valdef-background-repeat-round\" id=\"ref-for-valdef-background-repeat-round\">round</a> in the <a class=\"css property\" data-link-type=\"property\" href=\"https://www.w3.org/TR/css-backgrounds-3/#propdef-background-repeat\" id=\"ref-for-propdef-background-repeat\">background-repeat</a> property.\n\n\t\t\n      </li><li>If the first keyword is <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-borders-4/#valdef-border-image-repeat-repeat\" id=\"ref-for-valdef-border-image-repeat-repeat\">repeat</a> or <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-borders-4/#valdef-border-image-repeat-space\" id=\"ref-for-valdef-border-image-repeat-space\">space</a>,\n\t\t\tthe top, middle, and bottom images are not changed any further.\n\n\t\t\n      </li><li>The effects of <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-borders-4/#valdef-border-image-repeat-stretch\" id=\"ref-for-valdef-border-image-repeat-stretch①\">stretch</a>, <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-borders-4/#valdef-border-image-repeat-round\" id=\"ref-for-valdef-border-image-repeat-round①\">round</a>, <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-borders-4/#valdef-border-image-repeat-repeat\" id=\"ref-for-valdef-border-image-repeat-repeat①\">repeat</a>, and <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-borders-4/#valdef-border-image-repeat-space\" id=\"ref-for-valdef-border-image-repeat-space①\">space</a>\n\t\t\tfor the second keyword are analogous,\n\t\t\tacting on the height of the left, middle and right images.\n\t\t\n     </li></ul>"
        },
        {
          "html": "Position the first tile.\n\t\t\n     <ul>\n      <li>If the first keyword is <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-borders-4/#valdef-border-image-repeat-repeat\" id=\"ref-for-valdef-border-image-repeat-repeat②\">repeat</a>,\n\t\t\tthe top, middle, and bottom images\n\t\t\tare centered horizontally in their respective regions.\n\t\t\tOtherwise the images are placed at the left edge\n\t\t\tof their respective regions of the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#border-image-area\" id=\"ref-for-border-image-area①⓪\">border image area</a>.\n\n\t\t\n      </li><li>If the second keyword is <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-borders-4/#valdef-border-image-repeat-repeat\" id=\"ref-for-valdef-border-image-repeat-repeat③\">repeat</a>,\n\t\t\tthe left, middle, and right images\n\t\t\tare centered vertically in their respective regions.\n\t\t\tOtherwise the images are placed at the top edge\n\t\t\tof their respective regions of the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#border-image-area\" id=\"ref-for-border-image-area①①\">border image area</a>.\n\t\t\n     </li></ul>"
        },
        {
          "html": "Tile and draw.\n\t\t\n     <ul>\n      <li>The images are then tiled to fill their respective regions.\n\n\t\t\n      </li><li>In the case of <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-borders-4/#valdef-border-image-repeat-space\" id=\"ref-for-valdef-border-image-repeat-space②\">space</a>,\n\t\t\tany partial tiles are discarded and the extra space distributed\n\t\t\tbefore, after, and between the tiles.\n\t\t\t(I.e. the gap before the first tile,\n\t\t\tthe gap after the last tile,\n\t\t\tand the gaps between tiles are equalized.)\n\t\t\t\n\n\t\t\n      </li><li>The images are drawn at the same stacking level as normal borders:\n\t\t\timmediately in front of the background layers.\n\n\t\t\n      </li><li>The middle image is not drawn\n\t\t\tunless <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-borders-4/#border-image-slice-fill\" id=\"ref-for-border-image-slice-fill④\">fill</a> was specified for <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-border-image-source\" id=\"ref-for-propdef-border-image-source④\">border-image-source</a>.\n\t\t\n     </li></ul>"
        }
      ]
    },
    {
      "name": "choose-relevant-side-for-border-shape",
      "href": "https://drafts.csswg.org/css-borders-4/#relevant-side-for-border-shape",
      "html": "An element’s <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"relevant-side-for-border-shape\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">relevant side for border shape</dfn> is the first side (in the order <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-writing-modes-4/#block-start\" id=\"ref-for-block-start\">block-start</a>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-writing-modes-4/#inline-start\" id=\"ref-for-inline-start\">inline-start</a>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-writing-modes-4/#block-end\" id=\"ref-for-block-end\">block-end</a>, and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-writing-modes-4/#inline-end\" id=\"ref-for-inline-end\">inline-end</a>) that has a non-<a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-borders-4/#valdef-line-style-none\" id=\"ref-for-valdef-line-style-none③\">none</a> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-borders-4/#border-style-dfn\" id=\"ref-for-border-style-dfn\">border style</a>, or <span id=\"ref-for-block-start①\">block-start</span> if they’re all <span class=\"css\" id=\"ref-for-valdef-line-style-none④\">none</span>.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>element</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-cascade-5/#computed-value\" id=\"ref-for-computed-value①⑨\">computed</a> <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-border-block-start-style\" id=\"ref-for-propdef-border-block-start-style②\">border-block-start-style</a> is not <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-borders-4/#valdef-line-style-none\" id=\"ref-for-valdef-line-style-none⑤\">none</a>, then return <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-writing-modes-4/#block-start\" id=\"ref-for-block-start②\">block-start</a>.</p>"
        },
        {
          "html": "<p>If <var>element</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-cascade-5/#computed-value\" id=\"ref-for-computed-value②⓪\">computed</a> <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-border-inline-start-style\" id=\"ref-for-propdef-border-inline-start-style②\">border-inline-start-style</a> is not <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-borders-4/#valdef-line-style-none\" id=\"ref-for-valdef-line-style-none⑥\">none</a>, then return <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-writing-modes-4/#inline-start\" id=\"ref-for-inline-start①\">inline-start</a>.</p>"
        },
        {
          "html": "<p>If <var>element</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-cascade-5/#computed-value\" id=\"ref-for-computed-value②①\">computed</a> <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-border-block-end-style\" id=\"ref-for-propdef-border-block-end-style②\">border-block-end-style</a> is not <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-borders-4/#valdef-line-style-none\" id=\"ref-for-valdef-line-style-none⑦\">none</a>, then return <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-writing-modes-4/#block-end\" id=\"ref-for-block-end①\">block-end</a>.</p>"
        },
        {
          "html": "<p>If <var>element</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-cascade-5/#computed-value\" id=\"ref-for-computed-value②②\">computed</a> <a class=\"css property\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-borders-4/#propdef-border-inline-end-style\" id=\"ref-for-propdef-border-inline-end-style②\">border-inline-end-style</a> is not <a class=\"css\" data-link-type=\"maybe\" href=\"https://drafts.csswg.org/css-borders-4/#valdef-line-style-none\" id=\"ref-for-valdef-line-style-none⑧\">none</a>, then return <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-writing-modes-4/#inline-end\" id=\"ref-for-inline-end①\">inline-end</a>.</p>"
        },
        {
          "html": "<p>Return <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/css-writing-modes-4/#block-start\" id=\"ref-for-block-start③\">block-start</a>.</p>"
        }
      ]
    }
  ]
}