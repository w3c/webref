{
  "spec": {
    "title": "Navigation Timing Level 2",
    "url": "https://w3c.github.io/navigation-timing/"
  },
  "algorithms": [
    {
      "html": "The <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://w3c.github.io/resource-timing/#dom-performanceresourcetiming-redirectstart\" id=\"ref-for-dom-performanceresourcetiming-redirectstart\">redirectStart</a></code> getter steps are to perform the following steps:",
      "rationale": "if",
      "steps": [
        {
          "html": "If <var>this</var>’s <a data-link-type=\"dfn\" href=\"https://w3c.github.io/navigation-timing/#performancenavigationtiming-redirect-count\" id=\"ref-for-performancenavigationtiming-redirect-count\">redirect count</a> is 0, return 0."
        },
        {
          "html": "Otherwise return <var>this</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://w3c.github.io/resource-timing/#dom-performanceresourcetiming-redirectstart\" id=\"ref-for-dom-performanceresourcetiming-redirectstart①\">redirectStart</a></code>."
        }
      ]
    },
    {
      "html": "The <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://w3c.github.io/resource-timing/#dom-performanceresourcetiming-redirectend\" id=\"ref-for-dom-performanceresourcetiming-redirectend\">redirectEnd</a></code> getter steps are to perform the following steps:",
      "rationale": "if",
      "steps": [
        {
          "html": "If <var>this</var>’s <a data-link-type=\"dfn\" href=\"https://w3c.github.io/navigation-timing/#performancenavigationtiming-redirect-count\" id=\"ref-for-performancenavigationtiming-redirect-count①\">redirect count</a> is 0, return 0."
        },
        {
          "html": "Otherwise return <var>this</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://w3c.github.io/resource-timing/#dom-performanceresourcetiming-redirectend\" id=\"ref-for-dom-performanceresourcetiming-redirectend①\">redirectEnd</a></code>."
        }
      ]
    },
    {
      "html": "The <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://w3c.github.io/resource-timing/#dom-performanceresourcetiming-workerstart\" id=\"ref-for-dom-performanceresourcetiming-workerstart\">workerStart</a></code> getter steps are to perform the following steps:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var>workerTiming</var> be <var>this</var>’s <a data-link-type=\"dfn\" href=\"https://w3c.github.io/navigation-timing/#performancenavigationtiming-service-worker-timing\" id=\"ref-for-performancenavigationtiming-service-worker-timing\">service worker timing</a>."
        },
        {
          "html": "If <var>workerTiming</var> is null, then return <var>this</var>’s prototype’s `workerStart`."
        },
        {
          "html": "Return <var>workerTiming</var>’s <a data-link-type=\"dfn\" href=\"https://w3c.github.io/ServiceWorker/#service-worker-timing-info-start-time\" id=\"ref-for-service-worker-timing-info-start-time\">start time</a>."
        }
      ]
    },
    {
      "html": "The <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://w3c.github.io/resource-timing/#dom-performanceresourcetiming-fetchstart\" id=\"ref-for-dom-performanceresourcetiming-fetchstart\">fetchStart</a></code> getter steps are to perform the following steps:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var>workerTiming</var> be <var>this</var>’s <a data-link-type=\"dfn\" href=\"https://w3c.github.io/navigation-timing/#performancenavigationtiming-service-worker-timing\" id=\"ref-for-performancenavigationtiming-service-worker-timing①\">service worker timing</a>."
        },
        {
          "html": "If <var>workerTiming</var> is null, then return <var>this</var>’s prototype’s `fetchStart`."
        },
        {
          "html": "Return <var>workerTiming</var>’s <a data-link-type=\"dfn\" href=\"https://w3c.github.io/ServiceWorker/#service-worker-timing-info-fetch-event-dispatch-time\" id=\"ref-for-service-worker-timing-info-fetch-event-dispatch-time\">fetch event dispatch time</a>."
        }
      ]
    },
    {
      "name": "PerformanceNavigationTiming/confidence",
      "href": "https://w3c.github.io/navigation-timing/#performancenavigationtiming-confidence",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"PerformanceNavigationTiming\" data-dfn-type=\"dfn\" data-export=\"\" id=\"performancenavigationtiming-confidence\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">confidence</dfn> getter steps are to run these steps:",
      "rationale": "if",
      "steps": [
        {
          "html": "If <var>this</var>’s <a data-link-type=\"dfn\" href=\"https://w3c.github.io/navigation-timing/#performancenavigationtiming-document-load-timing\" id=\"ref-for-performancenavigationtiming-document-load-timing⑥\">document load timing</a>’s\n  <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/dom.html#dom-interactive-time\" id=\"ref-for-dom-interactive-time①\">DOM interactive time</a> is 0, return null."
        },
        {
          "html": "If <var>this</var>’s <a data-link-type=\"dfn\" href=\"https://w3c.github.io/navigation-timing/#performancenavigationtiming-confidence-value\" id=\"ref-for-performancenavigationtiming-confidence-value\">confidence value</a> is not null,\n  return it."
        },
        {
          "html": "Let <var>confidence</var> be a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://w3c.github.io/navigation-timing/#performancetimingconfidence\" id=\"ref-for-performancetimingconfidence②\">PerformanceTimingConfidence</a></code> object created in\n  <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①\">this</a>’s <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object\" id=\"ref-for-relevant-settings-object①\">relevant settings object</a>’s <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm\" id=\"ref-for-concept-relevant-realm\">relevant realm</a>."
        },
        {
          "html": "Set <var>confidence</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://w3c.github.io/navigation-timing/#dom-performancetimingconfidence-randomizedtriggerrate\" id=\"ref-for-dom-performancetimingconfidence-randomizedtriggerrate\">randomizedTriggerRate</a></code> to\n  <var>this</var>’s <a data-link-type=\"dfn\" href=\"https://w3c.github.io/navigation-timing/#performancenavigationtiming-randomized-trigger-rate\" id=\"ref-for-performancenavigationtiming-randomized-trigger-rate\">randomized trigger rate</a>."
        },
        {
          "html": "Set <var>confidence</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://w3c.github.io/navigation-timing/#dom-performancetimingconfidence-value\" id=\"ref-for-dom-performancetimingconfidence-value\">value</a></code> as determined by the following algorithm:",
          "rationale": "let",
          "steps": [
            {
              "html": "Let <var>p</var> be <var>confidence</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://w3c.github.io/navigation-timing/#dom-performancetimingconfidence-randomizedtriggerrate\" id=\"ref-for-dom-performancetimingconfidence-randomizedtriggerrate①\">randomizedTriggerRate</a></code>."
            },
            {
              "html": "Let <var>underlying</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②\">this</a>’s <a data-link-type=\"dfn\" href=\"https://w3c.github.io/navigation-timing/#performancenavigationtiming-underlying-confidence-value\" id=\"ref-for-performancenavigationtiming-underlying-confidence-value\">underlying confidence value</a>, a\n      <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://w3c.github.io/navigation-timing/#enumdef-performancetimingconfidencevalue\" id=\"ref-for-enumdef-performancetimingconfidencevalue①\">PerformanceTimingConfidenceValue</a></code>."
            },
            {
              "html": "Let <var>r</var> be a real number drawn uniformly at random from the interval [0, 1)."
            },
            {
              "html": "If <var>r</var> &gt; or equal <var>p</var>, return <var>underlying</var>."
            },
            {
              "html": "Otherwise:",
              "rationale": "let",
              "steps": [
                {
                  "html": "Let <var>s</var> be an integer drawn uniformly at random from the set {0, 1}."
                },
                {
                  "html": "If <var>s</var> equals 0, return <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://w3c.github.io/navigation-timing/#dom-performancetimingconfidencevalue-high\" id=\"ref-for-dom-performancetimingconfidencevalue-high\">high</a></code>."
                },
                {
                  "html": "Otherwise, return <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://w3c.github.io/navigation-timing/#dom-performancetimingconfidencevalue-low\" id=\"ref-for-dom-performancetimingconfidencevalue-low\">low</a></code>."
                }
              ]
            }
          ]
        },
        {
          "html": "Return <var>confidence</var>."
        }
      ]
    },
    {
      "name": "create the navigation timing entry",
      "href": "https://w3c.github.io/navigation-timing/#create-the-navigation-timing-entry",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-export=\"\" id=\"create-the-navigation-timing-entry\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">create the navigation timing entry</dfn> for <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#document\" id=\"ref-for-document\">Document</a></code> <var>document</var>,\ngiven a <a data-link-type=\"dfn\" href=\"https://fetch.spec.whatwg.org/#fetch-timing-info\" id=\"ref-for-fetch-timing-info\">fetch timing info</a> <var>fetchTiming</var>, a number <var>redirectCount</var>, a\n<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://w3c.github.io/navigation-timing/#enumdef-navigationtimingtype\" id=\"ref-for-enumdef-navigationtimingtype③\">NavigationTimingType</a></code> <var>navigationType</var>, a null or <a data-link-type=\"dfn\" href=\"https://w3c.github.io/ServiceWorker/#service-worker-timing-info\" id=\"ref-for-service-worker-timing-info①\">service worker timing info</a> <var>serviceWorkerTiming</var>,\na DOMString <var>cacheMode</var>, a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://w3c.github.io/hr-time/#typedefdef-domhighrestimestamp\" id=\"ref-for-typedefdef-domhighrestimestamp①②\">DOMHighResTimeStamp</a></code> <var>criticalCHRestart</var>, and a <a data-link-type=\"dfn\" href=\"https://fetch.spec.whatwg.org/#response-body-info\" id=\"ref-for-response-body-info\">response body info</a> <var>bodyInfo</var>, do the following:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var>global</var> be <var>document</var>’s <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global\" id=\"ref-for-concept-relevant-global\">relevant global object</a>."
        },
        {
          "html": "Let <var>navigationTimingEntry</var> be a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://w3c.github.io/navigation-timing/#performancenavigationtiming\" id=\"ref-for-performancenavigationtiming①⑨\">PerformanceNavigationTiming</a></code> object in <var>global</var>’s\n  <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm\" id=\"ref-for-concept-global-object-realm\">realm</a>."
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/resource-timing/#dfn-setup-the-resource-timing-entry\" id=\"ref-for-dfn-setup-the-resource-timing-entry\">Setup the resource\n  timing entry</a> for <var>navigationTimingEntry</var> given \"<code>navigation</code>\", <var>document</var>’s\n  <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-document-url\" id=\"ref-for-dom-document-url\">URL</a></code>, <var>fetchTiming</var>, <var>cacheMode</var>, and <var>bodyInfo</var>."
        },
        {
          "html": "Set <var>navigationTimingEntry</var>’s <a data-link-type=\"dfn\" href=\"https://w3c.github.io/navigation-timing/#performancenavigationtiming-document-load-timing\" id=\"ref-for-performancenavigationtiming-document-load-timing⑦\">document load\n  timing</a> to <var>document</var>’s <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/dom.html#load-timing-info\" id=\"ref-for-load-timing-info\">load timing info</a>"
        },
        {
          "html": "Set <var>navigationTimingEntry</var>’s <a data-link-type=\"dfn\" href=\"https://w3c.github.io/navigation-timing/#performancenavigationtiming-previous-document-unload-timing\" id=\"ref-for-performancenavigationtiming-previous-document-unload-timing②\">previous\n  document unload timing</a> to <var>document</var>’s <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/dom.html#previous-document-unload-timing\" id=\"ref-for-previous-document-unload-timing\">previous document unload timing</a>."
        },
        {
          "html": "Set <var>navigationTimingEntry</var>’s <a data-link-type=\"dfn\" href=\"https://w3c.github.io/navigation-timing/#performancenavigationtiming-redirect-count\" id=\"ref-for-performancenavigationtiming-redirect-count②\">redirect\n  count</a> to <var>redirectCount</var>."
        },
        {
          "html": "Set <var>navigationTimingEntry</var>’s <a data-link-type=\"dfn\" href=\"https://w3c.github.io/navigation-timing/#performancenavigationtiming-navigation-type\" id=\"ref-for-performancenavigationtiming-navigation-type①\">navigation\n  type</a> to <var>navigationType</var>."
        },
        {
          "html": "Set <var>navigationTimingEntry</var>’s <a data-link-type=\"dfn\" href=\"https://w3c.github.io/navigation-timing/#performancenavigationtiming-service-worker-timing\" id=\"ref-for-performancenavigationtiming-service-worker-timing②\">service worker timing</a>\n  to <var>serviceWorkerTiming</var>."
        },
        {
          "html": "Set <var>document</var>’s <span>navigation timing entry</span> to <var>navigationTimingEntry</var>."
        },
        {
          "html": "Set <var>navigationTimingEntry</var>’s <a data-link-type=\"dfn\" href=\"https://w3c.github.io/navigation-timing/#performancenavigationtiming-critical-ch-restart-time\" id=\"ref-for-performancenavigationtiming-critical-ch-restart-time\">`Critical-CH` restart time</a>\n  to <var>criticalCHRestart</var>."
        },
        {
          "html": "Set <var>navigationTimingEntry</var>’s <a data-link-type=\"dfn\" href=\"https://w3c.github.io/navigation-timing/#performancenavigationtiming-not-restored-reasons\" id=\"ref-for-performancenavigationtiming-not-restored-reasons\">not restored reasons</a>\n  to the result of <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#create-a-notrestoredreasons-object\" id=\"ref-for-create-a-notrestoredreasons-object\">creating a\n  NotRestoredReasons object</a> given <var>document</var>’s <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-nrr\" id=\"ref-for-concept-document-nrr\">not restored reasons</a>."
        },
        {
          "html": "add <var>navigationTimingEntry</var> to <var>global</var>’s\n  <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/performance-timeline/#dfn-performance-entry-buffer\" id=\"ref-for-dfn-performance-entry-buffer\">performance entry buffer</a>."
        }
      ]
    },
    {
      "name": "queue the navigation timing entry",
      "href": "https://w3c.github.io/navigation-timing/#queue-the-navigation-timing-entry",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-export=\"\" id=\"queue-the-navigation-timing-entry\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">queue the navigation timing entry</dfn> for <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#document\" id=\"ref-for-document①\">Document</a></code> <var>document</var>,\n<a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#queue-a-navigation-performanceentry\" id=\"ref-for-queue-a-navigation-performanceentry\">queue</a> <var>document</var>’s\n<a data-link-type=\"dfn\" href=\"https://w3c.github.io/navigation-timing/#document-navigation-timing-entry\" id=\"ref-for-document-navigation-timing-entry\">navigation timing entry</a>.",
      "rationale": "To <dfn>"
    }
  ]
}