{
  "spec": {
    "title": "Web Animations",
    "url": "https://drafts.csswg.org/web-animations-1/"
  },
  "algorithms": [
    {
      "name": "update animations and send events",
      "href": "https://drafts.csswg.org/web-animations-1/#update-animations-and-send-events",
      "html": "When asked to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-export=\"\" id=\"update-animations-and-send-events\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">update animations and send events</dfn> for a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://html.spec.whatwg.org/#document\" id=\"ref-for-document②\">Document</a></code> <var>doc</var> at timestamp <var>now</var>,\n    run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Update the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline-current-time\" id=\"ref-for-timeline-current-time⑦\">current time</a> of all timelines <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline-associated-with-a-document\" id=\"ref-for-timeline-associated-with-a-document①\">associated with <var>doc</var></a> passing <var>now</var> as the timestamp.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#remove-replaced-animations\" id=\"ref-for-remove-replaced-animations\">Remove replaced animations</a> for <var>doc</var>.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#perform-a-microtask-checkpoint\" id=\"ref-for-perform-a-microtask-checkpoint\">Perform a microtask checkpoint</a>.</p>"
        },
        {
          "html": "<p>Let <var>events to dispatch</var> be a copy of <var>doc</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-animation-event-queue\" id=\"ref-for-pending-animation-event-queue\">pending animation event queue</a>.</p>"
        },
        {
          "html": "<p>Clear <var>doc</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-animation-event-queue\" id=\"ref-for-pending-animation-event-queue①\">pending animation event queue</a>.</p>"
        },
        {
          "html": "Perform a stable sort of the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-events\" id=\"ref-for-animation-events①\">animation events</a> in <var>events to dispatch</var> as follows:",
          "rationale": "sort",
          "steps": [
            {
              "html": "<p>Sort the events by their <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#scheduled-event-time\" id=\"ref-for-scheduled-event-time\">scheduled event time</a> such that events that were scheduled to occur earlier\nsort before events scheduled to occur later,\nand events whose scheduled event time is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved④\">unresolved</a> sort before events with a <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#resolve\" id=\"ref-for-resolve\">resolved</a> scheduled event time.</p>"
            },
            {
              "html": "<p>Within events with equal <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#scheduled-event-time\" id=\"ref-for-scheduled-event-time①\">scheduled event times</a>,\nsort by their <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-composite-order\" id=\"ref-for-animation-composite-order\">composite order</a>.</p>"
            }
          ]
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-dispatch\" id=\"ref-for-concept-event-dispatch\">Dispatch</a> each of the events in <var>events to dispatch</var> at their\ncorresponding target using the order established in the previous step.</p>"
        }
      ]
    },
    {
      "html": "The <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-current-time\" id=\"ref-for-animation-current-time④\">current time</a> of an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#concept-animation\" id=\"ref-for-concept-animation①②\">animation</a> is calculated from\n  the first matching condition below:",
      "rationale": ".switch",
      "steps": [
        {
          "operation": "switch",
          "steps": [
            {
              "case": "If the animation’s hold time is resolved,",
              "html": "<p>The <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-current-time\" id=\"ref-for-animation-current-time⑤\">current time</a> is the animation’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time②\">hold time</a>.</p>"
            },
            {
              "case": "If any of the following are true: the animation has no associated timeline, or the associated timeline is inactive, or the animation’s start time is unresolved,",
              "html": "<p>The <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-current-time\" id=\"ref-for-animation-current-time⑥\">current time</a> is an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑨\">unresolved</a> time value.</p>"
            },
            {
              "case": "Otherwise,",
              "html": "<blockquote> <code><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-current-time\" id=\"ref-for-animation-current-time⑦\">current time</a> =\n      (<var>timeline time</var> − <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time②\">start time</a>)\n      × <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-rate\" id=\"ref-for-playback-rate①\">playback rate</a></code> </blockquote>\n     <p>Where <var>timeline time</var> is the current <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#time-value\" id=\"ref-for-time-value②⓪\">time value</a> of the associated <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline\" id=\"ref-for-timeline①⑧\">timeline</a>.\n  The <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-rate\" id=\"ref-for-playback-rate②\">playback rate</a> value is defined in <a href=\"https://drafts.csswg.org/web-animations-1/#speed-control\">§ 4.5.15 Speed control</a>.</p>"
            }
          ]
        }
      ]
    },
    {
      "name": "animation/set the timeline of an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#animation-set-the-timeline-of-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"animation\" data-dfn-type=\"dfn\" data-export=\"\" id=\"animation-set-the-timeline-of-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">set the timeline of an animation</dfn>, <var>animation</var>,\n    to <var>new timeline</var> which may be null,\n    is as follows:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>old timeline</var> be\nthe current <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline\" id=\"ref-for-timeline①⑨\">timeline</a> of <var>animation</var>, if any.</p>"
        },
        {
          "html": "<p>If <var>new timeline</var> is the same object as <var>old timeline</var>,\nabort this procedure.</p>"
        },
        {
          "html": "<p>Let the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline\" id=\"ref-for-timeline②⓪\">timeline</a> of <var>animation</var> be <var>new timeline</var>.</p>"
        },
        {
          "html": "<p>If the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time③\">start time</a> of <var>animation</var> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved①⓪\">resolved</a>,\nmake <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time③\">hold time</a> <span id=\"ref-for-unresolved①①\">unresolved</span>.</p>"
        },
        {
          "html": "<p>Run the procedure to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#update-an-animations-finished-state\" id=\"ref-for-update-an-animations-finished-state①\">update an animation’s finished state</a> for <var>animation</var> with the <var>did seek</var> flag set to false,\nand the <var>synchronously notify</var> flag set to false.</p>"
        }
      ]
    },
    {
      "name": "animation/set the associated effect of an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#animation-set-the-associated-effect-of-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"animation\" data-dfn-type=\"dfn\" data-export=\"\" id=\"animation-set-the-associated-effect-of-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">set the associated effect of an animation</dfn>, <var>animation</var>,\n    to <var>new effect</var> which may be null, is as follows:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>old effect</var> be\nthe current <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-associated-effect\" id=\"ref-for-animation-associated-effect⑥\">associated effect</a> of <var>animation</var>, if any.</p>"
        },
        {
          "html": "<p>If <var>new effect</var> is the same object as <var>old effect</var>,\nabort this procedure.</p>"
        },
        {
          "html": "<p>If <var>animation</var> has a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-pause-task\" id=\"ref-for-pending-pause-task\">pending pause task</a>,\nreschedule that task to run as soon as <var>animation</var> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#ready\" id=\"ref-for-ready\">ready</a>.</p>"
        },
        {
          "html": "<p>If <var>animation</var> has a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-play-task\" id=\"ref-for-pending-play-task\">pending play task</a>,\nreschedule that task to run as soon as <var>animation</var> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#ready\" id=\"ref-for-ready①\">ready</a> to play <var>new effect</var>.</p>"
        },
        {
          "html": "<p>If <var>new effect</var> is not <code>null</code> and if <var>new effect</var> is the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-associated-effect\" id=\"ref-for-animation-associated-effect⑦\">associated effect</a> of another <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#concept-animation\" id=\"ref-for-concept-animation①③\">animation</a>, <var>previous animation</var>,\nrun the procedure to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-set-the-associated-effect-of-an-animation\" id=\"ref-for-animation-set-the-associated-effect-of-an-animation\">set the associated effect of an animation</a> (this procedure)\non <var>previous animation</var>,\npassing null as <var>new effect</var>.</p>"
        },
        {
          "html": "<p>Let the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-associated-effect\" id=\"ref-for-animation-associated-effect⑧\">associated effect</a> of <var>animation</var> be <var>new effect</var>.</p>"
        },
        {
          "html": "<p>Run the procedure to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#update-an-animations-finished-state\" id=\"ref-for-update-an-animations-finished-state②\">update an animation’s finished state</a> for <var>animation</var> with the <var>did seek</var> flag set to false,\nand the <var>synchronously notify</var> flag set to false.</p>"
        }
      ]
    },
    {
      "name": "animation/silently set the current time",
      "href": "https://drafts.csswg.org/web-animations-1/#animation-silently-set-the-current-time",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"animation\" data-dfn-type=\"dfn\" data-export=\"\" id=\"animation-silently-set-the-current-time\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">silently set the current time</dfn> of an animation, <var>animation</var>,\n    to <var>seek time</var> is as follows:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "If <var>seek time</var> is an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved①②\">unresolved</a> time value,\nthen perform the following steps.",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-current-time\" id=\"ref-for-animation-current-time①⓪\">current time</a> is <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#resolve\" id=\"ref-for-resolve①\">resolved</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw\">throw</a> a <span class=\"exceptionname\">TypeError</span>.</p>"
            },
            {
              "html": "<p>Abort these steps.</p>"
            }
          ]
        },
        {
          "html": "Update either <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time④\">hold time</a> or <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time④\">start time</a> as follows:",
          "rationale": ".switch",
          "steps": [
            {
              "operation": "switch",
              "steps": [
                {
                  "case": "If any of the following conditions are true: animation’s hold time is resolved, or animation’s start time is unresolved, or animation has no associated timeline or the associated timeline is inactive, or animation’s playback rate is 0,",
                  "html": "<p>Set <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time⑥\">hold time</a> to <var>seek time</var>.</p>"
                },
                {
                  "case": "Otherwise,",
                  "html": "<p>Set <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time⑥\">start time</a> to the result of evaluating <code><var>timeline time</var> − (<var>seek time</var> / <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-rate\" id=\"ref-for-playback-rate④\">playback rate</a>)</code> where <var>timeline time</var> is the current <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#time-value\" id=\"ref-for-time-value②①\">time value</a> of the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline\" id=\"ref-for-timeline②③\">timeline</a> associated with <var>animation</var>.</p>"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "animation/set the current time",
      "href": "https://drafts.csswg.org/web-animations-1/#animation-set-the-current-time",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"animation\" data-dfn-type=\"dfn\" data-export=\"\" id=\"animation-set-the-current-time\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">set the current time</dfn> of an animation, <var>animation</var>,\n    to <var>seek time</var> is as follows:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Run the steps to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-silently-set-the-current-time\" id=\"ref-for-animation-silently-set-the-current-time\">silently set the current time</a> of <var>animation</var> to <var>seek time</var>.</p>"
        },
        {
          "html": "If <var>animation</var> has a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-pause-task\" id=\"ref-for-pending-pause-task①\">pending pause task</a>,\nsynchronously complete the pause operation\nby performing the following steps:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time⑦\">hold time</a> to <var>seek time</var>.</p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#apply-any-pending-playback-rate\" id=\"ref-for-apply-any-pending-playback-rate\">Apply any pending playback rate</a> to <var>animation</var>.</p>"
            },
            {
              "html": "<p>Make <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time⑨\">start time</a> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved①⑦\">unresolved</a>.</p>"
            },
            {
              "html": "<p>Cancel the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-pause-task\" id=\"ref-for-pending-pause-task②\">pending pause task</a>.</p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#resolve\" id=\"ref-for-resolve②\">Resolve</a> <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#current-ready-promise\" id=\"ref-for-current-ready-promise\">current ready promise</a> with <var>animation</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Run the procedure to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#update-an-animations-finished-state\" id=\"ref-for-update-an-animations-finished-state③\">update an animation’s finished state</a> for <var>animation</var> with the <var>did seek</var> flag set to true,\n and the <var>synchronously notify</var> flag set to false.</p>"
        }
      ]
    },
    {
      "name": "set the start time",
      "href": "https://drafts.csswg.org/web-animations-1/#set-the-start-time",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"set-the-start-time\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">set the start time</dfn> of an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#concept-animation\" id=\"ref-for-concept-animation①⑤\">animation</a>, <var>animation</var>,\n    to <var>new start time</var> is as follows:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>timeline time</var> be the current <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#time-value\" id=\"ref-for-time-value②②\">time value</a> of the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline\" id=\"ref-for-timeline②⑥\">timeline</a> that <var>animation</var> is associated with.\nIf there is no <span id=\"ref-for-timeline②⑦\">timeline</span> associated with <var>animation</var> or the associated timeline is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#inactive-timeline\" id=\"ref-for-inactive-timeline⑤\">inactive</a>,\nlet the <var>timeline time</var> be <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved①⑧\">unresolved</a>.</p>"
        },
        {
          "html": "<p>If <var>timeline time</var> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved①⑨\">unresolved</a> and <var>new start time</var> is <span id=\"ref-for-unresolved②⓪\">resolved</span>,\nmake <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time⑧\">hold time</a> <span id=\"ref-for-unresolved②①\">unresolved</span>.</p>"
        },
        {
          "html": "<p>Let <var>previous current time</var> be <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-current-time\" id=\"ref-for-animation-current-time①③\">current time</a>.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#apply-any-pending-playback-rate\" id=\"ref-for-apply-any-pending-playback-rate①\">Apply any pending playback rate</a> on <var>animation</var>.</p>"
        },
        {
          "html": "<p>Set <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time①①\">start time</a> to <var>new start time</var>.</p>"
        },
        {
          "html": "Update <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time⑨\">hold time</a> based on\nthe first matching condition from the following:",
          "rationale": ".switch",
          "steps": [
            {
              "operation": "switch",
              "steps": [
                {
                  "case": "If new start time is resolved,",
                  "html": "<p>If <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-rate\" id=\"ref-for-playback-rate⑤\">playback rate</a> is not zero,\nmake <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time①⓪\">hold time</a> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved②④\">unresolved</a>.</p>"
                },
                {
                  "case": "Otherwise (new start time is unresolved),",
                  "html": "<p>Set <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time①①\">hold time</a> to <var>previous current time</var> even if <var>previous current time</var> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved②⑥\">unresolved</a>.</p>"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "play an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#play-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"play-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">play an animation</dfn>, <var>animation</var>,\n    given a flag <var>auto-rewind</var>,\n    is as follows:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>aborted pause</var> be a boolean flag\nthat is true if <var>animation</var> has a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-pause-task\" id=\"ref-for-pending-pause-task⑤\">pending pause task</a>,\nand false otherwise.</p>"
        },
        {
          "html": "<p>Let <var>has pending ready promise</var> be a boolean flag\nthat is initially false.</p>"
        },
        {
          "html": "<p>Let <var>seek time</var> be a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#time-value\" id=\"ref-for-time-value②④\">time value</a> that is initially <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved②⑨\">unresolved</a>.</p>"
        },
        {
          "html": "If the <var>auto-rewind</var> flag is true,\nperform the steps corresponding to the <em>first</em> matching condition\nfrom the following, if any:",
          "rationale": ".switch",
          "steps": [
            {
              "operation": "switch",
              "steps": [
                {
                  "case": "If animation’s effective playback rate ≥ 0, and animation’s current time is either: unresolved, or less than zero, or greater than or equal to associated effect end,",
                  "html": "<p>Set <var>seek time</var> to zero.</p>"
                },
                {
                  "case": "If animation’s effective playback rate < 0, and animation’s current time is either: unresolved, or less than or equal to zero, or greater than associated effect end,",
                  "html": "<dl class=\"switch\">\n         <dt data-md=\"\">If <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#associated-effect-end\" id=\"ref-for-associated-effect-end②\">associated effect end</a> is positive infinity,\n         </dt><dd data-md=\"\">\n          <p><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException\">DOMException</a></code> and abort these steps.</p>\n         </dd><dt data-md=\"\">Otherwise,\n         </dt><dd data-md=\"\">\n          <p>Set <var>seek time</var> to <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#associated-effect-end\" id=\"ref-for-associated-effect-end③\">associated effect end</a>.</p>\n        </dd></dl>",
                  "rationale": ".switch",
                  "steps": [
                    {
                      "operation": "switch",
                      "steps": [
                        {
                          "case": "If associated effect end is positive infinity,",
                          "html": "<p><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException\">DOMException</a></code> and abort these steps.</p>"
                        },
                        {
                          "case": "Otherwise,",
                          "html": "<p>Set <var>seek time</var> to <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#associated-effect-end\" id=\"ref-for-associated-effect-end③\">associated effect end</a>.</p>"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "html": "<p>If the following three conditions are <em>all</em> satisfied:</p>\n      <ul>\n       <li data-md=\"\">\n        <p><var>seek time</var> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved③②\">unresolved</a>, and</p>\n       </li><li data-md=\"\">\n        <p><var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time①④\">start time</a> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved③③\">unresolved</a>, and</p>\n       </li><li data-md=\"\">\n        <p><var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-current-time\" id=\"ref-for-animation-current-time①⑦\">current time</a> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved③④\">unresolved</a>,</p>\n      </li></ul>\n      <p>set <var>seek time</var> to zero.</p>"
        },
        {
          "html": "<p>Let <var>has finite timeline</var> be true if <var>animation</var> has an associated <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline\" id=\"ref-for-timeline②⑨\">timeline</a> that is not <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#monotonically-increasing-timeline\" id=\"ref-for-monotonically-increasing-timeline①\">monotonically increasing</a>.</p>"
        },
        {
          "html": "<p>If <var>seek time</var> is <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#resolve\" id=\"ref-for-resolve④\">resolved</a>,</p>\n      <div class=\"switch\">\n       <dl>\n        <dt data-md=\"\">If <var>has finite timeline</var> is true,\n        </dt><dd data-md=\"\">\n         \n        </dd><dt data-md=\"\">Otherwise,\n        </dt><dd data-md=\"\">\n         <p>Set <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time①③\">hold time</a> to <var>seek time</var>.</p>\n       </dd></dl>\n      </div>",
          "rationale": ".switch",
          "steps": [
            {
              "html": "<p>Set <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time①⑤\">start time</a> to <var>seek time</var>.</p>"
            },
            {
              "html": "<p>Let <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time①②\">hold time</a> be <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved③⑤\">unresolved</a>.</p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#apply-any-pending-playback-rate\" id=\"ref-for-apply-any-pending-playback-rate②\">Apply any pending playback rate</a> on <var>animation</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>If <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time①④\">hold time</a> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved③⑥\">resolved</a>,\nlet its <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time①⑥\">start time</a> be <span id=\"ref-for-unresolved③⑦\">unresolved</span>.</p>"
        },
        {
          "html": "If <var>animation</var> has a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-play-task\" id=\"ref-for-pending-play-task④\">pending play task</a> or a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-pause-task\" id=\"ref-for-pending-pause-task⑥\">pending pause task</a>,",
          "rationale": "cancel",
          "steps": [
            {
              "html": "<p>Cancel that task.</p>"
            },
            {
              "html": "<p>Set <var>has pending ready promise</var> to true.</p>"
            }
          ]
        },
        {
          "html": "<p>If the following four conditions are <em>all</em> satisfied:</p>\n      <ul>\n       <li data-md=\"\">\n        <p><var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time①⑤\">hold time</a> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved③⑧\">unresolved</a>, and</p>\n       </li><li data-md=\"\">\n        <p><var>seek time</var> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved③⑨\">unresolved</a>, and</p>\n       </li><li data-md=\"\">\n        <p><var>aborted pause</var> is false, and</p>\n       </li><li data-md=\"\">\n        <p><var>animation</var> does <em>not</em> have a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-playback-rate\" id=\"ref-for-pending-playback-rate\">pending playback rate</a>,</p>\n      </li></ul>\n      <p>abort this procedure.</p>"
        },
        {
          "html": "<p>If <var>has pending ready promise</var> is false,\nlet <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#current-ready-promise\" id=\"ref-for-current-ready-promise⑤\">current ready promise</a> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#a-new-promise\" id=\"ref-for-a-new-promise\">a new promise</a> in the <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm\" id=\"ref-for-concept-relevant-realm①\">relevant Realm</a> of <var>animation</var>.</p>"
        },
        {
          "html": "Schedule a task to run as soon as <var>animation</var> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#ready\" id=\"ref-for-ready③\">ready</a>.\nThe task shall perform the following steps:",
          "rationale": "assert",
          "steps": [
            {
              "html": "<p>Assert that at least one of <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time①⑦\">start time</a> or <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time①⑥\">hold time</a> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved④⓪\">resolved</a>.</p>"
            },
            {
              "html": "<p>Let <var>ready time</var> be the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#time-value\" id=\"ref-for-time-value②⑤\">time value</a> of\nthe <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline\" id=\"ref-for-timeline③⓪\">timeline</a> associated with <var>animation</var> at the moment when <var>animation</var> became <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#ready\" id=\"ref-for-ready④\">ready</a>.</p>"
            },
            {
              "html": "Perform the steps corresponding to the first matching condition below,\nif any:",
              "rationale": ".switch",
              "steps": [
                {
                  "operation": "switch",
                  "steps": [
                    {
                      "case": "If animation’s hold time is resolved,",
                      "html": "",
                      "rationale": "apply",
                      "steps": [
                        {
                          "html": "<p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#apply-any-pending-playback-rate\" id=\"ref-for-apply-any-pending-playback-rate③\">Apply any pending playback rate</a> on <var>animation</var>.</p>"
                        },
                        {
                          "html": "<p>Let <var>new start time</var> be the result of evaluating <code><var>ready time</var> − <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time①⑧\">hold time</a> / <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-rate\" id=\"ref-for-playback-rate⑥\">playback rate</a></code> for <var>animation</var>.\nIf the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-rate\" id=\"ref-for-playback-rate⑦\">playback rate</a> is zero,\nlet <var>new start time</var> be simply <var>ready time</var>.</p>"
                        },
                        {
                          "html": "<p>Set the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time①⑧\">start time</a> of <var>animation</var> to <var>new start time</var>.</p>"
                        },
                        {
                          "html": "<p>If <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-rate\" id=\"ref-for-playback-rate⑧\">playback rate</a> is not 0,\nmake <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time①⑨\">hold time</a> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved④②\">unresolved</a>.</p>"
                        }
                      ]
                    },
                    {
                      "case": "If animation’s start time is resolved and animation has a pending playback rate,",
                      "html": "",
                      "rationale": "let",
                      "steps": [
                        {
                          "html": "<p>Let <var>current time to match</var> be the result of evaluating <code>(<var>ready time</var> − <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time②⓪\">start time</a>)\n      × <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-rate\" id=\"ref-for-playback-rate⑨\">playback rate</a></code> for <var>animation</var>.</p>"
                        },
                        {
                          "html": "<p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#apply-any-pending-playback-rate\" id=\"ref-for-apply-any-pending-playback-rate④\">Apply any pending playback rate</a> on <var>animation</var>.</p>"
                        },
                        {
                          "html": "<p>If <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-rate\" id=\"ref-for-playback-rate①⓪\">playback rate</a> is zero,\nlet <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time②⓪\">hold time</a> be <var>current time to match</var>.</p>"
                        },
                        {
                          "html": "<p>Let <var>new start time</var> be the result of evaluating <code><var>ready time</var> − <var>current time to match</var> / <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-rate\" id=\"ref-for-playback-rate①①\">playback rate</a></code> for <var>animation</var>.\nIf the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-rate\" id=\"ref-for-playback-rate①②\">playback rate</a> is zero,\nlet <var>new start time</var> be simply <var>ready time</var>.</p>"
                        },
                        {
                          "html": "<p>Set the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time②①\">start time</a> of <var>animation</var> to <var>new start time</var>.</p>"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "pause an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#pause-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pause-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pause an animation</dfn>, <var>animation</var>,\n    is as follows:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>animation</var> has a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-pause-task\" id=\"ref-for-pending-pause-task⑦\">pending pause task</a>,\nabort these steps.</p>"
        },
        {
          "html": "<p>If the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-play-state\" id=\"ref-for-animation-play-state\">play state</a> of <var>animation</var> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#play-state-paused\" id=\"ref-for-play-state-paused\">paused</a>,\nabort these steps.</p>"
        },
        {
          "html": "<p>Let <var>seek time</var> be\na <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#time-value\" id=\"ref-for-time-value②⑥\">time value</a> that is initially <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved④④\">unresolved</a>.</p>"
        },
        {
          "html": "<p>Let <var>has finite timeline</var> be true\nif <var>animation</var> has an associated <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline\" id=\"ref-for-timeline③①\">timeline</a> that is not <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#monotonically-increasing-timeline\" id=\"ref-for-monotonically-increasing-timeline②\">monotonically increasing</a>.</p>"
        },
        {
          "html": "If the <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-current-time\" id=\"ref-for-animation-current-time②⓪\">current time</a> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved④⑤\">unresolved</a>,\nperform the steps according to the first matching condition below:",
          "rationale": ".switch",
          "steps": [
            {
              "operation": "switch",
              "steps": [
                {
                  "case": "If animation’s playback rate is ≥ 0,",
                  "html": "<p>Set <var>seek time</var> to zero.</p>"
                },
                {
                  "case": "Otherwise,",
                  "html": "<dl class=\"switch\">\n         <dt data-md=\"\">If <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#associated-effect-end\" id=\"ref-for-associated-effect-end④\">associated effect end</a> for <var>animation</var> is positive infinity,\n         </dt><dd data-md=\"\">\n          <p><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror①\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①\">DOMException</a></code> and abort these steps.</p>\n         </dd><dt data-md=\"\">Otherwise,\n         </dt><dd data-md=\"\">\n          <p>Set <var>seek time</var> to <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#associated-effect-end\" id=\"ref-for-associated-effect-end⑤\">associated effect end</a>.</p>\n        </dd></dl>",
                  "rationale": ".switch",
                  "steps": [
                    {
                      "operation": "switch",
                      "steps": [
                        {
                          "case": "If associated effect end for animation is positive infinity,",
                          "html": "<p><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror①\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①\">DOMException</a></code> and abort these steps.</p>"
                        },
                        {
                          "case": "Otherwise,",
                          "html": "<p>Set <var>seek time</var> to <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#associated-effect-end\" id=\"ref-for-associated-effect-end⑤\">associated effect end</a>.</p>"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "html": "<p>If <var>seek time</var> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved④⑥\">resolved</a>,</p>\n      <div class=\"switch\">\n       <dl>\n        <dt data-md=\"\">If <var>has finite timeline</var> is true,\n        </dt><dd data-md=\"\">\n         <p>Set <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time②③\">start time</a> to <var>seek time</var>.</p>\n        </dd><dt data-md=\"\">Otherwise,\n        </dt><dd data-md=\"\">\n         <p>Set <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time②①\">hold time</a> to <var>seek time</var>.</p>\n       </dd></dl>\n      </div>"
        },
        {
          "html": "<p>Let <var>has pending ready promise</var> be a boolean flag\n that is initially false.</p>"
        },
        {
          "html": "<p>If <var>animation</var> has a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-play-task\" id=\"ref-for-pending-play-task⑧\">pending play task</a>,\ncancel that task\nand let <var>has pending ready promise</var> be true.</p>"
        },
        {
          "html": "<p>If <var>has pending ready promise</var> is false,\nset <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#current-ready-promise\" id=\"ref-for-current-ready-promise⑨\">current ready promise</a> to <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#a-new-promise\" id=\"ref-for-a-new-promise①\">a new promise</a> in the <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm\" id=\"ref-for-concept-relevant-realm②\">relevant Realm</a> of <var>animation</var>.</p>"
        },
        {
          "html": "So long as the above task is scheduled but has yet to run, <var>animation</var> is described as having a <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pending-pause-task\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pending pause task</dfn>.\nWhile the task is running, however, <var>animation</var> does <em>not</em> have a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-pause-task\" id=\"ref-for-pending-pause-task⑧\">pending pause task</a>.",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>ready time</var> be the time value of\nthe timeline associated with <var>animation</var> at the moment when the user agent completed processing necessary\nto suspend playback of <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-associated-effect\" id=\"ref-for-animation-associated-effect①②\">associated effect</a>.</p>"
            },
            {
              "html": "<p>If <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time②④\">start time</a> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved④⑦\">resolved</a> and its <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time②②\">hold time</a> is <em>not</em> resolved,\nlet <var>animation</var>’s <span id=\"ref-for-animation-hold-time②③\">hold time</span> be the result of evaluating <code>(<var>ready time</var> − <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time②⑤\">start time</a>)\n      × <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-rate\" id=\"ref-for-playback-rate①④\">playback rate</a></code>.</p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#apply-any-pending-playback-rate\" id=\"ref-for-apply-any-pending-playback-rate⑤\">Apply any pending playback rate</a> on <var>animation</var>.</p>"
            },
            {
              "html": "<p>Make <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time②⑥\">start time</a> unresolved.</p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#resolve\" id=\"ref-for-resolve⑥\">Resolve</a> <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#current-ready-promise\" id=\"ref-for-current-ready-promise①⓪\">current ready promise</a> with <var>animation</var>.</p>"
            },
            {
              "html": "<p>Run the procedure to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#update-an-animations-finished-state\" id=\"ref-for-update-an-animations-finished-state⑦\">update an animation’s finished state</a> for <var>animation</var> with the <var>did seek</var> flag set to false,\nand the <var>synchronously notify</var> flag set to false.</p>"
            }
          ]
        },
        {
          "html": "<p>Run the procedure to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#update-an-animations-finished-state\" id=\"ref-for-update-an-animations-finished-state⑧\">update an animation’s finished state</a> for <var>animation</var> with the <var>did seek</var> flag set to false,\nand the <var>synchronously notify</var> flag set to false.</p>"
        }
      ]
    },
    {
      "name": "update animation finished state",
      "href": "https://drafts.csswg.org/web-animations-1/#update-an-animations-finished-state",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"update-an-animations-finished-state\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">update an animation’s finished state</dfn> for <var>animation</var>,\n    given a flag <var>did seek</var> (to indicate if the update is being performed\n     after <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-set-the-current-time\" id=\"ref-for-animation-set-the-current-time①\">setting the current time</a>),\n    and a flag <var>synchronously notify</var> (to indicate the update was called\n     in a context where we expect finished event queueing\n     and finished promise resolution to happen immediately,\n     if at all)\n    is as follows:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let the <var>unconstrained current time</var> be\nthe result of calculating the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-current-time\" id=\"ref-for-animation-current-time②⑨\">current time</a>,\nsubstituting an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑤⓪\">unresolved</a> time value for the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time②⑥\">hold time</a> if <var>did seek</var> is false.\nIf <var>did seek</var> is true,\nthe <var>unconstrained current time</var> is equal to the <span id=\"ref-for-animation-current-time③⓪\">current time</span>.</p>"
        },
        {
          "html": "then update <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time②⑦\">hold time</a> based on\nthe first matching condition for <var>animation</var> from below, if any:",
          "rationale": ".switch",
          "steps": [
            {
              "operation": "switch",
              "steps": [
                {
                  "case": "If playback rate > 0 and unconstrained current time is greater than or equal to associated effect end,",
                  "html": "<p>If <var>did seek</var> is true,\nlet the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time②⑧\">hold time</a> be the value of <var>unconstrained current time</var>.</p>\n        <p>If <var>did seek</var> is false,\nlet the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time②⑨\">hold time</a> be the maximum value\nof <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#previous-current-time\" id=\"ref-for-previous-current-time①\">previous current time</a> and <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#associated-effect-end\" id=\"ref-for-associated-effect-end⑨\">associated effect end</a>.\nIf the <span id=\"ref-for-previous-current-time②\">previous current time</span> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑤③\">unresolved</a>,\nlet the <span id=\"ref-for-animation-hold-time③⓪\">hold time</span> be <span id=\"ref-for-associated-effect-end①⓪\">associated effect end</span>.</p>"
                },
                {
                  "case": "If playback rate < 0 and unconstrained current time is less than or equal to 0,",
                  "html": "<p>If <var>did seek</var> is true,\nlet the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time③①\">hold time</a> be the value of <var>unconstrained current time</var>.</p>\n        <p>If <var>did seek</var> is false,\nlet the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time③②\">hold time</a> be the minimum value\nof <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#previous-current-time\" id=\"ref-for-previous-current-time③\">previous current time</a> and zero.\nIf the <span id=\"ref-for-previous-current-time④\">previous current time</span> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑤④\">unresolved</a>,\nlet the <span id=\"ref-for-animation-hold-time③③\">hold time</span> be zero.</p>"
                },
                {
                  "case": "If playback rate ≠ 0, and animation is associated with an active timeline,",
                  "html": "Perform the following steps:",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <var>did seek</var> is true\nand the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time③④\">hold time</a> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑤⑤\">resolved</a>,\nlet <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time②⑨\">start time</a> be equal to\nthe result of evaluating <code><var>timeline time</var> − (<a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time③⑤\">hold time</a> / <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-rate\" id=\"ref-for-playback-rate②②\">playback rate</a>)</code> where <var>timeline time</var> is the current <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#time-value\" id=\"ref-for-time-value②⑧\">time value</a> of\nthe <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline\" id=\"ref-for-timeline③③\">timeline</a> associated with <var>animation</var>.</p>"
                    },
                    {
                      "html": "<p>Let the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time③⑥\">hold time</a> be <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑤⑥\">unresolved</a>.</p>"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "html": "<p>Set the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#previous-current-time\" id=\"ref-for-previous-current-time⑤\">previous current time</a> of <var>animation</var> to be\nthe result of calculating its <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-current-time\" id=\"ref-for-animation-current-time③①\">current time</a>.</p>"
        },
        {
          "html": "<p>Let <var>current finished state</var> be true\n if the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-play-state\" id=\"ref-for-animation-play-state①\">play state</a> of <var>animation</var> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#play-state-finished\" id=\"ref-for-play-state-finished④\">finished</a>.\nOtherwise, let it be false.</p>"
        },
        {
          "html": "If <var>current finished state</var> is true\nand the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#current-finished-promise\" id=\"ref-for-current-finished-promise②\">current finished promise</a> is not yet resolved,\nperform the following steps:",
          "rationale": "let",
          "steps": [
            {
              "html": "Let <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"finish-notification-steps\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">finish notification steps</dfn> refer to\nthe following procedure:",
              "rationale": "if",
              "steps": [
                {
                  "html": "<p>If <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-play-state\" id=\"ref-for-animation-play-state②\">play state</a> is not equal to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#play-state-finished\" id=\"ref-for-play-state-finished⑤\">finished</a>,\nabort these steps.</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#resolve\" id=\"ref-for-resolve⑦\">Resolve</a> <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#current-finished-promise\" id=\"ref-for-current-finished-promise③\">current finished promise</a> object\nwith <var>animation</var>.</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-create\" id=\"ref-for-concept-event-create\">Create</a> an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#animationplaybackevent\" id=\"ref-for-animationplaybackevent\">AnimationPlaybackEvent</a></code>, <var>finishEvent</var>.</p>"
                },
                {
                  "html": "<p>Set <var>finishEvent</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-type\" id=\"ref-for-dom-event-type\">type</a></code> attribute\nto <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#finish-event\" id=\"ref-for-finish-event\">finish</a>.</p>"
                },
                {
                  "html": "<p>Set <var>finishEvent</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-animationplaybackevent-currenttime\" id=\"ref-for-dom-animationplaybackevent-currenttime\">currentTime</a></code> attribute\nto the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-current-time\" id=\"ref-for-animation-current-time③②\">current time</a> of <var>animation</var>.</p>"
                },
                {
                  "html": "<p>Set <var>finishEvent</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-animationplaybackevent-timelinetime\" id=\"ref-for-dom-animationplaybackevent-timelinetime\">timelineTime</a></code> attribute\nto the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline-current-time\" id=\"ref-for-timeline-current-time⑨\">current time</a> of the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline\" id=\"ref-for-timeline③④\">timeline</a> with which <var>animation</var> is associated.\nIf <var>animation</var> is not associated with a timeline,\nor the timeline is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#inactive-timeline\" id=\"ref-for-inactive-timeline⑧\">inactive</a>,\nlet <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-animationplaybackevent-timelinetime\" id=\"ref-for-dom-animationplaybackevent-timelinetime①\">timelineTime</a></code> be <code class=\"esvalue\">null</code>.</p>"
                },
                {
                  "html": "<p>If <var>animation</var> has a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-document-for-timing\" id=\"ref-for-animation-document-for-timing①\">document for timing</a>,\nthen append <var>finishEvent</var> to its <span id=\"ref-for-animation-document-for-timing②\">document for timing</span>'s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-animation-event-queue\" id=\"ref-for-pending-animation-event-queue②\">pending animation event queue</a> along with its target, <var>animation</var>.\nFor the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#scheduled-event-time\" id=\"ref-for-scheduled-event-time②\">scheduled event time</a>,\nuse the result of <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-time-to-origin-relative-time\" id=\"ref-for-animation-time-to-origin-relative-time\">converting</a> <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#associated-effect-end\" id=\"ref-for-associated-effect-end①①\">associated effect end</a> to an origin-relative time.</p>\n          <p>Otherwise, <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task\">queue a task</a> to <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-dispatch\" id=\"ref-for-concept-event-dispatch①\">dispatch</a> <var>finishEvent</var> at <var>animation</var>.\nThe task source for this task is\nthe <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source\" id=\"ref-for-dom-manipulation-task-source\">DOM manipulation task source</a>.</p>"
                }
              ]
            },
            {
              "html": "<p>If <var>synchronously notify</var> is true,\ncancel any queued microtask to run\nthe <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#finish-notification-steps\" id=\"ref-for-finish-notification-steps\">finish notification steps</a> for this <var>animation</var>,\nand run the <span id=\"ref-for-finish-notification-steps①\">finish notification steps</span> immediately.</p>\n        <p>Otherwise,\nif <var>synchronously notify</var> is false, <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-microtask\" id=\"ref-for-queue-a-microtask\">queue a microtask</a> to run <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#finish-notification-steps\" id=\"ref-for-finish-notification-steps②\">finish notification steps</a> for <var>animation</var> unless there is already a microtask queued\nto run those steps for <var>animation</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>If <var>current finished state</var> is false\nand <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#current-finished-promise\" id=\"ref-for-current-finished-promise④\">current finished promise</a> is already resolved,\nset <var>animation</var>’s <span id=\"ref-for-current-finished-promise⑤\">current finished promise</span> to <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#a-new-promise\" id=\"ref-for-a-new-promise②\">a new promise</a> in the <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm\" id=\"ref-for-concept-relevant-realm③\">relevant Realm</a> of <var>animation</var>.</p>"
        }
      ]
    },
    {
      "name": "finish an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#finish-an-animation",
      "html": "An animation can be advanced\n    to the natural end of its current playback direction\n    by using the procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"finish-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">finish an animation</dfn> for <var>animation</var> defined below:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#effective-playback-rate\" id=\"ref-for-effective-playback-rate②\">effective playback rate</a> is zero,\nor if <var>animation</var>’s <span id=\"ref-for-effective-playback-rate③\">effective playback rate</span> &gt; 0\nand <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#associated-effect-end\" id=\"ref-for-associated-effect-end①②\">associated effect end</a> is infinity, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror②\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException②\">DOMException</a></code> and abort these steps.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#apply-any-pending-playback-rate\" id=\"ref-for-apply-any-pending-playback-rate⑥\">Apply any pending playback rate</a> to <var>animation</var>.</p>"
        },
        {
          "html": "<p>Set <var>limit</var> as follows:</p>\n      <div class=\"switch\">\n       <dl>\n        <dt data-md=\"\">If <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-rate\" id=\"ref-for-playback-rate②③\">playback rate</a> &gt; 0,\n        </dt><dd data-md=\"\">\n         <p>Let <var>limit</var> be <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#associated-effect-end\" id=\"ref-for-associated-effect-end①③\">associated effect end</a>.</p>\n        </dd><dt data-md=\"\">Otherwise,\n        </dt><dd data-md=\"\">\n         <p>Let <var>limit</var> be zero.</p>\n       </dd></dl>\n      </div>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-silently-set-the-current-time\" id=\"ref-for-animation-silently-set-the-current-time①\">Silently set the current time</a> to <var>limit</var>.</p>"
        },
        {
          "html": "<p>If <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time③⓪\">start time</a> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑤⑦\">unresolved</a> and <var>animation</var> has an associated <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#active-timeline\" id=\"ref-for-active-timeline②\">active timeline</a>,\nlet the <span id=\"ref-for-animation-start-time③①\">start time</span> be the result of evaluating <code><var>timeline time</var> − (<var>limit</var> / <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-rate\" id=\"ref-for-playback-rate②④\">playback rate</a>)</code> where <var>timeline time</var> is the current <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#time-value\" id=\"ref-for-time-value②⑨\">time value</a> of the associated <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline\" id=\"ref-for-timeline③⑤\">timeline</a>.</p>"
        },
        {
          "html": "If there is a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-pause-task\" id=\"ref-for-pending-pause-task①①\">pending pause task</a> and <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time③②\">start time</a> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑤⑧\">resolved</a>,",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time③⑦\">hold time</a> be <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑤⑨\">unresolved</a>.</p>"
            },
            {
              "html": "<p>Cancel the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-pause-task\" id=\"ref-for-pending-pause-task①②\">pending pause task</a>.</p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#resolve\" id=\"ref-for-resolve⑧\">Resolve</a> the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#current-ready-promise\" id=\"ref-for-current-ready-promise①②\">current ready promise</a> of <var>animation</var> with <var>animation</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>If there is a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-play-task\" id=\"ref-for-pending-play-task①②\">pending play task</a> and <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time③③\">start time</a> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑥⓪\">resolved</a>,\ncancel that task and <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#resolve\" id=\"ref-for-resolve⑨\">resolve</a> the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#current-ready-promise\" id=\"ref-for-current-ready-promise①③\">current ready promise</a> of <var>animation</var> with <var>animation</var>.</p>"
        },
        {
          "html": "<p>Run the procedure to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#update-an-animations-finished-state\" id=\"ref-for-update-an-animations-finished-state①⓪\">update an animation’s finished state</a> for <var>animation</var> with the <var>did seek</var> flag set to true,\nand the <var>synchronously notify</var> flag set to true.</p>"
        }
      ]
    },
    {
      "name": "cancel an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#cancel-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"cancel-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">cancel an animation</dfn> for <var>animation</var> is as follows:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "If <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-play-state\" id=\"ref-for-animation-play-state③\">play state</a> is <em>not</em> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#play-state-idle\" id=\"ref-for-play-state-idle①\">idle</a>,\nperform the following steps:",
          "rationale": "run",
          "steps": [
            {
              "html": "<p>Run the procedure to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-reset-an-animations-pending-tasks\" id=\"ref-for-animation-reset-an-animations-pending-tasks\">reset an animation’s pending tasks</a> on <var>animation</var>.</p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#reject\" id=\"ref-for-reject\">Reject</a> the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#current-finished-promise\" id=\"ref-for-current-finished-promise⑧\">current finished promise</a> with a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException③\">DOMException</a></code> named \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#aborterror\" id=\"ref-for-aborterror\">AbortError</a></code>\".</p>"
            },
            {
              "html": "<p>Set the [[PromiseIsHandled]] internal slot\nof the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#current-finished-promise\" id=\"ref-for-current-finished-promise⑨\">current finished promise</a> to true.</p>"
            },
            {
              "html": "<p>Let <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#current-finished-promise\" id=\"ref-for-current-finished-promise①⓪\">current finished promise</a> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#a-new-promise\" id=\"ref-for-a-new-promise③\">a new promise</a> in the <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm\" id=\"ref-for-concept-relevant-realm④\">relevant Realm</a> of <var>animation</var>.</p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-create\" id=\"ref-for-concept-event-create①\">Create</a> an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#animationplaybackevent\" id=\"ref-for-animationplaybackevent①\">AnimationPlaybackEvent</a></code>, <var>cancelEvent</var>.</p>"
            },
            {
              "html": "<p>Set <var>cancelEvent</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-type\" id=\"ref-for-dom-event-type①\">type</a></code> attribute\nto <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#cancel-event\" id=\"ref-for-cancel-event①\">cancel</a>.</p>"
            },
            {
              "html": "<p>Set <var>cancelEvent</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-animationplaybackevent-currenttime\" id=\"ref-for-dom-animationplaybackevent-currenttime①\">currentTime</a></code> to <code class=\"esvalue\">null</code>.</p>"
            },
            {
              "html": "<p>Let <var>timeline time</var> be the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline-current-time\" id=\"ref-for-timeline-current-time①⓪\">current time</a> of the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline\" id=\"ref-for-timeline③⑥\">timeline</a> with which <var>animation</var> is associated.\nIf <var>animation</var> is not associated with an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#active-timeline\" id=\"ref-for-active-timeline③\">active timeline</a>,\nlet <var>timeline time</var> be an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑥②\">unresolved</a> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#time-value\" id=\"ref-for-time-value③⓪\">time value</a>.</p>"
            },
            {
              "html": "<p>Set <var>cancelEvent</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-animationplaybackevent-timelinetime\" id=\"ref-for-dom-animationplaybackevent-timelinetime②\">timelineTime</a></code> to <var>timeline time</var>.\nIf <var>timeline time</var> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑥③\">unresolved</a>,\nset it to <code class=\"esvalue\">null</code>.</p>"
            },
            {
              "html": "<p>If <var>animation</var> has a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-document-for-timing\" id=\"ref-for-animation-document-for-timing③\">document for timing</a>,\nthen append <var>cancelEvent</var> to\nits <span id=\"ref-for-animation-document-for-timing④\">document for timing</span>'s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-animation-event-queue\" id=\"ref-for-pending-animation-event-queue③\">pending animation event queue</a> along with its target, <var>animation</var>.\nIf <var>animation</var> is associated with an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#active-timeline\" id=\"ref-for-active-timeline④\">active timeline</a> that defines a procedure to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline-time-to-origin-relative-time\" id=\"ref-for-timeline-time-to-origin-relative-time①\">convert\ntimeline times to origin-relative time</a>,\nlet the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#scheduled-event-time\" id=\"ref-for-scheduled-event-time③\">scheduled event time</a> be\nthe result of applying that procedure to <var>timeline time</var>.\nOtherwise, the <span id=\"ref-for-scheduled-event-time④\">scheduled event time</span> is\nan <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑥④\">unresolved</a> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#time-value\" id=\"ref-for-time-value③①\">time value</a>.</p>\n        <p>Otherwise, <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task①\">queue a task</a> to <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-dispatch\" id=\"ref-for-concept-event-dispatch②\">dispatch</a> <var>cancelEvent</var> at <var>animation</var>.\nThe task source for this task is\nthe <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source\" id=\"ref-for-dom-manipulation-task-source①\">DOM manipulation task source</a>.</p>"
            }
          ]
        },
        {
          "html": "<p>Make <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time③⑨\">hold time</a> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑥⑤\">unresolved</a>.</p>"
        },
        {
          "html": "<p>Make <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time③④\">start time</a> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑥⑥\">unresolved</a>.</p>"
        }
      ]
    },
    {
      "name": "animation/reset an animation’s pending tasks",
      "href": "https://drafts.csswg.org/web-animations-1/#animation-reset-an-animations-pending-tasks",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"animation\" data-dfn-type=\"dfn\" data-export=\"\" id=\"animation-reset-an-animations-pending-tasks\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">reset an animation’s pending tasks</dfn> for <var>animation</var> is as follows:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>animation</var> does not have\na <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-play-task\" id=\"ref-for-pending-play-task①③\">pending play task</a> or a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-pause-task\" id=\"ref-for-pending-pause-task①③\">pending pause task</a>,\nabort this procedure.</p>"
        },
        {
          "html": "<p>If <var>animation</var> has a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-play-task\" id=\"ref-for-pending-play-task①④\">pending play task</a>,\ncancel that task.</p>"
        },
        {
          "html": "<p>If <var>animation</var> has a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-pause-task\" id=\"ref-for-pending-pause-task①④\">pending pause task</a>,\ncancel that task.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#apply-any-pending-playback-rate\" id=\"ref-for-apply-any-pending-playback-rate⑦\">Apply any pending playback rate</a> on <var>animation</var>.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#reject\" id=\"ref-for-reject①\">Reject</a> <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#current-ready-promise\" id=\"ref-for-current-ready-promise①④\">current ready promise</a> with a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException④\">DOMException</a></code> named \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#aborterror\" id=\"ref-for-aborterror①\">AbortError</a></code>\".</p>"
        },
        {
          "html": "<p>Set the [[PromiseIsHandled]] internal slot of <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#current-ready-promise\" id=\"ref-for-current-ready-promise①⑤\">current ready promise</a> to true.</p>"
        },
        {
          "html": "<p>Let <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#current-ready-promise\" id=\"ref-for-current-ready-promise①⑥\">current ready promise</a> be the result of <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#a-promise-resolved-with\" id=\"ref-for-a-promise-resolved-with①\">creating a new resolved Promise object</a> with value <var>animation</var> in the <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm\" id=\"ref-for-concept-relevant-realm⑤\">relevant Realm</a> of <var>animation</var>.</p>"
        }
      ]
    },
    {
      "name": "set the playback rate",
      "href": "https://drafts.csswg.org/web-animations-1/#set-the-playback-rate",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"set-the-playback-rate\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">set the playback rate</dfn> of an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#concept-animation\" id=\"ref-for-concept-animation②④\">animation</a>, <var>animation</var>,\n    to <var>new playback rate</var> is as follows:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Clear any <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-playback-rate\" id=\"ref-for-pending-playback-rate②\">pending playback rate</a> on <var>animation</var>.</p>"
        },
        {
          "html": "<p>Let <var>previous time</var> be\nthe value of the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-current-time\" id=\"ref-for-animation-current-time③⑦\">current time</a> of <var>animation</var> before changing the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-rate\" id=\"ref-for-playback-rate②⑧\">playback rate</a>.</p>"
        },
        {
          "html": "<p>Let <var>previous playback rate</var> be\nthe current <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#effective-playback-rate\" id=\"ref-for-effective-playback-rate④\">effective playback rate</a> of <var>animation</var>.</p>"
        },
        {
          "html": "<p>Set the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-rate\" id=\"ref-for-playback-rate②⑨\">playback rate</a> to <var>new playback rate</var>.</p>"
        },
        {
          "html": "Perform the steps corresponding to\nthe <em>first</em> matching condition from the following, if any:",
          "rationale": ".switch",
          "steps": [
            {
              "operation": "switch",
              "steps": [
                {
                  "case": "If animation is associated with a monotonically increasing timeline and the previous time is resolved,",
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-set-the-current-time\" id=\"ref-for-animation-set-the-current-time②\">Set the current time</a> of <var>animation</var> to <var>previous time</var>.</p>"
                },
                {
                  "case": "If animation is associated with a non-null timeline that is not monotonically increasing, the start time of animation is resolved, associated effect end is not infinity, and either: the previous playback rate < 0 and the new playback rate ≥ 0, or the previous playback rate ≥ 0 and the new playback rate < 0,",
                  "html": "<p>Set <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time③⑥\">start time</a> to the result of evaluating <code><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#associated-effect-end\" id=\"ref-for-associated-effect-end①⑤\">associated effect end</a> − <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time③⑦\">start time</a></code> for <var>animation</var>.</p>"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "apply any pending playback rate",
      "href": "https://drafts.csswg.org/web-animations-1/#apply-any-pending-playback-rate",
      "html": "When an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#concept-animation\" id=\"ref-for-concept-animation②⑧\">animation</a>, <var>animation</var>, is to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"apply-any-pending-playback-rate\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">apply any pending playback rate</dfn> the following steps are performed:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>animation</var> does not have a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-playback-rate\" id=\"ref-for-pending-playback-rate⑤\">pending playback rate</a>,\nabort these steps.</p>"
        },
        {
          "html": "<p>Set <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-rate\" id=\"ref-for-playback-rate③②\">playback rate</a> to its <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-playback-rate\" id=\"ref-for-pending-playback-rate⑥\">pending playback rate</a>.</p>"
        },
        {
          "html": "<p>Clear <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-playback-rate\" id=\"ref-for-pending-playback-rate⑦\">pending playback rate</a>.</p>"
        }
      ]
    },
    {
      "name": "seamlessly update the playback rate",
      "href": "https://drafts.csswg.org/web-animations-1/#seamlessly-update-the-playback-rate",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"seamlessly-update-the-playback-rate\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">seamlessly update the playback rate</dfn> of an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#concept-animation\" id=\"ref-for-concept-animation②⑨\">animation</a>, <var>animation</var>,\n    to <var>new playback rate</var> preserving its <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-current-time\" id=\"ref-for-animation-current-time③⑧\">current time</a> is as follows:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>previous play state</var> be <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-play-state\" id=\"ref-for-animation-play-state⑤\">play state</a>.</p>"
        },
        {
          "html": "<p>Let <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-playback-rate\" id=\"ref-for-pending-playback-rate①⓪\">pending playback rate</a> be <var>new playback rate</var>.</p>"
        },
        {
          "html": "Perform the steps corresponding to\nthe first matching condition below:",
          "rationale": ".switch",
          "steps": [
            {
              "operation": "switch",
              "steps": [
                {
                  "case": "If animation has a pending play task or a pending pause task,",
                  "html": "<p>Abort these steps.</p>"
                },
                {
                  "case": "If previous play state is idle or paused, or animation’s current time is unresolved,",
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#apply-any-pending-playback-rate\" id=\"ref-for-apply-any-pending-playback-rate⑧\">Apply any pending playback rate</a> on <var>animation</var>.</p>"
                },
                {
                  "case": "If previous play state is finished,",
                  "html": "",
                  "rationale": "let",
                  "steps": [
                    {
                      "html": "<p>Let the <var>unconstrained current time</var> be\nthe result of calculating\nthe <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-current-time\" id=\"ref-for-animation-current-time④⓪\">current time</a> of <var>animation</var> substituting an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑥⑨\">unresolved</a> time value\nfor the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-hold-time\" id=\"ref-for-animation-hold-time④⓪\">hold time</a>.</p>"
                    },
                    {
                      "html": "<p>Let <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time③⑧\">start time</a> be\nthe result of evaluating the following expression:</p>\n          <blockquote> <code><var>timeline time</var> − (<var>unconstrained current time</var> / <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-playback-rate\" id=\"ref-for-pending-playback-rate①②\">pending playback rate</a>)</code> </blockquote>\n          <p>Where <var>timeline time</var> is the current <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#time-value\" id=\"ref-for-time-value③④\">time value</a> of\nthe <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline\" id=\"ref-for-timeline④②\">timeline</a> associated with <var>animation</var>.</p>\n          <p>If <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-playback-rate\" id=\"ref-for-pending-playback-rate①③\">pending playback rate</a> is zero,\nlet <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time③⑨\">start time</a> be <var>timeline time</var>.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#apply-any-pending-playback-rate\" id=\"ref-for-apply-any-pending-playback-rate⑨\">Apply any pending playback rate</a> on <var>animation</var>.</p>"
                    },
                    {
                      "html": "<p>Run the procedure to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#update-an-animations-finished-state\" id=\"ref-for-update-an-animations-finished-state①①\">update an animation’s finished state</a> for <var>animation</var> with the <var>did seek</var> flag set to false,\nand the <var>synchronously notify</var> flag set to false.</p>"
                    }
                  ]
                },
                {
                  "case": "Otherwise,",
                  "html": "<p>Run the procedure to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#play-an-animation\" id=\"ref-for-play-an-animation①\">play an animation</a> for <var>animation</var> with the <var>auto-rewind</var> flag set to false.</p>"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "reverse an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#reverse-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"reverse-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">reverse an animation</dfn> of <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#concept-animation\" id=\"ref-for-concept-animation③⓪\">animation</a> <var>animation</var> is as follows:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If there is no <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline\" id=\"ref-for-timeline④③\">timeline</a> associated with <var>animation</var>,\nor the associated <span id=\"ref-for-timeline④④\">timeline</span> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#inactive-timeline\" id=\"ref-for-inactive-timeline⑨\">inactive</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror③\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑤\">DOMException</a></code> and abort these steps.</p>"
        },
        {
          "html": "<p>Let <var>original pending playback rate</var> be <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-playback-rate\" id=\"ref-for-pending-playback-rate①④\">pending playback rate</a>.</p>"
        },
        {
          "html": "<p>Let <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-playback-rate\" id=\"ref-for-pending-playback-rate①⑤\">pending playback rate</a> be\nthe additive inverse of its <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#effective-playback-rate\" id=\"ref-for-effective-playback-rate⑥\">effective playback rate</a> (i.e. <code>-effective playback rate</code>).</p>"
        },
        {
          "html": "<p>Run the steps to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#play-an-animation\" id=\"ref-for-play-an-animation②\">play an animation</a> for <var>animation</var> with the <var>auto-rewind</var> flag set to true.</p>\n      <p>If the steps to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#play-an-animation\" id=\"ref-for-play-an-animation③\">play an animation</a> throw an exception,\nset <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-playback-rate\" id=\"ref-for-pending-playback-rate①⑥\">pending playback rate</a> to <var>original pending playback rate</var> and propagate the exception.</p>"
        }
      ]
    },
    {
      "name": "animation time to timeline time",
      "href": "https://drafts.csswg.org/web-animations-1/#animation-time-to-timeline-time",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-lt=\"animation time to timeline time\" data-noexport=\"\" id=\"animation-time-to-timeline-time\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">convert\n    an animation time to timeline time</dfn> a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#time-value\" id=\"ref-for-time-value③⑥\">time value</a>, <var>time</var>, that is relative to\n    the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time④④\">start time</a> of an animation, <var>animation</var>,\n    perform the following steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>time</var> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑦⑥\">unresolved</a>,\n return <var>time</var>.</p>"
        },
        {
          "html": "<p>If <var>time</var> is infinity,\n return an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑦⑦\">unresolved</a> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#time-value\" id=\"ref-for-time-value③⑦\">time value</a>.</p>"
        },
        {
          "html": "<p>If <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-rate\" id=\"ref-for-playback-rate③④\">playback rate</a> is zero,\n return an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑦⑧\">unresolved</a> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#time-value\" id=\"ref-for-time-value③⑧\">time value</a>.</p>"
        },
        {
          "html": "<p>If <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time④⑤\">start time</a> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑦⑨\">unresolved</a>,\n return an <span id=\"ref-for-unresolved⑧⓪\">unresolved</span> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#time-value\" id=\"ref-for-time-value③⑨\">time value</a>.</p>"
        },
        {
          "html": "<p>Return the result of calculating <code><var>time</var> × (1 / <var>playback rate</var>) + <var>start time</var></code>,\n where <var>playback rate</var> and <var>start time</var> are\n the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-rate\" id=\"ref-for-playback-rate③⑤\">playback rate</a> and <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-start-time\" id=\"ref-for-animation-start-time④⑥\">start time</a> of <var>animation</var>,\n respectively.</p>"
        }
      ]
    },
    {
      "name": "animation time to origin-relative time",
      "href": "https://drafts.csswg.org/web-animations-1/#animation-time-to-origin-relative-time",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-lt=\"animation time to origin-relative time\" data-noexport=\"\" id=\"animation-time-to-origin-relative-time\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">convert\n    a timeline time to an origin-relative time</dfn> a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#time-value\" id=\"ref-for-time-value④⓪\">time value</a>, <var>time</var>, that is expressed in the same scale\n    as the <span id=\"ref-for-time-value④①\">time values</span> of a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline\" id=\"ref-for-timeline④⑧\">timeline</a>, <var>timeline</var>,\n    perform the following steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>timeline time</var> be the result of <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-time-to-timeline-time\" id=\"ref-for-animation-time-to-timeline-time\">converting</a> <var>time</var> from an animation time to a timeline time.</p>"
        },
        {
          "html": "<p>If <var>timeline time</var> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑧①\">unresolved</a>,\n return <var>time</var>.</p>"
        },
        {
          "html": "<p>If <var>animation</var> is not associated with a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline\" id=\"ref-for-timeline④⑨\">timeline</a>,\n return an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑧②\">unresolved</a> time value.</p>"
        },
        {
          "html": "<p>If <var>animation</var> is associated with an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#inactive-timeline\" id=\"ref-for-inactive-timeline①①\">inactive timeline</a>,\n return an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑧③\">unresolved</a> time value.</p>"
        },
        {
          "html": "<p>If there is no procedure\n to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline-time-to-origin-relative-time\" id=\"ref-for-timeline-time-to-origin-relative-time②\">convert\n a timeline time to an origin-relative time</a> for the timeline associated with <var>animation</var>,\n return an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑧④\">unresolved</a> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#time-value\" id=\"ref-for-time-value④②\">time value</a>.</p>"
        },
        {
          "html": "<p>Return the result of <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline-time-to-origin-relative-time\" id=\"ref-for-timeline-time-to-origin-relative-time③\">converting</a> <var>timeline time</var> to an origin-relative time\n using the procedure defined for\n the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline\" id=\"ref-for-timeline⑤⓪\">timeline</a> associated with <var>animation</var>.</p>"
        }
      ]
    },
    {
      "name": "pause an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#pause-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pause-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pause an animation</dfn>, <var>animation</var>,\n    is as follows:",
      "rationale": ".switch",
      "steps": [
        {
          "operation": "switch",
          "steps": [
            {
              "case": "If the animation effect is in the before phase,",
              "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pause-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pause an animation</dfn>, <var>animation</var>,\n    is as follows:",
              "rationale": ".switch",
              "steps": [
                {
                  "operation": "switch",
                  "steps": [
                    {
                      "case": "If the fill mode is backwards or both,",
                      "html": "<p>Return the result of evaluating <code>max(<a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#local-time\" id=\"ref-for-local-time②②\">local time</a> − <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#start-delay\" id=\"ref-for-start-delay①③\">start delay</a>, 0)</code>.</p>"
                    },
                    {
                      "case": "Otherwise,",
                      "html": "<p>Return an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑨②\">unresolved</a> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#time-value\" id=\"ref-for-time-value④④\">time value</a>.</p>"
                    }
                  ]
                }
              ]
            },
            {
              "case": "If the animation effect is in the active phase,",
              "html": "<p>Return the result of evaluating <code><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#local-time\" id=\"ref-for-local-time②③\">local time</a> − <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#start-delay\" id=\"ref-for-start-delay①④\">start delay</a></code>.</p>"
            },
            {
              "case": "If the animation effect is in the after phase,",
              "html": "<p>The result depends on the first matching condition from the following:</p>\n     <div class=\"switch\">\n      <dl>\n       <dt data-md=\"\">If the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#fill-mode\" id=\"ref-for-fill-mode①⓪\">fill mode</a> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#fill-mode-forwards\" id=\"ref-for-fill-mode-forwards②\">forwards</a> or <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#fill-mode-backwards\" id=\"ref-for-fill-mode-backwards③\">backwards</a>,\n       </dt><dd data-md=\"\">\n        <p>Return the result of evaluating <code>max(min(<a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#local-time\" id=\"ref-for-local-time②④\">local time</a> − <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#start-delay\" id=\"ref-for-start-delay①⑤\">start delay</a>, <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#active-duration\" id=\"ref-for-active-duration①⑤\">active duration</a>),\n            0)</code>.</p>\n       </dd><dt data-md=\"\">Otherwise,\n       </dt><dd data-md=\"\">\n        <p>Return an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑨③\">unresolved</a> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#time-value\" id=\"ref-for-time-value④⑤\">time value</a>.</p>\n      </dd></dl>\n     </div>"
            },
            {
              "case": "Otherwise (the local time is unresolved),",
              "html": "<p>Return an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑨⑤\">unresolved</a> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#time-value\" id=\"ref-for-time-value④⑥\">time value</a>.</p>"
            }
          ]
        }
      ]
    },
    {
      "name": "pause an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#pause-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pause-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pause an animation</dfn>, <var>animation</var>,\n    is as follows:",
      "rationale": "if",
      "steps": [
        {
          "html": "<p>If the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#active-time\" id=\"ref-for-active-time①③\">active time</a> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑨⑥\">unresolved</a>,\n  return <span id=\"ref-for-unresolved⑨⑦\">unresolved</span>.</p>"
        },
        {
          "html": "<p>Calculate an initial value for <var>overall progress</var> based on the first matching condition below:</p>\n     <div class=\"switch\">\n      <dl>\n       <dt data-md=\"\">If the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#iteration-duration\" id=\"ref-for-iteration-duration①④\">iteration duration</a> is zero,\n       </dt><dd data-md=\"\">\n        <p>If the animation effect is in the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-effect-before-phase\" id=\"ref-for-animation-effect-before-phase⑦\">before phase</a>,\n  let <var>overall progress</var> be zero;\n  otherwise, let it be equal to the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#iteration-count\" id=\"ref-for-iteration-count①④\">iteration count</a>.</p>\n       </dd><dt data-md=\"\">Otherwise,\n       </dt><dd data-md=\"\">\n        <p>Let <var>overall progress</var> be the result of calculating <code><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#active-time\" id=\"ref-for-active-time①④\">active time</a> / <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#iteration-duration\" id=\"ref-for-iteration-duration①⑤\">iteration duration</a></code>.</p>\n      </dd></dl>\n     </div>"
        },
        {
          "html": "<p>Return the result of calculating <code><var>overall progress</var> + <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#iteration-start\" id=\"ref-for-iteration-start⑧\">iteration start</a></code>.</p>"
        }
      ]
    },
    {
      "name": "pause an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#pause-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pause-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pause an animation</dfn>, <var>animation</var>,\n    is as follows:",
      "rationale": "if",
      "steps": [
        {
          "html": "<p>If the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#overall-progress\" id=\"ref-for-overall-progress②\">overall progress</a> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved⑨⑧\">unresolved</a>,\n  return <span id=\"ref-for-unresolved⑨⑨\">unresolved</span>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#overall-progress\" id=\"ref-for-overall-progress③\">overall progress</a> is infinity,\n  let the <var>simple iteration progress</var> be <code><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#iteration-start\" id=\"ref-for-iteration-start⑨\">iteration start</a> % 1.0</code>;\n  otherwise,\n  let the <var>simple iteration progress</var> be <code><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#overall-progress\" id=\"ref-for-overall-progress④\">overall progress</a> % 1.0</code>.</p>"
        },
        {
          "html": "<p>If <em>all</em> of the following conditions are true:</p>\n     <ul>\n      <li data-md=\"\">\n       <p>the <var>simple iteration progress</var> calculated above is zero, <em>and</em></p>\n      </li><li data-md=\"\">\n       <p>the animation effect is in the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-effect-active-phase\" id=\"ref-for-animation-effect-active-phase⑥\">active phase</a> <em>or</em> the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-effect-after-phase\" id=\"ref-for-animation-effect-after-phase⑦\">after phase</a>, <em>and</em></p>\n      </li><li data-md=\"\">\n       <p>the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#active-time\" id=\"ref-for-active-time①⑤\">active time</a> is equal to the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#active-duration\" id=\"ref-for-active-duration①⑥\">active duration</a>, <em>and</em></p>\n      </li><li data-md=\"\">\n       <p>the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#iteration-count\" id=\"ref-for-iteration-count①⑤\">iteration count</a> is <em>not</em> equal to zero.</p>\n     </li></ul>\n     <p>Let the <var>simple iteration progress</var> be 1.0.</p>"
        },
        {
          "html": "<p>Return <var>simple iteration progress</var>.</p>"
        }
      ]
    },
    {
      "name": "pause an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#pause-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pause-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pause an animation</dfn>, <var>animation</var>,\n    is as follows:",
      "rationale": "if",
      "steps": [
        {
          "html": "<p>If the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#active-time\" id=\"ref-for-active-time①⑥\">active time</a> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved①⓪⓪\">unresolved</a>,\n  return <span id=\"ref-for-unresolved①⓪①\">unresolved</span>.</p>"
        },
        {
          "html": "<p>If the animation effect is in the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-effect-after-phase\" id=\"ref-for-animation-effect-after-phase⑧\">after phase</a> <em>and</em> the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#iteration-count\" id=\"ref-for-iteration-count①⑦\">iteration count</a> is infinity,\n  return infinity.</p>"
        },
        {
          "html": "<p>If the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#simple-iteration-progress\" id=\"ref-for-simple-iteration-progress②\">simple iteration progress</a> is 1.0,\n  return <code>floor(<a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#overall-progress\" id=\"ref-for-overall-progress⑤\">overall progress</a>) − 1</code>.</p>"
        },
        {
          "html": "<p>Otherwise, return <code>floor(<a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#overall-progress\" id=\"ref-for-overall-progress⑥\">overall progress</a>)</code>.</p>"
        }
      ]
    },
    {
      "name": "pause an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#pause-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pause-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pause an animation</dfn>, <var>animation</var>,\n    is as follows:",
      "rationale": "if",
      "steps": [
        {
          "html": "<p>If the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#simple-iteration-progress\" id=\"ref-for-simple-iteration-progress④\">simple iteration progress</a> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved①⓪②\">unresolved</a>,\n  return <span id=\"ref-for-unresolved①⓪③\">unresolved</span>.</p>"
        },
        {
          "html": "Calculate the <var>current direction</var> using the first matching condition from the following list:",
          "rationale": ".switch",
          "steps": [
            {
              "operation": "switch",
              "steps": [
                {
                  "case": "If playback direction is normal,",
                  "html": "<p>Let the <var>current direction</var> be forwards.</p>"
                },
                {
                  "case": "If playback direction is reverse,",
                  "html": "<p>Let the <var>current direction</var> be reverse.</p>"
                },
                {
                  "case": "Otherwise (the playback direction is alternate or alternate-reverse)p,",
                  "html": "",
                  "rationale": "let",
                  "steps": [
                    {
                      "html": "<p>Let <var>d</var> be the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#current-iteration-index\" id=\"ref-for-current-iteration-index⑤\">current iteration index</a>.</p>"
                    },
                    {
                      "html": "<p>If <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-direction\" id=\"ref-for-playback-direction⑥\">playback direction</a> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-direction-alternate-reverse\" id=\"ref-for-playback-direction-alternate-reverse①\">alternate-reverse</a> increment <var>d</var> by 1.</p>"
                    },
                    {
                      "html": "<p>If <code><var>d</var> % 2 == 0</code>,\n  let the <var>current direction</var> be forwards;\n  otherwise let the <var>current direction</var> be reverse.\n  If <var>d</var> is infinity,\n  let the <var>current direction</var> be forwards.</p>"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "html": "<p>If the <var>current direction</var> is forwards\n  then return the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#simple-iteration-progress\" id=\"ref-for-simple-iteration-progress⑤\">simple iteration progress</a>.</p>\n     <p>Otherwise, return <code>1.0 − <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#simple-iteration-progress\" id=\"ref-for-simple-iteration-progress⑥\">simple iteration progress</a></code>.</p>"
        }
      ]
    },
    {
      "name": "pause an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#pause-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pause-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pause an animation</dfn>, <var>animation</var>,\n    is as follows:",
      "rationale": "if",
      "steps": [
        {
          "html": "<p>If the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#directed-progress\" id=\"ref-for-directed-progress④\">directed progress</a> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved①⓪④\">unresolved</a>,\n  return <span id=\"ref-for-unresolved①⓪⑤\">unresolved</span>.</p>"
        },
        {
          "html": "Calculate the value of the <var>before flag</var> as follows:",
          "rationale": "determine",
          "steps": [
            {
              "html": "<p>Determine the <var>current direction</var> using\n  the procedure defined in <a href=\"https://drafts.csswg.org/web-animations-1/#calculating-the-directed-progress\">§ 4.7.6 Calculating the directed progress</a>.</p>"
            },
            {
              "html": "<p>If the <var>current direction</var> is <span class=\"prop-value\">forwards</span>,\n  let <var>going forwards</var> be true; otherwise it is false.</p>"
            },
            {
              "html": "<p>The <var>before flag</var> is set\n  if the animation effect is in the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-effect-before-phase\" id=\"ref-for-animation-effect-before-phase⑧\">before phase</a> and <var>going forwards</var> is true;\n  or if the animation effect is in the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-effect-after-phase\" id=\"ref-for-animation-effect-after-phase⑨\">after phase</a> and <var>going forwards</var> is false.</p>"
            }
          ]
        },
        {
          "html": "<p>Return the result of evaluating\n  the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-effect-effect-easing-function\" id=\"ref-for-animation-effect-effect-easing-function①\">effect easing function</a> passing <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#directed-progress\" id=\"ref-for-directed-progress⑤\">directed progress</a> as the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-easing-2/#easing-function-input-progress-value\" id=\"ref-for-easing-function-input-progress-value\">input progress value</a> and <var>before flag</var> as the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-easing-2/#easing-function-before-flag\" id=\"ref-for-easing-function-before-flag\">before flag</a>.</p>"
        }
      ]
    },
    {
      "name": "compute missing keyframe offsets",
      "href": "https://drafts.csswg.org/web-animations-1/#compute-missing-keyframe-offsets",
      "html": "To produce <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#computed-keyframe-offsets\" id=\"ref-for-computed-keyframe-offsets\">computed keyframe offsets</a>,\n    we define a procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"compute-missing-keyframe-offsets\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">compute missing keyframe offsets</dfn> that takes a sequence of <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe⑨\">keyframes</a>, <var>keyframes</var>,\n    and has the following steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>For each <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe①⓪\">keyframe</a> in <var>keyframes</var>,\nlet the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#computed-keyframe-offsets\" id=\"ref-for-computed-keyframe-offsets①\">computed keyframe offset</a> of the <span id=\"ref-for-keyframe①①\">keyframe</span> be equal to its <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe-offset\" id=\"ref-for-keyframe-offset⑤\">keyframe offset</a> value.</p>"
        },
        {
          "html": "<p>If <var>keyframes</var> contains more than one <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe①②\">keyframe</a> and the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#computed-keyframe-offsets\" id=\"ref-for-computed-keyframe-offsets②\">computed keyframe offset</a> of the first <span id=\"ref-for-keyframe①③\">keyframe</span> in <var>keyframes</var> is null,\nset the <span id=\"ref-for-computed-keyframe-offsets③\">computed keyframe offset</span> of the first <span id=\"ref-for-keyframe①④\">keyframe</span> to 0.</p>"
        },
        {
          "html": "<p>If the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#computed-keyframe-offsets\" id=\"ref-for-computed-keyframe-offsets④\">computed keyframe offset</a> of the last <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe①⑤\">keyframe</a> in <var>keyframes</var> is null,\nset its <span id=\"ref-for-computed-keyframe-offsets⑤\">computed keyframe offset</span> to 1.</p>"
        },
        {
          "html": "calculate the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#computed-keyframe-offsets\" id=\"ref-for-computed-keyframe-offsets⑧\">computed keyframe offset</a> of each <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe①⑧\">keyframe</a> between <var>A</var> and <var>B</var> as follows:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"offsetk\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">offset<sub><var>k</var></sub></dfn> be\nthe <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#computed-keyframe-offsets\" id=\"ref-for-computed-keyframe-offsets⑨\">computed keyframe offset</a> of a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe①⑨\">keyframe</a> <var>k</var>.</p>"
            },
            {
              "html": "<p>Let <var>n</var> be\nthe number of keyframes <em>between</em> and including <var>A</var> and <var>B</var> minus 1.</p>"
            },
            {
              "html": "<p>Let <var>index</var> refer to the position\nof <var>keyframe</var> in the sequence of keyframes between <var>A</var> and <var>B</var> such that the first keyframe after <var>A</var> has an <var>index</var> of 1.</p>"
            },
            {
              "html": "<p>Set the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#computed-keyframe-offsets\" id=\"ref-for-computed-keyframe-offsets①⓪\">computed keyframe offset</a> of <var>keyframe</var> to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#offsetk\" id=\"ref-for-offsetk\">offset</a><sub><var>A</var></sub> +\n(<span id=\"ref-for-offsetk①\">offset</span><sub><var>B</var></sub> − <span id=\"ref-for-offsetk②\">offset</span><sub><var>A</var></sub>)\n× <var>index</var> / <var>n</var>.</p>"
            }
          ]
        }
      ]
    },
    {
      "name": "pause an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#pause-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pause-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pause an animation</dfn>, <var>animation</var>,\n    is as follows:",
      "rationale": "let",
      "steps": [
        {
          "html": "<p>Let <var>computed keyframes</var> be an empty list of <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe②⓪\">keyframes</a>.</p>"
        },
        {
          "html": "For each <var>keyframe</var> in the list of <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe②①\">keyframes</a> specified on this <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe-effect\" id=\"ref-for-keyframe-effect⑨\">keyframe effect</a>,\n  perform the following steps:",
          "rationale": "add",
          "steps": [
            {
              "html": "<p>Add a new empty <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe②②\">keyframe</a>, <var>computed keyframe</var>,\n  to <var>computed keyframes</var>.</p>"
            },
            {
              "html": "If conflicts arise when expanding shorthand properties\n  or replacing logical properties with physical properties,\n  apply the following rules in order until the conflict is resolved:",
              "rationale": "for",
              "steps": [
                {
                  "html": "<p>Longhand properties override shorthand properties\n  (e.g. <a class=\"property css\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-backgrounds-3/#propdef-border-top-color\" id=\"ref-for-propdef-border-top-color\">border-top-color</a> overrides <a class=\"property css\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-backgrounds-3/#propdef-border-top\" id=\"ref-for-propdef-border-top\">border-top</a>).</p>"
                },
                {
                  "html": "<p>Shorthand properties with fewer longhand components\n  override those with more longhand components\n  (e.g. <a class=\"property css\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-backgrounds-3/#propdef-border-top\" id=\"ref-for-propdef-border-top①\">border-top</a> overrides <a class=\"property css\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css-backgrounds-3/#propdef-border-color\" id=\"ref-for-propdef-border-color\">border-color</a>).</p>"
                },
                {
                  "html": "<p>Physical properties override logical properties.</p>"
                },
                {
                  "html": "<p>For shorthand properties with an equal number of longhand components,\n  properties whose IDL name\n  (see the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/cssom/#css-property-to-idl-attribute\" id=\"ref-for-css-property-to-idl-attribute\">CSS property to IDL attribute</a> algorithm <a data-link-type=\"biblio\" href=\"https://drafts.csswg.org/web-animations-1/#biblio-cssom\" title=\"CSS Object Model (CSSOM)\">[CSSOM]</a>)\n  appears earlier when sorted in ascending order\n  by the Unicode codepoints that make up each IDL name,\n  override those who appear later.</p>"
                }
              ]
            }
          ]
        },
        {
          "html": "<p>Apply the procedure to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#compute-missing-keyframe-offsets\" id=\"ref-for-compute-missing-keyframe-offsets\">compute missing keyframe offsets</a> to <var>computed keyframes</var>.</p>"
        },
        {
          "html": "<p>Return <var>computed keyframes</var>.</p>"
        }
      ]
    },
    {
      "name": "pause an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#pause-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pause-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pause an animation</dfn>, <var>animation</var>,\n    is as follows:",
      "rationale": "if",
      "steps": [
        {
          "html": "<p>If <var>iteration progress</var> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#unresolved\" id=\"ref-for-unresolved①⓪⑥\">unresolved</a> abort this procedure.</p>"
        },
        {
          "html": "<p>Let <var>target property</var> be the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-cascade-5/#longhand\" id=\"ref-for-longhand①\">longhand property</a> for which the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#effect-value\" id=\"ref-for-effect-value④\">effect value</a> is to be calculated.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-type\" id=\"ref-for-animation-type⑤\">animation type</a> of the <var>target property</var> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#not-animatable\" id=\"ref-for-not-animatable②\">not animatable</a> abort this procedure since the effect cannot be applied.</p>"
        },
        {
          "html": "<p>If the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe-effect\" id=\"ref-for-keyframe-effect①①\">keyframe effect</a> does not have an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe-effect-effect-target\" id=\"ref-for-keyframe-effect-effect-target⑧\">effect target</a>,\n  or if the <span id=\"ref-for-keyframe-effect-effect-target⑨\">effect target</span> cannot have computed property values calculated,\n  abort this procedure.</p>"
        },
        {
          "html": "<p>Define the <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"neutral-value-for-composition\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">neutral value for composition</dfn> as a value which, when combined with an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#underlying-value\" id=\"ref-for-underlying-value①\">underlying value</a> using the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#composite-operation-add\" id=\"ref-for-composite-operation-add\">add</a> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#composite-operation\" id=\"ref-for-composite-operation②\">composite operation</a>,\n  produces the <span id=\"ref-for-underlying-value②\">underlying value</span>.</p>"
        },
        {
          "html": "<p>Let <var>property-specific keyframes</var> be\n  the result of getting the set of <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#computed-keyframes\" id=\"ref-for-computed-keyframes①\">computed keyframes</a> for this <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe-effect\" id=\"ref-for-keyframe-effect①②\">keyframe effect</a>.</p>"
        },
        {
          "html": "<p>Remove any <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe②③\">keyframes</a> from <var>property-specific keyframes</var> that do not have a property value for <var>target property</var>.</p>"
        },
        {
          "html": "<p>If <var>property-specific keyframes</var> is empty,\n  return <var>underlying value</var>.</p>"
        },
        {
          "html": "<p>If there is no <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe②④\">keyframe</a> in <var>property-specific keyframes</var> with a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#computed-keyframe-offsets\" id=\"ref-for-computed-keyframe-offsets①①\">computed keyframe offset</a> of 0,\n  create a new <span id=\"ref-for-keyframe②⑤\">keyframe</span> with a <span id=\"ref-for-computed-keyframe-offsets①②\">computed keyframe offset</span> of 0,\n  a property value set to the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#neutral-value-for-composition\" id=\"ref-for-neutral-value-for-composition\">neutral value for composition</a>,\n  and a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#composite-operation\" id=\"ref-for-composite-operation③\">composite operation</a> of <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#composite-operation-add\" id=\"ref-for-composite-operation-add①\">add</a>,\n  and prepend it to the beginning of <var>property-specific keyframes</var>.</p>"
        },
        {
          "html": "<p>Similarly, if there is no <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe②⑥\">keyframe</a> in <var>property-specific keyframes</var> with a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#computed-keyframe-offsets\" id=\"ref-for-computed-keyframe-offsets①③\">computed keyframe offset</a> of 1,\n  create a new <span id=\"ref-for-keyframe②⑦\">keyframe</span> with a <span id=\"ref-for-computed-keyframe-offsets①④\">computed keyframe offset</span> of 1,\n  a property value set to the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#neutral-value-for-composition\" id=\"ref-for-neutral-value-for-composition①\">neutral value for composition</a>,\n  and a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#composite-operation\" id=\"ref-for-composite-operation④\">composite operation</a> of <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#composite-operation-add\" id=\"ref-for-composite-operation-add②\">add</a>,\n  and append it to the end of <var>property-specific keyframes</var>.</p>"
        },
        {
          "html": "<p>Let <var>interval endpoints</var> be an empty sequence of keyframes.</p>"
        },
        {
          "html": "Populate <var>interval endpoints</var> by following the steps\n  from the first matching condition below:",
          "rationale": ".switch",
          "steps": [
            {
              "operation": "switch",
              "steps": [
                {
                  "case": "If iteration progress < 0 and there is more than one keyframe in property-specific keyframes with a computed keyframe offset of 0,",
                  "html": "<p>Add the first <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe②⑨\">keyframe</a> in <var>property-specific keyframes</var> to <var>interval endpoints</var>.</p>"
                },
                {
                  "case": "If iteration progress ≥ 1 and there is more than one keyframe in property-specific keyframes with a computed keyframe offset of 1,",
                  "html": "<p>Add the last <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe③①\">keyframe</a> in <var>property-specific keyframes</var> to <var>interval endpoints</var>.</p>"
                },
                {
                  "case": "Otherwise,",
                  "html": "",
                  "rationale": "append",
                  "steps": [
                    {
                      "html": "<p>Append to <var>interval endpoints</var> the last <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe③②\">keyframe</a> in <var>property-specific keyframes</var> whose <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#computed-keyframe-offsets\" id=\"ref-for-computed-keyframe-offsets①⑦\">computed keyframe offset</a> is\n  less than or equal to <var>iteration progress</var> and less than 1.\n  If there is no such <span id=\"ref-for-keyframe③③\">keyframe</span> (because, for example, the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#iteration-progress\" id=\"ref-for-iteration-progress①⑤\">iteration progress</a> is negative),\n  add the last <span id=\"ref-for-keyframe③④\">keyframe</span> whose <span id=\"ref-for-computed-keyframe-offsets①⑧\">computed keyframe offset</span> is 0.</p>"
                    },
                    {
                      "html": "<p>Append to <var>interval endpoints</var> the next <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe③⑤\">keyframe</a> in <var>property-specific keyframes</var> after the one added in the previous step.</p>"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "html": "For each <var>keyframe</var> in <var>interval endpoints</var>:",
          "rationale": "if",
          "steps": [
            {
              "html": "If <var>keyframe</var> has a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#composite-operation\" id=\"ref-for-composite-operation⑤\">composite operation</a> that is <em>not</em> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#composite-operation-replace\" id=\"ref-for-composite-operation-replace\">replace</a>,\n  or <var>keyframe</var> has no <span id=\"ref-for-composite-operation⑥\">composite operation</span> and the <span id=\"ref-for-composite-operation⑦\">composite operation</span> of this <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe-effect\" id=\"ref-for-keyframe-effect①③\">keyframe effect</a> is <em>not</em> <span id=\"ref-for-composite-operation-replace①\">replace</span>,\n  then perform the following steps:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>composite operation to use</var> be\n  the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#composite-operation\" id=\"ref-for-composite-operation⑧\">composite operation</a> of <var>keyframe</var>,\n  or if it has none,\n  the <span id=\"ref-for-composite-operation⑨\">composite operation</span> of this <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe-effect\" id=\"ref-for-keyframe-effect①④\">keyframe effect</a>.</p>"
                },
                {
                  "html": "<p>Let <var>value to combine</var> be\n  the property value of <var>target property</var> specified on <var>keyframe</var>.</p>"
                },
                {
                  "html": "<p>Replace the property value of <var>target property</var> on <var>keyframe</var> with the result of combining <var>underlying value</var> (<var>V</var><sub>a</sub>) and <var>value to combine</var> (<var>V</var><sub>b</sub>)\n  using the procedure for the <var>composite operation to use</var> corresponding to the <var>target property</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-type\" id=\"ref-for-animation-type⑥\">animation type</a>.</p>"
                }
              ]
            }
          ]
        },
        {
          "html": "<p>If there is only one keyframe in <var>interval endpoints</var> return the property value of <var>target property</var> on that keyframe.</p>"
        },
        {
          "html": "<p>Let <var>start offset</var> be the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#computed-keyframe-offsets\" id=\"ref-for-computed-keyframe-offsets①⑨\">computed keyframe offset</a> of the first keyframe in <var>interval endpoints</var>.</p>"
        },
        {
          "html": "<p>Let <var>end offset</var> be the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#computed-keyframe-offsets\" id=\"ref-for-computed-keyframe-offsets②⓪\">computed keyframe offset</a> of last keyframe in <var>interval endpoints</var>.</p>"
        },
        {
          "html": "<p>Let <var>interval distance</var> be the result of evaluating <code>(<var>iteration progress</var> − <var>start offset</var>)\n        / (<var>end offset</var> − <var>start offset</var>)</code>.</p>"
        },
        {
          "html": "<p>Let <var>transformed distance</var> be the result of evaluating\n  the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-easing-2/#easing-function\" id=\"ref-for-easing-function⑦\">easing function</a> associated with\n  the first keyframe in <var>interval endpoints</var> passing <var>interval distance</var> as the input progress.</p>"
        },
        {
          "html": "<p>Return the result of applying\n  the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-values-4/#interpolation\" id=\"ref-for-interpolation①\">interpolation procedure</a> defined\n  by the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-type\" id=\"ref-for-animation-type⑦\">animation type</a> of the <var>target property</var> to the values of the <var>target property</var> specified on the two keyframes in <var>interval endpoints</var>,\n  taking the first such value as <var>V</var><sub>start</sub> and the second as <var>V</var><sub>end</sub> and using <var>transformed distance</var> as the interpolation parameter <var>p</var>.</p>"
        }
      ]
    },
    {
      "name": "pause an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#pause-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pause-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pause an animation</dfn>, <var>animation</var>,\n    is as follows:",
      "rationale": "sort",
      "steps": [
        {
          "html": "Sort <var>A</var> and <var>B</var> by applying the following conditions in turn\n  until the order is resolved,",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>A</var> and <var>B</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-effect-associated-animation\" id=\"ref-for-animation-effect-associated-animation①③\">associated animations</a> differ\n  by <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-class\" id=\"ref-for-animation-class②\">class</a>,\n  sort by any inter-class composite order\n  as defined for the corresponding classes.</p>"
            },
            {
              "html": "<p>If <var>A</var> and <var>B</var> are still not sorted,\n  sort by any <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-class\" id=\"ref-for-animation-class③\">class</a>-specific composite order\n  defined by the common class of <var>A</var> and <var>B</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-effect-associated-animation\" id=\"ref-for-animation-effect-associated-animation①④\">associated animations</a>.</p>"
            },
            {
              "html": "<p>If <var>A</var> and <var>B</var> are still not sorted,\n  sort by the position of their <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-effect-associated-animation\" id=\"ref-for-animation-effect-associated-animation①⑤\">associated animations</a> in the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#global-animation-list\" id=\"ref-for-global-animation-list\">global animation list</a>.</p>"
            }
          ]
        }
      ]
    },
    {
      "name": "pause an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#pause-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pause-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pause an animation</dfn>, <var>animation</var>,\n    is as follows:",
      "rationale": "establish",
      "steps": [
        {
          "html": "<p>Calculate the <var>base value</var> of the property\n  as the value generated for that property\n  by finding the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-cascade-5/#computed-value\" id=\"ref-for-computed-value⑦\">computed value</a> for that property\n  in the absence of animations.</p>"
        },
        {
          "html": "<p>Establish the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#effect-stack\" id=\"ref-for-effect-stack①⓪\">effect stack</a> for the property\n  (see <a href=\"https://drafts.csswg.org/web-animations-1/#the-effect-stack\">§ 5.4.2 The effect stack</a>).</p>"
        },
        {
          "html": "<p>Calculate the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#composited-value\" id=\"ref-for-composited-value③\">composited value</a> of the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#effect-stack\" id=\"ref-for-effect-stack①①\">effect stack</a> passing in the <var>base value</var> of the property\n  as the initial <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#underlying-value\" id=\"ref-for-underlying-value①②\">underlying value</a> (see <a href=\"https://drafts.csswg.org/web-animations-1/#calculating-the-result-of-an-effect-stack\">§ 5.4.3 Calculating the result of an effect stack</a>).</p>"
        },
        {
          "html": "<p>Insert the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#composited-value\" id=\"ref-for-composited-value④\">composited value</a> into the CSS cascade\n  at the level defined for the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-class\" id=\"ref-for-animation-class⑤\">class</a> of\n  the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#concept-animation\" id=\"ref-for-concept-animation⑤①\">animation</a> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-effect-associated-animation\" id=\"ref-for-animation-effect-associated-animation①⑦\">associated with</a> the effect at the top of the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#effect-stack\" id=\"ref-for-effect-stack①②\">effect stack</a> established for the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#target-property\" id=\"ref-for-target-property①②\">target property</a>.</p>"
        }
      ]
    },
    {
      "name": "pause an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#pause-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pause-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pause an animation</dfn>, <var>animation</var>,\n    is as follows:",
      "rationale": "set",
      "steps": [
        {
          "html": "<p>Set <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#replace-state\" id=\"ref-for-replace-state⑤\">replace state</a> to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#removed-replace-state\" id=\"ref-for-removed-replace-state③\">removed</a>.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-create\" id=\"ref-for-concept-event-create②\">Create</a> an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#animationplaybackevent\" id=\"ref-for-animationplaybackevent②\">AnimationPlaybackEvent</a></code>, <var>removeEvent</var>.</p>"
        },
        {
          "html": "<p>Set <var>removeEvent</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-type\" id=\"ref-for-dom-event-type②\">type</a></code> attribute to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#remove-event\" id=\"ref-for-remove-event\">remove</a>.</p>"
        },
        {
          "html": "<p>Set <var>removeEvent</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-animationplaybackevent-currenttime\" id=\"ref-for-dom-animationplaybackevent-currenttime②\">currentTime</a></code> attribute\n   to the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-current-time\" id=\"ref-for-animation-current-time⑤②\">current time</a> of <var>animation</var>.</p>"
        },
        {
          "html": "<p>Set <var>removeEvent</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-animationplaybackevent-timelinetime\" id=\"ref-for-dom-animationplaybackevent-timelinetime③\">timelineTime</a></code> attribute\n   to the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline-current-time\" id=\"ref-for-timeline-current-time①①\">current time</a> of the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline\" id=\"ref-for-timeline⑤③\">timeline</a> with which <var>animation</var> is associated.</p>"
        },
        {
          "html": "<p>If <var>animation</var> has a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-document-for-timing\" id=\"ref-for-animation-document-for-timing⑤\">document for timing</a>,\n   then append <var>removeEvent</var> to its <span id=\"ref-for-animation-document-for-timing⑥\">document for timing</span>'s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#pending-animation-event-queue\" id=\"ref-for-pending-animation-event-queue④\">pending animation event queue</a> along with its target, <var>animation</var>.\n   For the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#scheduled-event-time\" id=\"ref-for-scheduled-event-time⑥\">scheduled event time</a>,\n   use the result of applying the procedure to convert <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline-time-to-origin-relative-time\" id=\"ref-for-timeline-time-to-origin-relative-time④\">timeline time to origin-relative time</a> to the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline-current-time\" id=\"ref-for-timeline-current-time①②\">current time</a> of the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#timeline\" id=\"ref-for-timeline⑤④\">timeline</a> with which <var>animation</var> is associated.</p>\n     <p>Otherwise, <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task②\">queue a task</a> to <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-dispatch\" id=\"ref-for-concept-event-dispatch③\">dispatch</a> <var>removeEvent</var> at <var>animation</var>.\n   The task source for this task is\n   the <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source\" id=\"ref-for-dom-manipulation-task-source②\">DOM manipulation task source</a>.</p>"
        }
      ]
    },
    {
      "name": "pause an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#pause-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pause-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pause an animation</dfn>, <var>animation</var>,\n    is as follows:",
      "rationale": "let",
      "steps": [
        {
          "html": "<p>Let <var>animation</var> be a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#animation\" id=\"ref-for-animation⑤\">Animation</a></code> object.</p>"
        },
        {
          "html": "<p>Run the procedure to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-set-the-timeline-of-an-animation\" id=\"ref-for-animation-set-the-timeline-of-an-animation\">set the timeline of an animation</a> on <var>animation</var> passing <var>timeline</var> as the <var>new timeline</var>;\n  or, if the <var>timeline</var> argument is missing,\n  passing the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#document-default-document-timeline\" id=\"ref-for-document-default-document-timeline⑥\">default document timeline</a> of the <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://html.spec.whatwg.org/#document\" id=\"ref-for-document⑨\">Document</a></code> <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/browsers.html#concept-document-window\" id=\"ref-for-concept-document-window①\">associated</a> with the <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window\" id=\"ref-for-window①\">Window</a></code> that is the <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#current-global-object\" id=\"ref-for-current-global-object③\">current global object</a>.</p>"
        },
        {
          "html": "<p>Run the procedure to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-set-the-associated-effect-of-an-animation\" id=\"ref-for-animation-set-the-associated-effect-of-an-animation①\">set the associated effect of an animation</a> on <var>animation</var> passing <var>source</var> as the <var>new effect</var>.</p>"
        }
      ]
    },
    {
      "name": "commit computed styles",
      "href": "https://drafts.csswg.org/web-animations-1/#commit-computed-styles",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"commit-computed-styles\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">commit computed styles</dfn> for an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#concept-animation\" id=\"ref-for-concept-animation⑦⓪\">animation</a>, <var>animation</var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>targets</var> be the <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ordered-set\" id=\"ref-for-ordered-set\">set</a> of all <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe-effect-effect-target\" id=\"ref-for-keyframe-effect-effect-target①⑤\">effect targets</a> for <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-effect\" id=\"ref-for-animation-effect⑧②\">animation effects</a> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-effect-associated-animation\" id=\"ref-for-animation-effect-associated-animation②⓪\">associated</a> with <var>animation</var>.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate\">For each</a> <var>target</var> in <var>targets</var>:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>target</var> is not an element capable of having\na <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-style-attr/#style-attribute\" id=\"ref-for-style-attribute\">style attribute</a> <a data-link-type=\"biblio\" href=\"https://drafts.csswg.org/web-animations-1/#biblio-css-style-attr\" title=\"CSS Style Attributes\">[CSS-STYLE-ATTR]</a> (for example, it is a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/selectors-4/#pseudo-element\" id=\"ref-for-pseudo-element⑤\">pseudo-element</a> or is an element in a document format\n for which style attributes are not defined) <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#nomodificationallowederror\" id=\"ref-for-nomodificationallowederror\">NoModificationAllowedError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑦\">DOMException</a></code> and abort these steps.</p>"
            },
            {
              "html": "<p>If, after applying any pending style changes, <var>target</var> is not <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/browsers.html#being-rendered\" id=\"ref-for-being-rendered\">being rendered</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑤\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑧\">DOMException</a></code> and abort these steps.</p>"
            },
            {
              "html": "<p>Let <var>inline style</var> be the result\nof getting the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/cssom-1/#css-declaration-block\" id=\"ref-for-css-declaration-block\">CSS declaration block</a> corresponding to <var>target</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-style-attr/#style-attribute\" id=\"ref-for-style-attribute①\">style attribute</a>.\nIf <var>target</var> does not <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-element-attribute-has\" id=\"ref-for-concept-element-attribute-has\">have</a> a <span id=\"ref-for-style-attribute②\">style attribute</span>,\nlet <var>inline style</var> be a new empty <span id=\"ref-for-css-declaration-block①\">CSS declaration block</span> with the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/cssom-1/#cssstyledeclaration-owner-node\" id=\"ref-for-cssstyledeclaration-owner-node\">owner node</a> set to <var>target</var>.</p>"
            },
            {
              "html": "<p>Let <var>targeted properties</var> be the <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ordered-set\" id=\"ref-for-ordered-set①\">set</a> of physical longhand properties\nthat are a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#target-property\" id=\"ref-for-target-property①⑥\">target property</a> for at least one <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-effect\" id=\"ref-for-animation-effect⑧③\">animation effect</a> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-effect-associated-animation\" id=\"ref-for-animation-effect-associated-animation②①\">associated</a> with <var>animation</var> whose <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe-effect-effect-target\" id=\"ref-for-keyframe-effect-effect-target①⑥\">effect target</a> is <var>target</var>.</p>"
            },
            {
              "html": "For each property, <var>property</var>, in <var>targeted properties</var>:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>partialEffectStack</var> be a copy of the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#effect-stack\" id=\"ref-for-effect-stack①④\">effect stack</a> for <var>property</var> on <var>target</var>.</p>"
                },
                {
                  "html": "<p>If <var>animation</var>’s <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#replace-state\" id=\"ref-for-replace-state⑨\">replace state</a> is <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#removed-replace-state\" id=\"ref-for-removed-replace-state⑥\">removed</a>,\nadd all <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-effect\" id=\"ref-for-animation-effect⑧④\">animation effects</a> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-effect-associated-animation\" id=\"ref-for-animation-effect-associated-animation②②\">associated</a> with <var>animation</var> whose <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe-effect-effect-target\" id=\"ref-for-keyframe-effect-effect-target①⑦\">effect target</a> is <var>target</var> and that include <var>property</var> as a <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#target-property\" id=\"ref-for-target-property①⑦\">target property</a> to <var>partialEffectStack</var>.</p>"
                },
                {
                  "html": "<p>Remove from <var>partialEffectStack</var> any <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-effect\" id=\"ref-for-animation-effect⑧⑤\">animation effects</a> whose <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-effect-associated-animation\" id=\"ref-for-animation-effect-associated-animation②③\">associated</a> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#concept-animation\" id=\"ref-for-concept-animation⑦①\">animation</a> has a higher <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-composite-order\" id=\"ref-for-animation-composite-order②\">composite order</a> than <var>animation</var>.</p>"
                },
                {
                  "html": "<p>Let <var>effect value</var> be the result of calculating\nthe result of <var>partialEffectStack</var> for <var>property</var> using <var>target</var>’s computed style\n(see <a href=\"https://drafts.csswg.org/web-animations-1/#calculating-the-result-of-an-effect-stack\">§ 5.4.3 Calculating the result of an effect stack</a>).</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/cssom-1/#set-a-css-declaration\" id=\"ref-for-set-a-css-declaration\">Set a CSS declaration</a> of <var>property</var> for <var>effect value</var> in <var>inline style</var>.</p>"
                }
              ]
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/cssom-1/#update-style-attribute-for\" id=\"ref-for-update-style-attribute-for\">Update style attribute for</a> <var>inline style</var>.</p>"
            }
          ]
        }
      ]
    },
    {
      "name": "pause an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#pause-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pause-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pause an animation</dfn>, <var>animation</var>,\n    is as follows:",
      "rationale": ".switch",
      "steps": [
        {
          "operation": "switch",
          "steps": [
            {
              "case": "If the animation effect to which the fill mode is being applied is a keyframe effect,",
              "html": "<p>Use <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#fill-mode-none\" id=\"ref-for-fill-mode-none①\">none</a> as the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#fill-mode\" id=\"ref-for-fill-mode①④\">fill mode</a>.</p>"
            },
            {
              "case": "Otherwise,",
              "html": "<p>Use <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#fill-mode-both\" id=\"ref-for-fill-mode-both③\">both</a> as the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#fill-mode\" id=\"ref-for-fill-mode①⑤\">fill mode</a>.</p>"
            }
          ]
        }
      ]
    },
    {
      "name": "pause an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#pause-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pause-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pause an animation</dfn>, <var>animation</var>,\n    is as follows:",
      "rationale": "if",
      "steps": [
        {
          "html": "<p>If the <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-effecttiming-iterationstart\" id=\"ref-for-dom-effecttiming-iterationstart④\">iterationStart</a></code> member of <var>input</var> <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists②\">exists</a> and is less than zero, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦\">throw</a> a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror\">TypeError</a></code> and abort this procedure.</p>"
        },
        {
          "html": "<p>If the <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-effecttiming-iterations\" id=\"ref-for-dom-effecttiming-iterations③\">iterations</a></code> member of <var>input</var> <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists③\">exists</a>,\n  and is less than zero or is the value <code class=\"esvalue\">NaN</code>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧\">throw</a> a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror②\">TypeError</a></code> and abort this procedure.</p>"
        },
        {
          "html": "<p>If the <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-effecttiming-duration\" id=\"ref-for-dom-effecttiming-duration⑤\">duration</a></code> member of <var>input</var> <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists④\">exists</a>,\n  and is less than zero or is the value <code class=\"esvalue\">NaN</code>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨\">throw</a> a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror③\">TypeError</a></code> and abort this procedure.</p>"
        },
        {
          "html": "<p>If the <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-effecttiming-easing\" id=\"ref-for-dom-effecttiming-easing①\">easing</a></code> member of <var>input</var> <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists⑤\">exists</a> but cannot be parsed using the <a class=\"production css\" data-link-type=\"type\" href=\"https://drafts.csswg.org/css-easing-2/#typedef-easing-function\" id=\"ref-for-typedef-easing-function①\" title=\"Expands to: linear\">&lt;easing-function&gt;</a> production <a data-link-type=\"biblio\" href=\"https://drafts.csswg.org/web-animations-1/#biblio-css-easing-1\" title=\"CSS Easing Functions Level 1\">[CSS-EASING-1]</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪\">throw</a> a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror④\">TypeError</a></code> and abort this procedure.</p>"
        },
        {
          "html": "<p>Assign each member that <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#map-exists\" id=\"ref-for-map-exists⑥\">exists</a> in <var>input</var> to the corresponding timing property of <var>effect</var> as follows:</p>\n     <ul>\n      <li data-md=\"\">\n       <p><code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-effecttiming-delay\" id=\"ref-for-dom-effecttiming-delay①\">delay</a></code> → <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#start-delay\" id=\"ref-for-start-delay①⑦\">start delay</a></p>\n      </li><li data-md=\"\">\n       <p><code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-effecttiming-enddelay\" id=\"ref-for-dom-effecttiming-enddelay①\">endDelay</a></code> → <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#end-delay\" id=\"ref-for-end-delay⑤\">end delay</a></p>\n      </li><li data-md=\"\">\n       <p><code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-effecttiming-fill\" id=\"ref-for-dom-effecttiming-fill③\">fill</a></code> → <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#fill-mode\" id=\"ref-for-fill-mode①⑧\">fill mode</a></p>\n      </li><li data-md=\"\">\n       <p><code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-effecttiming-iterationstart\" id=\"ref-for-dom-effecttiming-iterationstart⑤\">iterationStart</a></code> → <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#iteration-start\" id=\"ref-for-iteration-start①①\">iteration start</a></p>\n      </li><li data-md=\"\">\n       <p><code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-effecttiming-iterations\" id=\"ref-for-dom-effecttiming-iterations④\">iterations</a></code> → <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#iteration-count\" id=\"ref-for-iteration-count①⑨\">iteration count</a></p>\n      </li><li data-md=\"\">\n       <p><code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-effecttiming-duration\" id=\"ref-for-dom-effecttiming-duration⑥\">duration</a></code> → <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#iteration-duration\" id=\"ref-for-iteration-duration①⑧\">iteration duration</a></p>\n      </li><li data-md=\"\">\n       <p><code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-effecttiming-direction\" id=\"ref-for-dom-effecttiming-direction①\">direction</a></code> → <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-direction\" id=\"ref-for-playback-direction⑧\">playback direction</a></p>\n      </li><li data-md=\"\">\n       <p><code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-effecttiming-easing\" id=\"ref-for-dom-effecttiming-easing②\">easing</a></code> → <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-easing-2/#easing-function\" id=\"ref-for-easing-function⑨\">easing function</a></p>\n     </li></ul>"
        }
      ]
    },
    {
      "name": "pause an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#pause-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pause-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pause an animation</dfn>, <var>animation</var>,\n    is as follows:",
      "rationale": "create",
      "steps": [
        {
          "html": "<p>Create a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#keyframeeffect\" id=\"ref-for-keyframeeffect④\">KeyframeEffect</a></code> object, <var>effect</var>.</p>\n       <p></p>"
        },
        {
          "html": "<p>Set the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#effect-target-target-element\" id=\"ref-for-effect-target-target-element④\">target element</a> of <var>effect</var> to <var>target</var>.</p>"
        },
        {
          "html": "Set the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#effect-target-target-pseudo-selector\" id=\"ref-for-effect-target-target-pseudo-selector②\">target pseudo-selector</a> to the result\n  corresponding to the first matching condition below:",
          "rationale": ".switch",
          "steps": [
            {
              "operation": "switch",
              "steps": [
                {
                  "case": "If options is a KeyframeEffectOptions object with a pseudoElement property,",
                  "html": "<p>Set the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#effect-target-target-pseudo-selector\" id=\"ref-for-effect-target-target-pseudo-selector③\">target pseudo-selector</a> to the value of\n  the <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-keyframeeffectoptions-pseudoelement\" id=\"ref-for-dom-keyframeeffectoptions-pseudoelement①\">pseudoElement</a></code> property.</p>\n          <p>When assigning this property,\n  the error-handling defined for\n  the <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-keyframeeffect-pseudoelement\" id=\"ref-for-dom-keyframeeffect-pseudoelement①\">pseudoElement</a></code> setter on the interface\n  is applied.\n  If the setter requires an exception to be thrown,\n  this procedure must throw the same exception\n  and abort all further steps.</p>"
                },
                {
                  "case": "Otherwise,",
                  "html": "<p>Set the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#effect-target-target-pseudo-selector\" id=\"ref-for-effect-target-target-pseudo-selector④\">target pseudo-selector</a> to <code>null</code>.</p>"
                }
              ]
            }
          ]
        },
        {
          "html": "<p>Let <var>timing input</var> be the result\n  corresponding to the first matching condition below:</p>\n        <dl>\n         <dt data-md=\"\">If <var>options</var> is a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dictdef-keyframeeffectoptions\" id=\"ref-for-dictdef-keyframeeffectoptions②\">KeyframeEffectOptions</a></code> object,\n         </dt><dd data-md=\"\">\n          <p>Let <var>timing input</var> be <var>options</var>.</p>\n         </dd><dt data-md=\"\">Otherwise (if <var>options</var> is a <code>double</code>),\n         </dt><dd data-md=\"\">\n          <p>Let <var>timing input</var> be a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dictdef-effecttiming\" id=\"ref-for-dictdef-effecttiming①⓪\">EffectTiming</a></code> object\n  with all members set to their default values\n  and <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-effecttiming-duration\" id=\"ref-for-dom-effecttiming-duration⑦\">duration</a></code> set to <var>options</var>.</p>\n        </dd></dl>"
        },
        {
          "html": "<p>Call the procedure to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#update-the-timing-properties-of-an-animation-effect\" id=\"ref-for-update-the-timing-properties-of-an-animation-effect①\">update the timing properties of an animation effect</a> of <var>effect</var> from <var>timing input</var>.</p>\n        <p>If that procedure causes an exception to be thrown,\n  propagate the exception and abort this procedure.</p>"
        },
        {
          "html": "<p>If <var>options</var> is a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dictdef-keyframeeffectoptions\" id=\"ref-for-dictdef-keyframeeffectoptions③\">KeyframeEffectOptions</a></code> object,\n  assign the <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-keyframeeffect-composite\" id=\"ref-for-dom-keyframeeffect-composite①\">composite</a></code> property of <var>effect</var> to the corresponding value from <var>options</var>.</p>\n        <p>When assigning this property,\n  the error-handling defined for\n  the corresponding setter on the <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#keyframeeffect\" id=\"ref-for-keyframeeffect⑤\">KeyframeEffect</a></code> interface\n  is applied.\n  If the setter requires an exception to be thrown\n  for the value specified by <var>options</var>,\n  this procedure must <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①\">throw</a> the same exception\n  and abort all further steps.</p>"
        },
        {
          "html": "<p>Initialize the set of <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe④④\">keyframes</a> by performing the procedure\n  defined for <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-keyframeeffect-setkeyframes\" id=\"ref-for-dom-keyframeeffect-setkeyframes①\">setKeyframes()</a></code> passing <var>keyframes</var> as the input.</p>"
        }
      ]
    },
    {
      "name": "pause an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#pause-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pause-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pause an animation</dfn>, <var>animation</var>,\n    is as follows:",
      "rationale": "create",
      "steps": [
        {
          "html": "<p>Create a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#keyframeeffect\" id=\"ref-for-keyframeeffect⑦\">KeyframeEffect</a></code> object, <var>effect</var>.</p>"
        },
        {
          "html": "<p>Set the following properties of <var>effect</var> using the corresponding values of <var>source</var>:</p>\n        <ul>\n         <li data-md=\"\">\n          <p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe-effect-effect-target\" id=\"ref-for-keyframe-effect-effect-target①⑧\">effect target</a>,</p>\n         </li><li data-md=\"\">\n          <p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe④⑥\">keyframes</a>,</p>\n         </li><li data-md=\"\">\n          <p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#composite-operation\" id=\"ref-for-composite-operation①②\">composite operation</a>,\nand</p>\n         </li><li data-md=\"\">\n          <p>all specified timing properties:</p>\n          <ul>\n           <li data-md=\"\">\n            <p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#start-delay\" id=\"ref-for-start-delay①⑧\">start delay</a>,</p>\n           </li><li data-md=\"\">\n            <p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#end-delay\" id=\"ref-for-end-delay⑦\">end delay</a>,</p>\n           </li><li data-md=\"\">\n            <p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#fill-mode\" id=\"ref-for-fill-mode①⑨\">fill mode</a>,</p>\n           </li><li data-md=\"\">\n            <p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#iteration-start\" id=\"ref-for-iteration-start①②\">iteration start</a>,</p>\n           </li><li data-md=\"\">\n            <p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#iteration-count\" id=\"ref-for-iteration-count②⓪\">iteration count</a>,</p>\n           </li><li data-md=\"\">\n            <p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#iteration-duration\" id=\"ref-for-iteration-duration②⓪\">iteration duration</a>,</p>\n           </li><li data-md=\"\">\n            <p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#playback-direction\" id=\"ref-for-playback-direction⑨\">playback direction</a>,\nand</p>\n           </li><li data-md=\"\">\n            <p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-easing-2/#easing-function\" id=\"ref-for-easing-function①⓪\">easing function</a>.</p>\n          </li></ul>\n        </li></ul>"
        }
      ]
    },
    {
      "name": "pause an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#pause-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pause-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pause an animation</dfn>, <var>animation</var>,\n    is as follows:",
      "rationale": "if",
      "steps": [
        {
          "html": "<p>Given the value <var>value</var>, perform the following steps:</p>"
        },
        {
          "html": "If <var>value</var> is not <code>null</code> and is an <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/selectors-4/#invalid-selector\" id=\"ref-for-invalid-selector\">invalid</a> <a class=\"production css\" data-link-type=\"type\" href=\"https://drafts.csswg.org/selectors-4/#typedef-pseudo-element-selector\" id=\"ref-for-typedef-pseudo-element-selector\">&lt;pseudo-element-selector&gt;</a>,",
          "rationale": "throw",
          "steps": [
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①②\">Throw</a> a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑨\">DOMException</a></code> with error name \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#syntaxerror\" id=\"ref-for-syntaxerror\">SyntaxError</a></code>\".</p>"
            },
            {
              "html": "<p>Abort.</p>"
            }
          ]
        },
        {
          "html": "<p>If <var>value</var> is one of the legacy Selectors Level 2 single-colon selectors\n  (':before', ':after', ':first-letter', or ':first-line'), then\n  return the equivalent two-colon selector (e.g. '::before').</p>"
        },
        {
          "html": "<p>Otherwise, return <var>value</var>.</p>"
        }
      ]
    },
    {
      "name": "pause an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#pause-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pause-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pause an animation</dfn>, <var>animation</var>,\n    is as follows:",
      "rationale": "let",
      "steps": [
        {
          "html": "<p>Let <var>result</var> be an empty sequence of objects.</p>"
        },
        {
          "html": "<p>Let <var>keyframes</var> be one of the following:</p>\n        <dl>\n         <dt data-md=\"\">If this <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe-effect\" id=\"ref-for-keyframe-effect③⑦\">keyframe effect</a> is associated with a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/css-animations-2/#cssanimation\" id=\"ref-for-cssanimation\">CSSAnimation</a></code>,\n  and its <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe⑤①\">keyframes</a> have not been replaced\n  by a successful call to <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-keyframeeffect-setkeyframes\" id=\"ref-for-dom-keyframeeffect-setkeyframes②\">setKeyframes()</a></code>,\n         </dt><dd data-md=\"\">\n          <p>the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#computed-keyframes\" id=\"ref-for-computed-keyframes④\">computed keyframes</a> for this <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe-effect\" id=\"ref-for-keyframe-effect③⑧\">keyframe effect</a>.</p>\n         </dd><dt data-md=\"\">Otherwise,\n         </dt><dd data-md=\"\">\n          <p>the result of applying the procedure <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#compute-missing-keyframe-offsets\" id=\"ref-for-compute-missing-keyframe-offsets②\">compute missing keyframe offsets</a> to the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe⑤②\">keyframes</a> for this <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe-effect\" id=\"ref-for-keyframe-effect③⑨\">keyframe effect</a>.</p>\n        </dd></dl>"
        },
        {
          "html": "For each <var>keyframe</var> in <var>keyframes</var> perform the following steps:",
          "rationale": "initialize",
          "steps": [
            {
              "html": "<p>Initialize a dictionary object, <var>output keyframe</var>,\n  using the following definition:</p>\n<pre class=\"idl highlight def\"><c- b=\"\">dictionary</c-> <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-type=\"dictionary\" data-export=\"\" id=\"dictdef-basecomputedkeyframe\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code><c- g=\"\">BaseComputedKeyframe</c-></code></dfn> {\n     <a class=\"idl-code\" data-link-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-double\" id=\"ref-for-idl-double②②\"><c- b=\"\">double</c-></a>?                  <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-default=\"null\" data-dfn-for=\"BaseComputedKeyframe\" data-dfn-type=\"dict-member\" data-export=\"\" data-type=\"double?\" id=\"dom-basecomputedkeyframe-offset\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code><c- g=\"\">offset</c-></code></dfn> = <c- b=\"\">null</c->;\n     <a class=\"idl-code\" data-link-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-double\" id=\"ref-for-idl-double②③\"><c- b=\"\">double</c-></a>                   <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"BaseComputedKeyframe\" data-dfn-type=\"dict-member\" data-export=\"\" data-type=\"double\" id=\"dom-basecomputedkeyframe-computedoffset\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code><c- g=\"\">computedOffset</c-></code></dfn>;\n     <a class=\"idl-code\" data-link-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMString\" id=\"ref-for-idl-DOMString⑦\"><c- b=\"\">DOMString</c-></a>                <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-default=\"&quot;linear&quot;\" data-dfn-for=\"BaseComputedKeyframe\" data-dfn-type=\"dict-member\" data-export=\"\" data-type=\"DOMString\" id=\"dom-basecomputedkeyframe-easing\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code><c- g=\"\">easing</c-></code></dfn> = \"linear\";\n     <a data-link-type=\"idl-name\" href=\"https://drafts.csswg.org/web-animations-1/#enumdef-compositeoperationorauto\" id=\"ref-for-enumdef-compositeoperationorauto\"><c- n=\"\">CompositeOperationOrAuto</c-></a> <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-default=\"&quot;auto&quot;\" data-dfn-for=\"BaseComputedKeyframe\" data-dfn-type=\"dict-member\" data-export=\"\" data-type=\"CompositeOperationOrAuto\" id=\"dom-basecomputedkeyframe-composite\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code><c- g=\"\">composite</c-></code></dfn> = \"auto\";\n};\n</pre>"
            },
            {
              "html": "<p>Set the <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-basecomputedkeyframe-offset\" id=\"ref-for-dom-basecomputedkeyframe-offset\">offset</a></code>, <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-basecomputedkeyframe-computedoffset\" id=\"ref-for-dom-basecomputedkeyframe-computedoffset\">computedOffset</a></code>, <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-basecomputedkeyframe-easing\" id=\"ref-for-dom-basecomputedkeyframe-easing\">easing</a></code>,\n  and <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-basecomputedkeyframe-composite\" id=\"ref-for-dom-basecomputedkeyframe-composite\">composite</a></code> members of <var>output keyframe</var> to the respective <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe-offset\" id=\"ref-for-keyframe-offset⑦\">keyframe offset</a>, <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#computed-keyframe-offsets\" id=\"ref-for-computed-keyframe-offsets②⑤\">computed keyframe offset</a>,\n  keyframe-specific <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-easing-2/#easing-function\" id=\"ref-for-easing-function①②\">easing function</a>,\n  and <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe-specific-composite-operation\" id=\"ref-for-keyframe-specific-composite-operation②\">keyframe-specific composite operation</a> values of <var>keyframe</var>.</p>"
            },
            {
              "html": "For each animation property-value pair <var>declaration</var> in <var>keyframe</var>,\n  perform the following steps:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>property name</var> be the result of applying the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-property-name-to-idl-attribute-name\" id=\"ref-for-animation-property-name-to-idl-attribute-name\">animation property name to IDL attribute name</a> algorithm\n  to the property name of <var>declaration</var>.</p>"
                },
                {
                  "html": "<p>Let <var>IDL value</var> be the result\n  of serializing the property value of <var>declaration</var> by passing <var>declaration</var> to\n  the algorithm to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/cssom/#serialize-a-css-value\" id=\"ref-for-serialize-a-css-value\">serialize a CSS value</a> <a data-link-type=\"biblio\" href=\"https://drafts.csswg.org/web-animations-1/#biblio-cssom\" title=\"CSS Object Model (CSSOM)\">[CSSOM]</a>.</p>"
                },
                {
                  "html": "<p>Let <var>value</var> be the result of <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#DOMString-to-es\" id=\"ref-for-DOMString-to-es\">converting</a> <var>IDL value</var> to an ECMAScript String value.</p>"
                },
                {
                  "html": "<p>Call the <a data-link-type=\"dfn\" href=\"http://www.ecma-international.org/ecma-262/6.0/#sec-ordinary-object-internal-methods-and-internal-slots-defineownproperty-p-desc\" id=\"ref-for-sec-ordinary-object-internal-methods-and-internal-slots-defineownproperty-p-desc\">[[DefineOwnProperty]]</a> internal method\n  on <var>output keyframe</var> with property name <var>property name</var>,\n  Property Descriptor {\n    [[Writable]]: <span class=\"esvalue\">true</span>,\n    [[Enumerable]]: <span class=\"esvalue\">true</span>,\n    [[Configurable]]: <span class=\"esvalue\">true</span>,\n    [[Value]]: <var>value</var> }\n  and Boolean flag <span class=\"esvalue\">false.</span></p>"
                }
              ]
            },
            {
              "html": "<p>Append <var>output keyframe</var> to <var>result</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>result</var>.</p>"
        }
      ]
    },
    {
      "name": "animation property name to IDL attribute name",
      "href": "https://drafts.csswg.org/web-animations-1/#animation-property-name-to-idl-attribute-name",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"animation-property-name-to-idl-attribute-name\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">animation property name to IDL attribute name</dfn> algorithm\n    for <var>property</var> is as follows:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>property</var> follows the <a class=\"production css\" data-link-type=\"type\" href=\"https://drafts.csswg.org/css-variables-2/#typedef-custom-property-name\" id=\"ref-for-typedef-custom-property-name\">&lt;custom-property-name&gt;</a> production,\nreturn <var>property</var>.</p>"
        },
        {
          "html": "<p>If <var>property</var> refers to the CSS <a class=\"property css\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css2/#propdef-float\" id=\"ref-for-propdef-float\">float</a> property,\nreturn the string \"cssFloat\".</p>"
        },
        {
          "html": "<p>If <var>property</var> refers to the CSS <a class=\"property css\" data-link-type=\"property\" href=\"https://drafts.fxtf.org/motion-1/#propdef-offset\" id=\"ref-for-propdef-offset\">offset</a> property,\nreturn the string \"cssOffset\".</p>"
        },
        {
          "html": "<p>Otherwise, return the result of applying\nthe <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/cssom/#css-property-to-idl-attribute\" id=\"ref-for-css-property-to-idl-attribute①\">CSS property to IDL attribute</a> algorithm <a data-link-type=\"biblio\" href=\"https://drafts.csswg.org/web-animations-1/#biblio-cssom\" title=\"CSS Object Model (CSSOM)\">[CSSOM]</a> to <var>property</var>.</p>"
        }
      ]
    },
    {
      "name": "IDL attribute name to animation property name",
      "href": "https://drafts.csswg.org/web-animations-1/#idl-attribute-name-to-animation-property-name",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"idl-attribute-name-to-animation-property-name\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">IDL attribute name to animation property name</dfn> algorithm\n    for <var>attribute</var> is as follows:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>attribute</var> conforms to the <a class=\"production css\" data-link-type=\"type\" href=\"https://drafts.csswg.org/css-variables-2/#typedef-custom-property-name\" id=\"ref-for-typedef-custom-property-name①\">&lt;custom-property-name&gt;</a> production,\nreturn <var>attribute</var>.</p>"
        },
        {
          "html": "<p>If <var>attribute</var> is the string \"cssFloat\", then return\nan animation property representing the CSS <a class=\"property css\" data-link-type=\"property\" href=\"https://drafts.csswg.org/css2/#propdef-float\" id=\"ref-for-propdef-float①\">float</a> property.</p>"
        },
        {
          "html": "<p>If <var>attribute</var> is the string \"cssOffset\", then return\nan animation property representing the CSS <a class=\"property css\" data-link-type=\"property\" href=\"https://drafts.fxtf.org/motion-1/#propdef-offset\" id=\"ref-for-propdef-offset①\">offset</a> property.</p>"
        },
        {
          "html": "<p>Otherwise, return the result of applying\nthe <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/cssom/#idl-attribute-to-css-property\" id=\"ref-for-idl-attribute-to-css-property\">IDL attribute to CSS property</a> algorithm <a data-link-type=\"biblio\" href=\"https://drafts.csswg.org/web-animations-1/#biblio-cssom\" title=\"CSS Object Model (CSSOM)\">[CSSOM]</a> to <var>attribute</var>.</p>"
        }
      ]
    },
    {
      "name": "check the completion record",
      "href": "https://drafts.csswg.org/web-animations-1/#check-the-completion-record",
      "html": "The instruction <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"check-the-completion-record\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">check the completion record</dfn> of <var>result</var>,\n    where <var>result</var> is a <a data-link-type=\"dfn\" href=\"http://www.ecma-international.org/ecma-262/6.0/#sec-completion-record-specification-type\" id=\"ref-for-sec-completion-record-specification-type\">completion record</a> from calling an ECMAScript operation,\n    is equivalent to the following steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>result</var> is\nan <a data-link-type=\"dfn\" href=\"http://www.ecma-international.org/ecma-262/6.0/#sec-completion-record-specification-type\" id=\"ref-for-sec-completion-record-specification-type①\">abrupt completion</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①③\">throw</a> the exception contained in the [[value]] field of <var>result</var> and abort the procedure.</p>"
        },
        {
          "html": "<p>Replace <var>result</var> with\nthe value contained in the [[value]] field of <var>result</var>.</p>"
        }
      ]
    },
    {
      "name": "process a keyframe-like object",
      "href": "https://drafts.csswg.org/web-animations-1/#process-a-keyframe-like-object",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"process-a-keyframe-like-object\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">process a keyframe-like object</dfn> takes two arguments: \n    <ul>\n     <li data-md=\"\">\n      <p>an ECMAScript object, <var>keyframe input</var>, and</p>\n     </li><li data-md=\"\">\n      <p>an <var>allow lists</var> boolean flag</p>\n    </li></ul>\n    <p>and returns a map from either property names to DOMString values\n    if <var>allow lists</var> is false,\n    or from property names to sequences of DOMString values otherwise,\n    using the following procedure:</p>",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Run the procedure to <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#es-to-dictionary\" id=\"ref-for-es-to-dictionary\">convert an ECMAScript value to a dictionary type</a> <a data-link-type=\"biblio\" href=\"https://drafts.csswg.org/web-animations-1/#biblio-webidl\" title=\"Web IDL Standard\">[WEBIDL]</a> with <var>keyframe input</var> as the ECMAScript value,\nand the dictionary type depending on the value of the <var>allow lists</var> flag\nas follows:</p>\n      <div class=\"switch\">\n       <dl>\n        <dt data-md=\"\">If <var>allow lists</var> is true,\n        </dt><dd data-md=\"\">\n         <p>Use the following dictionary type:</p>\n<pre class=\"idl highlight def\"><c- b=\"\">dictionary</c-> <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-type=\"dictionary\" data-export=\"\" id=\"dictdef-basepropertyindexedkeyframe\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code><c- g=\"\">BasePropertyIndexedKeyframe</c-></code></dfn> {\n  (<a class=\"idl-code\" data-link-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-double\" id=\"ref-for-idl-double②④\"><c- b=\"\">double</c-></a>? <c- b=\"\">or</c-> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#idl-sequence\" id=\"ref-for-idl-sequence①\"><c- b=\"\">sequence</c-></a>&lt;<a class=\"idl-code\" data-link-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-double\" id=\"ref-for-idl-double②⑤\"><c- b=\"\">double</c-></a>?&gt;)                         <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-default=\"[]\" data-dfn-for=\"BasePropertyIndexedKeyframe\" data-dfn-type=\"dict-member\" data-export=\"\" data-type=\"(double? or sequence&lt;double?&gt;)\" id=\"dom-basepropertyindexedkeyframe-offset\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code><c- g=\"\">offset</c-></code></dfn> = [];\n  (<a class=\"idl-code\" data-link-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMString\" id=\"ref-for-idl-DOMString⑧\"><c- b=\"\">DOMString</c-></a> <c- b=\"\">or</c-> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#idl-sequence\" id=\"ref-for-idl-sequence②\"><c- b=\"\">sequence</c-></a>&lt;<a class=\"idl-code\" data-link-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMString\" id=\"ref-for-idl-DOMString⑨\"><c- b=\"\">DOMString</c-></a>&gt;)                     <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-default=\"[]\" data-dfn-for=\"BasePropertyIndexedKeyframe\" data-dfn-type=\"dict-member\" data-export=\"\" data-type=\"(DOMString or sequence&lt;DOMString&gt;)\" id=\"dom-basepropertyindexedkeyframe-easing\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code><c- g=\"\">easing</c-></code></dfn> = [];\n  (<a data-link-type=\"idl-name\" href=\"https://drafts.csswg.org/web-animations-1/#enumdef-compositeoperationorauto\" id=\"ref-for-enumdef-compositeoperationorauto①\"><c- n=\"\">CompositeOperationOrAuto</c-></a> <c- b=\"\">or</c-> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#idl-sequence\" id=\"ref-for-idl-sequence③\"><c- b=\"\">sequence</c-></a>&lt;<a data-link-type=\"idl-name\" href=\"https://drafts.csswg.org/web-animations-1/#enumdef-compositeoperationorauto\" id=\"ref-for-enumdef-compositeoperationorauto②\"><c- n=\"\">CompositeOperationOrAuto</c-></a>&gt;) <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-default=\"[]\" data-dfn-for=\"BasePropertyIndexedKeyframe\" data-dfn-type=\"dict-member\" data-export=\"\" data-type=\"(CompositeOperationOrAuto or sequence&lt;CompositeOperationOrAuto&gt;)\" id=\"dom-basepropertyindexedkeyframe-composite\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code><c- g=\"\">composite</c-></code></dfn> = [];\n};\n</pre>\n        </dd><dt data-md=\"\">Otherwise,\n        </dt><dd data-md=\"\">\n         <p>Use the following dictionary type:</p>\n<pre class=\"idl highlight def\"><c- b=\"\">dictionary</c-> <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-type=\"dictionary\" data-export=\"\" id=\"dictdef-basekeyframe\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code><c- g=\"\">BaseKeyframe</c-></code></dfn> {\n  <a class=\"idl-code\" data-link-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-double\" id=\"ref-for-idl-double②⑥\"><c- b=\"\">double</c-></a>?                  <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-default=\"null\" data-dfn-for=\"BaseKeyframe\" data-dfn-type=\"dict-member\" data-export=\"\" data-type=\"double?\" id=\"dom-basekeyframe-offset\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code><c- g=\"\">offset</c-></code></dfn> = <c- b=\"\">null</c->;\n  <a class=\"idl-code\" data-link-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMString\" id=\"ref-for-idl-DOMString①⓪\"><c- b=\"\">DOMString</c-></a>                <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-default=\"&quot;linear&quot;\" data-dfn-for=\"BaseKeyframe\" data-dfn-type=\"dict-member\" data-export=\"\" data-type=\"DOMString\" id=\"dom-basekeyframe-easing\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code><c- g=\"\">easing</c-></code></dfn> = \"linear\";\n  <a data-link-type=\"idl-name\" href=\"https://drafts.csswg.org/web-animations-1/#enumdef-compositeoperationorauto\" id=\"ref-for-enumdef-compositeoperationorauto③\"><c- n=\"\">CompositeOperationOrAuto</c-></a> <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-default=\"&quot;auto&quot;\" data-dfn-for=\"BaseKeyframe\" data-dfn-type=\"dict-member\" data-export=\"\" data-type=\"CompositeOperationOrAuto\" id=\"dom-basekeyframe-composite\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code><c- g=\"\">composite</c-></code></dfn> = \"auto\";\n};\n</pre>\n       </dd></dl>\n      </div>\n      <p>Store the result of this procedure as <var>keyframe output</var>.</p>"
        },
        {
          "html": "Build up a list of <var>animatable properties</var> as follows:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>animatable properties</var> be a list of property names\n(including shorthand properties\n that have longhand sub-properties that are animatable)\nthat can be animated by the UA.</p>"
            },
            {
              "html": "<p>Convert each property name in <var>animatable properties</var> to the equivalent IDL attribute by applying the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#animation-property-name-to-idl-attribute-name\" id=\"ref-for-animation-property-name-to-idl-attribute-name①\">animation property name to IDL attribute name</a> algorithm.</p>"
            }
          ]
        },
        {
          "html": "<p>Let <var>input properties</var> be\nthe result of calling the <a data-link-type=\"dfn\" href=\"http://www.ecma-international.org/ecma-262/6.0/#sec-enumerableownnames\" id=\"ref-for-sec-enumerableownnames\">EnumerableOwnNames</a> operation\nwith <var>keyframe input</var> as the object.</p>"
        },
        {
          "html": "<p>Make up a new list <var>animation properties</var> that consists of all of the properties that are in <em>both</em> <var>input properties</var> and <var>animatable properties</var>, <em>or</em> which are in <var>input properties</var> and\nconform to the <a class=\"production css\" data-link-type=\"type\" href=\"https://drafts.csswg.org/css-variables-2/#typedef-custom-property-name\" id=\"ref-for-typedef-custom-property-name②\">&lt;custom-property-name&gt;</a> production.</p>"
        },
        {
          "html": "<p>Sort <var>animation properties</var> in ascending order\nby the Unicode codepoints that define each property name.</p>"
        },
        {
          "html": "For each <var>property name</var> in <var>animation properties</var>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>raw value</var> be the result of calling\nthe <a data-link-type=\"dfn\" href=\"http://www.ecma-international.org/ecma-262/6.0/#sec-ordinary-object-internal-methods-and-internal-slots-get-p-receiver\" id=\"ref-for-sec-ordinary-object-internal-methods-and-internal-slots-get-p-receiver\">[[Get]]</a> internal method on <var>keyframe input</var>,\nwith <var>property name</var> as the property key\nand <var>keyframe input</var> as the receiver.</p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#check-the-completion-record\" id=\"ref-for-check-the-completion-record\">Check the completion record</a> of <var>raw value</var>.</p>"
            },
            {
              "html": "<p>Convert <var>raw value</var> to a DOMString or to a sequence of DOMStrings <var>property values</var> as follows:</p>\n        <div class=\"switch\">\n         <dl>\n          <dt data-md=\"\">If <var>allow lists</var> is true,\n          </dt><dd data-md=\"\">\n           <p>Let <var>property values</var> be the result of converting <var>raw value</var> to IDL type <code>(DOMString or sequence&lt;DOMString&gt;)</code> using the <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-convert-ecmascript-to-idl-value\" id=\"ref-for-dfn-convert-ecmascript-to-idl-value\">procedures defined for converting\nan ECMAScript value to an IDL value</a> <a data-link-type=\"biblio\" href=\"https://drafts.csswg.org/web-animations-1/#biblio-webidl\" title=\"Web IDL Standard\">[WEBIDL]</a>.</p>\n           <p>If <var>property values</var> is a single DOMString,\nreplace <var>property values</var> with a sequence of DOMStrings\nwith the original value of <var>property values</var> as the only element.</p>\n          </dd><dt data-md=\"\">Otherwise,\n          </dt><dd data-md=\"\">\n           <p>Let <var>property values</var> be the result of converting <var>raw value</var> to a DOMString\nusing the <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#es-to-DOMString\" id=\"ref-for-es-to-DOMString\">procedure for converting\nan ECMAScript value to a DOMString</a> <a data-link-type=\"biblio\" href=\"https://drafts.csswg.org/web-animations-1/#biblio-webidl\" title=\"Web IDL Standard\">[WEBIDL]</a>.</p>\n         </dd></dl>\n        </div>"
            },
            {
              "html": "<p>Calculate the <var>normalized property name</var> as the result of applying the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#idl-attribute-name-to-animation-property-name\" id=\"ref-for-idl-attribute-name-to-animation-property-name\">IDL attribute name to animation property name</a> algorithm\nto <var>property name</var>.</p>"
            },
            {
              "html": "<p>Add a property to <var>keyframe output</var> with <var>normalized property name</var> as the property name,\nand <var>property values</var> as the property value.</p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>keyframe output</var>.</p>"
        }
      ]
    },
    {
      "name": "process a keyframes argument",
      "href": "https://drafts.csswg.org/web-animations-1/#process-a-keyframes-argument",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"process-a-keyframes-argument\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">process a keyframes argument</dfn> takes a <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-nullable-type\" id=\"ref-for-dfn-nullable-type\">nullable</a> ECMAScript object, <var>object</var>, as input,\n    and returns a sequence of keyframes using the following procedure:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>object</var> is <code>null</code>,\nreturn an empty sequence of keyframes.</p>"
        },
        {
          "html": "<p>Let <var>processed keyframes</var> be\nan empty sequence of <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe⑤⑨\">keyframes</a>.</p>"
        },
        {
          "html": "<p>Let <var>method</var> be the result of <a data-link-type=\"dfn\" href=\"http://www.ecma-international.org/ecma-262/6.0/#sec-getmethod\" id=\"ref-for-sec-getmethod\">GetMethod</a>(<var>object</var>, <a data-link-type=\"dfn\" href=\"http://www.ecma-international.org/ecma-262/6.0/#sec-well-known-symbols\" id=\"ref-for-sec-well-known-symbols\">@@iterator</a>).</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#check-the-completion-record\" id=\"ref-for-check-the-completion-record①\">Check the completion record</a> of <var>method</var>.</p>"
        },
        {
          "html": "<p>Perform the steps corresponding to the first matching condition below:</p>\n      <div class=\"switch\">\n       <dl>\n        <dt data-md=\"\">If <var>method</var> is not <span class=\"esvalue\">undefined</span>,\n        </dt><dd data-md=\"\">\n         \n        </dd><dt data-md=\"\">Otherwise,\n        </dt><dd data-md=\"\">\n         \n       </dd></dl>\n      </div>",
          "rationale": ".switch",
          "steps": [
            {
              "html": "<p>Let <var>iter</var> be <a data-link-type=\"dfn\" href=\"http://www.ecma-international.org/ecma-262/6.0/#sec-getiterator\" id=\"ref-for-sec-getiterator\">GetIterator</a>(<var>object</var>, <var>method</var>).</p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#check-the-completion-record\" id=\"ref-for-check-the-completion-record②\">Check the completion record</a> of <var>iter</var>.</p>"
            },
            {
              "html": "Repeat:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>next</var> be <a data-link-type=\"dfn\" href=\"http://www.ecma-international.org/ecma-262/6.0/#sec-iteratorstep\" id=\"ref-for-sec-iteratorstep\">IteratorStep</a>(<var>iter</var>).</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#check-the-completion-record\" id=\"ref-for-check-the-completion-record③\">Check the completion record</a> of <var>next</var>.</p>"
                },
                {
                  "html": "<p>If <var>next</var> is false abort this loop.</p>"
                },
                {
                  "html": "<p>Let <var>nextItem</var> be <a data-link-type=\"dfn\" href=\"http://www.ecma-international.org/ecma-262/6.0/#sec-iteratorvalue\" id=\"ref-for-sec-iteratorvalue\">IteratorValue</a>(next).</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#check-the-completion-record\" id=\"ref-for-check-the-completion-record④\">Check the completion record</a> of <var>nextItem</var>.</p>"
                },
                {
                  "html": "<p>If <a data-link-type=\"dfn\" href=\"http://www.ecma-international.org/ecma-262/6.0/#sec-ecmascript-data-types-and-values\" id=\"ref-for-sec-ecmascript-data-types-and-values\">Type</a>(<var>nextItem</var>) is not <code>Undefined</code>, <code>Null</code> or <code>Object</code>,\nthen throw a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror⑥\">TypeError</a></code> and abort these steps.</p>"
                },
                {
                  "html": "<p>Append to <var>processed keyframes</var> the result of running the procedure to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#process-a-keyframe-like-object\" id=\"ref-for-process-a-keyframe-like-object\">process a keyframe-like object</a> passing <var>nextItem</var> as the <var>keyframe input</var> with the <var>allow lists</var> flag set to false.</p>"
                }
              ]
            }
          ],
          "additional": [
            {
              "html": "",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>property-indexed keyframe</var> be\nthe result of running the procedure to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#process-a-keyframe-like-object\" id=\"ref-for-process-a-keyframe-like-object①\">process a keyframe-like object</a> passing <var>object</var> as the <var>keyframe input</var> with the <var>allow lists</var> flag set to true.</p>"
                },
                {
                  "html": "For each member, <var>m</var>, in <var>property-indexed keyframe</var>,\nperform the following steps:",
                  "rationale": "let",
                  "steps": [
                    {
                      "html": "<p>Let <var>property name</var> be the key for <var>m</var>.</p>"
                    },
                    {
                      "html": "<p>If <var>property name</var> is\n\"composite\", \"easing\", or \"offset\",\nskip the remaining steps in this loop\nand continue from the next member\nin <var>property-indexed keyframe</var> after <var>m</var>.</p>"
                    },
                    {
                      "html": "<p>Let <var>property values</var> be\nthe value for <var>m</var>.</p>"
                    },
                    {
                      "html": "<p>Let <var>property keyframes</var> be\nan empty sequence of <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe⑥⓪\">keyframes</a>.</p>"
                    },
                    {
                      "html": "For each value, <var>v</var>, in <var>property values</var>,\nperform the following steps:",
                      "rationale": "let",
                      "steps": [
                        {
                          "html": "<p>Let <var>k</var> be a new <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe⑥①\">keyframe</a> with a <code>null</code> <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe-offset\" id=\"ref-for-keyframe-offset①⓪\">keyframe offset</a>.</p>"
                        },
                        {
                          "html": "<p>Add the property-value pair, <var>property name</var> → <var>v</var>,\nto <var>k</var>.</p>"
                        },
                        {
                          "html": "<p>Append <var>k</var> to <var>property keyframes</var>.</p>"
                        }
                      ]
                    },
                    {
                      "html": "<p>Apply the procedure to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#compute-missing-keyframe-offsets\" id=\"ref-for-compute-missing-keyframe-offsets③\">compute missing keyframe offsets</a> to <var>property keyframes</var>.</p>"
                    },
                    {
                      "html": "<p>Add <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe⑥②\">keyframes</a> in <var>property keyframes</var> to <var>processed keyframes</var>.</p>"
                    }
                  ]
                },
                {
                  "html": "<p>Sort <var>processed keyframes</var> by the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#computed-keyframe-offsets\" id=\"ref-for-computed-keyframe-offsets②⑥\">computed keyframe offset</a> of each <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe⑥③\">keyframe</a> in increasing order.</p>"
                },
                {
                  "html": "<p>Merge adjacent <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe⑥④\">keyframes</a> in <var>processed keyframes</var> when they have equal <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#computed-keyframe-offsets\" id=\"ref-for-computed-keyframe-offsets②⑦\">computed keyframe offsets</a>.</p>"
                },
                {
                  "html": "<p>Let <var>offsets</var> be\n a sequence of <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-nullable-type\" id=\"ref-for-dfn-nullable-type①\">nullable</a> <code>double</code> values\n assigned based on the type of the <code>offset</code> member\n of the <var>property-indexed keyframe</var> as follows:</p>\n           <div class=\"switch\">\n            <dl>\n             <dt data-md=\"\"><code>sequence&lt;double?&gt;</code>,\n             </dt><dd data-md=\"\">\n              <p>The value of <code>offset</code> as-is.</p>\n             </dd><dt data-md=\"\"><code>double?</code>,\n             </dt><dd data-md=\"\">\n              <p>A sequence of length one\nwith the value of <code>offset</code> as its single item,\ni.e. «&nbsp;<code>offset</code>&nbsp;»,</p>\n            </dd></dl>\n           </div>"
                },
                {
                  "html": "<p>Assign each value in <var>offsets</var> to the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe-offset\" id=\"ref-for-keyframe-offset①①\">keyframe offset</a> of the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe⑥⑤\">keyframe</a> with the corresponding position in <var>processed keyframes</var> until the end of either sequence is reached.</p>"
                },
                {
                  "html": "<p>Let <var>easings</var> be a sequence of <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMString\" id=\"ref-for-idl-DOMString①①\">DOMString</a></code> values\nassigned based on the type of the <code>easing</code> member\nof the <var>property-indexed keyframe</var> as follows:</p>\n           <div class=\"switch\">\n            <dl>\n             <dt data-md=\"\"><code>sequence&lt;DOMString&gt;</code>,\n             </dt><dd data-md=\"\">\n              <p>The value of <code>easing</code> as-is.</p>\n             </dd><dt data-md=\"\"><code>DOMString</code>,\n             </dt><dd data-md=\"\">\n              <p>A sequence of length one\nwith the value of <code>easing</code> as its single item,\ni.e. «&nbsp;<code>easing</code>&nbsp;»,</p>\n            </dd></dl>\n           </div>"
                },
                {
                  "html": "<p>If <var>easings</var> is an empty sequence,\nlet it be a sequence of length one\ncontaining the single value \"linear\",\ni.e. «&nbsp;\"linear\"&nbsp;».</p>"
                },
                {
                  "html": "<p>If <var>easings</var> has fewer items than <var>processed keyframes</var>,\nrepeat the elements in <var>easings</var> successively\nstarting from the beginning of the list\nuntil <var>easings</var> has as many items as <var>processed keyframes</var>.</p>"
                },
                {
                  "html": "<p>If <var>easings</var> has more items than <var>processed keyframes</var>,\nstore the excess items as <var>unused easings</var>.</p>"
                },
                {
                  "html": "<p>Assign each value in <var>easings</var> to a property named <code>easing</code> on the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe⑥⑥\">keyframe</a> with the corresponding position in <var>processed keyframes</var> until the end of <var>processed keyframes</var> is reached.</p>"
                },
                {
                  "html": "If the <code>composite</code> member\nof the <var>property-indexed keyframe</var> is <em>not</em> an empty sequence:",
                  "rationale": "let",
                  "steps": [
                    {
                      "html": "<p>Let <var>composite modes</var> be\na sequence of <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#enumdef-compositeoperationorauto\" id=\"ref-for-enumdef-compositeoperationorauto④\">CompositeOperationOrAuto</a></code> values\nassigned from the <code>composite</code> member\nof <var>property-indexed keyframe</var>.\nIf that member is\na single <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#enumdef-compositeoperationorauto\" id=\"ref-for-enumdef-compositeoperationorauto⑤\">CompositeOperationOrAuto</a></code> value operation,\nlet <var>composite modes</var> be\na sequence of length one,\nwith the value of the <code>composite</code> as its single item.</p>"
                    },
                    {
                      "html": "<p>As with <var>easings</var>,\nif <var>composite modes</var> has fewer items than <var>processed keyframes</var>,\nrepeat the elements in <var>composite modes</var> successively\nstarting from the beginning of the list\nuntil <var>composite modes</var> has as many items\nas <var>processed keyframes</var>.</p>"
                    },
                    {
                      "html": "<p>Assign each value in <var>composite modes</var> that is not <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-compositeoperationorauto-auto\" id=\"ref-for-dom-compositeoperationorauto-auto②\">auto</a></code> to the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe-specific-composite-operation\" id=\"ref-for-keyframe-specific-composite-operation⑤\">keyframe-specific composite operation</a> on the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe⑥⑦\">keyframe</a> with the corresponding position in <var>processed keyframes</var> until the end of <var>processed keyframes</var> is reached.</p>"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "html": "<p>If <var>processed keyframes</var> is not <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#loosely-sorted-by-offset\" id=\"ref-for-loosely-sorted-by-offset\">loosely sorted by offset</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①④\">throw</a> a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror⑦\">TypeError</a></code> and abort these steps.</p>"
        },
        {
          "html": "<p>If there exist any <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe\" id=\"ref-for-keyframe⑥⑧\">keyframe</a> in <var>processed keyframes</var> whose <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#keyframe-offset\" id=\"ref-for-keyframe-offset①②\">keyframe offset</a> is non-null\nand less than zero or greater than one, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⑤\">throw</a> a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror⑧\">TypeError</a></code> and abort these steps.</p>"
        },
        {
          "html": "For each <var>frame</var> in <var>processed keyframes</var>,\nperform the following steps:",
          "rationale": "for",
          "steps": [
            {
              "html": "<p>For each property-value pair in <var>frame</var>,\nparse the property value\nusing the syntax specified for that property.</p>\n        <p>If the property value is invalid\naccording to the syntax for the property,\ndiscard the property-value pair.\nUser agents that provide support for diagnosing errors in content\nSHOULD produce an appropriate warning\nhighlighting the invalid property value.</p>"
            },
            {
              "html": "<p>Let the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/css-easing-2/#easing-function\" id=\"ref-for-easing-function①⑦\">easing function</a> of <var>frame</var> be\nthe result of parsing the <code>easing</code> property on <var>frame</var> using the CSS syntax defined for\nthe <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-effecttiming-easing\" id=\"ref-for-dom-effecttiming-easing④\">easing</a></code> member of the <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dictdef-effecttiming\" id=\"ref-for-dictdef-effecttiming①③\">EffectTiming</a></code> dictionary.</p>\n        <p>If parsing the <code>easing</code> property fails, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⑥\">throw</a> a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror⑨\">TypeError</a></code> and abort this procedure.</p>"
            }
          ]
        },
        {
          "html": "<p>Parse each of the values in <var>unused easings</var> using the CSS syntax defined for\nthe <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-effecttiming-easing\" id=\"ref-for-dom-effecttiming-easing⑤\">easing</a></code> member of the <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dictdef-effecttiming\" id=\"ref-for-dictdef-effecttiming①④\">EffectTiming</a></code> dictionary,\nand if any of the values fail to parse, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⑦\">throw</a> a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror①①\">TypeError</a></code> and abort this procedure.</p>"
        }
      ]
    },
    {
      "name": "pause an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#pause-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pause-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pause an animation</dfn>, <var>animation</var>,\n    is as follows:",
      "rationale": "let",
      "steps": [
        {
          "html": "<p>Let <var>target</var> be the object on which this method was called.</p>"
        },
        {
          "html": "<p>Construct a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#keyframeeffect\" id=\"ref-for-keyframeeffect①④\">KeyframeEffect</a></code> object <var>effect</var> in the <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm\" id=\"ref-for-concept-relevant-realm⑥\">relevant Realm</a> of <var>target</var> by using the same procedure as the <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-keyframeeffect-keyframeeffect\" id=\"ref-for-dom-keyframeeffect-keyframeeffect⑤\">KeyframeEffect(target, keyframes, options)</a></code> constructor,\n  passing <var>target</var> as the <var>target</var> argument,\n  and the <var>keyframes</var> and <var>options</var> arguments as supplied.</p>\n        <p>If the above procedure causes an exception to be thrown,\n  propagate the exception and abort this procedure.</p>"
        },
        {
          "html": "<p>If <var>options</var> is a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dictdef-keyframeanimationoptions\" id=\"ref-for-dictdef-keyframeanimationoptions②\">KeyframeAnimationOptions</a></code> object,\n  let <var>timeline</var> be the <code>timeline</code> member of <var>options</var> or, if <code>timeline</code> member of <var>options</var> is missing,\n  the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#document-default-document-timeline\" id=\"ref-for-document-default-document-timeline⑧\">default document timeline</a> of the <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-node-document\" id=\"ref-for-concept-node-document\">node document</a> of the element on which this method was called.</p>"
        },
        {
          "html": "<p>Construct a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#animation\" id=\"ref-for-animation①①\">Animation</a></code> object, <var>animation</var>,\n  in the <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm\" id=\"ref-for-concept-relevant-realm⑦\">relevant Realm</a> of <var>target</var> by using the same procedure as the <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-animation-animation\" id=\"ref-for-dom-animation-animation①\">Animation()</a></code> constructor,\n  passing <var>effect</var> and <var>timeline</var> as arguments of the same name.</p>"
        },
        {
          "html": "<p>If <var>options</var> is a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dictdef-keyframeanimationoptions\" id=\"ref-for-dictdef-keyframeanimationoptions③\">KeyframeAnimationOptions</a></code> object,\n  assign the value of the <code>id</code> member of <var>options</var> to <var>animation</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-animation-id\" id=\"ref-for-dom-animation-id①\">id</a></code> attribute.</p>"
        },
        {
          "html": "<p>Run the procedure to <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#play-an-animation\" id=\"ref-for-play-an-animation⑤\">play an animation</a> for <var>animation</var> with the <var>auto-rewind</var> flag set to true.</p>"
        },
        {
          "html": "<p>Return <var>animation</var>.</p>"
        }
      ]
    },
    {
      "name": "pause an animation",
      "href": "https://drafts.csswg.org/web-animations-1/#pause-an-animation",
      "html": "The procedure to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"pause-an-animation\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">pause an animation</dfn>, <var>animation</var>,\n    is as follows:",
      "rationale": "let",
      "steps": [
        {
          "html": "<p>Let <var>object</var> be the object on which this method was called.</p>"
        },
        {
          "html": "<p>Let <var>pseudoElement</var> be the result of <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-keyframeeffect-pseudo-element-parsing\" id=\"ref-for-dom-keyframeeffect-pseudo-element-parsing\">pseudo-element parsing</a></code> applied to <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-getanimationsoptions-pseudoelement\" id=\"ref-for-dom-getanimationsoptions-pseudoelement①\">pseudoElement</a></code> of <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-animatable-getanimations-options-options\" id=\"ref-for-dom-animatable-getanimations-options-options①\">options</a></code>,\n  or <code>null</code> if <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-animatable-getanimations-options-options\" id=\"ref-for-dom-animatable-getanimations-options-options②\">options</a></code> is not passed.</p>"
        },
        {
          "html": "<p>If <var>pseudoElement</var> is not <code>null</code>,\n  then let <var>target</var> be the <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/selectors-4/#pseudo-element\" id=\"ref-for-pseudo-element⑦\">pseudo-element</a> identified by <var>pseudoElement</var> with <var>object</var> as the originating element.\n  Otherwise, let <var>target</var> be <var>object</var>.</p>"
        },
        {
          "html": "<p>If <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-animatable-getanimations-options-options\" id=\"ref-for-dom-animatable-getanimations-options-options③\">options</a></code> is passed\n  with <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://drafts.csswg.org/web-animations-1/#dom-getanimationsoptions-subtree\" id=\"ref-for-dom-getanimationsoptions-subtree①\">subtree</a></code> set to true,\n  then return the set of <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#relevant-animations-for-a-subtree\" id=\"ref-for-relevant-animations-for-a-subtree\">relevant animations for a subtree</a> of <var>target</var>.\n  Otherwise, return the set of <a data-link-type=\"dfn\" href=\"https://drafts.csswg.org/web-animations-1/#relevant-animations\" id=\"ref-for-relevant-animations\">relevant animations</a> for <var>target</var>.</p>"
        }
      ]
    }
  ]
}