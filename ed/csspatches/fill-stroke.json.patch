From 000fc256d1db41f533618670b1afee4ba03849b6 Mon Sep 17 00:00:00 2001
From: Francois Daoust <fd@tidoust.net>
Date: Fri, 12 Dec 2025 10:13:12 +0100
Subject: [PATCH] Patch not-yet-up-to-date fill-stroke spec properties

The "<'background'> with modifications" value for the `fill` and `stroke`
properties is not proper CSS grammar. Dropping the definitions means we'll fall
back on the SVG ones for now. Tracked in:
https://github.com/w3c/csswg-drafts/issues/7285

The patch also fixed a regression since SVG Strokes or SVG2 for the
`stroke-width`, `stroke-dasharray` and `stroke-dashoffset` properties that
should accept unitless values. Tracked in:
https://github.com/w3c/csswg-drafts/issues/3057
---
 ed/css/fill-stroke.json | 38 +++-----------------------------------
 1 file changed, 3 insertions(+), 35 deletions(-)

diff --git a/ed/css/fill-stroke.json b/ed/css/fill-stroke.json
index f231cf2ca3..9999d684e2 100644
--- a/ed/css/fill-stroke.json
+++ b/ed/css/fill-stroke.json
@@ -200,22 +200,6 @@
         "fillRepeat"
       ]
     },
-    {
-      "name": "fill",
-      "href": "https://drafts.csswg.org/fill-stroke/#propdef-fill",
-      "value": "<'background'> with modifications",
-      "initial": "See individual properties",
-      "appliesTo": "See individual properties",
-      "inherited": "See individual properties",
-      "percentages": "N/A",
-      "computedValue": "See individual properties",
-      "canonicalOrder": "per grammar",
-      "animationType": "See individual properties",
-      "media": "visual",
-      "styleDeclaration": [
-        "fill"
-      ]
-    },
     {
       "name": "fill-opacity",
       "href": "https://drafts.csswg.org/fill-stroke/#propdef-fill-opacity",
@@ -236,7 +220,7 @@
     {
       "name": "stroke-width",
       "href": "https://drafts.csswg.org/fill-stroke/#propdef-stroke-width",
-      "value": "<length-percentage>#",
+      "value": "[<length-percentage> | <number>]#",
       "initial": "1px",
       "appliesTo": "text and SVG shapes",
       "inherited": "yes",
@@ -437,7 +421,7 @@
     {
       "name": "stroke-dasharray",
       "href": "https://drafts.csswg.org/fill-stroke/#propdef-stroke-dasharray",
-      "value": "none | <length-percentage>+#",
+      "value": "none | [<length-percentage> | <number>]+#",
       "initial": "none",
       "appliesTo": "text and SVG shapes",
       "inherited": "yes",
@@ -470,7 +454,7 @@
     {
       "name": "stroke-dashoffset",
       "href": "https://drafts.csswg.org/fill-stroke/#propdef-stroke-dashoffset",
-      "value": "<length-percentage>",
+      "value": "<length-percentage> | <number>",
       "initial": "0",
       "appliesTo": "text and SVG shapes",
       "inherited": "yes",
@@ -710,22 +694,6 @@
         "strokeRepeat"
       ]
     },
-    {
-      "name": "stroke",
-      "href": "https://drafts.csswg.org/fill-stroke/#propdef-stroke",
-      "value": "<'background'> with modifications",
-      "initial": "See individual properties",
-      "appliesTo": "See individual properties",
-      "inherited": "See individual properties",
-      "percentages": "N/A",
-      "computedValue": "See individual properties",
-      "canonicalOrder": "per grammar",
-      "animationType": "See individual properties",
-      "media": "visual",
-      "styleDeclaration": [
-        "stroke"
-      ]
-    },
     {
       "name": "stroke-opacity",
       "href": "https://drafts.csswg.org/fill-stroke/#propdef-stroke-opacity",
-- 
2.52.0

