{
  "spec": {
    "title": "Digital Credentials",
    "url": "https://www.w3.org/TR/digital-credentials/"
  },
  "algorithms": [
    {
      "html": "When this method is invoked, the user agent <em class=\"rfc2119\">MUST</em> execute the following\n      algorithm:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "If <var>protocol</var> is not a <a data-link-type=\"dfn|abstract-op\" href=\"https://www.w3.org/TR/digital-credentials/#dfn-protocol-identifier\" class=\"internalDFN\" id=\"ref-for-dfn-protocol-identifier-3\">protocol identifier</a>,\n      return <code>false</code>."
        },
        {
          "html": "Return <code>true</code> if the user agent allows <var>protocol</var>, otherwise return\n      <code>false</code>."
        }
      ]
    },
    {
      "name": "DigitalCredential/[[DiscoverFromExternalSource]](origin, options, sameOriginWithAncestors)",
      "href": "https://www.w3.org/TR/digital-credentials/#dfn-discoverfromexternalsource-origin-options-sameoriginwithancestors",
      "html": "When invoked, the <dfn class=\"export\" data-dfn-for=\"DigitalCredential\" data-idl=\"\" data-dfn-type=\"method\" data-export=\"\" id=\"dfn-discoverfromexternalsource-origin-options-sameoriginwithancestors\" tabindex=\"0\" aria-haspopup=\"dialog\">[[DiscoverFromExternalSource]](origin, options,\n      sameOriginWithAncestors)</dfn> internal method <em class=\"rfc2119\">MUST</em>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "Let <var>global</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-index-term-this-1\">this</a>'s <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global\" id=\"ref-for-index-term-relevant-global-object-1\">relevant global object</a>."
        },
        {
          "html": "Let <var>document</var> be <var>global</var>'s <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window\" id=\"ref-for-index-term-associated-document-1\">associated <code>Document</code></a>."
        },
        {
          "html": "If <var>document</var> is not a <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/interaction.html#fully-active-descendant-of-a-top-level-traversable-with-user-attention\" id=\"ref-for-index-term-fully-active-descendant-of-a-top-level-traversable-with-user-attention-for-document-1\">fully active descendant of a top-level traversable with user attention</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-index-term-throw-for-exception-1\">throw</a>\n      \"<a data-link-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#notallowederror\" id=\"ref-for-index-term-notallowederror-exception-1\"><code>NotAllowedError</code></a>\" <a data-link-type=\"interface\" data-lt=\"DOMException\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-index-term-domexception-interface-1\"><code>DOMException</code></a>."
        },
        {
          "html": "If <var>window</var> does not have <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/interaction.html#transient-activation\" id=\"ref-for-index-term-transient-activation-2\">transient activation</a>,\n      <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-index-term-throw-for-exception-2\">throw</a> \"<a data-link-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#notallowederror\" id=\"ref-for-index-term-notallowederror-exception-2\"><code>NotAllowedError</code></a>\" <a data-link-type=\"interface\" data-lt=\"DOMException\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-index-term-domexception-interface-2\"><code>DOMException</code></a>."
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/interaction.html#consume-user-activation\" id=\"ref-for-index-term-consume-user-activation-1\">Consume user activation</a> of <var>window</var>."
        },
        {
          "html": "Let <var>requests</var> be <var>options</var>'s <a data-link-type=\"idl\" href=\"https://www.w3.org/TR/digital-credentials/#dom-credentialrequestoptions-digital\" class=\"internalDFN\" id=\"ref-for-dom-credentialrequestoptions-digital-2\"><code>digital</code></a>'s\n      <a data-link-type=\"idl\" href=\"https://www.w3.org/TR/digital-credentials/#dom-digitalcredentialrequestoptions-requests\" class=\"internalDFN\" id=\"ref-for-dom-digitalcredentialrequestoptions-requests-2\"><code>requests</code></a> member."
        },
        {
          "html": "If <var>requests</var> is empty, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-index-term-throw-for-exception-3\">throw</a> a <a data-link-type=\"exception\" data-lt=\"TypeError\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-index-term-typeerror-exception-2\"><code>TypeError</code></a>."
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-index-term-for-each-for-list-1\">For each</a> <var>request</var> of <var>requests</var>:",
          "rationale": "serialize",
          "steps": [
            {
              "html": "<a data-link-type=\"dfn\" data-lt=\"serialize a JavaScript value to a JSON string\" href=\"https://infra.spec.whatwg.org/#serialize-a-javascript-value-to-a-json-string\" id=\"ref-for-index-term-serialize-a-javascript-value-to-a-json-string-1\">Serialize</a>\n          <var>request</var> to a JSON string. <a data-link-type=\"dfn\" data-lt=\"throw\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-index-term-throw-for-exception-4\">Re-throw</a> any\n          <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-exception\" id=\"ref-for-index-term-exception-1\">exception</a>."
            }
          ]
        },
        {
          "html": ""
        },
        {
          "html": "Return a <a data-link-type=\"idl\" data-lt=\"DigitalCredential\" href=\"https://www.w3.org/TR/digital-credentials/#dom-digitalcredential\" class=\"internalDFN\" id=\"ref-for-dom-digitalcredential-5\"><code>DigitalCredential</code></a>."
        }
      ]
    },
    {
      "name": "DigitalCredential/[[Create]](origin, options, sameOriginWithAncestors)",
      "href": "https://www.w3.org/TR/digital-credentials/#dfn-create-origin-options-sameoriginwithancestors",
      "html": "When invoked, the <dfn class=\"export\" data-dfn-for=\"DigitalCredential\" data-idl=\"\" data-dfn-type=\"method\" data-export=\"\" id=\"dfn-create-origin-options-sameoriginwithancestors\" tabindex=\"0\" aria-haspopup=\"dialog\">[[Create]](origin, options,\n      sameOriginWithAncestors)</dfn> internal method, if the user agent doesn't\n      support issuance, call the default implementation of <a data-link-type=\"interface\" data-lt=\"Credential\" href=\"https://www.w3.org/TR/credential-management-1/#credential\" id=\"ref-for-index-term-credential-interface-3\"><code>Credential</code></a>'s\n      <a data-link-type=\"method\" data-lt=\"[[Create]](origin, options, sameOriginWithAncestors)\" href=\"https://www.w3.org/TR/credential-management-1/#dom-credential-create-slot\" id=\"ref-for-index-term-create-origin-options-sameoriginwithancestors-for-credential-2\"><code>[[Create]](<var>origin</var>, <var>options</var>, <var>sameOriginWithAncestors</var>)</code></a>\n      internal method with the same arguments. Otherwise:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "Let <var>global</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-index-term-this-2\">this</a>'s <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global\" id=\"ref-for-index-term-relevant-global-object-2\">relevant global object</a>."
        },
        {
          "html": "Let <var>document</var> be <var>global</var>'s <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window\" id=\"ref-for-index-term-associated-document-2\">associated <code>Document</code></a>."
        },
        {
          "html": "If <var>document</var> is not a <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/interaction.html#fully-active-descendant-of-a-top-level-traversable-with-user-attention\" id=\"ref-for-index-term-fully-active-descendant-of-a-top-level-traversable-with-user-attention-for-document-2\">fully active descendant of a top-level traversable with user attention</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-index-term-throw-for-exception-5\">throw</a>\n      \"<a data-link-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#notallowederror\" id=\"ref-for-index-term-notallowederror-exception-3\"><code>NotAllowedError</code></a>\" <a data-link-type=\"interface\" data-lt=\"DOMException\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-index-term-domexception-interface-3\"><code>DOMException</code></a>."
        },
        {
          "html": "If <var>window</var> does not have <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/interaction.html#transient-activation\" id=\"ref-for-index-term-transient-activation-3\">transient activation</a>,\n      <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-index-term-throw-for-exception-6\">throw</a> \"<a data-link-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#notallowederror\" id=\"ref-for-index-term-notallowederror-exception-4\"><code>NotAllowedError</code></a>\" <a data-link-type=\"interface\" data-lt=\"DOMException\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-index-term-domexception-interface-4\"><code>DOMException</code></a>."
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/interaction.html#consume-user-activation\" id=\"ref-for-index-term-consume-user-activation-2\">Consume user activation</a> of <var>window</var>."
        },
        {
          "html": "Let <var>requests</var> be <var>options</var>'s <a data-link-type=\"idl\" href=\"https://www.w3.org/TR/digital-credentials/#dom-credentialcreationoptions-digital\" class=\"internalDFN\" id=\"ref-for-dom-credentialcreationoptions-digital-2\"><code>digital</code></a>'s\n      <a data-link-type=\"idl\" href=\"https://www.w3.org/TR/digital-credentials/#dom-digitalcredentialcreationoptions-requests\" class=\"internalDFN\" id=\"ref-for-dom-digitalcredentialcreationoptions-requests-2\"><code>requests</code></a> member."
        },
        {
          "html": "If <var>requests</var> is empty, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-index-term-throw-for-exception-7\">throw</a> a <a data-link-type=\"exception\" data-lt=\"TypeError\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-index-term-typeerror-exception-3\"><code>TypeError</code></a>."
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-index-term-for-each-for-list-2\">For each</a> <var>request</var> of <var>requests</var>:",
          "rationale": "serialize",
          "steps": [
            {
              "html": "<a data-link-type=\"dfn\" data-lt=\"serialize a JavaScript value to a JSON string\" href=\"https://infra.spec.whatwg.org/#serialize-a-javascript-value-to-a-json-string\" id=\"ref-for-index-term-serialize-a-javascript-value-to-a-json-string-2\">Serialize</a>\n          <var>request</var> to a JSON string. <a data-link-type=\"dfn\" data-lt=\"throw\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-index-term-throw-for-exception-8\">Re-throw</a> any\n          <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-exception\" id=\"ref-for-index-term-exception-2\">exception</a>."
            }
          ]
        },
        {
          "html": ""
        },
        {
          "html": "Return a newly constructed <a data-link-type=\"idl\" data-lt=\"DigitalCredential\" href=\"https://www.w3.org/TR/digital-credentials/#dom-digitalcredential\" class=\"internalDFN\" id=\"ref-for-dom-digitalcredential-6\"><code>DigitalCredential</code></a> with\n      <a data-link-type=\"idl\" href=\"https://www.w3.org/TR/digital-credentials/#dom-digitalcredential-protocol\" class=\"internalDFN\" id=\"ref-for-dom-digitalcredential-protocol-2\"><code>protocol</code></a> initialized to the protocol that was used\n      to issue this credential, and <a data-link-type=\"idl\" href=\"https://www.w3.org/TR/digital-credentials/#dom-digitalcredential-data\" class=\"internalDFN\" id=\"ref-for-dom-digitalcredential-data-2\"><code>data</code></a> initialized to\n      an <a data-link-type=\"dfn|abstract-op\" href=\"https://www.w3.org/TR/digital-credentials/#dfn-issuance-response\" class=\"internalDFN\" id=\"ref-for-dfn-issuance-response-2\">issuance response</a> defined by that <a data-link-type=\"dfn|abstract-op\" href=\"https://www.w3.org/TR/digital-credentials/#dfn-issuance-protocol\" class=\"internalDFN\" id=\"ref-for-dfn-issuance-protocol-12\">issuance protocol</a>."
        }
      ]
    }
  ]
}