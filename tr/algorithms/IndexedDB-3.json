{
  "spec": {
    "title": "Indexed Database API 3.0",
    "url": "https://www.w3.org/TR/IndexedDB-3/"
  },
  "algorithms": [
    {
      "name": "create a sorted name list",
      "href": "https://www.w3.org/TR/IndexedDB-3/#create-a-sorted-name-list",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"create-a-sorted-name-list\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">create a sorted name list</dfn> from a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list\" aria-expanded=\"false\" class=\"has-ref-hint\">list</a> <var>names</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>sorted</var> be <var>names</var> <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-sort-in-ascending-order\" id=\"ref-for-list-sort-in-ascending-order\" aria-expanded=\"false\" class=\"has-ref-hint\">sorted in ascending order</a> with the <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-unit-less-than\" id=\"ref-for-code-unit-less-than\" aria-expanded=\"false\" class=\"has-ref-hint\">code unit less than</a> algorithm.</p>"
        },
        {
          "html": "<p>Return a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#domstringlist\" id=\"ref-for-domstringlist\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMStringList</a></code> associated with <var>sorted</var>.</p>"
        }
      ]
    },
    {
      "name": "compare two keys",
      "href": "https://www.w3.org/TR/IndexedDB-3/#compare-two-keys",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"compare-two-keys\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">compare two keys</dfn> <var>a</var> and <var>b</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>ta</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-type\" id=\"ref-for-key-type①\" aria-expanded=\"false\" class=\"has-ref-hint\">type</a> of <var>a</var>.</p>"
        },
        {
          "html": "<p>Let <var>tb</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-type\" id=\"ref-for-key-type②\" aria-expanded=\"false\" class=\"has-ref-hint\">type</a> of <var>b</var>.</p>"
        },
        {
          "html": "If <var>ta</var> does not equal <var>tb</var>, then run these steps:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>ta</var> is <em>array</em>, then return 1.</p>"
            },
            {
              "html": "<p>If <var>tb</var> is <em>array</em>, then return -1.</p>"
            },
            {
              "html": "<p>If <var>ta</var> is <em>binary</em>, then return 1.</p>"
            },
            {
              "html": "<p>If <var>tb</var> is <em>binary</em>, then return -1.</p>"
            },
            {
              "html": "<p>If <var>ta</var> is <em>string</em>, then return 1.</p>"
            },
            {
              "html": "<p>If <var>tb</var> is <em>string</em>, then return -1.</p>"
            },
            {
              "html": "<p>If <var>ta</var> is <em>date</em>, then return 1.</p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert\" aria-expanded=\"false\" class=\"has-ref-hint\">Assert</a>: <var>tb</var> is <em>date</em>.</p>"
            },
            {
              "html": "<p>Return -1.</p>"
            }
          ]
        },
        {
          "html": "<p>Let <var>va</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-value\" id=\"ref-for-key-value①\" aria-expanded=\"false\" class=\"has-ref-hint\">value</a> of <var>a</var>.</p>"
        },
        {
          "html": "<p>Let <var>vb</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-value\" id=\"ref-for-key-value②\" aria-expanded=\"false\" class=\"has-ref-hint\">value</a> of <var>b</var>.</p>"
        },
        {
          "html": "Switch on <var>ta</var>:",
          "rationale": ".switch",
          "steps": [
            {
              "operation": "switch",
              "steps": [
                {
                  "case": "number",
                  "html": "",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <var>va</var> is greater than <var>vb</var>, then return 1.</p>"
                    },
                    {
                      "html": "<p>If <var>va</var> is less than <var>vb</var>, then return -1.</p>"
                    },
                    {
                      "html": "<p>Return 0.</p>"
                    }
                  ]
                },
                {
                  "case": "date",
                  "html": "",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <var>va</var> is greater than <var>vb</var>, then return 1.</p>"
                    },
                    {
                      "html": "<p>If <var>va</var> is less than <var>vb</var>, then return -1.</p>"
                    },
                    {
                      "html": "<p>Return 0.</p>"
                    }
                  ]
                },
                {
                  "case": "string",
                  "html": "",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <var>va</var> is <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-unit-less-than\" id=\"ref-for-code-unit-less-than①\" aria-expanded=\"false\" class=\"has-ref-hint\">code unit less than</a> <var>vb</var>, then return -1.</p>"
                    },
                    {
                      "html": "<p>If <var>vb</var> is <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-unit-less-than\" id=\"ref-for-code-unit-less-than②\" aria-expanded=\"false\" class=\"has-ref-hint\">code unit less than</a> <var>va</var>, then return 1.</p>"
                    },
                    {
                      "html": "<p>Return 0.</p>"
                    }
                  ]
                },
                {
                  "case": "binary",
                  "html": "",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <var>va</var> is <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#byte-less-than\" id=\"ref-for-byte-less-than\" aria-expanded=\"false\" class=\"has-ref-hint\">byte less than</a> <var>vb</var>, then return -1.</p>"
                    },
                    {
                      "html": "<p>If <var>vb</var> is <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#byte-less-than\" id=\"ref-for-byte-less-than①\" aria-expanded=\"false\" class=\"has-ref-hint\">byte less than</a> <var>va</var>, then return 1.</p>"
                    },
                    {
                      "html": "<p>Return 0.</p>"
                    }
                  ]
                },
                {
                  "case": "array",
                  "html": "",
                  "rationale": "let",
                  "steps": [
                    {
                      "html": "<p>Let <var>length</var> be the lesser of <var>va</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size\" aria-expanded=\"false\" class=\"has-ref-hint\">size</a> and <var>vb</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size①\" aria-expanded=\"false\" class=\"has-ref-hint\">size</a>.</p>"
                    },
                    {
                      "html": "<p>Let <var>i</var> be 0.</p>"
                    },
                    {
                      "html": "While <var>i</var> is less than <var>length</var>, then:",
                      "rationale": "let",
                      "steps": [
                        {
                          "html": "<p>Let <var>c</var> be the result of recursively <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#compare-two-keys\" id=\"ref-for-compare-two-keys\" aria-expanded=\"false\" class=\"has-ref-hint\">comparing two keys</a> with <var>va</var>[<var>i</var>] and <var>vb</var>[<var>i</var>].</p>"
                        },
                        {
                          "html": "<p>If <var>c</var> is not 0, return <var>c</var>.</p>"
                        },
                        {
                          "html": "<p>Increase <var>i</var> by 1.</p>"
                        }
                      ]
                    },
                    {
                      "html": "<p>If <var>va</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size②\" aria-expanded=\"false\" class=\"has-ref-hint\">size</a> is greater than <var>vb</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size③\" aria-expanded=\"false\" class=\"has-ref-hint\">size</a>, then return 1.</p>"
                    },
                    {
                      "html": "<p>If <var>va</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size④\" aria-expanded=\"false\" class=\"has-ref-hint\">size</a> is less than <var>vb</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">size</a>, then return -1.</p>"
                    },
                    {
                      "html": "<p>Return 0.</p>"
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "transaction/lifetime",
      "href": "https://www.w3.org/TR/IndexedDB-3/#transaction-lifetime",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"transaction\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"transaction-lifetime\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">lifetime</dfn> of a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-concept\" id=\"ref-for-transaction-concept②⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a> is as follows:",
      "rationale": "/queue a( \\w+)? task/i",
      "steps": [
        {
          "html": "<p>A transaction is <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"transaction\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"transaction-created\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">created</dfn> with a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-scope\" id=\"ref-for-transaction-scope④\" aria-expanded=\"false\" class=\"has-ref-hint\">scope</a> and a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-mode\" id=\"ref-for-transaction-mode④\" aria-expanded=\"false\" class=\"has-ref-hint\">mode</a>. When a transaction is created its <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is initially <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>.</p>"
        },
        {
          "html": "<p>When an implementation is able to enforce the constraints for the\ntransaction’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-scope\" id=\"ref-for-transaction-scope⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">scope</a> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-mode\" id=\"ref-for-transaction-mode⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">mode</a>,\ndefined <a href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-scheduling\">below</a>, the implementation must <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task\" aria-expanded=\"false\" class=\"has-ref-hint\">queue a task</a> to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"transaction\" data-dfn-type=\"dfn\" data-lt=\"start|started\" data-noexport=\"\" id=\"transaction-start\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">start</dfn> the\ntransaction asynchronously.</p>\n      <p>Once the transaction has been <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-start\" id=\"ref-for-transaction-start②\" aria-expanded=\"false\" class=\"has-ref-hint\">started</a> the\nimplementation can begin executing the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request\" id=\"ref-for-request⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">requests</a> placed\nagainst the transaction. Requests must be executed in the order in\nwhich they were made against the transaction. Likewise, their\nresults must be returned in the order the requests were placed\nagainst a specific transaction. There is no guarantee about the\norder that results from requests in different transactions are\nreturned.</p>"
        },
        {
          "html": "<p>When each <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request\" id=\"ref-for-request⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">request</a> associated with a transaction is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed\" id=\"ref-for-request-processed\" aria-expanded=\"false\" class=\"has-ref-hint\">processed</a>,\na <code class=\"idl\"><a class=\"idl-code has-ref-hint\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbrequest-success\" id=\"ref-for-eventdef-idbrequest-success①\" aria-expanded=\"false\">success</a></code> or <code class=\"idl\"><a class=\"idl-code has-ref-hint\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbrequest-error\" id=\"ref-for-eventdef-idbrequest-error\" aria-expanded=\"false\">error</a></code> <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event\" id=\"ref-for-concept-event\" aria-expanded=\"false\" class=\"has-ref-hint\">event</a> will be\nfired. While the event is being <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-dispatch\" id=\"ref-for-concept-event-dispatch\" aria-expanded=\"false\" class=\"has-ref-hint\">dispatched</a>, the transaction <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state①\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is set to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active①\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>, allowing\nadditional requests to be made against the transaction. Once the\nevent dispatch is complete, the transaction’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state②\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is set to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-inactive\" id=\"ref-for-transaction-inactive\" aria-expanded=\"false\" class=\"has-ref-hint\">inactive</a> again.</p>"
        },
        {
          "html": "<p>A transaction can be <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"transaction\" data-dfn-type=\"dfn\" data-lt=\"abort|aborting|aborted\" data-noexport=\"\" id=\"transaction-abort\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">aborted</dfn> at any time before it is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-finished\" id=\"ref-for-transaction-finished\" aria-expanded=\"false\" class=\"has-ref-hint\">finished</a>, even if the\ntransaction isn’t currently <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active②\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a> or hasn’t yet <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-start\" id=\"ref-for-transaction-start③\" aria-expanded=\"false\" class=\"has-ref-hint\">started</a>.</p>\n      <p>An explicit call to <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbtransaction-abort\" id=\"ref-for-dom-idbtransaction-abort\" aria-expanded=\"false\" class=\"has-ref-hint\">abort()</a></code> will initiate an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-abort\" id=\"ref-for-transaction-abort①\" aria-expanded=\"false\" class=\"has-ref-hint\">abort</a>. An abort will also be initiated following a\nfailed request that is not handled by script.</p>\n      <p>When a transaction is aborted the implementation must undo (roll\nback) any changes that were made to the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">database</a> during that\ntransaction. This includes both changes to the contents of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store②①\" aria-expanded=\"false\" class=\"has-ref-hint\">object stores</a> as well as additions and removals of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store②②\" aria-expanded=\"false\" class=\"has-ref-hint\">object\nstores</a> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">indexes</a>.</p>"
        },
        {
          "html": "<p>The implementation must attempt to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"transaction\" data-dfn-type=\"dfn\" data-lt=\"commit|committed\" data-noexport=\"\" id=\"transaction-commit\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">commit</dfn> a transaction when all <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request\" id=\"ref-for-request⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">requests</a> placed against the\ntransaction have completed and their returned results handled, no\nnew requests have been placed against the transaction, and the\ntransaction has not been <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-abort\" id=\"ref-for-transaction-abort②\" aria-expanded=\"false\" class=\"has-ref-hint\">aborted</a></p>\n      <p>An explicit call to <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbtransaction-commit\" id=\"ref-for-dom-idbtransaction-commit\" aria-expanded=\"false\" class=\"has-ref-hint\">commit()</a></code> will initiate a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-commit\" id=\"ref-for-transaction-commit④\" aria-expanded=\"false\" class=\"has-ref-hint\">commit</a> without waiting for request results to be\nhandled by script.</p>\n      <p>When committing, the transaction <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state③\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is set to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-committing\" id=\"ref-for-transaction-committing\" aria-expanded=\"false\" class=\"has-ref-hint\">committing</a>. The implementation must atomically\nwrite any changes to the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database①⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">database</a> made by requests placed\nagainst the transaction. That is, either all of the changes must\nbe written, or if an error occurs, such as a disk write error, the\nimplementation must not write any of the changes to the database,\nand the steps to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#abort-a-transaction\" id=\"ref-for-abort-a-transaction\" aria-expanded=\"false\" class=\"has-ref-hint\">abort a transaction</a> will be followed.</p>"
        },
        {
          "html": "<p>When a transaction is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-commit\" id=\"ref-for-transaction-commit⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">committed</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-abort\" id=\"ref-for-transaction-abort③\" aria-expanded=\"false\" class=\"has-ref-hint\">aborted</a>,\nits <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state④\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is set to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-finished\" id=\"ref-for-transaction-finished①\" aria-expanded=\"false\" class=\"has-ref-hint\">finished</a>.</p>"
        }
      ]
    },
    {
      "name": "cleanup Indexed Database transactions",
      "href": "https://www.w3.org/TR/IndexedDB-3/#cleanup-indexed-database-transactions",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"transaction\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cleanup-indexed-database-transactions\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">cleanup Indexed Database transactions</dfn>, run the following steps.\nThey will return true if any transactions were cleaned up, or false otherwise.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If there are no <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-concept\" id=\"ref-for-transaction-concept③①\" aria-expanded=\"false\" class=\"has-ref-hint\">transactions</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-cleanup-event-loop\" id=\"ref-for-transaction-cleanup-event-loop\" aria-expanded=\"false\" class=\"has-ref-hint\">cleanup\nevent loop</a> matching the current <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#event-loop\" id=\"ref-for-event-loop①\" aria-expanded=\"false\" class=\"has-ref-hint\">event loop</a>, return false.</p>"
        },
        {
          "html": "For each <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-concept\" id=\"ref-for-transaction-concept③②\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a> <var>transaction</var> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-cleanup-event-loop\" id=\"ref-for-transaction-cleanup-event-loop①\" aria-expanded=\"false\" class=\"has-ref-hint\">cleanup event loop</a> matching the current <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#event-loop\" id=\"ref-for-event-loop②\" aria-expanded=\"false\" class=\"has-ref-hint\">event loop</a>:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-inactive\" id=\"ref-for-transaction-inactive①\" aria-expanded=\"false\" class=\"has-ref-hint\">inactive</a>.</p>"
            },
            {
              "html": "<p>Clear <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-cleanup-event-loop\" id=\"ref-for-transaction-cleanup-event-loop②\" aria-expanded=\"false\" class=\"has-ref-hint\">cleanup event loop</a>.</p>"
            }
          ]
        },
        {
          "html": "<p>Return true.</p>"
        }
      ]
    },
    {
      "name": "convert a value to a key range",
      "href": "https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"convert-a-value-to-a-key-range\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">convert a value to a key range</dfn> with <var>value</var> and optional <var>null disallowed flag</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>value</var> is a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range\" id=\"ref-for-key-range①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">key range</a>, return <var>value</var>.</p>"
        },
        {
          "html": "<p>If <var>value</var> is undefined or is null, then <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code> if <var>null disallowed flag</var> is true, or return an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#unbounded-key-range\" id=\"ref-for-unbounded-key-range①\" aria-expanded=\"false\" class=\"has-ref-hint\">unbounded key range</a> otherwise.</p>"
        },
        {
          "html": "<p>Let <var>key</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key①\" aria-expanded=\"false\" class=\"has-ref-hint\">converting\na value to a key</a> with <var>value</var>. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>key</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror①\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Return a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range\" id=\"ref-for-key-range①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">key range</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#containing-only\" id=\"ref-for-containing-only\" aria-expanded=\"false\" class=\"has-ref-hint\">containing only</a> <var>key</var>.</p>"
        }
      ]
    },
    {
      "name": "generate a key",
      "href": "https://www.w3.org/TR/IndexedDB-3/#generate-a-key",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"generate-a-key\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">generate a key</dfn> for an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store④①\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a> <var>store</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>generator</var> be <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-generator\" id=\"ref-for-key-generator④\" aria-expanded=\"false\" class=\"has-ref-hint\">key generator</a>.</p>"
        },
        {
          "html": "<p>Let <var>key</var> be <var>generator</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-generator-current-number\" id=\"ref-for-key-generator-current-number⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">current number</a>.</p>"
        },
        {
          "html": "<p>If <var>key</var> is greater than 2<sup>53</sup> (9007199254740992), then return failure.</p>"
        },
        {
          "html": "<p>Increase <var>generator</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-generator-current-number\" id=\"ref-for-key-generator-current-number①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">current number</a> by 1.</p>"
        },
        {
          "html": "<p>Return <var>key</var>.</p>"
        }
      ]
    },
    {
      "name": "possibly update the key generator",
      "href": "https://www.w3.org/TR/IndexedDB-3/#possibly-update-the-key-generator",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"possibly-update-the-key-generator\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">possibly update the key generator</dfn> for an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store④②\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a> <var>store</var> with <var>key</var>,\n  run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-type\" id=\"ref-for-key-type③\" aria-expanded=\"false\" class=\"has-ref-hint\">type</a> of <var>key</var> is not <em>number</em>, abort these steps.</p>"
        },
        {
          "html": "<p>Let <var>value</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-value\" id=\"ref-for-key-value③\" aria-expanded=\"false\" class=\"has-ref-hint\">value</a> of <var>key</var>.</p>"
        },
        {
          "html": "<p>Set <var>value</var> to the minimum of <var>value</var> and 2<sup>53</sup> (9007199254740992).</p>"
        },
        {
          "html": "<p>Set <var>value</var> to the largest integer not greater than <var>value</var>.</p>"
        },
        {
          "html": "<p>Let <var>generator</var> be <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-generator\" id=\"ref-for-key-generator⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">key generator</a>.</p>"
        },
        {
          "html": "<p>If <var>value</var> is greater than or equal to <var>generator</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-generator-current-number\" id=\"ref-for-key-generator-current-number①①\" aria-expanded=\"false\" class=\"has-ref-hint\">current number</a>,\n  then set <var>generator</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-generator-current-number\" id=\"ref-for-key-generator-current-number①②\" aria-expanded=\"false\" class=\"has-ref-hint\">current number</a> to <var>value</var> + 1.</p>"
        }
      ]
    },
    {
      "name": "IDBRequest/result",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbrequest-result",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBRequest\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-idbrequest-result\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>result</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">done flag</a> is false, then <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror③\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Otherwise, return <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-result\" id=\"ref-for-request-result③\" aria-expanded=\"false\" class=\"has-ref-hint\">result</a>, or undefined if the request resulted in an error.</p>"
        }
      ]
    },
    {
      "name": "IDBRequest/error",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbrequest-error",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBRequest\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-idbrequest-error\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>error</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">done flag</a> is false, then <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror④\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Otherwise, return <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-error\" id=\"ref-for-request-error③\" aria-expanded=\"false\" class=\"has-ref-hint\">error</a>, or null if no error occurred.</p>"
        }
      ]
    },
    {
      "name": "fire a version change event",
      "href": "https://www.w3.org/TR/IndexedDB-3/#fire-a-version-change-event",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"fire-a-version-change-event\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fire a version change event</dfn> named <var>e</var> at <var>target</var> given <var>oldVersion</var> and <var>newVersion</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>event</var> be the result of <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-create\" id=\"ref-for-concept-event-create\" aria-expanded=\"false\" class=\"has-ref-hint\">creating an event</a> using <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbversionchangeevent\" id=\"ref-for-idbversionchangeevent\" aria-expanded=\"false\" class=\"has-ref-hint\">IDBVersionChangeEvent</a></code>.</p>"
        },
        {
          "html": "<p>Set <var>event</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-type\" id=\"ref-for-dom-event-type\" aria-expanded=\"false\" class=\"has-ref-hint\">type</a></code> attribute to <var>e</var>.</p>"
        },
        {
          "html": "<p>Set <var>event</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-bubbles\" id=\"ref-for-dom-event-bubbles\" aria-expanded=\"false\" class=\"has-ref-hint\">bubbles</a></code> and <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-cancelable\" id=\"ref-for-dom-event-cancelable\" aria-expanded=\"false\" class=\"has-ref-hint\">cancelable</a></code> attributes to false.</p>"
        },
        {
          "html": "<p>Set <var>event</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbversionchangeevent-oldversion\" id=\"ref-for-dom-idbversionchangeevent-oldversion①\" aria-expanded=\"false\" class=\"has-ref-hint\">oldVersion</a></code> attribute to <var>oldVersion</var>.</p>"
        },
        {
          "html": "<p>Set <var>event</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbversionchangeevent-newversion\" id=\"ref-for-dom-idbversionchangeevent-newversion①\" aria-expanded=\"false\" class=\"has-ref-hint\">newVersion</a></code> attribute to <var>newVersion</var>.</p>"
        },
        {
          "html": "<p>Let <var>legacyOutputDidListenersThrowFlag</var> be false.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-dispatch\" id=\"ref-for-concept-event-dispatch①\" aria-expanded=\"false\" class=\"has-ref-hint\">Dispatch</a> <var>event</var> at <var>target</var> with <var>legacyOutputDidListenersThrowFlag</var>.</p>"
        },
        {
          "html": "<p>Return <var>legacyOutputDidListenersThrowFlag</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBFactory/open(name, version)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbfactory-open",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBFactory\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"open(name, version)|open(name)\" id=\"dom-idbfactory-open\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>open(<var>name</var>, <var>version</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>version</var> is 0 (zero), <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror\" aria-expanded=\"false\" class=\"has-ref-hint\">TypeError</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>environment</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object\" id=\"ref-for-relevant-settings-object\" aria-expanded=\"false\" class=\"has-ref-hint\">relevant settings object</a>.</p>"
        },
        {
          "html": "<p>Let <var>storageKey</var> be the result of running <a data-link-type=\"dfn\" href=\"https://storage.spec.whatwg.org/#obtain-a-storage-key\" id=\"ref-for-obtain-a-storage-key\" aria-expanded=\"false\" class=\"has-ref-hint\">obtain a storage key</a> given <var>environment</var>.\nIf failure is returned, then <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#securityerror\" id=\"ref-for-securityerror\" aria-expanded=\"false\" class=\"has-ref-hint\">SecurityError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①①\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code> and abort these steps.</p>"
        },
        {
          "html": "<p>Let <var>request</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-open-request\" id=\"ref-for-request-open-request①①\" aria-expanded=\"false\" class=\"has-ref-hint\">open request</a>.</p>"
        },
        {
          "html": "Run these steps <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel\" id=\"ref-for-in-parallel\" aria-expanded=\"false\" class=\"has-ref-hint\">in parallel</a>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>result</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#open-a-database-connection\" id=\"ref-for-open-a-database-connection①\" aria-expanded=\"false\" class=\"has-ref-hint\">opening a database connection</a>, with <var>storageKey</var>, <var>name</var>, <var>version</var> if given and undefined\notherwise, and <var>request</var>.</p>"
            },
            {
              "html": "<a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task①\" aria-expanded=\"false\" class=\"has-ref-hint\">Queue a task</a> to run these steps:",
              "rationale": "if",
              "steps": [
                {
                  "html": "If <var>result</var> is an error, then:",
                  "rationale": "set",
                  "steps": [
                    {
                      "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-result\" id=\"ref-for-request-result④\" aria-expanded=\"false\" class=\"has-ref-hint\">result</a> to undefined.</p>"
                    },
                    {
                      "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-error\" id=\"ref-for-request-error④\" aria-expanded=\"false\" class=\"has-ref-hint\">error</a> to <var>result</var>.</p>"
                    },
                    {
                      "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">done flag</a> to true.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-fire\" id=\"ref-for-concept-event-fire\" aria-expanded=\"false\" class=\"has-ref-hint\">Fire an event</a> named <code class=\"idl\"><a class=\"idl-code has-ref-hint\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbrequest-error\" id=\"ref-for-eventdef-idbrequest-error③\" aria-expanded=\"false\">error</a></code> at <var>request</var> with its <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-bubbles\" id=\"ref-for-dom-event-bubbles①\" aria-expanded=\"false\" class=\"has-ref-hint\">bubbles</a></code> and <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-cancelable\" id=\"ref-for-dom-event-cancelable①\" aria-expanded=\"false\" class=\"has-ref-hint\">cancelable</a></code> attributes initialized to true.</p>"
                    }
                  ]
                },
                {
                  "html": "Otherwise:",
                  "rationale": "set",
                  "steps": [
                    {
                      "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-result\" id=\"ref-for-request-result⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">result</a> to <var>result</var>.</p>"
                    },
                    {
                      "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">done flag</a> to true.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-fire\" id=\"ref-for-concept-event-fire①\" aria-expanded=\"false\" class=\"has-ref-hint\">Fire an event</a> named <code class=\"idl\"><a class=\"idl-code has-ref-hint\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbrequest-success\" id=\"ref-for-eventdef-idbrequest-success④\" aria-expanded=\"false\">success</a></code> at <var>request</var>.</p>"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "html": "<p>Return a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbopendbrequest\" id=\"ref-for-idbopendbrequest②\" aria-expanded=\"false\" class=\"has-ref-hint\">IDBOpenDBRequest</a></code> object for <var>request</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBFactory/deleteDatabase(name)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbfactory-deletedatabase",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBFactory\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbfactory-deletedatabase\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>deleteDatabase(<var>name</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>environment</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object\" id=\"ref-for-relevant-settings-object①\" aria-expanded=\"false\" class=\"has-ref-hint\">relevant settings object</a>.</p>"
        },
        {
          "html": "<p>Let <var>storageKey</var> be the result of running <a data-link-type=\"dfn\" href=\"https://storage.spec.whatwg.org/#obtain-a-storage-key\" id=\"ref-for-obtain-a-storage-key①\" aria-expanded=\"false\" class=\"has-ref-hint\">obtain a storage key</a> given <var>environment</var>.\nIf failure is returned, then <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#securityerror\" id=\"ref-for-securityerror①\" aria-expanded=\"false\" class=\"has-ref-hint\">SecurityError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①②\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code> and abort these steps.</p>"
        },
        {
          "html": "<p>Let <var>request</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-open-request\" id=\"ref-for-request-open-request①②\" aria-expanded=\"false\" class=\"has-ref-hint\">open request</a>.</p>"
        },
        {
          "html": "Run these steps <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel\" id=\"ref-for-in-parallel①\" aria-expanded=\"false\" class=\"has-ref-hint\">in parallel</a>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>result</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#delete-a-database\" id=\"ref-for-delete-a-database\" aria-expanded=\"false\" class=\"has-ref-hint\">deleting a database</a>, with <var>storageKey</var>, <var>name</var>, and <var>request</var>.</p>"
            },
            {
              "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed-flag\" id=\"ref-for-request-processed-flag①\" aria-expanded=\"false\" class=\"has-ref-hint\">processed flag</a> to true.</p>"
            },
            {
              "html": "<a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task②\" aria-expanded=\"false\" class=\"has-ref-hint\">Queue a task</a> to run these steps:",
              "rationale": "if",
              "steps": [
                {
                  "html": "<p>If <var>result</var> is an error,\nset <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-error\" id=\"ref-for-request-error⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">error</a> to <var>result</var>,\nset <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">done flag</a> to true,\nand <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-fire\" id=\"ref-for-concept-event-fire②\" aria-expanded=\"false\" class=\"has-ref-hint\">fire an event</a> named <code class=\"idl\"><a class=\"idl-code has-ref-hint\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbrequest-error\" id=\"ref-for-eventdef-idbrequest-error④\" aria-expanded=\"false\">error</a></code> at <var>request</var> with\nits <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-bubbles\" id=\"ref-for-dom-event-bubbles②\" aria-expanded=\"false\" class=\"has-ref-hint\">bubbles</a></code> and <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-cancelable\" id=\"ref-for-dom-event-cancelable②\" aria-expanded=\"false\" class=\"has-ref-hint\">cancelable</a></code> attributes initialized to true.</p>"
                },
                {
                  "html": "<p>Otherwise,\nset <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-result\" id=\"ref-for-request-result⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">result</a> to undefined,\nset <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag①①\" aria-expanded=\"false\" class=\"has-ref-hint\">done flag</a> to true,\nand <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#fire-a-version-change-event\" id=\"ref-for-fire-a-version-change-event\" aria-expanded=\"false\" class=\"has-ref-hint\">fire a version change event</a> named <code class=\"idl\"><a class=\"idl-code has-ref-hint\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbrequest-success\" id=\"ref-for-eventdef-idbrequest-success⑤\" aria-expanded=\"false\">success</a></code> at <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request\" id=\"ref-for-request②⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">request</a> with <var>result</var> and\nnull.</p>"
                }
              ]
            }
          ]
        },
        {
          "html": "<p>Return a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbopendbrequest\" id=\"ref-for-idbopendbrequest③\" aria-expanded=\"false\" class=\"has-ref-hint\">IDBOpenDBRequest</a></code> object for <var>request</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBFactory/databases()",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbfactory-databases",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBFactory\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbfactory-databases\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>databases()</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>environment</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object\" id=\"ref-for-relevant-settings-object②\" aria-expanded=\"false\" class=\"has-ref-hint\">relevant settings object</a>.</p>"
        },
        {
          "html": "<p>Let <var>storageKey</var> be the result of running <a data-link-type=\"dfn\" href=\"https://storage.spec.whatwg.org/#obtain-a-storage-key\" id=\"ref-for-obtain-a-storage-key②\" aria-expanded=\"false\" class=\"has-ref-hint\">obtain a storage key</a> given <var>environment</var>.\nIf failure is returned, then return <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#a-promise-rejected-with\" id=\"ref-for-a-promise-rejected-with\" aria-expanded=\"false\" class=\"has-ref-hint\">a promise rejected with</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#securityerror\" id=\"ref-for-securityerror②\" aria-expanded=\"false\" class=\"has-ref-hint\">SecurityError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①③\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code></p>"
        },
        {
          "html": "<p>Let <var>p</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#a-new-promise\" id=\"ref-for-a-new-promise\" aria-expanded=\"false\" class=\"has-ref-hint\">a new promise</a>.</p>"
        },
        {
          "html": "Run these steps <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel\" id=\"ref-for-in-parallel②\" aria-expanded=\"false\" class=\"has-ref-hint\">in parallel</a>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>databases</var> be the <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ordered-set\" id=\"ref-for-ordered-set①\" aria-expanded=\"false\" class=\"has-ref-hint\">set</a> of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database④⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">databases</a> in <var>storageKey</var>.\nIf this cannot be determined for any reason, then <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#reject\" id=\"ref-for-reject\" aria-expanded=\"false\" class=\"has-ref-hint\">reject</a> <var>p</var> with\nan appropriate error (e.g. an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#unknownerror\" id=\"ref-for-unknownerror①\" aria-expanded=\"false\" class=\"has-ref-hint\">UnknownError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①④\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>)\nand terminate these steps.</p>"
            },
            {
              "html": "<p>Let <var>result</var> be a new <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list②\" aria-expanded=\"false\" class=\"has-ref-hint\">list</a>.</p>"
            },
            {
              "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate\" aria-expanded=\"false\" class=\"has-ref-hint\">For each</a> <var>db</var> of <var>databases</var>:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>info</var> be a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dictdef-idbdatabaseinfo\" id=\"ref-for-dictdef-idbdatabaseinfo①\" aria-expanded=\"false\" class=\"has-ref-hint\">IDBDatabaseInfo</a></code> dictionary.</p>"
                },
                {
                  "html": "<p>Set <var>info</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbdatabaseinfo-name\" id=\"ref-for-dom-idbdatabaseinfo-name\" aria-expanded=\"false\" class=\"has-ref-hint\">name</a></code> dictionary member to <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-name\" id=\"ref-for-database-name①\" aria-expanded=\"false\" class=\"has-ref-hint\">name</a>.</p>"
                },
                {
                  "html": "<p>Set <var>info</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbdatabaseinfo-version\" id=\"ref-for-dom-idbdatabaseinfo-version\" aria-expanded=\"false\" class=\"has-ref-hint\">version</a></code> dictionary member to <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">version</a>.</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append\" aria-expanded=\"false\" class=\"has-ref-hint\">Append</a> <var>info</var> to <var>result</var>.</p>"
                }
              ]
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#resolve\" id=\"ref-for-resolve\" aria-expanded=\"false\" class=\"has-ref-hint\">Resolve</a> <var>p</var> with <var>result</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>p</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBFactory/cmp(first, second)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbfactory-cmp",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBFactory\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbfactory-cmp\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>cmp(<var>first</var>, <var>second</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>a</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key②\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a\nvalue to a key</a> with <var>first</var>. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>a</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror④\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>b</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key③\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a\nvalue to a key</a> with <var>second</var>. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>b</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Return the results of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#compare-two-keys\" id=\"ref-for-compare-two-keys④\" aria-expanded=\"false\" class=\"has-ref-hint\">comparing two keys</a> with <var>a</var> and <var>b</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBDatabase/objectStoreNames",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbdatabase-objectstorenames",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBDatabase\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-idbdatabase-objectstorenames\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>objectStoreNames</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>names</var> be a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list③\" aria-expanded=\"false\" class=\"has-ref-hint\">list</a> of the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-name\" id=\"ref-for-object-store-name①\" aria-expanded=\"false\" class=\"has-ref-hint\">names</a> of the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑤④\" aria-expanded=\"false\" class=\"has-ref-hint\">object stores</a> in <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-object-store-set\" id=\"ref-for-connection-object-store-set\" aria-expanded=\"false\" class=\"has-ref-hint\">object store set</a>.</p>"
        },
        {
          "html": "<p>Return the result (a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#domstringlist\" id=\"ref-for-domstringlist②\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMStringList</a></code>) of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#create-a-sorted-name-list\" id=\"ref-for-create-a-sorted-name-list\" aria-expanded=\"false\" class=\"has-ref-hint\">creating a sorted name list</a> with <var>names</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBDatabase/createObjectStore(name, options)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbdatabase-createobjectstore",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBDatabase\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"createObjectStore(name, options)|createObjectStore(name)\" id=\"dom-idbdatabase-createobjectstore\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>createObjectStore(<var>name</var>, <var>options</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>database</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s associated <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database④⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">database</a>.</p>"
        },
        {
          "html": "<p>Let <var>transaction</var> be <var>database</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-upgrade-transaction\" id=\"ref-for-database-upgrade-transaction\" aria-expanded=\"false\" class=\"has-ref-hint\">upgrade transaction</a> if it is not null, or <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException②⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code> otherwise.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror①\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException②①\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>keyPath</var> be <var>options</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstoreparameters-keypath\" id=\"ref-for-dom-idbobjectstoreparameters-keypath\" aria-expanded=\"false\" class=\"has-ref-hint\">keyPath</a></code> member if it is not undefined or null, or null otherwise.</p>"
        },
        {
          "html": "<p>If <var>keyPath</var> is not null and is not a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#valid-key-path\" id=\"ref-for-valid-key-path\" aria-expanded=\"false\" class=\"has-ref-hint\">valid key\npath</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#syntaxerror\" id=\"ref-for-syntaxerror①\" aria-expanded=\"false\" class=\"has-ref-hint\">SyntaxError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException②②\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑤⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-name\" id=\"ref-for-object-store-name④\" aria-expanded=\"false\" class=\"has-ref-hint\">named</a> <var>name</var> already\nexists in <var>database</var> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①②\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#constrainterror\" id=\"ref-for-constrainterror②\" aria-expanded=\"false\" class=\"has-ref-hint\">ConstraintError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException②③\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>autoIncrement</var> be <var>options</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstoreparameters-autoincrement\" id=\"ref-for-dom-idbobjectstoreparameters-autoincrement\" aria-expanded=\"false\" class=\"has-ref-hint\">autoIncrement</a></code> member.</p>"
        },
        {
          "html": "<p>If <var>autoIncrement</var> is true and <var>keyPath</var> is an empty string or any\nsequence (empty or otherwise), <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①③\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidaccesserror\" id=\"ref-for-invalidaccesserror①\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidAccessError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException②④\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑤⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a> in <var>database</var>. Set the created <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑤⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-name\" id=\"ref-for-object-store-name⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">name</a> to <var>name</var>. If <var>autoIncrement</var> is true, then the created <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑥⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">object\nstore</a> uses a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-generator\" id=\"ref-for-key-generator①③\" aria-expanded=\"false\" class=\"has-ref-hint\">key generator</a>. If <var>keyPath</var> is\nnot null, set the created <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑥①\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-key-path\" id=\"ref-for-object-store-key-path①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">key path</a> to <var>keyPath</var>.</p>"
        },
        {
          "html": "<p>Return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle\" id=\"ref-for-object-store-handle⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">object store handle</a> associated with <var>store</var> and <var>transaction</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBDatabase/deleteObjectStore(name)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbdatabase-deleteobjectstore",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBDatabase\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbdatabase-deleteobjectstore\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>deleteObjectStore(<var>name</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>database</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s associated <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database④⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">database</a>.</p>"
        },
        {
          "html": "<p>Let <var>transaction</var> be <var>database</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-upgrade-transaction\" id=\"ref-for-database-upgrade-transaction①\" aria-expanded=\"false\" class=\"has-ref-hint\">upgrade transaction</a> if it is not null, or <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①④\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException②⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code> otherwise.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror②\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException②⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑥⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-name\" id=\"ref-for-object-store-name⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">named</a> <var>name</var> in <var>database</var>,\nor <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#notfounderror\" id=\"ref-for-notfounderror①\" aria-expanded=\"false\" class=\"has-ref-hint\">NotFoundError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException②⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code> if none.</p>"
        },
        {
          "html": "<p>Remove <var>store</var> from <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-object-store-set\" id=\"ref-for-connection-object-store-set①\" aria-expanded=\"false\" class=\"has-ref-hint\">object store set</a>.</p>"
        },
        {
          "html": "<p>If there is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle\" id=\"ref-for-object-store-handle⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">object store handle</a> associated with <var>store</var> and <var>transaction</var>, remove all entries from its <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-index-set\" id=\"ref-for-object-store-handle-index-set\" aria-expanded=\"false\" class=\"has-ref-hint\">index set</a>.</p>"
        },
        {
          "html": "<p>Destroy <var>store</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBDatabase/transaction(storeNames, mode, options)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbdatabase-transaction",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBDatabase\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"transaction(storeNames, mode, options)|transaction(storeNames, mode)|transaction(storeNames)\" id=\"dom-idbdatabase-transaction\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>transaction(<var>storeNames</var>, <var>mode</var>, <var>options</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-live\" id=\"ref-for-transaction-live①①\" aria-expanded=\"false\" class=\"has-ref-hint\">live</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction②⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">upgrade transaction</a> is associated with the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection④⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">connection</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException②⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-close-pending-flag\" id=\"ref-for-connection-close-pending-flag③\" aria-expanded=\"false\" class=\"has-ref-hint\">close pending flag</a> is true, then <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException③⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>scope</var> be the set of unique strings in <var>storeNames</var> if it is a\nsequence, or a set containing one string equal to <var>storeNames</var> otherwise.</p>"
        },
        {
          "html": "<p>If any string in <var>scope</var> is not the name of an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑦⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">object\nstore</a> in the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection④⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">connected</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑤①\" aria-expanded=\"false\" class=\"has-ref-hint\">database</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#notfounderror\" id=\"ref-for-notfounderror②\" aria-expanded=\"false\" class=\"has-ref-hint\">NotFoundError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException③①\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>scope</var> is empty, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidaccesserror\" id=\"ref-for-invalidaccesserror②\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidAccessError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException③②\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>mode</var> is not \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbtransactionmode-readonly\" id=\"ref-for-dom-idbtransactionmode-readonly④\" aria-expanded=\"false\" class=\"has-ref-hint\">readonly</a></code>\" or \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbtransactionmode-readwrite\" id=\"ref-for-dom-idbtransactionmode-readwrite④\" aria-expanded=\"false\" class=\"has-ref-hint\">readwrite</a></code>\", <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②①\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror①\" aria-expanded=\"false\" class=\"has-ref-hint\">TypeError</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>transaction</var> be a newly <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-created\" id=\"ref-for-transaction-created⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">created</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-concept\" id=\"ref-for-transaction-concept④⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a> with this <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection④⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">connection</a>, <var>mode</var>, <var>options</var>’ <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbtransactionoptions-durability\" id=\"ref-for-dom-idbtransactionoptions-durability②\" aria-expanded=\"false\" class=\"has-ref-hint\">durability</a></code> member, and the set of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑦①\" aria-expanded=\"false\" class=\"has-ref-hint\">object stores</a> named in <var>scope</var>.</p>"
        },
        {
          "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-cleanup-event-loop\" id=\"ref-for-transaction-cleanup-event-loop③\" aria-expanded=\"false\" class=\"has-ref-hint\">cleanup event loop</a> to the\ncurrent <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#event-loop\" id=\"ref-for-event-loop⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">event loop</a>.</p>"
        },
        {
          "html": "<p>Return an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbtransaction\" id=\"ref-for-idbtransaction③\" aria-expanded=\"false\" class=\"has-ref-hint\">IDBTransaction</a></code> object representing <var>transaction</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBDatabase/close()",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbdatabase-close",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBDatabase\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbdatabase-close\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>close()</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#close-a-database-connection\" id=\"ref-for-close-a-database-connection③\" aria-expanded=\"false\" class=\"has-ref-hint\">close a database connection</a> with this <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection④⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">connection</a>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore name setter",
      "html": "The <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-name\" id=\"ref-for-dom-idbobjectstore-name③\" aria-expanded=\"false\" class=\"has-ref-hint\">name</a></code> setter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>name</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#the-given-value\" id=\"ref-for-the-given-value\" aria-expanded=\"false\" class=\"has-ref-hint\">the given value</a>.</p>"
        },
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction①\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store②\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②②\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror①②\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException③④\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var> is not an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction②⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">upgrade transaction</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②③\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror①③\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException③⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②④\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror③\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException③⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-name\" id=\"ref-for-object-store-name①④\" aria-expanded=\"false\" class=\"has-ref-hint\">name</a> is equal to <var>name</var>,\nterminate these steps.</p>"
        },
        {
          "html": "<p>If an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑦④\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-name\" id=\"ref-for-object-store-name①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">named</a> <var>name</var> already exists in <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑤②\" aria-expanded=\"false\" class=\"has-ref-hint\">database</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#constrainterror\" id=\"ref-for-constrainterror③\" aria-expanded=\"false\" class=\"has-ref-hint\">ConstraintError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException③⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Set <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-name\" id=\"ref-for-object-store-name①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">name</a> to <var>name</var>.</p>"
        },
        {
          "html": "<p>Set <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②①\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-name\" id=\"ref-for-object-store-handle-name\" aria-expanded=\"false\" class=\"has-ref-hint\">name</a> to <var>name</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/indexNames",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-indexnames",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-idbobjectstore-indexnames\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>indexNames</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>names</var> be a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list④\" aria-expanded=\"false\" class=\"has-ref-hint\">list</a> of the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-name\" id=\"ref-for-index-name①\" aria-expanded=\"false\" class=\"has-ref-hint\">names</a> of the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept①⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">indexes</a> in <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②③\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-index-set\" id=\"ref-for-object-store-handle-index-set①\" aria-expanded=\"false\" class=\"has-ref-hint\">index set</a>.</p>"
        },
        {
          "html": "<p>Return the result (a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#domstringlist\" id=\"ref-for-domstringlist④\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMStringList</a></code>) of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#create-a-sorted-name-list\" id=\"ref-for-create-a-sorted-name-list①\" aria-expanded=\"false\" class=\"has-ref-hint\">creating a sorted name list</a> with <var>names</var>.</p>"
        }
      ]
    },
    {
      "name": "add or put",
      "href": "https://www.w3.org/TR/IndexedDB-3/#add-or-put",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"add-or-put\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">add or put</dfn> with <var>handle</var>, <var>value</var>, <var>key</var>, and <var>no-overwrite flag</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <var>handle</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction③\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <var>handle</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror①④\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException④②\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException④③\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var> is a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-read-only-transaction\" id=\"ref-for-transaction-read-only-transaction⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">read-only transaction</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#readonlyerror\" id=\"ref-for-readonlyerror②\" aria-expanded=\"false\" class=\"has-ref-hint\">ReadOnlyError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException④④\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>store</var> uses <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-in-line-keys\" id=\"ref-for-object-store-in-line-keys②\" aria-expanded=\"false\" class=\"has-ref-hint\">in-line keys</a> and <var>key</var> was given, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException④⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>store</var> uses <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-out-of-line-keys\" id=\"ref-for-object-store-out-of-line-keys①\" aria-expanded=\"false\" class=\"has-ref-hint\">out-of-line keys</a> and has no <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-generator\" id=\"ref-for-key-generator①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">key\ngenerator</a> and <var>key</var> was not given, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException④⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "If <var>key</var> was given, then:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>r</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key④\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a\nvalue to a key</a> with <var>key</var>. Rethrow any exceptions.</p>"
            },
            {
              "html": "<p>If <var>r</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③①\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException④⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
            },
            {
              "html": "<p>Let <var>key</var> be <var>r</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Let <var>targetRealm</var> be a user-agent defined <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#realm\" id=\"ref-for-realm\" aria-expanded=\"false\" class=\"has-ref-hint\">Realm</a>.</p>"
        },
        {
          "html": "<p>Let <var>clone</var> be a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#clone\" id=\"ref-for-clone\" aria-expanded=\"false\" class=\"has-ref-hint\">clone</a> of <var>value</var> in <var>targetRealm</var> during <var>transaction</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "If <var>store</var> uses <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-in-line-keys\" id=\"ref-for-object-store-in-line-keys③\" aria-expanded=\"false\" class=\"has-ref-hint\">in-line keys</a>, then:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>kpk</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#extract-a-key-from-a-value-using-a-key-path\" id=\"ref-for-extract-a-key-from-a-value-using-a-key-path①\" aria-expanded=\"false\" class=\"has-ref-hint\">extracting a\nkey from a value using a key path</a> with <var>clone</var> and <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-key-path\" id=\"ref-for-object-store-key-path①③\" aria-expanded=\"false\" class=\"has-ref-hint\">key path</a>. Rethrow any\nexceptions.</p>"
            },
            {
              "html": "<p>If <var>kpk</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③②\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException④⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
            },
            {
              "html": "<p>If <var>kpk</var> is not failure, let <var>key</var> be <var>kpk</var>.</p>"
            },
            {
              "html": "Otherwise (<var>kpk</var> is failure):",
              "rationale": "if",
              "steps": [
                {
                  "html": "<p>If <var>store</var> does not have a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-generator\" id=\"ref-for-key-generator①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">key generator</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③③\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror①①\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException④⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
                },
                {
                  "html": "<p>Otherwise, if <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#check-that-a-key-could-be-injected-into-a-value\" id=\"ref-for-check-that-a-key-could-be-injected-into-a-value\" aria-expanded=\"false\" class=\"has-ref-hint\">check that a key could be injected into a value</a> with <var>clone</var> and <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-key-path\" id=\"ref-for-object-store-key-path①④\" aria-expanded=\"false\" class=\"has-ref-hint\">key path</a> return\nfalse, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③④\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror①②\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑤⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
                }
              ]
            }
          ]
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#store-a-record-into-an-object-store\" id=\"ref-for-store-a-record-into-an-object-store\" aria-expanded=\"false\" class=\"has-ref-hint\">store a record into an object store</a> with <var>store</var>, <var>clone</var>, <var>key</var>, and <var>no-overwrite flag</var>.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request①\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> with <var>handle</var> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/delete(query)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-delete",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbobjectstore-delete\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>delete(<var>query</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction④\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑤①\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state①①\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑤②\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var> is a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-read-only-transaction\" id=\"ref-for-transaction-read-only-transaction⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">read-only transaction</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#readonlyerror\" id=\"ref-for-readonlyerror③\" aria-expanded=\"false\" class=\"has-ref-hint\">ReadOnlyError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑤③\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a value to a key range</a> with <var>query</var> and true. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#delete-records-from-an-object-store\" id=\"ref-for-delete-records-from-an-object-store\" aria-expanded=\"false\" class=\"has-ref-hint\">delete records from an object store</a> with <var>store</var> and <var>range</var>.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request②\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/clear()",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-clear",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbobjectstore-clear\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>clear()</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③①\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③②\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑤④\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state①②\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active①①\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑤⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var> is a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-read-only-transaction\" id=\"ref-for-transaction-read-only-transaction⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">read-only transaction</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#readonlyerror\" id=\"ref-for-readonlyerror④\" aria-expanded=\"false\" class=\"has-ref-hint\">ReadOnlyError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑤⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#clear-an-object-store\" id=\"ref-for-clear-an-object-store\" aria-expanded=\"false\" class=\"has-ref-hint\">clear an object store</a> with <var>store</var>.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest①⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request③\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③③\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/get(query)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-get",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbobjectstore-get\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>get(<var>query</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③④\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④①\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑤⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state①③\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active①③\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④②\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑤⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range①\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a value to a key range</a> with <var>query</var> and true. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#retrieve-a-value-from-an-object-store\" id=\"ref-for-retrieve-a-value-from-an-object-store\" aria-expanded=\"false\" class=\"has-ref-hint\">retrieve a value from an object store</a> with <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm\" id=\"ref-for-current-realm\" aria-expanded=\"false\" class=\"has-ref-hint\">the current Realm record</a>, <var>store</var>, and <var>range</var>.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest②⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request④\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/getKey(query)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-getkey",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbobjectstore-getkey\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>getKey(<var>query</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④③\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑥⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state①④\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active①④\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④④\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑥①\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range②\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a value to a key range</a> with <var>query</var> and true. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#retrieve-a-key-from-an-object-store\" id=\"ref-for-retrieve-a-key-from-an-object-store\" aria-expanded=\"false\" class=\"has-ref-hint\">retrieve a key from an object store</a> with <var>store</var> and <var>range</var>.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest②①\" aria-expanded=\"false\" class=\"has-ref-hint\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/getAll(query, count)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-getall",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"getAll(query, count)|getAll(query)|getAll()\" id=\"dom-idbobjectstore-getall\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>getAll(<var>query</var>, <var>count</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④①\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror①⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑥②\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror①①\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑥③\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range③\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a value to a key range</a> with <var>query</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#retrieve-multiple-values-from-an-object-store\" id=\"ref-for-retrieve-multiple-values-from-an-object-store\" aria-expanded=\"false\" class=\"has-ref-hint\">retrieve multiple values from an object store</a> with <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm\" id=\"ref-for-current-realm①\" aria-expanded=\"false\" class=\"has-ref-hint\">the current Realm record</a>, <var>store</var>, <var>range</var>, and <var>count</var> if given.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest②②\" aria-expanded=\"false\" class=\"has-ref-hint\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④②\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/getAllKeys(query, count)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-getallkeys",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"getAllKeys(query, count)|getAllKeys(query)|getAllKeys()\" id=\"dom-idbobjectstore-getallkeys\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>getAllKeys(<var>query</var>, <var>count</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④③\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④④\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store①①\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror②⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑥④\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror①②\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑥⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range④\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a value to a key range</a> with <var>query</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#retrieve-multiple-keys-from-an-object-store\" id=\"ref-for-retrieve-multiple-keys-from-an-object-store\" aria-expanded=\"false\" class=\"has-ref-hint\">retrieve multiple keys from an object store</a> with <var>store</var>, <var>range</var>, and <var>count</var> if given.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest②③\" aria-expanded=\"false\" class=\"has-ref-hint\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/count(query)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-count",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"count(query)|count()\" id=\"dom-idbobjectstore-count\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>count(<var>query</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store①②\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror②①\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑥⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror①③\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑥⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a value to a key range</a> with <var>query</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#count-the-records-in-a-range\" id=\"ref-for-count-the-records-in-a-range\" aria-expanded=\"false\" class=\"has-ref-hint\">count the records in a range</a> with <var>store</var> and <var>range</var>.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest②④\" aria-expanded=\"false\" class=\"has-ref-hint\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/openCursor(query, direction)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-opencursor",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"openCursor(query, direction)|openCursor(query)|openCursor()\" id=\"dom-idbobjectstore-opencursor\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>openCursor(<var>query</var>, <var>direction</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction①①\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store①③\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤①\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror②②\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑥⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active①⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤②\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑦⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a value to a key range</a> with <var>query</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>cursor</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor\" id=\"ref-for-cursor①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">cursor</a> with its <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-transaction\" id=\"ref-for-cursor-transaction\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a> set to <var>transaction</var>,\nundefined <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position③\" aria-expanded=\"false\" class=\"has-ref-hint\">position</a>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction①\" aria-expanded=\"false\" class=\"has-ref-hint\">direction</a> set to <var>direction</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag\" aria-expanded=\"false\" class=\"has-ref-hint\">got value flag</a> set to false,\nundefined <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key\" id=\"ref-for-cursor-key\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-value\" id=\"ref-for-cursor-value①\" aria-expanded=\"false\" class=\"has-ref-hint\">value</a>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">source</a> set to <var>store</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-range\" id=\"ref-for-cursor-range②\" aria-expanded=\"false\" class=\"has-ref-hint\">range</a> set to <var>range</var>, and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key-only-flag\" id=\"ref-for-cursor-key-only-flag①\" aria-expanded=\"false\" class=\"has-ref-hint\">key only flag</a> set to false.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#iterate-a-cursor\" id=\"ref-for-iterate-a-cursor\" aria-expanded=\"false\" class=\"has-ref-hint\">iterate a cursor</a> with <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm\" id=\"ref-for-current-realm②\" aria-expanded=\"false\" class=\"has-ref-hint\">the current Realm record</a> and <var>cursor</var>.</p>"
        },
        {
          "html": "<p>Let <var>request</var> be the result of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤①\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a> and <var>operation</var>.</p>"
        },
        {
          "html": "<p>Set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-request\" id=\"ref-for-cursor-request\" aria-expanded=\"false\" class=\"has-ref-hint\">request</a> to <var>request</var>.</p>"
        },
        {
          "html": "<p>Return <var>request</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/openKeyCursor(query, direction)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-openkeycursor",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"openKeyCursor(query, direction)|openKeyCursor(query)|openKeyCursor()\" id=\"dom-idbobjectstore-openkeycursor\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>openKeyCursor(<var>query</var>, <var>direction</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤②\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction①②\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤③\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store①④\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤③\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror②③\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑦①\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state①⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active②⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤④\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑦②\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a value to a key range</a> with <var>query</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>cursor</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor\" id=\"ref-for-cursor②⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">cursor</a> with its <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-transaction\" id=\"ref-for-cursor-transaction①\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a> set to <var>transaction</var>,\nundefined <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position④\" aria-expanded=\"false\" class=\"has-ref-hint\">position</a>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction②\" aria-expanded=\"false\" class=\"has-ref-hint\">direction</a> set to <var>direction</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag①\" aria-expanded=\"false\" class=\"has-ref-hint\">got value flag</a> set to false,\nundefined <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key\" id=\"ref-for-cursor-key①\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-value\" id=\"ref-for-cursor-value②\" aria-expanded=\"false\" class=\"has-ref-hint\">value</a>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">source</a> set to <var>store</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-range\" id=\"ref-for-cursor-range④\" aria-expanded=\"false\" class=\"has-ref-hint\">range</a> set to <var>range</var>, and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key-only-flag\" id=\"ref-for-cursor-key-only-flag②\" aria-expanded=\"false\" class=\"has-ref-hint\">key only flag</a> set to true.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#iterate-a-cursor\" id=\"ref-for-iterate-a-cursor①\" aria-expanded=\"false\" class=\"has-ref-hint\">iterate a cursor</a> with <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm\" id=\"ref-for-current-realm③\" aria-expanded=\"false\" class=\"has-ref-hint\">the current Realm record</a> and <var>cursor</var>.</p>"
        },
        {
          "html": "<p>Let <var>request</var> be the result of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤④\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a> and <var>operation</var>.</p>"
        },
        {
          "html": "<p>Set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-request\" id=\"ref-for-cursor-request①\" aria-expanded=\"false\" class=\"has-ref-hint\">request</a> to <var>request</var>.</p>"
        },
        {
          "html": "<p>Return <var>request</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/createIndex(name, keyPath, options)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-createindex",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"createIndex(name, keyPath, options)|createIndex(name, keyPath)\" id=\"dom-idbobjectstore-createindex\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>createIndex(<var>name</var>, <var>keyPath</var>, <var>options</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction①③\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var> is not an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction③③\" aria-expanded=\"false\" class=\"has-ref-hint\">upgrade transaction</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror②⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑦⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror②⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑦⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state②⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active②①\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑦⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept②⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">index</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-name\" id=\"ref-for-index-name④\" aria-expanded=\"false\" class=\"has-ref-hint\">named</a> <var>name</var> already exists in <var>store</var>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#constrainterror\" id=\"ref-for-constrainterror⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">ConstraintError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑦⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>keyPath</var> is not a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#valid-key-path\" id=\"ref-for-valid-key-path①\" aria-expanded=\"false\" class=\"has-ref-hint\">valid key path</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#syntaxerror\" id=\"ref-for-syntaxerror②\" aria-expanded=\"false\" class=\"has-ref-hint\">SyntaxError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑧⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>unique</var> be <var>options</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbindexparameters-unique\" id=\"ref-for-dom-idbindexparameters-unique①\" aria-expanded=\"false\" class=\"has-ref-hint\">unique</a></code> member.</p>"
        },
        {
          "html": "<p>Let <var>multiEntry</var> be <var>options</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbindexparameters-multientry\" id=\"ref-for-dom-idbindexparameters-multientry\" aria-expanded=\"false\" class=\"has-ref-hint\">multiEntry</a></code> member.</p>"
        },
        {
          "html": "<p>If <var>keyPath</var> is a sequence and <var>multiEntry</var> is\ntrue, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidaccesserror\" id=\"ref-for-invalidaccesserror③\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidAccessError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑧①\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept②⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">index</a> in <var>store</var>.\nSet <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-name\" id=\"ref-for-index-name⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">name</a> to <var>name</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-key-path\" id=\"ref-for-index-key-path③\" aria-expanded=\"false\" class=\"has-ref-hint\">key path</a> to <var>keyPath</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-unique-flag\" id=\"ref-for-index-unique-flag②\" aria-expanded=\"false\" class=\"has-ref-hint\">unique flag</a> to <var>unique</var>, and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-multientry-flag\" id=\"ref-for-index-multientry-flag②\" aria-expanded=\"false\" class=\"has-ref-hint\">multiEntry flag</a> to <var>multiEntry</var>.</p>"
        },
        {
          "html": "<p>Add <var>index</var> to <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-index-set\" id=\"ref-for-object-store-handle-index-set②\" aria-expanded=\"false\" class=\"has-ref-hint\">index set</a>.</p>"
        },
        {
          "html": "<p>Return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle\" id=\"ref-for-index-handle⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">index handle</a> associated with <var>index</var> and <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/index(name)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-index",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbobjectstore-index\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>index(<var>name</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction①④\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥①\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror②⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑧④\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state②①\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-finished\" id=\"ref-for-transaction-finished①②\" aria-expanded=\"false\" class=\"has-ref-hint\">finished</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥②\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror②⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑧⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept②⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">index</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-name\" id=\"ref-for-index-name⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">named</a> <var>name</var> in <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥①\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-index-set\" id=\"ref-for-object-store-handle-index-set③\" aria-expanded=\"false\" class=\"has-ref-hint\">index set</a> if one exists, or <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥③\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#notfounderror\" id=\"ref-for-notfounderror③\" aria-expanded=\"false\" class=\"has-ref-hint\">NotFoundError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑧⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code> otherwise.</p>"
        },
        {
          "html": "<p>Return an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle\" id=\"ref-for-index-handle⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">index handle</a> associated with <var>index</var> and <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥②\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/deleteIndex(name)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-deleteindex",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbobjectstore-deleteindex\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>deleteIndex(<var>name</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥③\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥④\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var> is not an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction③⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">upgrade transaction</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥④\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror③⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑧⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror③①\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑧⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state②②\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active②②\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑧⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept③⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">index</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-name\" id=\"ref-for-index-name⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">named</a> <var>name</var> in <var>store</var> if one exists, or <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#notfounderror\" id=\"ref-for-notfounderror④\" aria-expanded=\"false\" class=\"has-ref-hint\">NotFoundError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑨⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code> otherwise.</p>"
        },
        {
          "html": "<p>Remove <var>index</var> from <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-index-set\" id=\"ref-for-object-store-handle-index-set④\" aria-expanded=\"false\" class=\"has-ref-hint\">index set</a>.</p>"
        },
        {
          "html": "<p>Destroy <var>index</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBIndex name setter",
      "html": "The <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbindex-name\" id=\"ref-for-dom-idbindex-name③\" aria-expanded=\"false\" class=\"has-ref-hint\">name</a></code> setter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>name</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#the-given-value\" id=\"ref-for-the-given-value①\" aria-expanded=\"false\" class=\"has-ref-hint\">the given value</a>.</p>"
        },
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-transaction\" id=\"ref-for-index-handle-transaction\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-index\" id=\"ref-for-index-handle-index①\" aria-expanded=\"false\" class=\"has-ref-hint\">index</a>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var> is not an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction④②\" aria-expanded=\"false\" class=\"has-ref-hint\">upgrade transaction</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror③③\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑨②\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state②③\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active②③\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror①⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑨③\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>index</var> or <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑧①\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a> has\nbeen deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror③④\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑨④\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-name\" id=\"ref-for-index-name①③\" aria-expanded=\"false\" class=\"has-ref-hint\">name</a> is equal to <var>name</var>, terminate these steps.</p>"
        },
        {
          "html": "<p>If an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept③④\" aria-expanded=\"false\" class=\"has-ref-hint\">index</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-name\" id=\"ref-for-index-name①④\" aria-expanded=\"false\" class=\"has-ref-hint\">named</a> <var>name</var> already exists in <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑧②\" aria-expanded=\"false\" class=\"has-ref-hint\">object\nstore</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦①\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#constrainterror\" id=\"ref-for-constrainterror⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">ConstraintError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑨⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Set <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-name\" id=\"ref-for-index-name①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">name</a> to <var>name</var>.</p>"
        },
        {
          "html": "<p>Set <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-name\" id=\"ref-for-index-handle-name\" aria-expanded=\"false\" class=\"has-ref-hint\">name</a> to <var>name</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBIndex/get(query)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbindex-get",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBIndex\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbindex-get\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>get(<var>query</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑦④\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-transaction\" id=\"ref-for-index-handle-transaction①\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑦⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-index\" id=\"ref-for-index-handle-index⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">index</a>.</p>"
        },
        {
          "html": "<p>If <var>index</var> or <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑧③\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a> has\nbeen deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦②\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror③⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑨⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state②④\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active②⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦③\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror②①\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑨⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a value to a key range</a> with <var>query</var> and true. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#retrieve-a-referenced-value-from-an-index\" id=\"ref-for-retrieve-a-referenced-value-from-an-index\" aria-expanded=\"false\" class=\"has-ref-hint\">retrieve a referenced value from an index</a> with <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm\" id=\"ref-for-current-realm④\" aria-expanded=\"false\" class=\"has-ref-hint\">the current Realm record</a>, <var>index</var>, and <var>range</var>.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest③④\" aria-expanded=\"false\" class=\"has-ref-hint\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request①①\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑦⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBIndex/getKey(query)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbindex-getkey",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBIndex\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbindex-getkey\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>getKey(<var>query</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑦⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-transaction\" id=\"ref-for-index-handle-transaction②\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑦⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-index\" id=\"ref-for-index-handle-index⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">index</a>.</p>"
        },
        {
          "html": "<p>If <var>index</var> or <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑧④\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦④\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror③⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑨⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state②⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active②⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror②②\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⓪⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a value to a key range</a> with <var>query</var> and true. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#retrieve-a-value-from-an-index\" id=\"ref-for-retrieve-a-value-from-an-index\" aria-expanded=\"false\" class=\"has-ref-hint\">retrieve a value from an index</a> with <var>index</var> and <var>range</var>.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest③⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request①②\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑦⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBIndex/getAll(query, count)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbindex-getall",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBIndex\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"getAll(query, count)|getAll(query)|getAll()\" id=\"dom-idbindex-getall\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>getAll(<var>query</var>, <var>count</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-transaction\" id=\"ref-for-index-handle-transaction③\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧①\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-index\" id=\"ref-for-index-handle-index⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">index</a>.</p>"
        },
        {
          "html": "<p>If <var>index</var> or <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑧⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a> has\nbeen deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror③⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⓪①\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state②⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active②⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror②③\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⓪②\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a value to a key range</a> with <var>query</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#retrieve-multiple-referenced-values-from-an-index\" id=\"ref-for-retrieve-multiple-referenced-values-from-an-index\" aria-expanded=\"false\" class=\"has-ref-hint\">retrieve multiple referenced values from an index</a> with <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm\" id=\"ref-for-current-realm⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">the current Realm record</a>, <var>index</var>, <var>range</var>, and <var>count</var> if given.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest③⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request①③\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧②\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBIndex/getAllKeys(query, count)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbindex-getallkeys",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBIndex\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"getAllKeys(query, count)|getAllKeys(query)|getAllKeys()\" id=\"dom-idbindex-getallkeys\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>getAllKeys(<var>query</var>, <var>count</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧③\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-transaction\" id=\"ref-for-index-handle-transaction④\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧④\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-index\" id=\"ref-for-index-handle-index⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">index</a>.</p>"
        },
        {
          "html": "<p>If <var>index</var> or <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑧⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a> has\nbeen deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror③⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⓪③\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state②⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active②⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror②④\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⓪④\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range①①\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a value to a key range</a> with <var>query</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#retrieve-multiple-values-from-an-index\" id=\"ref-for-retrieve-multiple-values-from-an-index\" aria-expanded=\"false\" class=\"has-ref-hint\">retrieve multiple values from an index</a> with <var>index</var>, <var>range</var>, and <var>count</var> if given.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest③⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request①④\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBIndex/count(query)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbindex-count",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBIndex\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"count(query)|count()\" id=\"dom-idbindex-count\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>count(<var>query</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-transaction\" id=\"ref-for-index-handle-transaction⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-index\" id=\"ref-for-index-handle-index⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">index</a>.</p>"
        },
        {
          "html": "<p>If <var>index</var> or <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑧⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a> has\nbeen deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror③⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⓪⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state②⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active②⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧①\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror②⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⓪⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range①②\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a value to a key range</a> with <var>query</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#count-the-records-in-a-range\" id=\"ref-for-count-the-records-in-a-range①\" aria-expanded=\"false\" class=\"has-ref-hint\">count the records in a range</a> with <var>index</var> and <var>range</var>.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest③⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBIndex/openCursor(query, direction)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbindex-opencursor",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBIndex\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"openCursor(query, direction)|openCursor(query)|openCursor()\" id=\"dom-idbindex-opencursor\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>openCursor(<var>query</var>, <var>direction</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-transaction\" id=\"ref-for-index-handle-transaction⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑨⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-index\" id=\"ref-for-index-handle-index①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">index</a>.</p>"
        },
        {
          "html": "<p>If <var>index</var> or <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑧⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧②\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror④⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⓪⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state②⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active③①\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧③\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror②⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⓪⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range①③\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a value to a key range</a> with <var>query</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>cursor</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor\" id=\"ref-for-cursor②④\" aria-expanded=\"false\" class=\"has-ref-hint\">cursor</a> with its <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-transaction\" id=\"ref-for-cursor-transaction②\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a> set to <var>transaction</var>,\nundefined <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">position</a>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction③\" aria-expanded=\"false\" class=\"has-ref-hint\">direction</a> set to <var>direction</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag②\" aria-expanded=\"false\" class=\"has-ref-hint\">got value flag</a> set to false,\nundefined <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key\" id=\"ref-for-cursor-key②\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-value\" id=\"ref-for-cursor-value③\" aria-expanded=\"false\" class=\"has-ref-hint\">value</a>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source①①\" aria-expanded=\"false\" class=\"has-ref-hint\">source</a> set to <var>index</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-range\" id=\"ref-for-cursor-range⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">range</a> set to <var>range</var>, and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key-only-flag\" id=\"ref-for-cursor-key-only-flag④\" aria-expanded=\"false\" class=\"has-ref-hint\">key only flag</a> set to false.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#iterate-a-cursor\" id=\"ref-for-iterate-a-cursor②\" aria-expanded=\"false\" class=\"has-ref-hint\">iterate a cursor</a> with <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm\" id=\"ref-for-current-realm⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">the current Realm record</a> and <var>cursor</var>.</p>"
        },
        {
          "html": "<p>Let <var>request</var> be the result of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑨①\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a> and <var>operation</var>.</p>"
        },
        {
          "html": "<p>Set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-request\" id=\"ref-for-cursor-request②\" aria-expanded=\"false\" class=\"has-ref-hint\">request</a> to <var>request</var>.</p>"
        },
        {
          "html": "<p>Return <var>request</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBIndex/openKeyCursor(query, direction)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbindex-openkeycursor",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBIndex\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"openKeyCursor(query, direction)|openKeyCursor(query)|openKeyCursor()\" id=\"dom-idbindex-openkeycursor\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>openKeyCursor(<var>query</var>, <var>direction</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑨②\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-transaction\" id=\"ref-for-index-handle-transaction⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑨③\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-index\" id=\"ref-for-index-handle-index①①\" aria-expanded=\"false\" class=\"has-ref-hint\">index</a>.</p>"
        },
        {
          "html": "<p>If <var>index</var> or <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑧⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a> has\nbeen deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧④\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror④①\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state③⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active③②\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror②⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①①①\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range①④\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a value to a key range</a> with <var>query</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>cursor</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor\" id=\"ref-for-cursor②⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">cursor</a> with its <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-transaction\" id=\"ref-for-cursor-transaction③\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a> set to <var>transaction</var>,\nundefined <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">position</a>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction④\" aria-expanded=\"false\" class=\"has-ref-hint\">direction</a> set to <var>direction</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag③\" aria-expanded=\"false\" class=\"has-ref-hint\">got value flag</a> set to false,\nundefined <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key\" id=\"ref-for-cursor-key③\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-value\" id=\"ref-for-cursor-value④\" aria-expanded=\"false\" class=\"has-ref-hint\">value</a>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source①②\" aria-expanded=\"false\" class=\"has-ref-hint\">source</a> set to <var>index</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-range\" id=\"ref-for-cursor-range⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">range</a> set to <var>range</var>, and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key-only-flag\" id=\"ref-for-cursor-key-only-flag⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">key only flag</a> set to true.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#iterate-a-cursor\" id=\"ref-for-iterate-a-cursor③\" aria-expanded=\"false\" class=\"has-ref-hint\">iterate a cursor</a> with <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm\" id=\"ref-for-current-realm⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">the current Realm record</a> and <var>cursor</var>.</p>"
        },
        {
          "html": "<p>Let <var>request</var> be the result of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑨④\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a> and <var>operation</var>.</p>"
        },
        {
          "html": "<p>Set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-request\" id=\"ref-for-cursor-request③\" aria-expanded=\"false\" class=\"has-ref-hint\">request</a> to <var>request</var>.</p>"
        },
        {
          "html": "<p>Return <var>request</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBKeyRange/only(value)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbkeyrange-only",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBKeyRange\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbkeyrange-only\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>only(<var>value</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>key</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">converting\na value to a key</a> with <var>value</var>. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>key</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror①③\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①①②\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Create and return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range\" id=\"ref-for-key-range④⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">key range</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#containing-only\" id=\"ref-for-containing-only①\" aria-expanded=\"false\" class=\"has-ref-hint\">containing only</a> <var>key</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBKeyRange/lowerBound(lower, open)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbkeyrange-lowerbound",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBKeyRange\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"lowerBound(lower, open)|lowerBound(lower)\" id=\"dom-idbkeyrange-lowerbound\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>lowerBound(<var>lower</var>, <var>open</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>lowerKey</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a\nvalue to a key</a> with <var>lower</var>. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>lowerKey</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror①④\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①①③\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Create and return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range\" id=\"ref-for-key-range④⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">key range</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-lower-bound\" id=\"ref-for-key-range-lower-bound⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">lower bound</a> set to <var>lowerKey</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-lower-open-flag\" id=\"ref-for-key-range-lower-open-flag⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">lower open flag</a> set to <var>open</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-upper-bound\" id=\"ref-for-key-range-upper-bound⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">upper bound</a> set to null, and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-upper-open-flag\" id=\"ref-for-key-range-upper-open-flag⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">upper open flag</a> set to true.</p>"
        }
      ]
    },
    {
      "name": "IDBKeyRange/upperBound(upper, open)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbkeyrange-upperbound",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBKeyRange\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"upperBound(upper, open)|upperBound(upper)\" id=\"dom-idbkeyrange-upperbound\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>upperBound(<var>upper</var>, <var>open</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>upperKey</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a\nvalue to a key</a> with <var>upper</var>. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>upperKey</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①①④\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Create and return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range\" id=\"ref-for-key-range④⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">key range</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-lower-bound\" id=\"ref-for-key-range-lower-bound①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">lower bound</a> set to null, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-lower-open-flag\" id=\"ref-for-key-range-lower-open-flag⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">lower open flag</a> set to true, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-upper-bound\" id=\"ref-for-key-range-upper-bound①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">upper bound</a> set to <var>upperKey</var>, and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-upper-open-flag\" id=\"ref-for-key-range-upper-open-flag⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">upper open flag</a> set to <var>open</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBKeyRange/bound(lower, upper, lowerOpen, upperOpen)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbkeyrange-bound",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBKeyRange\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"bound(lower, upper, lowerOpen, upperOpen)|bound(lower, upper, lowerOpen)|bound(lower, upper)\" id=\"dom-idbkeyrange-bound\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>bound(<var>lower</var>, <var>upper</var>, <var>lowerOpen</var>, <var>upperOpen</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>lowerKey</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a\nvalue to a key</a> with <var>lower</var>. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>lowerKey</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>upperKey</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a\nvalue to a key</a> with <var>upper</var>. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>upperKey</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>lowerKey</var> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than④\" aria-expanded=\"false\" class=\"has-ref-hint\">greater than</a> <var>upperKey</var>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨①\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Create and return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range\" id=\"ref-for-key-range④⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">key range</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-lower-bound\" id=\"ref-for-key-range-lower-bound①①\" aria-expanded=\"false\" class=\"has-ref-hint\">lower bound</a> set to <var>lowerKey</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-lower-open-flag\" id=\"ref-for-key-range-lower-open-flag⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">lower open flag</a> set to <var>lowerOpen</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-upper-bound\" id=\"ref-for-key-range-upper-bound①①\" aria-expanded=\"false\" class=\"has-ref-hint\">upper bound</a> set to <var>upperKey</var> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-upper-open-flag\" id=\"ref-for-key-range-upper-open-flag⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">upper open\nflag</a> set to <var>upperOpen</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBKeyRange/includes(key)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbkeyrange-includes",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBKeyRange\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbkeyrange-includes\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>includes(<var>key</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>k</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a\nvalue to a key</a> with <var>key</var>. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>k</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨②\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror①⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Return true if <var>k</var> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in①\" aria-expanded=\"false\" class=\"has-ref-hint\">in</a> this range, and false otherwise.</p>"
        }
      ]
    },
    {
      "name": "IDBCursor/advance(count)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbcursor-advance",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBCursor\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbcursor-advance\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>advance(<var>count</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>count</var> is 0 (zero), <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨③\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror②\" aria-expanded=\"false\" class=\"has-ref-hint\">TypeError</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⓪②\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-transaction\" id=\"ref-for-cursor-transaction④\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state③①\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active③⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨④\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror③⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①②④\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⓪③\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">source</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-object-store\" id=\"ref-for-cursor-effective-object-store①\" aria-expanded=\"false\" class=\"has-ref-hint\">effective object\nstore</a> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror④⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①②⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⓪④\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag④\" aria-expanded=\"false\" class=\"has-ref-hint\">got value flag</a> is false, indicating that\nthe cursor is being iterated or has iterated past its end, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror④⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①②⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Set <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⓪⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">got value flag</a> to false.</p>"
        },
        {
          "html": "<p>Let <var>request</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⓪⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-request\" id=\"ref-for-cursor-request⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">request</a>.</p>"
        },
        {
          "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed-flag\" id=\"ref-for-request-processed-flag②\" aria-expanded=\"false\" class=\"has-ref-hint\">processed flag</a> to false.</p>"
        },
        {
          "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag①②\" aria-expanded=\"false\" class=\"has-ref-hint\">done flag</a> to false.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#iterate-a-cursor\" id=\"ref-for-iterate-a-cursor④\" aria-expanded=\"false\" class=\"has-ref-hint\">iterate a cursor</a> with <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm\" id=\"ref-for-current-realm⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">the current Realm record</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⓪⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>, and <var>count</var>.</p>"
        },
        {
          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⓪⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">source</a>, <var>operation</var>, and <var>request</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBCursor/continue(key)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbcursor-continue",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBCursor\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"continue(key)|continue()\" id=\"dom-idbcursor-continue\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>continue(<var>key</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⓪⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-transaction\" id=\"ref-for-cursor-transaction⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state③②\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active③⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror③①\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①②⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">source</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-object-store\" id=\"ref-for-cursor-effective-object-store②\" aria-expanded=\"false\" class=\"has-ref-hint\">effective object store</a> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror④⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①②⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①①①\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">got value flag</a> is false, indicating that\nthe cursor is being iterated or has iterated past its end, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror④⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①③⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "If <var>key</var> is given, then:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>r</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key①①\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a\nvalue to a key</a> with <var>key</var>. Rethrow any exceptions.</p>"
            },
            {
              "html": "<p>If <var>r</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror②⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①③①\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
            },
            {
              "html": "<p>Let <var>key</var> be <var>r</var>.</p>"
            },
            {
              "html": "<p>If <var>key</var> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#less-than\" id=\"ref-for-less-than②\" aria-expanded=\"false\" class=\"has-ref-hint\">less than</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to③\" aria-expanded=\"false\" class=\"has-ref-hint\">equal to</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①①②\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">position</a> and <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①①③\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">direction</a> is\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-next\" id=\"ref-for-dom-idbcursordirection-next③\" aria-expanded=\"false\" class=\"has-ref-hint\">next</a></code>\" or \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-nextunique\" id=\"ref-for-dom-idbcursordirection-nextunique②\" aria-expanded=\"false\" class=\"has-ref-hint\">nextunique</a></code>\", then <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪①\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror②①\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①③②\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
            },
            {
              "html": "<p>If <var>key</var> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">greater than</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to④\" aria-expanded=\"false\" class=\"has-ref-hint\">equal to</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①①④\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">position</a> and <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">direction</a> is\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-prev\" id=\"ref-for-dom-idbcursordirection-prev③\" aria-expanded=\"false\" class=\"has-ref-hint\">prev</a></code>\" or \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-prevunique\" id=\"ref-for-dom-idbcursordirection-prevunique②\" aria-expanded=\"false\" class=\"has-ref-hint\">prevunique</a></code>\", then <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪②\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror②②\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①③③\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
            }
          ]
        },
        {
          "html": "<p>Set <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">got value flag</a> to false.</p>"
        },
        {
          "html": "<p>Let <var>request</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-request\" id=\"ref-for-cursor-request⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">request</a>.</p>"
        },
        {
          "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed-flag\" id=\"ref-for-request-processed-flag③\" aria-expanded=\"false\" class=\"has-ref-hint\">processed flag</a> to false.</p>"
        },
        {
          "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag①③\" aria-expanded=\"false\" class=\"has-ref-hint\">done flag</a> to false.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#iterate-a-cursor\" id=\"ref-for-iterate-a-cursor⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">iterate a cursor</a> with <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm\" id=\"ref-for-current-realm⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">the current Realm record</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>, and <var>key</var> (if given).</p>"
        },
        {
          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request①⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①①⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">source</a>, <var>operation</var>, and <var>request</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBCursor/continuePrimaryKey(key, primaryKey)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbcursor-continueprimarykey",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBCursor\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbcursor-continueprimarykey\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>continuePrimaryKey(<var>key</var>, <var>primaryKey</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①②⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-transaction\" id=\"ref-for-cursor-transaction⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state③③\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active③⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪③\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror③②\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①③⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①②①\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source①⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">source</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-object-store\" id=\"ref-for-cursor-effective-object-store③\" aria-expanded=\"false\" class=\"has-ref-hint\">effective object\nstore</a> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪④\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑤①\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①③⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①②②\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source②⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">source</a> is not an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept③⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">index</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidaccesserror\" id=\"ref-for-invalidaccesserror⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidAccessError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①③⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①②③\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">direction</a> is not \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-next\" id=\"ref-for-dom-idbcursordirection-next④\" aria-expanded=\"false\" class=\"has-ref-hint\">next</a></code>\" or \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-prev\" id=\"ref-for-dom-idbcursordirection-prev④\" aria-expanded=\"false\" class=\"has-ref-hint\">prev</a></code>\", <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidaccesserror\" id=\"ref-for-invalidaccesserror⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidAccessError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①③⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①②④\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">got value flag</a> is false, indicating that\nthe cursor is being iterated or has iterated past its end, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑤②\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①③⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>r</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key①②\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a value to\na key</a> with <var>key</var>. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>r</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror②③\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①④⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>key</var> be <var>r</var>.</p>"
        },
        {
          "html": "<p>Let <var>r</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key①③\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a value\n to a key</a> with <var>primaryKey</var>. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>r</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror②④\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①④①\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>primaryKey</var> be <var>r</var>.</p>"
        },
        {
          "html": "<p>If <var>key</var> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#less-than\" id=\"ref-for-less-than③\" aria-expanded=\"false\" class=\"has-ref-hint\">less than</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①②⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">position</a> and <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①②⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">direction</a> is \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-next\" id=\"ref-for-dom-idbcursordirection-next⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">next</a></code>\", <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror②⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①④②\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>key</var> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">greater than</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①②⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">position</a> and <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①②⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction①①\" aria-expanded=\"false\" class=\"has-ref-hint\">direction</a> is \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-prev\" id=\"ref-for-dom-idbcursordirection-prev⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">prev</a></code>\", <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①①\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror②⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①④③\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>key</var> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">equal to</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①②⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position①①\" aria-expanded=\"false\" class=\"has-ref-hint\">position</a> and <var>primaryKey</var> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#less-than\" id=\"ref-for-less-than④\" aria-expanded=\"false\" class=\"has-ref-hint\">less than</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">equal to</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-object-store-position\" id=\"ref-for-cursor-object-store-position②\" aria-expanded=\"false\" class=\"has-ref-hint\">object store position</a> and <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③①\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction①②\" aria-expanded=\"false\" class=\"has-ref-hint\">direction</a> is\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-next\" id=\"ref-for-dom-idbcursordirection-next⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">next</a></code>\", <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①②\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror②⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①④④\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>key</var> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">equal to</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③②\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position①②\" aria-expanded=\"false\" class=\"has-ref-hint\">position</a> and <var>primaryKey</var> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">greater than</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">equal to</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③③\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-object-store-position\" id=\"ref-for-cursor-object-store-position③\" aria-expanded=\"false\" class=\"has-ref-hint\">object store position</a> and <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③④\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction①③\" aria-expanded=\"false\" class=\"has-ref-hint\">direction</a> is \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-prev\" id=\"ref-for-dom-idbcursordirection-prev⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">prev</a></code>\", <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①③\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror②⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①④⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Set <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag①①\" aria-expanded=\"false\" class=\"has-ref-hint\">got value flag</a> to false.</p>"
        },
        {
          "html": "<p>Let <var>request</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-request\" id=\"ref-for-cursor-request⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">request</a>.</p>"
        },
        {
          "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed-flag\" id=\"ref-for-request-processed-flag④\" aria-expanded=\"false\" class=\"has-ref-hint\">processed flag</a> to false.</p>"
        },
        {
          "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag①④\" aria-expanded=\"false\" class=\"has-ref-hint\">done flag</a> to false.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#iterate-a-cursor\" id=\"ref-for-iterate-a-cursor⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">iterate a cursor</a> with <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm\" id=\"ref-for-current-realm①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">the current Realm record</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>, <var>key</var>, and <var>primaryKey</var>.</p>"
        },
        {
          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request②⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source②①\" aria-expanded=\"false\" class=\"has-ref-hint\">source</a>, <var>operation</var>, and <var>request</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBCursor/update(value)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbcursor-update",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBCursor\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbcursor-update\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>update(<var>value</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-transaction\" id=\"ref-for-cursor-transaction⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state③④\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active③⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①④\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror③④\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑤⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var> is a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-read-only-transaction\" id=\"ref-for-transaction-read-only-transaction⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">read-only transaction</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#readonlyerror\" id=\"ref-for-readonlyerror⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">ReadOnlyError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑤①\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source②②\" aria-expanded=\"false\" class=\"has-ref-hint\">source</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-object-store\" id=\"ref-for-cursor-effective-object-store⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">effective object\nstore</a> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑤④\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑤②\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④①\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag①③\" aria-expanded=\"false\" class=\"has-ref-hint\">got value flag</a> is false, indicating that\nthe cursor is being iterated or has iterated past its end, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑤⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑤③\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④②\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key-only-flag\" id=\"ref-for-cursor-key-only-flag⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">key only flag</a> is true, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑤⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑤④\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>targetRealm</var> be a user-agent defined <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#realm\" id=\"ref-for-realm①\" aria-expanded=\"false\" class=\"has-ref-hint\">Realm</a>.</p>"
        },
        {
          "html": "<p>Let <var>clone</var> be a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#clone\" id=\"ref-for-clone①\" aria-expanded=\"false\" class=\"has-ref-hint\">clone</a> of <var>value</var> in <var>targetRealm</var> during <var>transaction</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④③\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-object-store\" id=\"ref-for-cursor-effective-object-store⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">effective object store</a> uses <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-in-line-keys\" id=\"ref-for-object-store-in-line-keys⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">in-line\nkeys</a>, then:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>kpk</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#extract-a-key-from-a-value-using-a-key-path\" id=\"ref-for-extract-a-key-from-a-value-using-a-key-path②\" aria-expanded=\"false\" class=\"has-ref-hint\">extracting a key from a value using a key path</a> with <var>clone</var> and the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-key-path\" id=\"ref-for-object-store-key-path①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">key\npath</a> of <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④④\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-object-store\" id=\"ref-for-cursor-effective-object-store⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">effective object store</a>.\nRethrow any exceptions.</p>"
            },
            {
              "html": "<p>If <var>kpk</var> is failure, invalid, or not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">equal to</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-key\" id=\"ref-for-cursor-effective-key④\" aria-expanded=\"false\" class=\"has-ref-hint\">effective key</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror③⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑤⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
            }
          ]
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#store-a-record-into-an-object-store\" id=\"ref-for-store-a-record-into-an-object-store①\" aria-expanded=\"false\" class=\"has-ref-hint\">store a record into an object store</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-object-store\" id=\"ref-for-cursor-effective-object-store⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">effective object store</a>, <var>clone</var>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-key\" id=\"ref-for-cursor-effective-key⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">effective key</a>, and false.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest④③\" aria-expanded=\"false\" class=\"has-ref-hint\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request②①\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBCursor/delete()",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbcursor-delete",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBCursor\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbcursor-delete\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>delete()</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-transaction\" id=\"ref-for-cursor-transaction⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state③⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active④⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①②⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror③⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑤⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var> is a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-read-only-transaction\" id=\"ref-for-transaction-read-only-transaction①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">read-only transaction</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①②①\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#readonlyerror\" id=\"ref-for-readonlyerror⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">ReadOnlyError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑤⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑤⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source②③\" aria-expanded=\"false\" class=\"has-ref-hint\">source</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-object-store\" id=\"ref-for-cursor-effective-object-store⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">effective object\nstore</a> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①②②\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑤⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑤⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑤①\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag①④\" aria-expanded=\"false\" class=\"has-ref-hint\">got value flag</a> is false, indicating that\nthe cursor is being iterated or has iterated past its end, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①②③\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑤⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑤⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑤②\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key-only-flag\" id=\"ref-for-cursor-key-only-flag⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">key only flag</a> is true, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①②④\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑤⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑥⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#delete-records-from-an-object-store\" id=\"ref-for-delete-records-from-an-object-store①\" aria-expanded=\"false\" class=\"has-ref-hint\">delete records from an object store</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑤③\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-object-store\" id=\"ref-for-cursor-effective-object-store①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">effective object store</a> and <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑤④\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-key\" id=\"ref-for-cursor-effective-key⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">effective key</a>.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest④④\" aria-expanded=\"false\" class=\"has-ref-hint\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request②②\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑤⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBTransaction/objectStoreNames",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbtransaction-objectstorenames",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBTransaction\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-idbtransaction-objectstorenames\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>objectStoreNames</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>names</var> be a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">list</a> of the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-name\" id=\"ref-for-object-store-name①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">names</a> of the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑨①\" aria-expanded=\"false\" class=\"has-ref-hint\">object stores</a> in <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑤⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-scope\" id=\"ref-for-transaction-scope①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">scope</a>.</p>"
        },
        {
          "html": "<p>Return the result (a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#domstringlist\" id=\"ref-for-domstringlist⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMStringList</a></code>) of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#create-a-sorted-name-list\" id=\"ref-for-create-a-sorted-name-list②\" aria-expanded=\"false\" class=\"has-ref-hint\">creating a sorted name list</a> with <var>names</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBTransaction/objectStore(name)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbtransaction-objectstore",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBTransaction\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbtransaction-objectstore\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>objectStore(<var>name</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑥②\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state③⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-finished\" id=\"ref-for-transaction-finished①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">finished</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①②⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑥⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑥⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑨③\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-name\" id=\"ref-for-object-store-name①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">named</a> <var>name</var> in <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑥③\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-scope\" id=\"ref-for-transaction-scope①②\" aria-expanded=\"false\" class=\"has-ref-hint\">scope</a>, or <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①②⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#notfounderror\" id=\"ref-for-notfounderror⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">NotFoundError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑥⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code> if none.</p>"
        },
        {
          "html": "<p>Return an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle\" id=\"ref-for-object-store-handle①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">object store handle</a> associated with <var>store</var> and <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑥④\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>.</p>"
        }
      ]
    },
    {
      "name": "IDBTransaction/abort()",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbtransaction-abort",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBTransaction\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbtransaction-abort\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>abort()</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑥⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state③⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-committing\" id=\"ref-for-transaction-committing①\" aria-expanded=\"false\" class=\"has-ref-hint\">committing</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-finished\" id=\"ref-for-transaction-finished①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">finished</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①②⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑥①\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑥⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Set <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑥⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state③⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-inactive\" id=\"ref-for-transaction-inactive②\" aria-expanded=\"false\" class=\"has-ref-hint\">inactive</a> and run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#abort-a-transaction\" id=\"ref-for-abort-a-transaction③\" aria-expanded=\"false\" class=\"has-ref-hint\">abort a transaction</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑥⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a> and null.</p>"
        }
      ]
    },
    {
      "name": "IDBTransaction/commit()",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbtransaction-commit",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBTransaction\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbtransaction-commit\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>commit()</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑥⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state③⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active④①\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①②⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑥②\" aria-expanded=\"false\" class=\"has-ref-hint\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑥⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#commit-a-transaction\" id=\"ref-for-commit-a-transaction\" aria-expanded=\"false\" class=\"has-ref-hint\">commit a transaction</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑥⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">this</a>.</p>"
        }
      ]
    },
    {
      "name": "open a database connection",
      "href": "https://www.w3.org/TR/IndexedDB-3/#open-a-database-connection",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"open-a-database-connection\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">open a database connection</dfn> with <var>storageKey</var> which requested the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑤⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">database</a> to be opened, a database <var>name</var>, a database <var>version</var>, and a <var>request</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>queue</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-queue\" id=\"ref-for-connection-queue②\" aria-expanded=\"false\" class=\"has-ref-hint\">connection queue</a> for <var>storageKey</var> and <var>name</var>.</p>"
        },
        {
          "html": "<p>Add <var>request</var> to <var>queue</var>.</p>"
        },
        {
          "html": "<p>Wait until all previous requests in <var>queue</var> have been processed.</p>"
        },
        {
          "html": "<p>Let <var>db</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑤⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">database</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-name\" id=\"ref-for-database-name④\" aria-expanded=\"false\" class=\"has-ref-hint\">named</a> <var>name</var> in <var>storageKey</var>, or null otherwise.</p>"
        },
        {
          "html": "<p>If <var>version</var> is undefined, let <var>version</var> be 1 if <var>db</var> is null, or <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">version</a> otherwise.</p>"
        },
        {
          "html": "<p>If <var>db</var> is null, let <var>db</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑤⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">database</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-name\" id=\"ref-for-database-name⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">name</a> <var>name</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">version</a> 0 (zero), and with\nno <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑨④\" aria-expanded=\"false\" class=\"has-ref-hint\">object stores</a>. If this fails for any reason, return an\nappropriate error (e.g. a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#quotaexceedederror\" id=\"ref-for-quotaexceedederror④\" aria-expanded=\"false\" class=\"has-ref-hint\">QuotaExceededError</a></code>\" or\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#unknownerror\" id=\"ref-for-unknownerror③\" aria-expanded=\"false\" class=\"has-ref-hint\">UnknownError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑦⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>).</p>"
        },
        {
          "html": "<p>If <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version①①\" aria-expanded=\"false\" class=\"has-ref-hint\">version</a> is greater than <var>version</var>,\nreturn a newly <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-create-exception\" id=\"ref-for-dfn-create-exception\" aria-expanded=\"false\" class=\"has-ref-hint\">created</a> \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#versionerror\" id=\"ref-for-versionerror①\" aria-expanded=\"false\" class=\"has-ref-hint\">VersionError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑦①\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code> and abort these steps.</p>"
        },
        {
          "html": "<p>Let <var>connection</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection⑤①\" aria-expanded=\"false\" class=\"has-ref-hint\">connection</a> to <var>db</var>.</p>"
        },
        {
          "html": "<p>Set <var>connection</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-version\" id=\"ref-for-connection-version②\" aria-expanded=\"false\" class=\"has-ref-hint\">version</a> to <var>version</var>.</p>"
        },
        {
          "html": "If <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version①②\" aria-expanded=\"false\" class=\"has-ref-hint\">version</a> is less than <var>version</var>, then:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>openConnections</var> be the <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ordered-set\" id=\"ref-for-ordered-set②\" aria-expanded=\"false\" class=\"has-ref-hint\">set</a> of all <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection⑤②\" aria-expanded=\"false\" class=\"has-ref-hint\">connections</a>,\nexcept <var>connection</var>, associated with <var>db</var>.</p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate①\" aria-expanded=\"false\" class=\"has-ref-hint\">For each</a> <var>entry</var> of <var>openConnections</var> that does not have its <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-close-pending-flag\" id=\"ref-for-connection-close-pending-flag④\" aria-expanded=\"false\" class=\"has-ref-hint\">close pending flag</a> set to true, <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task④\" aria-expanded=\"false\" class=\"has-ref-hint\">queue a task</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#fire-a-version-change-event\" id=\"ref-for-fire-a-version-change-event①\" aria-expanded=\"false\" class=\"has-ref-hint\">fire a\nversion change event</a> named <code class=\"idl\"><a class=\"idl-code has-ref-hint\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbdatabase-versionchange\" id=\"ref-for-eventdef-idbdatabase-versionchange⑧\" aria-expanded=\"false\">versionchange</a></code> at <var>entry</var> with <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version①③\" aria-expanded=\"false\" class=\"has-ref-hint\">version</a> and <var>version</var>.</p>"
            },
            {
              "html": "<p>Wait for all of the events to be fired.</p>"
            },
            {
              "html": "<p>If any of the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection⑤③\" aria-expanded=\"false\" class=\"has-ref-hint\">connections</a> in <var>openConnections</var> are still\nnot closed, <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">queue a task</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#fire-a-version-change-event\" id=\"ref-for-fire-a-version-change-event②\" aria-expanded=\"false\" class=\"has-ref-hint\">fire a version change\nevent</a> named <code class=\"idl\"><a class=\"idl-code has-ref-hint\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbopendbrequest-blocked\" id=\"ref-for-eventdef-idbopendbrequest-blocked④\" aria-expanded=\"false\">blocked</a></code> at <var>request</var> with <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version①④\" aria-expanded=\"false\" class=\"has-ref-hint\">version</a> and <var>version</var>.</p>"
            },
            {
              "html": "<p><span id=\"version-change-close-block\">Wait</span> until all <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection⑤④\" aria-expanded=\"false\" class=\"has-ref-hint\">connections</a> in <var>openConnections</var> are <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-closed\" id=\"ref-for-connection-closed⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">closed</a>.</p>"
            },
            {
              "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-a-database\" id=\"ref-for-upgrade-a-database②\" aria-expanded=\"false\" class=\"has-ref-hint\">upgrade a database</a> using <var>connection</var>, <var>version</var> and <var>request</var>.</p>"
            },
            {
              "html": "<p>If <var>connection</var> was <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-closed\" id=\"ref-for-connection-closed⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">closed</a>,\nreturn a newly <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-create-exception\" id=\"ref-for-dfn-create-exception①\" aria-expanded=\"false\" class=\"has-ref-hint\">created</a> \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#aborterror\" id=\"ref-for-aborterror③\" aria-expanded=\"false\" class=\"has-ref-hint\">AbortError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑦②\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code> and abort these steps.</p>"
            },
            {
              "html": "<p>If the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction④⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">upgrade transaction</a> was aborted, run the steps\nto <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#close-a-database-connection\" id=\"ref-for-close-a-database-connection④\" aria-expanded=\"false\" class=\"has-ref-hint\">close a database connection</a> with <var>connection</var>,\nreturn a newly <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-create-exception\" id=\"ref-for-dfn-create-exception②\" aria-expanded=\"false\" class=\"has-ref-hint\">created</a> \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#aborterror\" id=\"ref-for-aborterror④\" aria-expanded=\"false\" class=\"has-ref-hint\">AbortError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑦③\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code> and abort these steps.</p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>connection</var>.</p>"
        }
      ]
    },
    {
      "name": "close a database connection",
      "href": "https://www.w3.org/TR/IndexedDB-3/#close-a-database-connection",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"close-a-database-connection\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">close a database connection</dfn> with a <var>connection</var> object, and an\noptional <var>forced flag</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Set <var>connection</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-close-pending-flag\" id=\"ref-for-connection-close-pending-flag⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">close pending flag</a> to true.</p>"
        },
        {
          "html": "<p>If the <var>forced flag</var> is true, then for each <var>transaction</var> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-created\" id=\"ref-for-transaction-created⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">created</a> using <var>connection</var> run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#abort-a-transaction\" id=\"ref-for-abort-a-transaction④\" aria-expanded=\"false\" class=\"has-ref-hint\">abort a\ntransaction</a> with <var>transaction</var> and newly <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-create-exception\" id=\"ref-for-dfn-create-exception③\" aria-expanded=\"false\" class=\"has-ref-hint\">created</a> \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#aborterror\" id=\"ref-for-aborterror⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">AbortError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑦④\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Wait for all transactions <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-created\" id=\"ref-for-transaction-created⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">created</a> using <var>connection</var> to complete.\nOnce they are complete, <var>connection</var> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-closed\" id=\"ref-for-connection-closed⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">closed</a>.</p>"
        },
        {
          "html": "<p>If the <var>forced flag</var> is true, then <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-fire\" id=\"ref-for-concept-event-fire③\" aria-expanded=\"false\" class=\"has-ref-hint\">fire an event</a> named <code class=\"idl\"><a class=\"idl-code has-ref-hint\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbdatabase-close\" id=\"ref-for-eventdef-idbdatabase-close①\" aria-expanded=\"false\">close</a></code> at <var>connection</var>.</p>"
        }
      ]
    },
    {
      "name": "delete a database",
      "href": "https://www.w3.org/TR/IndexedDB-3/#delete-a-database",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"delete-a-database\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">delete a database</dfn> with the <var>storageKey</var> that\nrequested the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑤⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">database</a> to be deleted, a database <var>name</var>, and a <var>request</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>queue</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-queue\" id=\"ref-for-connection-queue③\" aria-expanded=\"false\" class=\"has-ref-hint\">connection queue</a> for <var>storageKey</var> and <var>name</var>.</p>"
        },
        {
          "html": "<p>Add <var>request</var> to <var>queue</var>.</p>"
        },
        {
          "html": "<p>Wait until all previous requests in <var>queue</var> have been processed.</p>"
        },
        {
          "html": "<p>Let <var>db</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑥⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">database</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-name\" id=\"ref-for-database-name⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">named</a> <var>name</var> in <var>storageKey</var>, if one exists. Otherwise, return 0 (zero).</p>"
        },
        {
          "html": "<p>Let <var>openConnections</var> be the <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ordered-set\" id=\"ref-for-ordered-set③\" aria-expanded=\"false\" class=\"has-ref-hint\">set</a> of all <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection⑥⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">connections</a> associated with <var>db</var>.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate②\" aria-expanded=\"false\" class=\"has-ref-hint\">For each</a> <var>entry</var> of <var>openConnections</var> that does not have its <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-close-pending-flag\" id=\"ref-for-connection-close-pending-flag⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">close pending flag</a> set to true, <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">queue a task</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#fire-a-version-change-event\" id=\"ref-for-fire-a-version-change-event③\" aria-expanded=\"false\" class=\"has-ref-hint\">fire a version\nchange event</a> named <code class=\"idl\"><a class=\"idl-code has-ref-hint\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbdatabase-versionchange\" id=\"ref-for-eventdef-idbdatabase-versionchange①⓪\" aria-expanded=\"false\">versionchange</a></code> at <var>entry</var> with <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">version</a> and null.</p>"
        },
        {
          "html": "<p>Wait for all of the events to be fired.</p>"
        },
        {
          "html": "<p>If any of the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection⑥①\" aria-expanded=\"false\" class=\"has-ref-hint\">connections</a> in <var>openConnections</var> are still not\nclosed, <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">queue a task</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#fire-a-version-change-event\" id=\"ref-for-fire-a-version-change-event④\" aria-expanded=\"false\" class=\"has-ref-hint\">fire a version change event</a> named <code class=\"idl\"><a class=\"idl-code has-ref-hint\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbopendbrequest-blocked\" id=\"ref-for-eventdef-idbopendbrequest-blocked⑤\" aria-expanded=\"false\">blocked</a></code> at <var>request</var> with <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">version</a> and null.</p>"
        },
        {
          "html": "<p><span id=\"delete-close-block\">Wait</span> until all <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection⑥②\" aria-expanded=\"false\" class=\"has-ref-hint\">connections</a> in <var>openConnections</var> are <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-closed\" id=\"ref-for-connection-closed⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">closed</a>.</p>"
        },
        {
          "html": "<p>Let <var>version</var> be <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">version</a>.</p>"
        },
        {
          "html": "<p>Delete <var>db</var>. If this fails for any reason, return an appropriate\nerror (e.g. \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#quotaexceedederror\" id=\"ref-for-quotaexceedederror⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">QuotaExceededError</a></code>\" or \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#unknownerror\" id=\"ref-for-unknownerror④\" aria-expanded=\"false\" class=\"has-ref-hint\">UnknownError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑦⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>).</p>"
        },
        {
          "html": "<p>Return <var>version</var>.</p>"
        }
      ]
    },
    {
      "name": "commit a transaction",
      "href": "https://www.w3.org/TR/IndexedDB-3/#commit-a-transaction",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"commit-a-transaction\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">commit a transaction</dfn> with the <var>transaction</var> to commit, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state④⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-committing\" id=\"ref-for-transaction-committing②\" aria-expanded=\"false\" class=\"has-ref-hint\">committing</a>.</p>"
        },
        {
          "html": "Run the following steps <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel\" id=\"ref-for-in-parallel③\" aria-expanded=\"false\" class=\"has-ref-hint\">in parallel</a>:",
          "rationale": "wait",
          "steps": [
            {
              "html": "<p>Wait until every item in <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-request-list\" id=\"ref-for-transaction-request-list\" aria-expanded=\"false\" class=\"has-ref-hint\">request list</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed\" id=\"ref-for-request-processed①\" aria-expanded=\"false\" class=\"has-ref-hint\">processed</a>.</p>"
            },
            {
              "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state④①\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is no longer <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-committing\" id=\"ref-for-transaction-committing③\" aria-expanded=\"false\" class=\"has-ref-hint\">committing</a>,\nthen terminate these steps.</p>"
            },
            {
              "html": "<p>Attempt to write any outstanding changes made by <var>transaction</var> to the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑥①\" aria-expanded=\"false\" class=\"has-ref-hint\">database</a>, considering <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-durability-hint\" id=\"ref-for-transaction-durability-hint③\" aria-expanded=\"false\" class=\"has-ref-hint\">durability hint</a>.</p>"
            },
            {
              "html": "<p>If an error occurs while writing the changes to the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑥②\" aria-expanded=\"false\" class=\"has-ref-hint\">database</a>,\nthen run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#abort-a-transaction\" id=\"ref-for-abort-a-transaction⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">abort a transaction</a> with <var>transaction</var> and an\nappropriate type for the error, for example \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#quotaexceedederror\" id=\"ref-for-quotaexceedederror⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">QuotaExceededError</a></code>\" or\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#unknownerror\" id=\"ref-for-unknownerror⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">UnknownError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑦⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>, and terminate these steps.</p>"
            },
            {
              "html": "<a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">Queue a task</a> to run these steps:",
              "rationale": "if",
              "steps": [
                {
                  "html": "<p>If <var>transaction</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction④⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">upgrade transaction</a>, then set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-connection\" id=\"ref-for-transaction-connection③\" aria-expanded=\"false\" class=\"has-ref-hint\">connection</a>'s associated <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑥③\" aria-expanded=\"false\" class=\"has-ref-hint\">database</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-upgrade-transaction\" id=\"ref-for-database-upgrade-transaction②\" aria-expanded=\"false\" class=\"has-ref-hint\">upgrade transaction</a> to null.</p>"
                },
                {
                  "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state④②\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-finished\" id=\"ref-for-transaction-finished①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">finished</a>.</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-fire\" id=\"ref-for-concept-event-fire④\" aria-expanded=\"false\" class=\"has-ref-hint\">Fire an event</a> named <code class=\"idl\"><a class=\"idl-code has-ref-hint\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbtransaction-complete\" id=\"ref-for-eventdef-idbtransaction-complete③\" aria-expanded=\"false\">complete</a></code> at <var>transaction</var>.</p>"
                },
                {
                  "html": "<p>If <var>transaction</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction④⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">upgrade transaction</a>, then\nlet <var>request</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request\" id=\"ref-for-request③⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">request</a> associated with <var>transaction</var> and set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-transaction\" id=\"ref-for-request-transaction③\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a> to null.</p>"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "abort a transaction",
      "href": "https://www.w3.org/TR/IndexedDB-3/#abort-a-transaction",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"abort-a-transaction\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">abort a transaction</dfn> with the <var>transaction</var> to abort, and <var>error</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>All the changes made to the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑥④\" aria-expanded=\"false\" class=\"has-ref-hint\">database</a> by the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-concept\" id=\"ref-for-transaction-concept⑦⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a> are reverted. For <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction④⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">upgrade transactions</a> this includes changes\nto the set of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑨⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">object stores</a> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept③⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">indexes</a>, as well as the\nchange to the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">version</a>. Any <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑨⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">object stores</a> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept④⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">indexes</a> which were created during the transaction are now\nconsidered deleted for the purposes of other algorithms.</p>"
        },
        {
          "html": "<p>If <var>transaction</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction⑤⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">upgrade transaction</a>, run the steps\nto <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#abort-an-upgrade-transaction\" id=\"ref-for-abort-an-upgrade-transaction①\" aria-expanded=\"false\" class=\"has-ref-hint\">abort an upgrade transaction</a> with <var>transaction</var>.</p>"
        },
        {
          "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state④③\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-finished\" id=\"ref-for-transaction-finished①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">finished</a>.</p>"
        },
        {
          "html": "<p>If <var>error</var> is not null, set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-error\" id=\"ref-for-transaction-error①\" aria-expanded=\"false\" class=\"has-ref-hint\">error</a> to <var>error</var>.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate③\" aria-expanded=\"false\" class=\"has-ref-hint\">For each</a> <var>request</var> of <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-request-list\" id=\"ref-for-transaction-request-list①\" aria-expanded=\"false\" class=\"has-ref-hint\">request list</a>,\nabort the steps to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request②③\" aria-expanded=\"false\" class=\"has-ref-hint\">asynchronously execute a request</a> for <var>request</var>,\nset <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed-flag\" id=\"ref-for-request-processed-flag⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">processed flag</a> to true,\nand <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">queue a task</a> to run these steps:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">done flag</a> to true.</p>"
            },
            {
              "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-result\" id=\"ref-for-request-result⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">result</a> to undefined.</p>"
            },
            {
              "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-error\" id=\"ref-for-request-error⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">error</a> to a newly <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-create-exception\" id=\"ref-for-dfn-create-exception④\" aria-expanded=\"false\" class=\"has-ref-hint\">created</a> \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#aborterror\" id=\"ref-for-aborterror⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">AbortError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑦⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-fire\" id=\"ref-for-concept-event-fire⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">Fire an event</a> named <code class=\"idl\"><a class=\"idl-code has-ref-hint\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbrequest-error\" id=\"ref-for-eventdef-idbrequest-error⑨\" aria-expanded=\"false\">error</a></code> at <var>request</var> with its <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-bubbles\" id=\"ref-for-dom-event-bubbles③\" aria-expanded=\"false\" class=\"has-ref-hint\">bubbles</a></code> and <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-cancelable\" id=\"ref-for-dom-event-cancelable③\" aria-expanded=\"false\" class=\"has-ref-hint\">cancelable</a></code> attributes initialized to true.</p>"
            }
          ]
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">Queue a task</a> to run these steps:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>transaction</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction⑤①\" aria-expanded=\"false\" class=\"has-ref-hint\">upgrade transaction</a>, then set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-connection\" id=\"ref-for-transaction-connection④\" aria-expanded=\"false\" class=\"has-ref-hint\">connection</a>'s associated <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑥⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">database</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-upgrade-transaction\" id=\"ref-for-database-upgrade-transaction③\" aria-expanded=\"false\" class=\"has-ref-hint\">upgrade transaction</a> to null.</p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-fire\" id=\"ref-for-concept-event-fire⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">Fire an event</a> named <code class=\"idl\"><a class=\"idl-code has-ref-hint\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbtransaction-abort\" id=\"ref-for-eventdef-idbtransaction-abort③\" aria-expanded=\"false\">abort</a></code> at <var>transaction</var> with its <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-bubbles\" id=\"ref-for-dom-event-bubbles④\" aria-expanded=\"false\" class=\"has-ref-hint\">bubbles</a></code> attribute initialized to true.</p>"
            },
            {
              "html": "If <var>transaction</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction⑤②\" aria-expanded=\"false\" class=\"has-ref-hint\">upgrade transaction</a>, then:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>request</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-open-request\" id=\"ref-for-request-open-request①③\" aria-expanded=\"false\" class=\"has-ref-hint\">open request</a> associated with <var>transaction</var>.</p>"
                },
                {
                  "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-transaction\" id=\"ref-for-request-transaction④\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a> to null.</p>"
                },
                {
                  "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-result\" id=\"ref-for-request-result⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">result</a> to undefined.</p>"
                },
                {
                  "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed-flag\" id=\"ref-for-request-processed-flag⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">processed flag</a> to false.</p>"
                },
                {
                  "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">done flag</a> to false.</p>"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "asynchronously execute a request",
      "href": "https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"asynchronously-execute-a-request\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">asynchronously execute a request</dfn> with the <var>source</var> object and an <var>operation</var> to perform on a database, and an optional <var>request</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-concept\" id=\"ref-for-transaction-concept⑦⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a> associated with <var>source</var>.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①\" aria-expanded=\"false\" class=\"has-ref-hint\">Assert</a>: <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state④④\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active④②\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>.</p>"
        },
        {
          "html": "<p>If <var>request</var> was not given, let <var>request</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request\" id=\"ref-for-request③⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">request</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-source\" id=\"ref-for-request-source③\" aria-expanded=\"false\" class=\"has-ref-hint\">source</a> as <var>source</var>.</p>"
        },
        {
          "html": "<p>Add <var>request</var> to the end of <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-request-list\" id=\"ref-for-transaction-request-list②\" aria-expanded=\"false\" class=\"has-ref-hint\">request list</a>.</p>"
        },
        {
          "html": "Run these steps <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel\" id=\"ref-for-in-parallel④\" aria-expanded=\"false\" class=\"has-ref-hint\">in parallel</a>:",
          "rationale": "wait",
          "steps": [
            {
              "html": "<p>Wait until <var>request</var> is the first item in <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-request-list\" id=\"ref-for-transaction-request-list③\" aria-expanded=\"false\" class=\"has-ref-hint\">request list</a> that is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed\" id=\"ref-for-request-processed②\" aria-expanded=\"false\" class=\"has-ref-hint\">processed</a>.</p>"
            },
            {
              "html": "<p>Let <var>result</var> be the result of performing <var>operation</var>.</p>"
            },
            {
              "html": "<p>If <var>result</var> is an error and <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state④⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-committing\" id=\"ref-for-transaction-committing⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">committing</a>,\nthen run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#abort-a-transaction\" id=\"ref-for-abort-a-transaction⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">abort a transaction</a> with <var>transaction</var> and <var>result</var>,\nand terminate these steps.</p>"
            },
            {
              "html": "<p>If <var>result</var> is an error,\nthen revert all changes made by <var>operation</var>.</p>"
            },
            {
              "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed-flag\" id=\"ref-for-request-processed-flag⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">processed flag</a> to true.</p>"
            },
            {
              "html": "<a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task①①\" aria-expanded=\"false\" class=\"has-ref-hint\">Queue a task</a> to run these steps:",
              "rationale": "remove",
              "steps": [
                {
                  "html": "<p>Remove <var>request</var> from <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-request-list\" id=\"ref-for-transaction-request-list④\" aria-expanded=\"false\" class=\"has-ref-hint\">request list</a>.</p>"
                },
                {
                  "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">done flag</a> to true.</p>"
                },
                {
                  "html": "If <var>result</var> is an error, then:",
                  "rationale": "set",
                  "steps": [
                    {
                      "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-result\" id=\"ref-for-request-result⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">result</a> to undefined.</p>"
                    },
                    {
                      "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-error\" id=\"ref-for-request-error⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">error</a> to <var>result</var>.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#fire-an-error-event\" id=\"ref-for-fire-an-error-event②\" aria-expanded=\"false\" class=\"has-ref-hint\">Fire an error event</a> at <var>request</var>.</p>"
                    }
                  ]
                },
                {
                  "html": "Otherwise:",
                  "rationale": "set",
                  "steps": [
                    {
                      "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-result\" id=\"ref-for-request-result①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">result</a> to <var>result</var>.</p>"
                    },
                    {
                      "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-error\" id=\"ref-for-request-error⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">error</a> to undefined.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#fire-a-success-event\" id=\"ref-for-fire-a-success-event②\" aria-expanded=\"false\" class=\"has-ref-hint\">Fire a success event</a> at <var>request</var>.</p>"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "html": "<p>Return <var>request</var>.</p>"
        }
      ]
    },
    {
      "name": "upgrade a database",
      "href": "https://www.w3.org/TR/IndexedDB-3/#upgrade-a-database",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"upgrade-a-database\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">upgrade a database</dfn> with <var>connection</var> (a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection⑥④\" aria-expanded=\"false\" class=\"has-ref-hint\">connection</a>), a new <var>version</var>, and a <var>request</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>db</var> be <var>connection</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑥⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">database</a>.</p>"
        },
        {
          "html": "<p>Let <var>transaction</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction⑤③\" aria-expanded=\"false\" class=\"has-ref-hint\">upgrade transaction</a> with <var>connection</var> used as <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection⑥⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">connection</a>.</p>"
        },
        {
          "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-scope\" id=\"ref-for-transaction-scope①③\" aria-expanded=\"false\" class=\"has-ref-hint\">scope</a> to <var>connection</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-object-store-set\" id=\"ref-for-connection-object-store-set②\" aria-expanded=\"false\" class=\"has-ref-hint\">object store set</a>.</p>"
        },
        {
          "html": "<p>Set <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-upgrade-transaction\" id=\"ref-for-database-upgrade-transaction④\" aria-expanded=\"false\" class=\"has-ref-hint\">upgrade transaction</a> to <var>transaction</var>.</p>"
        },
        {
          "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state④⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-inactive\" id=\"ref-for-transaction-inactive③\" aria-expanded=\"false\" class=\"has-ref-hint\">inactive</a>.</p>"
        },
        {
          "html": "<p>Start <var>transaction</var>.</p>"
        },
        {
          "html": "<p>Let <var>old version</var> be <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version①⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">version</a>.</p>"
        },
        {
          "html": "<p>Set <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version②⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">version</a> to <var>version</var>. This change is\nconsidered part of the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-concept\" id=\"ref-for-transaction-concept⑦⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>, and so if the\ntransaction is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-abort\" id=\"ref-for-transaction-abort⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">aborted</a>, this change is reverted.</p>"
        },
        {
          "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed-flag\" id=\"ref-for-request-processed-flag⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">processed flag</a> to true.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task①②\" aria-expanded=\"false\" class=\"has-ref-hint\">Queue a task</a> to run these steps:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-result\" id=\"ref-for-request-result①①\" aria-expanded=\"false\" class=\"has-ref-hint\">result</a> to <var>connection</var>.</p>"
            },
            {
              "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-transaction\" id=\"ref-for-request-transaction⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a> to <var>transaction</var>.</p>"
            },
            {
              "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">done flag</a> to true.</p>"
            },
            {
              "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state④⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active④③\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>.</p>"
            },
            {
              "html": "<p>Let <var>didThrow</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#fire-a-version-change-event\" id=\"ref-for-fire-a-version-change-event⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">firing a version change event</a> named <code class=\"idl\"><a class=\"idl-code has-ref-hint\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbopendbrequest-upgradeneeded\" id=\"ref-for-eventdef-idbopendbrequest-upgradeneeded①⓪\" aria-expanded=\"false\">upgradeneeded</a></code> at <var>request</var> with <var>old\nversion</var> and <var>version</var>.</p>"
            },
            {
              "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state④⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-inactive\" id=\"ref-for-transaction-inactive④\" aria-expanded=\"false\" class=\"has-ref-hint\">inactive</a>.</p>"
            },
            {
              "html": "<p>If <var>didThrow</var> is true, run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#abort-a-transaction\" id=\"ref-for-abort-a-transaction⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">abort a transaction</a> with <var>transaction</var> and a newly <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-create-exception\" id=\"ref-for-dfn-create-exception⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">created</a> \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#aborterror\" id=\"ref-for-aborterror⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">AbortError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑦⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
            }
          ]
        },
        {
          "html": "<p>Wait for <var>transaction</var> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-finished\" id=\"ref-for-transaction-finished①⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">finish</a>.</p>"
        }
      ]
    },
    {
      "name": "abort an upgrade transaction",
      "href": "https://www.w3.org/TR/IndexedDB-3/#abort-an-upgrade-transaction",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"abort-an-upgrade-transaction\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">abort an upgrade transaction</dfn> with <var>transaction</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>connection</var> be <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection⑥⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">connection</a>.</p>"
        },
        {
          "html": "<p>Let <var>database</var> be <var>connection</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑥⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">database</a>.</p>"
        },
        {
          "html": "<p>Set <var>connection</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-version\" id=\"ref-for-connection-version③\" aria-expanded=\"false\" class=\"has-ref-hint\">version</a> to <var>database</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version②②\" aria-expanded=\"false\" class=\"has-ref-hint\">version</a> if <var>database</var> previously existed, or 0 (zero)\nif <var>database</var> was newly created.</p>"
        },
        {
          "html": "<p>Set <var>connection</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-object-store-set\" id=\"ref-for-connection-object-store-set③\" aria-expanded=\"false\" class=\"has-ref-hint\">object store set</a> to the set of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑨⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">object stores</a> in <var>database</var> if <var>database</var> previously\nexisted, or the empty set if <var>database</var> was newly created.</p>"
        },
        {
          "html": "For each <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle\" id=\"ref-for-object-store-handle①②\" aria-expanded=\"false\" class=\"has-ref-hint\">object store handle</a> <var>handle</var> associated with <var>transaction</var>, including those for <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑨⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">object stores</a> that\nwere created or deleted during <var>transaction</var>:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>handle</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a> was not\nnewly created during <var>transaction</var>, set <var>handle</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-name\" id=\"ref-for-object-store-handle-name①\" aria-expanded=\"false\" class=\"has-ref-hint\">name</a> to its <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store①⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-name\" id=\"ref-for-object-store-name①⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">name</a>.</p>"
            },
            {
              "html": "<p>Set <var>handle</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-index-set\" id=\"ref-for-object-store-handle-index-set⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">index set</a> to the set of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept④②\" aria-expanded=\"false\" class=\"has-ref-hint\">indexes</a> that\nreference its <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store②⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a>.</p>"
            }
          ]
        },
        {
          "html": "For each <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle\" id=\"ref-for-index-handle⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">index handle</a> <var>handle</var> associated with <var>transaction</var>,\nincluding those for <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept④③\" aria-expanded=\"false\" class=\"has-ref-hint\">indexes</a> that were created or deleted\nduring <var>transaction</var>:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>handle</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-index\" id=\"ref-for-index-handle-index①②\" aria-expanded=\"false\" class=\"has-ref-hint\">index</a> was not newly created\nduring <var>transaction</var>, set <var>handle</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-name\" id=\"ref-for-index-handle-name①\" aria-expanded=\"false\" class=\"has-ref-hint\">name</a> to\nits <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-index\" id=\"ref-for-index-handle-index①③\" aria-expanded=\"false\" class=\"has-ref-hint\">index</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-name\" id=\"ref-for-index-name①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">name</a>.</p>"
            }
          ]
        }
      ]
    },
    {
      "name": "fire a success event",
      "href": "https://www.w3.org/TR/IndexedDB-3/#fire-a-success-event",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"fire-a-success-event\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fire a success event</dfn> at a <var>request</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>event</var> be the result of <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-create\" id=\"ref-for-concept-event-create①\" aria-expanded=\"false\" class=\"has-ref-hint\">creating an event</a> using <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#event\" id=\"ref-for-event①\" aria-expanded=\"false\" class=\"has-ref-hint\">Event</a></code>.</p>"
        },
        {
          "html": "<p>Set <var>event</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-type\" id=\"ref-for-dom-event-type①\" aria-expanded=\"false\" class=\"has-ref-hint\">type</a></code> attribute to \"<code>success</code>\".</p>"
        },
        {
          "html": "<p>Set <var>event</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-bubbles\" id=\"ref-for-dom-event-bubbles⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">bubbles</a></code> and <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-cancelable\" id=\"ref-for-dom-event-cancelable④\" aria-expanded=\"false\" class=\"has-ref-hint\">cancelable</a></code> attributes to false.</p>"
        },
        {
          "html": "<p>Let <var>transaction</var> be <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-concept\" id=\"ref-for-transaction-concept⑧③\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>legacyOutputDidListenersThrowFlag</var> be initially false.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state④⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-inactive\" id=\"ref-for-transaction-inactive⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">inactive</a>,\nthen set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑤⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active④④\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-dispatch\" id=\"ref-for-concept-event-dispatch②\" aria-expanded=\"false\" class=\"has-ref-hint\">Dispatch</a> <var>event</var> at <var>request</var> with <var>legacyOutputDidListenersThrowFlag</var>.</p>"
        },
        {
          "html": "If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑤①\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active④⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑤②\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-inactive\" id=\"ref-for-transaction-inactive⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">inactive</a>.</p>"
            },
            {
              "html": "<p>If <var>legacyOutputDidListenersThrowFlag</var> is true,\nthen run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#abort-a-transaction\" id=\"ref-for-abort-a-transaction①①\" aria-expanded=\"false\" class=\"has-ref-hint\">abort a transaction</a> with <var>transaction</var> and a newly <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-create-exception\" id=\"ref-for-dfn-create-exception⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">created</a> \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#aborterror\" id=\"ref-for-aborterror⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">AbortError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑦⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.</p>"
            },
            {
              "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-request-list\" id=\"ref-for-transaction-request-list⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">request list</a> is empty,\nthen run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#commit-a-transaction\" id=\"ref-for-commit-a-transaction②\" aria-expanded=\"false\" class=\"has-ref-hint\">commit a transaction</a> with <var>transaction</var>.</p>"
            }
          ]
        }
      ]
    },
    {
      "name": "fire an error event",
      "href": "https://www.w3.org/TR/IndexedDB-3/#fire-an-error-event",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"fire-an-error-event\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fire an error event</dfn> at a <var>request</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>event</var> be the result of <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-create\" id=\"ref-for-concept-event-create②\" aria-expanded=\"false\" class=\"has-ref-hint\">creating an event</a> using <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#event\" id=\"ref-for-event②\" aria-expanded=\"false\" class=\"has-ref-hint\">Event</a></code>.</p>"
        },
        {
          "html": "<p>Set <var>event</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-type\" id=\"ref-for-dom-event-type②\" aria-expanded=\"false\" class=\"has-ref-hint\">type</a></code> attribute to \"<code>error</code>\".</p>"
        },
        {
          "html": "<p>Set <var>event</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-bubbles\" id=\"ref-for-dom-event-bubbles⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">bubbles</a></code> and <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-cancelable\" id=\"ref-for-dom-event-cancelable⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">cancelable</a></code> attributes to true.</p>"
        },
        {
          "html": "<p>Let <var>transaction</var> be <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-concept\" id=\"ref-for-transaction-concept⑧④\" aria-expanded=\"false\" class=\"has-ref-hint\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>legacyOutputDidListenersThrowFlag</var> be initially false.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑤③\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-inactive\" id=\"ref-for-transaction-inactive⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">inactive</a>,\nthen set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑤④\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active④⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-dispatch\" id=\"ref-for-concept-event-dispatch③\" aria-expanded=\"false\" class=\"has-ref-hint\">Dispatch</a> <var>event</var> at <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request\" id=\"ref-for-request④⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">request</a> with <var>legacyOutputDidListenersThrowFlag</var>.</p>"
        },
        {
          "html": "If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑤⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active④⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>,\nthen:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑤⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-inactive\" id=\"ref-for-transaction-inactive⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">inactive</a>.</p>"
            },
            {
              "html": "<p>If <var>legacyOutputDidListenersThrowFlag</var> is true,\nthen run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#abort-a-transaction\" id=\"ref-for-abort-a-transaction①②\" aria-expanded=\"false\" class=\"has-ref-hint\">abort a transaction</a> with <var>transaction</var> and a newly <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-create-exception\" id=\"ref-for-dfn-create-exception⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">created</a> \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#aborterror\" id=\"ref-for-aborterror⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">AbortError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑧⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code> and terminate these steps.\nThis is done even if <var>event</var>’s <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#canceled-flag\" id=\"ref-for-canceled-flag\" aria-expanded=\"false\" class=\"has-ref-hint\">canceled flag</a> is false.</p>"
            },
            {
              "html": "<p>If <var>event</var>’s <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#canceled-flag\" id=\"ref-for-canceled-flag①\" aria-expanded=\"false\" class=\"has-ref-hint\">canceled flag</a> is false,\nthen run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#abort-a-transaction\" id=\"ref-for-abort-a-transaction①③\" aria-expanded=\"false\" class=\"has-ref-hint\">abort a transaction</a> using <var>transaction</var> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request\" id=\"ref-for-request④①\" aria-expanded=\"false\" class=\"has-ref-hint\">request</a>'s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-error\" id=\"ref-for-request-error①①\" aria-expanded=\"false\" class=\"has-ref-hint\">error</a>, and\nterminate these steps.</p>"
            },
            {
              "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-request-list\" id=\"ref-for-transaction-request-list⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">request list</a> is empty,\nthen run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#commit-a-transaction\" id=\"ref-for-commit-a-transaction③\" aria-expanded=\"false\" class=\"has-ref-hint\">commit a transaction</a> with <var>transaction</var>.</p>"
            }
          ]
        }
      ]
    },
    {
      "name": "clone",
      "href": "https://www.w3.org/TR/IndexedDB-3/#clone",
      "html": "To make a <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"clone\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">clone</dfn> of <var>value</var> in <var>targetRealm</var> during <var>transaction</var>,\n  run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert②\" aria-expanded=\"false\" class=\"has-ref-hint\">Assert</a>: <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑤⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active④⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>.</p>"
        },
        {
          "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑤⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-inactive\" id=\"ref-for-transaction-inactive⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">inactive</a>.</p>"
        },
        {
          "html": "<p>Let <var>serialized</var> be <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions\" aria-expanded=\"false\" class=\"has-ref-hint\">?</a> <a data-link-type=\"abstract-op\" href=\"https://html.spec.whatwg.org/multipage/structured-data.html#structuredserializeforstorage\" id=\"ref-for-structuredserializeforstorage②\" aria-expanded=\"false\" class=\"has-ref-hint\">StructuredSerializeForStorage</a>(<var>value</var>).</p>"
        },
        {
          "html": "<p>Let <var>clone</var> be <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions①\" aria-expanded=\"false\" class=\"has-ref-hint\">?</a> <a data-link-type=\"abstract-op\" href=\"https://html.spec.whatwg.org/multipage/structured-data.html#structureddeserialize\" id=\"ref-for-structureddeserialize\" aria-expanded=\"false\" class=\"has-ref-hint\">StructuredDeserialize</a>(<var>serialized</var>, <var>targetRealm</var>).</p>"
        },
        {
          "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑤⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active④⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">active</a>.</p>"
        },
        {
          "html": "<p>Return <var>clone</var>.</p>"
        }
      ]
    },
    {
      "name": "store a record into an object store",
      "href": "https://www.w3.org/TR/IndexedDB-3/#store-a-record-into-an-object-store",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"store-a-record-into-an-object-store\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">store a record into an object store</dfn> with <var>store</var>, <var>value</var>, an optional <var>key</var>, and a <var>no-overwrite flag</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "If <var>store</var> uses a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-generator\" id=\"ref-for-key-generator①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">key generator</a>, then:",
          "rationale": "if",
          "steps": [
            {
              "html": "If <var>key</var> is undefined, then:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>key</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#generate-a-key\" id=\"ref-for-generate-a-key\" aria-expanded=\"false\" class=\"has-ref-hint\">generating a key</a> for <var>store</var>.</p>"
                },
                {
                  "html": "<p>If <var>key</var> is failure, then this operation failed with a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#constrainterror\" id=\"ref-for-constrainterror①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">ConstraintError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑧①\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>. Abort this\nalgorithm without taking any further steps.</p>"
                },
                {
                  "html": "<p>If <var>store</var> also uses <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-in-line-keys\" id=\"ref-for-object-store-in-line-keys⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">in-line keys</a>, then run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#inject-a-key-into-a-value-using-a-key-path\" id=\"ref-for-inject-a-key-into-a-value-using-a-key-path\" aria-expanded=\"false\" class=\"has-ref-hint\">inject a key into a value using a key path</a> with <var>value</var>, <var>key</var> and <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-key-path\" id=\"ref-for-object-store-key-path①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">key\npath</a>.</p>"
                }
              ]
            },
            {
              "html": "<p>Otherwise, run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#possibly-update-the-key-generator\" id=\"ref-for-possibly-update-the-key-generator\" aria-expanded=\"false\" class=\"has-ref-hint\">possibly update the key generator</a> for <var>store</var> with <var>key</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>If the <var>no-overwrite flag</var> was given to these steps and is true, and\na <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑦④\" aria-expanded=\"false\" class=\"has-ref-hint\">record</a> already exists in <var>store</var> with its key <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">equal to</a> <var>key</var>, then this operation failed with a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#constrainterror\" id=\"ref-for-constrainterror①①\" aria-expanded=\"false\" class=\"has-ref-hint\">ConstraintError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑧②\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>.\nAbort this algorithm without taking any further steps.</p>"
        },
        {
          "html": "<p>If a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑦⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">record</a> already exists in <var>store</var> with its key <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to①①\" aria-expanded=\"false\" class=\"has-ref-hint\">equal\nto</a> <var>key</var>, then remove the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑦⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">record</a> from <var>store</var> using <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#delete-records-from-an-object-store\" id=\"ref-for-delete-records-from-an-object-store②\" aria-expanded=\"false\" class=\"has-ref-hint\">delete records from an object store</a>.</p>"
        },
        {
          "html": "<p>Store a record in <var>store</var> containing <var>key</var> as its key and <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions③\" aria-expanded=\"false\" class=\"has-ref-hint\">!</a> <a data-link-type=\"abstract-op\" href=\"https://html.spec.whatwg.org/multipage/structured-data.html#structuredserializeforstorage\" id=\"ref-for-structuredserializeforstorage④\" aria-expanded=\"false\" class=\"has-ref-hint\">StructuredSerializeForStorage</a>(<var>value</var>)\nas its value. The record is stored in the object store’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-list-of-records\" id=\"ref-for-object-store-list-of-records\" aria-expanded=\"false\" class=\"has-ref-hint\">list of records</a> such that the list is sorted\naccording to the key of the records in <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">ascending</a> order.</p>"
        },
        {
          "html": "For each <var>index</var> which <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-referenced\" id=\"ref-for-index-referenced⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">references</a> <var>store</var>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>index key</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#extract-a-key-from-a-value-using-a-key-path\" id=\"ref-for-extract-a-key-from-a-value-using-a-key-path③\" aria-expanded=\"false\" class=\"has-ref-hint\">extracting a key from a value using a key path</a> with <var>value</var>, <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-key-path\" id=\"ref-for-index-key-path⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">key path</a>, and <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-multientry-flag\" id=\"ref-for-index-multientry-flag⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">multiEntry flag</a>.</p>"
            },
            {
              "html": "<p>If <var>index key</var> is an exception, or invalid, or failure, take no\nfurther actions for <var>index</var>, and continue these steps\nfor the next index.</p>"
            },
            {
              "html": "<p>If <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-multientry-flag\" id=\"ref-for-index-multientry-flag⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">multiEntry flag</a> is false, or if <var>index key</var> is not an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#array-key\" id=\"ref-for-array-key④\" aria-expanded=\"false\" class=\"has-ref-hint\">array key</a>, and if <var>index</var> already contains a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑦⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">record</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑧②\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to①②\" aria-expanded=\"false\" class=\"has-ref-hint\">equal to</a> <var>index\nkey</var>, and <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-unique-flag\" id=\"ref-for-index-unique-flag⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">unique flag</a> is true, then this\noperation failed with a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#constrainterror\" id=\"ref-for-constrainterror①②\" aria-expanded=\"false\" class=\"has-ref-hint\">ConstraintError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑧③\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>. Abort this\nalgorithm without taking any further steps.</p>"
            },
            {
              "html": "<p>If <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-multientry-flag\" id=\"ref-for-index-multientry-flag⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">multiEntry flag</a> is true and <var>index key</var> is\nan <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#array-key\" id=\"ref-for-array-key⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">array key</a>, and if <var>index</var> already contains a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑦⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">record</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑧③\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to①③\" aria-expanded=\"false\" class=\"has-ref-hint\">equal to</a> any of the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#subkeys\" id=\"ref-for-subkeys①\" aria-expanded=\"false\" class=\"has-ref-hint\">subkeys</a> of <var>index key</var>, and <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-unique-flag\" id=\"ref-for-index-unique-flag⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">unique\nflag</a> is true, then this operation failed with a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#constrainterror\" id=\"ref-for-constrainterror①③\" aria-expanded=\"false\" class=\"has-ref-hint\">ConstraintError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑧④\" aria-expanded=\"false\" class=\"has-ref-hint\">DOMException</a></code>. Abort this algorithm without taking any\nfurther steps.</p>"
            },
            {
              "html": "<p>If <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-multientry-flag\" id=\"ref-for-index-multientry-flag⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">multiEntry flag</a> is false, or if <var>index key</var> is not an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#array-key\" id=\"ref-for-array-key⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">array key</a> then store a record in <var>index</var> containing <var>index key</var> as its key and <var>key</var> as its value. The\nrecord is stored in <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-list-of-records\" id=\"ref-for-index-list-of-records\" aria-expanded=\"false\" class=\"has-ref-hint\">list of records</a> such that the list is sorted primarily on the records keys,\nand secondarily on the records values, in <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">ascending</a> order.</p>"
            },
            {
              "html": "<p>If <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-multientry-flag\" id=\"ref-for-index-multientry-flag⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">multiEntry flag</a> is true and <var>index key</var> is\nan <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#array-key\" id=\"ref-for-array-key⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">array key</a>, then for each <var>subkey</var> of the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#subkeys\" id=\"ref-for-subkeys②\" aria-expanded=\"false\" class=\"has-ref-hint\">subkeys</a> of <var>index key</var> store a record in <var>index</var> containing <var>subkey</var> as its key and <var>key</var> as its value. The\nrecords are stored in <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-list-of-records\" id=\"ref-for-index-list-of-records①\" aria-expanded=\"false\" class=\"has-ref-hint\">list of\nrecords</a> such that the list is sorted primarily on the\nrecords keys, and secondarily on the records values, in <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">ascending</a> order.</p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>key</var>.</p>"
        }
      ]
    },
    {
      "name": "retrieve a value from an object store",
      "href": "https://www.w3.org/TR/IndexedDB-3/#retrieve-a-value-from-an-object-store",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"retrieve-a-value-from-an-object-store\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">retrieve a value from an object store</dfn> with <var>targetRealm</var>, <var>store</var> and <var>range</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>record</var> be the first <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑦⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">record</a> in <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-list-of-records\" id=\"ref-for-object-store-list-of-records①\" aria-expanded=\"false\" class=\"has-ref-hint\">list of records</a> whose <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑧④\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in②\" aria-expanded=\"false\" class=\"has-ref-hint\">in</a> <var>range</var>, if\nany.</p>"
        },
        {
          "html": "<p>If <var>record</var> was not found, return undefined.</p>"
        },
        {
          "html": "<p>Let <var>serialized</var> be of <var>record</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#value\" id=\"ref-for-value①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">value</a>.</p>"
        },
        {
          "html": "<p>Return <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions④\" aria-expanded=\"false\" class=\"has-ref-hint\">!</a> <a data-link-type=\"abstract-op\" href=\"https://html.spec.whatwg.org/multipage/structured-data.html#structureddeserialize\" id=\"ref-for-structureddeserialize②\" aria-expanded=\"false\" class=\"has-ref-hint\">StructuredDeserialize</a>(<var>serialized</var>, <var>targetRealm</var>).</p>"
        }
      ]
    },
    {
      "name": "retrieve multiple values from an object store",
      "href": "https://www.w3.org/TR/IndexedDB-3/#retrieve-multiple-values-from-an-object-store",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-lt=\"retrieve multiple values from an object store\" data-noexport=\"\" id=\"retrieve-multiple-values-from-an-object-store\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">retrieve multiple values from an object\nstore</dfn> with <var>targetRealm</var>, <var>store</var>, <var>range</var> and optional <var>count</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>count</var> is not given or is 0 (zero), let <var>count</var> be infinity.</p>"
        },
        {
          "html": "<p>Let <var>records</var> be a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">list</a> containing the first <var>count</var> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑧⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">records</a> in <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-list-of-records\" id=\"ref-for-object-store-list-of-records②\" aria-expanded=\"false\" class=\"has-ref-hint\">list of records</a> whose <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑧⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in③\" aria-expanded=\"false\" class=\"has-ref-hint\">in</a> <var>range</var>.</p>"
        },
        {
          "html": "<p>Let <var>list</var> be an empty <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">list</a>.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate④\" aria-expanded=\"false\" class=\"has-ref-hint\">For each</a> <var>record</var> of <var>records</var>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>serialized</var> be <var>record</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#value\" id=\"ref-for-value①⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">value</a>.</p>"
            },
            {
              "html": "<p>Let <var>entry</var> be <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">!</a> <a data-link-type=\"abstract-op\" href=\"https://html.spec.whatwg.org/multipage/structured-data.html#structureddeserialize\" id=\"ref-for-structureddeserialize③\" aria-expanded=\"false\" class=\"has-ref-hint\">StructuredDeserialize</a>(<var>serialized</var>, <var>targetRealm</var>).</p>"
            },
            {
              "html": "<p>Append <var>entry</var> to <var>list</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>list</var> converted to a <code><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#idl-sequence\" id=\"ref-for-idl-sequence⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">sequence</a>&lt;<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-any\" id=\"ref-for-idl-any③⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">any</a></code>&gt;</code>.</p>"
        }
      ]
    },
    {
      "name": "retrieve a key from an object store",
      "href": "https://www.w3.org/TR/IndexedDB-3/#retrieve-a-key-from-an-object-store",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"retrieve-a-key-from-an-object-store\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">retrieve a key from an object store</dfn> with <var>store</var> and <var>range</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>record</var> be the first <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑧①\" aria-expanded=\"false\" class=\"has-ref-hint\">record</a> in <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-list-of-records\" id=\"ref-for-object-store-list-of-records③\" aria-expanded=\"false\" class=\"has-ref-hint\">list of records</a> whose <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑧⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in④\" aria-expanded=\"false\" class=\"has-ref-hint\">in</a> <var>range</var>, if\nany.</p>"
        },
        {
          "html": "<p>If <var>record</var> was not found, return undefined.</p>"
        },
        {
          "html": "<p>Return the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-key-to-a-value\" id=\"ref-for-convert-a-key-to-a-value④\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a\nkey to a value</a> with <var>record</var>’s key.</p>"
        }
      ]
    },
    {
      "name": "retrieve multiple keys from an object store",
      "href": "https://www.w3.org/TR/IndexedDB-3/#retrieve-multiple-keys-from-an-object-store",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"retrieve-multiple-keys-from-an-object-store\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">retrieve multiple keys from an object store</dfn> with <var>store</var>, <var>range</var> and optional <var>count</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>count</var> is not given or is 0 (zero), let <var>count</var> be infinity.</p>"
        },
        {
          "html": "<p>Let <var>records</var> be a list containing the first <var>count</var> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑧②\" aria-expanded=\"false\" class=\"has-ref-hint\">records</a> in <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-list-of-records\" id=\"ref-for-object-store-list-of-records④\" aria-expanded=\"false\" class=\"has-ref-hint\">list of records</a> whose <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑧⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">in</a> <var>range</var>.</p>"
        },
        {
          "html": "<p>Let <var>list</var> be an empty <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">list</a>.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">For each</a> <var>record</var> of <var>records</var>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>entry</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-key-to-a-value\" id=\"ref-for-convert-a-key-to-a-value⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a\nkey to a value</a> with <var>record</var>’s key.</p>"
            },
            {
              "html": "<p>Append <var>entry</var> to <var>list</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>list</var> converted to a <code><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#idl-sequence\" id=\"ref-for-idl-sequence⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">sequence</a>&lt;<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-any\" id=\"ref-for-idl-any④⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">any</a></code>&gt;</code>.</p>"
        }
      ]
    },
    {
      "name": "retrieve a referenced value from an index",
      "href": "https://www.w3.org/TR/IndexedDB-3/#retrieve-a-referenced-value-from-an-index",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"retrieve-a-referenced-value-from-an-index\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">retrieve a referenced value from an index</dfn> with <var>targetRealm</var>, <var>index</var> and <var>range</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>record</var> be the first <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑧③\" aria-expanded=\"false\" class=\"has-ref-hint\">record</a> in <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-list-of-records\" id=\"ref-for-index-list-of-records②\" aria-expanded=\"false\" class=\"has-ref-hint\">list of\nrecords</a> whose <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-keys\" id=\"ref-for-index-keys①\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">in</a> <var>range</var>, if any.</p>"
        },
        {
          "html": "<p>If <var>record</var> was not found, return undefined.</p>"
        },
        {
          "html": "<p>Let <var>serialized</var> be <var>record</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-referenced-value\" id=\"ref-for-index-referenced-value④\" aria-expanded=\"false\" class=\"has-ref-hint\">referenced value</a>.</p>"
        },
        {
          "html": "<p>Return <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">!</a> <a data-link-type=\"abstract-op\" href=\"https://html.spec.whatwg.org/multipage/structured-data.html#structureddeserialize\" id=\"ref-for-structureddeserialize④\" aria-expanded=\"false\" class=\"has-ref-hint\">StructuredDeserialize</a>(<var>serialized</var>, <var>targetRealm</var>).</p>"
        }
      ]
    },
    {
      "name": "retrieve multiple referenced values from an index",
      "href": "https://www.w3.org/TR/IndexedDB-3/#retrieve-multiple-referenced-values-from-an-index",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-lt=\"retrieve multiple referenced values from an index\" data-noexport=\"\" id=\"retrieve-multiple-referenced-values-from-an-index\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">retrieve multiple referenced values from an\nindex</dfn> with <var>targetRealm</var>, <var>index</var>, <var>range</var> and optional <var>count</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>count</var> is not given or is 0 (zero), let <var>count</var> be infinity.</p>"
        },
        {
          "html": "<p>Let <var>records</var> be a list containing the first <var>count</var> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑧④\" aria-expanded=\"false\" class=\"has-ref-hint\">records</a> in <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-list-of-records\" id=\"ref-for-index-list-of-records③\" aria-expanded=\"false\" class=\"has-ref-hint\">list of records</a> whose <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-keys\" id=\"ref-for-index-keys②\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">in</a> <var>range</var>.</p>"
        },
        {
          "html": "<p>Let <var>list</var> be an empty <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">list</a>.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">For each</a> <var>record</var> of <var>records</var>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>serialized</var> be <var>record</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-referenced-value\" id=\"ref-for-index-referenced-value⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">referenced value</a>.</p>"
            },
            {
              "html": "<p>Let <var>entry</var> be <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">!</a> <a data-link-type=\"abstract-op\" href=\"https://html.spec.whatwg.org/multipage/structured-data.html#structureddeserialize\" id=\"ref-for-structureddeserialize⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">StructuredDeserialize</a>(<var>serialized</var>, <var>targetRealm</var>).</p>"
            },
            {
              "html": "<p>Append <var>entry</var> to <var>list</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>list</var> converted to a <code><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#idl-sequence\" id=\"ref-for-idl-sequence⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">sequence</a>&lt;<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-any\" id=\"ref-for-idl-any④①\" aria-expanded=\"false\" class=\"has-ref-hint\">any</a></code>&gt;</code>.</p>"
        }
      ]
    },
    {
      "name": "retrieve a value from an index",
      "href": "https://www.w3.org/TR/IndexedDB-3/#retrieve-a-value-from-an-index",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"retrieve-a-value-from-an-index\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">retrieve a value from an index</dfn> with <var>index</var> and <var>range</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>record</var> be the first <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-records\" id=\"ref-for-index-records③\" aria-expanded=\"false\" class=\"has-ref-hint\">record</a> in <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-list-of-records\" id=\"ref-for-index-list-of-records④\" aria-expanded=\"false\" class=\"has-ref-hint\">list of\nrecords</a> whose <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-keys\" id=\"ref-for-index-keys③\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">in</a> <var>range</var>, if any.</p>"
        },
        {
          "html": "<p>If <var>record</var> was not found, return undefined.</p>"
        },
        {
          "html": "<p>Return the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-key-to-a-value\" id=\"ref-for-convert-a-key-to-a-value⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a\n    key to a value</a> with <var>record</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#value\" id=\"ref-for-value②⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">value</a>.</p>"
        }
      ]
    },
    {
      "name": "retrieve multiple values from an index",
      "href": "https://www.w3.org/TR/IndexedDB-3/#retrieve-multiple-values-from-an-index",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"retrieve-multiple-values-from-an-index\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">retrieve multiple values from an index</dfn> with <var>index</var>, <var>range</var> and optional <var>count</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>count</var> is not given or is 0 (zero), let <var>count</var> be infinity.</p>"
        },
        {
          "html": "<p>Let <var>records</var> be a list containing the first <var>count</var> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-records\" id=\"ref-for-index-records④\" aria-expanded=\"false\" class=\"has-ref-hint\">records</a> in <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-list-of-records\" id=\"ref-for-index-list-of-records⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">list of records</a> whose <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-keys\" id=\"ref-for-index-keys④\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">in</a> <var>range</var>.</p>"
        },
        {
          "html": "<p>Let <var>list</var> be an empty <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">list</a>.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">For each</a> <var>record</var> of <var>records</var>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>entry</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-key-to-a-value\" id=\"ref-for-convert-a-key-to-a-value⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a\nkey to a value</a> with <var>record</var>’s value.</p>"
            },
            {
              "html": "<p>Append <var>entry</var> to <var>list</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>list</var> converted to a <code><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#idl-sequence\" id=\"ref-for-idl-sequence⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">sequence</a>&lt;<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-any\" id=\"ref-for-idl-any④②\" aria-expanded=\"false\" class=\"has-ref-hint\">any</a></code>&gt;</code>.</p>"
        }
      ]
    },
    {
      "name": "delete records from an object store",
      "href": "https://www.w3.org/TR/IndexedDB-3/#delete-records-from-an-object-store",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"delete-records-from-an-object-store\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">delete records from an object store</dfn> with <var>store</var> and <var>range</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Remove all records, if any, from <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-list-of-records\" id=\"ref-for-object-store-list-of-records⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">list\nof records</a> with key <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">in</a> <var>range</var>.</p>"
        },
        {
          "html": "<p>For each <var>index</var> which <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-referenced\" id=\"ref-for-index-referenced①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">references</a> <var>store</var>, remove every <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑧⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">record</a> from <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-list-of-records\" id=\"ref-for-index-list-of-records⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">list of records</a> whose value is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in①①\" aria-expanded=\"false\" class=\"has-ref-hint\">in</a> <var>range</var>, if any such records exist.</p>"
        },
        {
          "html": "<p>Return undefined.</p>"
        }
      ]
    },
    {
      "name": "count the records in a range",
      "href": "https://www.w3.org/TR/IndexedDB-3/#count-the-records-in-a-range",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"count-the-records-in-a-range\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">count the records in a range</dfn> with <var>source</var> and <var>range</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>count</var> be the number of records, if any, in <var>source</var>’s list of\nrecords with key <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in①②\" aria-expanded=\"false\" class=\"has-ref-hint\">in</a> <var>range</var>.</p>"
        },
        {
          "html": "<p>Return <var>count</var>.</p>"
        }
      ]
    },
    {
      "name": "clear an object store",
      "href": "https://www.w3.org/TR/IndexedDB-3/#clear-an-object-store",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"clear-an-object-store\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">clear an object store</dfn> with <var>store</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Remove all records from <var>store</var>.</p>"
        },
        {
          "html": "<p>In all <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept④⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">indexes</a> which <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-referenced\" id=\"ref-for-index-referenced①①\" aria-expanded=\"false\" class=\"has-ref-hint\">reference</a> <var>store</var>, remove all <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑧⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">records</a>.</p>"
        },
        {
          "html": "<p>Return undefined.</p>"
        }
      ]
    },
    {
      "name": "iterate a cursor",
      "href": "https://www.w3.org/TR/IndexedDB-3/#iterate-a-cursor",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"iterate-a-cursor\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">iterate a cursor</dfn> with <var>targetRealm</var>, <var>cursor</var>, an optional <var>key</var> and <var>primaryKey</var> to iterate to, and an optional <var>count</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>source</var> be <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source②④\" aria-expanded=\"false\" class=\"has-ref-hint\">source</a>.</p>"
        },
        {
          "html": "<p>Let <var>direction</var> be <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction①④\" aria-expanded=\"false\" class=\"has-ref-hint\">direction</a>.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert③\" aria-expanded=\"false\" class=\"has-ref-hint\">Assert</a>: if <var>primaryKey</var> is given, <var>source</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept④⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">index</a> and <var>direction</var> is \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-next\" id=\"ref-for-dom-idbcursordirection-next⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">next</a></code>\" or \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-prev\" id=\"ref-for-dom-idbcursordirection-prev⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">prev</a></code>\".</p>"
        },
        {
          "html": "<p>Let <var>records</var> be the list of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑧⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">records</a> in <var>source</var>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-range\" id=\"ref-for-cursor-range①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">range</a>.</p>"
        },
        {
          "html": "<p>Let <var>position</var> be <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position①③\" aria-expanded=\"false\" class=\"has-ref-hint\">position</a>.</p>"
        },
        {
          "html": "<p>Let <var>object store position</var> be <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-object-store-position\" id=\"ref-for-cursor-object-store-position④\" aria-expanded=\"false\" class=\"has-ref-hint\">object store position</a>.</p>"
        },
        {
          "html": "<p>If <var>count</var> is not given, let <var>count</var> be 1.</p>"
        },
        {
          "html": "While <var>count</var> is greater than 0:",
          "rationale": "switch",
          "steps": [
            {
              "html": "Switch on <var>direction</var>:",
              "rationale": ".switch",
              "steps": [
                {
                  "operation": "switch",
                  "steps": [
                    {
                      "case": "\"next\"",
                      "html": "<p>Let <var>found record</var> be the first record in <var>records</var> which\n  satisfy all of the following requirements:</p>\n          <ul>\n           <li data-md=\"\">\n            <p>If <var>key</var> is defined, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than①③\" aria-expanded=\"false\" class=\"has-ref-hint\">greater\n  than</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to①④\" aria-expanded=\"false\" class=\"has-ref-hint\">equal to</a> <var>key</var>.</p>\n           </li><li data-md=\"\">\n            <p>If <var>primaryKey</var> is defined, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">equal\n  to</a> <var>key</var> and the record’s value is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than①④\" aria-expanded=\"false\" class=\"has-ref-hint\">greater\n  than</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">equal to</a> <var>primaryKey</var>, or the\n  record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">greater than</a> <var>key</var>.</p>\n           </li><li data-md=\"\">\n            <p>If <var>position</var> is defined, and <var>source</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store①⓪③\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a>, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">greater than</a> <var>position</var>.</p>\n           </li><li data-md=\"\">\n            <p>If <var>position</var> is defined, and <var>source</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept⑤⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">index</a>, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">equal to</a> <var>position</var> and the record’s value is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">greater\n  than</a> <var>object store position</var> or the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">greater than</a> <var>position</var>.</p>\n           </li><li data-md=\"\">\n            <p>The record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in①③\" aria-expanded=\"false\" class=\"has-ref-hint\">in</a> <var>range</var>.</p>\n          </li></ul>"
                    },
                    {
                      "case": "\"nextunique\"",
                      "html": "<p>Let <var>found record</var> be the first record in <var>records</var> which\n  satisfy all of the following requirements:</p>\n          <ul>\n           <li data-md=\"\">\n            <p>If <var>key</var> is defined, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than①⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">greater\n  than</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">equal to</a> <var>key</var>.</p>\n           </li><li data-md=\"\">\n            <p>If <var>position</var> is defined, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than②⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">greater\n  than</a> <var>position</var>.</p>\n           </li><li data-md=\"\">\n            <p>The record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in①④\" aria-expanded=\"false\" class=\"has-ref-hint\">in</a> <var>range</var>.</p>\n          </li></ul>"
                    },
                    {
                      "case": "\"prev\"",
                      "html": "<p>Let <var>found record</var> be the last record in <var>records</var> which\n  satisfy all of the following requirements:</p>\n          <ul>\n           <li data-md=\"\">\n            <p>If <var>key</var> is defined, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#less-than\" id=\"ref-for-less-than⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">less\n  than</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to①⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">equal to</a> <var>key</var>.</p>\n           </li><li data-md=\"\">\n            <p>If <var>primaryKey</var> is defined, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to②⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">equal\n  to</a> <var>key</var> and the record’s value is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#less-than\" id=\"ref-for-less-than⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">less than</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to②①\" aria-expanded=\"false\" class=\"has-ref-hint\">equal to</a> <var>primaryKey</var>, or the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#less-than\" id=\"ref-for-less-than⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">less than</a> <var>key</var>.</p>\n           </li><li data-md=\"\">\n            <p>If <var>position</var> is defined, and <var>source</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store①⓪④\" aria-expanded=\"false\" class=\"has-ref-hint\">object store</a>, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#less-than\" id=\"ref-for-less-than⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">less\n  than</a> <var>position</var>.</p>\n           </li><li data-md=\"\">\n            <p>If <var>position</var> is defined, and <var>source</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept⑤①\" aria-expanded=\"false\" class=\"has-ref-hint\">index</a>, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to②②\" aria-expanded=\"false\" class=\"has-ref-hint\">equal to</a> <var>position</var> and the record’s value is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#less-than\" id=\"ref-for-less-than⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">less than</a> <var>object store position</var> or the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#less-than\" id=\"ref-for-less-than①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">less than</a> <var>position</var>.</p>\n           </li><li data-md=\"\">\n            <p>The record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">in</a> <var>range</var>.</p>\n          </li></ul>"
                    },
                    {
                      "case": "\"prevunique\"",
                      "html": "<p>Let <var>temp record</var> be the last record in <var>records</var> which satisfy all of the following requirements:</p>\n          <ul>\n           <li data-md=\"\">\n            <p>If <var>key</var> is defined, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#less-than\" id=\"ref-for-less-than①①\" aria-expanded=\"false\" class=\"has-ref-hint\">less\n  than</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to②③\" aria-expanded=\"false\" class=\"has-ref-hint\">equal to</a> <var>key</var>.</p>\n           </li><li data-md=\"\">\n            <p>If <var>position</var> is defined, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#less-than\" id=\"ref-for-less-than①②\" aria-expanded=\"false\" class=\"has-ref-hint\">less\n  than</a> <var>position</var>.</p>\n           </li><li data-md=\"\">\n            <p>The record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">in</a> <var>range</var>.</p>\n          </li></ul>\n          <p>If <var>temp record</var> is defined, let <var>found record</var> be the\n  first record in <var>records</var> whose <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑨⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to②④\" aria-expanded=\"false\" class=\"has-ref-hint\">equal to</a> <var>temp record</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑨①\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a>.</p>"
                    }
                  ]
                }
              ]
            },
            {
              "html": "If <var>found record</var> is not defined, then:",
              "rationale": "set",
              "steps": [
                {
                  "html": "<p>Set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key\" id=\"ref-for-cursor-key⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> to undefined.</p>"
                },
                {
                  "html": "<p>If <var>source</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept⑤②\" aria-expanded=\"false\" class=\"has-ref-hint\">index</a>, set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-object-store-position\" id=\"ref-for-cursor-object-store-position⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">object store position</a> to undefined.</p>"
                },
                {
                  "html": "<p>If <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key-only-flag\" id=\"ref-for-cursor-key-only-flag⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">key only flag</a> is false, set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-value\" id=\"ref-for-cursor-value⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">value</a> to undefined.</p>"
                },
                {
                  "html": "<p>Return null.</p>"
                }
              ]
            },
            {
              "html": "<p>Let <var>position</var> be <var>found record</var>’s key.</p>"
            },
            {
              "html": "<p>If <var>source</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept⑤③\" aria-expanded=\"false\" class=\"has-ref-hint\">index</a>, let <var>object store\nposition</var> be <var>found record</var>’s value.</p>"
            },
            {
              "html": "<p>Decrease <var>count</var> by 1.</p>"
            }
          ]
        },
        {
          "html": "<p>Set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position①④\" aria-expanded=\"false\" class=\"has-ref-hint\">position</a> to <var>position</var>.</p>"
        },
        {
          "html": "<p>If <var>source</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept⑤④\" aria-expanded=\"false\" class=\"has-ref-hint\">index</a>, set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-object-store-position\" id=\"ref-for-cursor-object-store-position⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">object\nstore position</a> to <var>object store position</var>.</p>"
        },
        {
          "html": "<p>Set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key\" id=\"ref-for-cursor-key⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> to <var>found record</var>’s key.</p>"
        },
        {
          "html": "If <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key-only-flag\" id=\"ref-for-cursor-key-only-flag①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">key only flag</a> is false, then:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>serialized</var> be <var>found record</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-referenced-value\" id=\"ref-for-index-referenced-value⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">referenced value</a>.</p>"
            },
            {
              "html": "<p>Set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-value\" id=\"ref-for-cursor-value⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">value</a> to <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">!</a> <a data-link-type=\"abstract-op\" href=\"https://html.spec.whatwg.org/multipage/structured-data.html#structureddeserialize\" id=\"ref-for-structureddeserialize⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">StructuredDeserialize</a>(<var>serialized</var>, <var>targetRealm</var>)</p>"
            }
          ]
        },
        {
          "html": "<p>Set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">got value flag</a> to true.</p>"
        },
        {
          "html": "<p>Return <var>cursor</var>.</p>"
        }
      ]
    },
    {
      "name": "extract a key from a value using a key path",
      "href": "https://www.w3.org/TR/IndexedDB-3/#extract-a-key-from-a-value-using-a-key-path",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"extract-a-key-from-a-value-using-a-key-path\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">extract a key from a value using a key path</dfn> with <var>value</var>, <var>keyPath</var> and an optional <var>multiEntry flag</var>, run the\nfollowing steps. The result of these steps is a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑨③\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a>, invalid, or\nfailure, or the steps may throw an exception.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>r</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#evaluate-a-key-path-on-a-value\" id=\"ref-for-evaluate-a-key-path-on-a-value\" aria-expanded=\"false\" class=\"has-ref-hint\">evaluating a key\npath on a value</a> with <var>value</var> and <var>keyPath</var>. Rethrow any\nexceptions.</p>"
        },
        {
          "html": "<p>If <var>r</var> is failure, return failure.</p>"
        },
        {
          "html": "<p>Let <var>key</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key①④\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a value\nto a key</a> with <var>r</var> if the <var>multiEntry flag</var> is false, and the\nresult of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-multientry-key\" id=\"ref-for-convert-a-value-to-a-multientry-key\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a value to a multiEntry\nkey</a> with <var>r</var> otherwise. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>key</var> is invalid, return invalid.</p>"
        },
        {
          "html": "<p>Return <var>key</var>.</p>"
        }
      ]
    },
    {
      "name": "evaluate a key path on a value",
      "href": "https://www.w3.org/TR/IndexedDB-3/#evaluate-a-key-path-on-a-value",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"evaluate-a-key-path-on-a-value\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">evaluate a key path on a value</dfn> with <var>value</var> and <var>keyPath</var>, run the following steps. The result of these steps is an\nECMAScript value or failure, or the steps may throw an exception.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "If <var>keyPath</var> is a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list①①\" aria-expanded=\"false\" class=\"has-ref-hint\">list</a> of strings, then:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>result</var> be a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array-objects\" id=\"ref-for-sec-array-objects①②\" aria-expanded=\"false\" class=\"has-ref-hint\">Array</a></code> object created as if by the\nexpression <code>[]</code>.</p>"
            },
            {
              "html": "<p>Let <var>i</var> be 0.</p>"
            },
            {
              "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">For each</a> <var>item</var> of <var>keyPath</var>:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>key</var> be the result of recursively <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#evaluate-a-key-path-on-a-value\" id=\"ref-for-evaluate-a-key-path-on-a-value①\" aria-expanded=\"false\" class=\"has-ref-hint\">evaluating a key path on a value</a> with <var>item</var> and <var>value</var>.</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert④\" aria-expanded=\"false\" class=\"has-ref-hint\">Assert</a>: <var>key</var> is not an <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-completion-record-specification-type\" id=\"ref-for-sec-completion-record-specification-type\" aria-expanded=\"false\" class=\"has-ref-hint\">abrupt completion</a>.</p>"
                },
                {
                  "html": "<p>If <var>key</var> is failure, abort the overall algorithm and return\nfailure.</p>"
                },
                {
                  "html": "<p>Let <var>p</var> be <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">!</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-tostring\" id=\"ref-for-sec-tostring\" aria-expanded=\"false\" class=\"has-ref-hint\">ToString</a>(<var>i</var>).</p>"
                },
                {
                  "html": "<p>Let <var>status</var> be <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-createdataproperty\" id=\"ref-for-sec-createdataproperty\" aria-expanded=\"false\" class=\"has-ref-hint\">CreateDataProperty</a>(<var>result</var>, <var>p</var>, <var>key</var>).</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">Assert</a>: <var>status</var> is true.</p>"
                },
                {
                  "html": "<p>Increase <var>i</var> by 1.</p>"
                }
              ]
            },
            {
              "html": "<p>Return <var>result</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>If <var>keyPath</var> is the empty string, return <var>value</var> and skip the\nremaining steps.</p>"
        },
        {
          "html": "<p>Let <var>identifiers</var> be the result of <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#strictly-split\" id=\"ref-for-strictly-split\" aria-expanded=\"false\" class=\"has-ref-hint\">strictly splitting</a> <var>keyPath</var> on U+002E FULL STOP characters (.).</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">For each</a> <var>identifier</var> of <var>identifiers</var>, jump to the appropriate step below:",
          "rationale": ".switch",
          "steps": [
            {
              "operation": "switch",
              "steps": [
                {
                  "case": "If Type(value) is String, and identifier is \"length\"",
                  "html": "<p>Let <var>value</var> be a Number equal to the number of elements in <var>value</var>.</p>"
                },
                {
                  "case": "If value is an Array and identifier is \"length\"",
                  "html": "<p>Let <var>value</var> be <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">!</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-tolength\" id=\"ref-for-sec-tolength\" aria-expanded=\"false\" class=\"has-ref-hint\">ToLength</a>(<a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions①①\" aria-expanded=\"false\" class=\"has-ref-hint\">!</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-get-o-p\" id=\"ref-for-sec-get-o-p\" aria-expanded=\"false\" class=\"has-ref-hint\">Get</a>(<var>value</var>, \"<code>length</code>\")).</p>"
                },
                {
                  "case": "If value is a Blob and identifier is \"size\"",
                  "html": "<p>Let <var>value</var> be a Number equal to <var>value</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/FileAPI/#dfn-size\" id=\"ref-for-dfn-size①\" aria-expanded=\"false\" class=\"has-ref-hint\">size</a></code>.</p>"
                },
                {
                  "case": "If value is a Blob and identifier is \"type\"",
                  "html": "<p>Let <var>value</var> be a String equal to <var>value</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/FileAPI/#dfn-type\" id=\"ref-for-dfn-type①\" aria-expanded=\"false\" class=\"has-ref-hint\">type</a></code>.</p>"
                },
                {
                  "case": "If value is a File and identifier is \"name\"",
                  "html": "<p>Let <var>value</var> be a String equal to <var>value</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/FileAPI/#dfn-name\" id=\"ref-for-dfn-name①\" aria-expanded=\"false\" class=\"has-ref-hint\">name</a></code>.</p>"
                },
                {
                  "case": "If value is a File and identifier is \"lastModified\"",
                  "html": "<p>Let <var>value</var> be a Number equal to <var>value</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/FileAPI/#dfn-lastModified\" id=\"ref-for-dfn-lastModified①\" aria-expanded=\"false\" class=\"has-ref-hint\">lastModified</a></code>.</p>"
                },
                {
                  "case": "Otherwise",
                  "html": "",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\" id=\"ref-for-sec-ecmascript-data-types-and-values①\" aria-expanded=\"false\" class=\"has-ref-hint\">Type</a>(<var>value</var>) is not Object, return failure.</p>"
                    },
                    {
                      "html": "<p>Let <var>hop</var> be <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions①②\" aria-expanded=\"false\" class=\"has-ref-hint\">!</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-hasownproperty\" id=\"ref-for-sec-hasownproperty\" aria-expanded=\"false\" class=\"has-ref-hint\">HasOwnProperty</a>(<var>value</var>, <var>identifier</var>).</p>"
                    },
                    {
                      "html": "<p>If <var>hop</var> is false, return failure.</p>"
                    },
                    {
                      "html": "<p>Let <var>value</var> be <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions①③\" aria-expanded=\"false\" class=\"has-ref-hint\">!</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-get-o-p\" id=\"ref-for-sec-get-o-p①\" aria-expanded=\"false\" class=\"has-ref-hint\">Get</a>(<var>value</var>, <var>identifier</var>).</p>"
                    },
                    {
                      "html": "<p>If <var>value</var> is undefined, return failure.</p>"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">Assert</a>: <var>value</var> is not an <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-completion-record-specification-type\" id=\"ref-for-sec-completion-record-specification-type①\" aria-expanded=\"false\" class=\"has-ref-hint\">abrupt completion</a>.</p>"
        },
        {
          "html": "<p>Return <var>value</var>.</p>"
        }
      ]
    },
    {
      "name": "check that a key could be injected into a value",
      "href": "https://www.w3.org/TR/IndexedDB-3/#check-that-a-key-could-be-injected-into-a-value",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"check-that-a-key-could-be-injected-into-a-value\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">check that a key could be injected into a value</dfn> with <var>value</var> and a <var>keyPath</var>, run the following steps.\nThe result of these steps is either true or false.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>identifiers</var> be the result of <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#strictly-split\" id=\"ref-for-strictly-split①\" aria-expanded=\"false\" class=\"has-ref-hint\">strictly splitting</a> <var>keyPath</var> on U+002E FULL STOP characters (.).</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">Assert</a>: <var>identifiers</var> is not empty.</p>"
        },
        {
          "html": "<p>Remove the last <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-item\" id=\"ref-for-list-item①\" aria-expanded=\"false\" class=\"has-ref-hint\">item</a> of <var>identifiers</var>.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">For each</a> remaining <var>identifier</var> of <var>identifiers</var>, if any:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>value</var> is not an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object-objects\" id=\"ref-for-sec-object-objects①\" aria-expanded=\"false\" class=\"has-ref-hint\">Object</a></code> or an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array-objects\" id=\"ref-for-sec-array-objects①④\" aria-expanded=\"false\" class=\"has-ref-hint\">Array</a></code>, return false.</p>"
            },
            {
              "html": "<p>Let <var>hop</var> be <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions①④\" aria-expanded=\"false\" class=\"has-ref-hint\">!</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-hasownproperty\" id=\"ref-for-sec-hasownproperty①\" aria-expanded=\"false\" class=\"has-ref-hint\">HasOwnProperty</a>(<var>value</var>, <var>identifier</var>).</p>"
            },
            {
              "html": "<p>If <var>hop</var> is false, return true.</p>"
            },
            {
              "html": "<p>Let <var>value</var> be <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">!</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-get-o-p\" id=\"ref-for-sec-get-o-p②\" aria-expanded=\"false\" class=\"has-ref-hint\">Get</a>(<var>value</var>, <var>identifier</var>).</p>"
            }
          ]
        },
        {
          "html": "<p>Return true if <var>value</var> is an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object-objects\" id=\"ref-for-sec-object-objects②\" aria-expanded=\"false\" class=\"has-ref-hint\">Object</a></code> or an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array-objects\" id=\"ref-for-sec-array-objects①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">Array</a></code>, or false otherwise.</p>"
        }
      ]
    },
    {
      "name": "inject a key into a value using a key path",
      "href": "https://www.w3.org/TR/IndexedDB-3/#inject-a-key-into-a-value-using-a-key-path",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"inject-a-key-into-a-value-using-a-key-path\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">inject a key into a value using a key path</dfn> with <var>value</var>, a <var>key</var> and a <var>keyPath</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>identifiers</var> be the result of <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#strictly-split\" id=\"ref-for-strictly-split②\" aria-expanded=\"false\" class=\"has-ref-hint\">strictly splitting</a> <var>keyPath</var> on U+002E FULL STOP characters (.).</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">Assert</a>: <var>identifiers</var> is not empty.</p>"
        },
        {
          "html": "<p>Let <var>last</var> be the last <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-item\" id=\"ref-for-list-item②\" aria-expanded=\"false\" class=\"has-ref-hint\">item</a> of <var>identifiers</var> and remove it from\nthe list.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate①①\" aria-expanded=\"false\" class=\"has-ref-hint\">For each</a> remaining <var>identifier</var> of <var>identifiers</var>:",
          "rationale": "assert",
          "steps": [
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">Assert</a>: <var>value</var> is an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object-objects\" id=\"ref-for-sec-object-objects③\" aria-expanded=\"false\" class=\"has-ref-hint\">Object</a></code> or an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array-objects\" id=\"ref-for-sec-array-objects①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">Array</a></code>.</p>"
            },
            {
              "html": "<p>Let <var>hop</var> be <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">!</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-hasownproperty\" id=\"ref-for-sec-hasownproperty②\" aria-expanded=\"false\" class=\"has-ref-hint\">HasOwnProperty</a>(<var>value</var>, <var>identifier</var>).</p>"
            },
            {
              "html": "If <var>hop</var> is false, then:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>o</var> be a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object-objects\" id=\"ref-for-sec-object-objects④\" aria-expanded=\"false\" class=\"has-ref-hint\">Object</a></code> created as if by the\nexpression <code>({})</code>.</p>"
                },
                {
                  "html": "<p>Let <var>status</var> be <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-createdataproperty\" id=\"ref-for-sec-createdataproperty①\" aria-expanded=\"false\" class=\"has-ref-hint\">CreateDataProperty</a>(<var>value</var>, <var>identifier</var>, <var>o</var>).</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">Assert</a>: <var>status</var> is true.</p>"
                }
              ]
            },
            {
              "html": "<p>Let <var>value</var> be <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">!</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-get-o-p\" id=\"ref-for-sec-get-o-p③\" aria-expanded=\"false\" class=\"has-ref-hint\">Get</a>(<var>value</var>, <var>identifier</var>).</p>"
            }
          ]
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①①\" aria-expanded=\"false\" class=\"has-ref-hint\">Assert</a>: <var>value</var> is an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object-objects\" id=\"ref-for-sec-object-objects⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">Object</a></code> or an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array-objects\" id=\"ref-for-sec-array-objects①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">Array</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>keyValue</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-key-to-a-value\" id=\"ref-for-convert-a-key-to-a-value⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a\nkey to a value</a> with <var>key</var>.</p>"
        },
        {
          "html": "<p>Let <var>status</var> be <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-createdataproperty\" id=\"ref-for-sec-createdataproperty②\" aria-expanded=\"false\" class=\"has-ref-hint\">CreateDataProperty</a>(<var>value</var>, <var>last</var>, <var>keyValue</var>).</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①②\" aria-expanded=\"false\" class=\"has-ref-hint\">Assert</a>: <var>status</var> is true.</p>"
        }
      ]
    },
    {
      "name": "convert a key to a value",
      "href": "https://www.w3.org/TR/IndexedDB-3/#convert-a-key-to-a-value",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"convert-a-key-to-a-value\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">convert a key to a value</dfn> with <var>key</var>, run the following steps.\nThe steps return an ECMAScript value.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>type</var> be <var>key</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-type\" id=\"ref-for-key-type⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">type</a>.</p>"
        },
        {
          "html": "<p>Let <var>value</var> be <var>key</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-value\" id=\"ref-for-key-value⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">value</a>.</p>"
        },
        {
          "html": "Switch on <var>type</var>:",
          "rationale": ".switch",
          "steps": [
            {
              "operation": "switch",
              "steps": [
                {
                  "case": "number",
                  "html": "<p>Return an ECMAScript Number value equal to <var>value</var></p>"
                },
                {
                  "case": "string",
                  "html": "<p>Return an ECMAScript String value equal to <var>value</var></p>"
                },
                {
                  "case": "date",
                  "html": "",
                  "rationale": "let",
                  "steps": [
                    {
                      "html": "<p>Let <var>date</var> be the result of executing the ECMAScript Date\n  constructor with the single argument <var>value</var>.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①③\" aria-expanded=\"false\" class=\"has-ref-hint\">Assert</a>: <var>date</var> is not an <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-completion-record-specification-type\" id=\"ref-for-sec-completion-record-specification-type②\" aria-expanded=\"false\" class=\"has-ref-hint\">abrupt completion</a>.</p>"
                    },
                    {
                      "html": "<p>Return <var>date</var>.</p>"
                    }
                  ]
                },
                {
                  "case": "binary",
                  "html": "",
                  "rationale": "let",
                  "steps": [
                    {
                      "html": "<p>Let <var>len</var> be <var>value</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#byte-sequence-length\" id=\"ref-for-byte-sequence-length\" aria-expanded=\"false\" class=\"has-ref-hint\">length</a>.</p>"
                    },
                    {
                      "html": "<p>Let <var>buffer</var> be the result of executing the ECMAScript\n  ArrayBuffer constructor with <var>len</var>.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①④\" aria-expanded=\"false\" class=\"has-ref-hint\">Assert</a>: <var>buffer</var> is not an <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-completion-record-specification-type\" id=\"ref-for-sec-completion-record-specification-type③\" aria-expanded=\"false\" class=\"has-ref-hint\">abrupt completion</a>.</p>"
                    },
                    {
                      "html": "<p>Set the entries in <var>buffer</var>’s\n  [[ArrayBufferData]] internal slot to the entries\n  in <var>value</var>.</p>"
                    },
                    {
                      "html": "<p>Return <var>buffer</var>.</p>"
                    }
                  ]
                },
                {
                  "case": "array",
                  "html": "",
                  "rationale": "let",
                  "steps": [
                    {
                      "html": "<p>Let <var>array</var> be the result of executing the ECMAScript Array\n  constructor with no arguments.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">Assert</a>: <var>array</var> is not an <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-completion-record-specification-type\" id=\"ref-for-sec-completion-record-specification-type④\" aria-expanded=\"false\" class=\"has-ref-hint\">abrupt completion</a>.</p>"
                    },
                    {
                      "html": "<p>Let <var>len</var> be <var>value</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">size</a>.</p>"
                    },
                    {
                      "html": "<p>Let <var>index</var> be 0.</p>"
                    },
                    {
                      "html": "While <var>index</var> is less than <var>len</var>:",
                      "rationale": "let",
                      "steps": [
                        {
                          "html": "<p>Let <var>entry</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-key-to-a-value\" id=\"ref-for-convert-a-key-to-a-value⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a key to a value</a> with <var>value</var>[<var>index</var>].</p>"
                        },
                        {
                          "html": "<p>Let <var>status</var> be <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-createdataproperty\" id=\"ref-for-sec-createdataproperty③\" aria-expanded=\"false\" class=\"has-ref-hint\">CreateDataProperty</a>(<var>array</var>, <var>index</var>, <var>entry</var>).</p>"
                        },
                        {
                          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">Assert</a>: <var>status</var> is true.</p>"
                        },
                        {
                          "html": "<p>Increase <var>index</var> by 1.</p>"
                        }
                      ]
                    },
                    {
                      "html": "<p>Return <var>array</var>.</p>"
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "convert a value to a key",
      "href": "https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"convert-a-value-to-a-key\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">convert a value to a key</dfn> with an ECMAScript value <var>input</var>, and an optional <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ordered-set\" id=\"ref-for-ordered-set④\" aria-expanded=\"false\" class=\"has-ref-hint\">set</a> <var>seen</var>, run the following steps.\nThe result of these steps is a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑨④\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> or invalid, or the\nsteps may throw an exception.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>seen</var> was not given, then let <var>seen</var> be a new empty <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ordered-set\" id=\"ref-for-ordered-set⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">set</a>.</p>"
        },
        {
          "html": "<p>If <var>seen</var> <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-contain\" id=\"ref-for-list-contain\" aria-expanded=\"false\" class=\"has-ref-hint\">contains</a> <var>input</var>, then return invalid.</p>"
        },
        {
          "html": "Jump to the appropriate step below:",
          "rationale": ".switch",
          "steps": [
            {
              "operation": "switch",
              "steps": [
                {
                  "case": "If Type(input) is Number",
                  "html": "",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <var>input</var> is NaN then return invalid.</p>"
                    },
                    {
                      "html": "<p>Otherwise, return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑨⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-type\" id=\"ref-for-key-type⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">type</a> <em>number</em> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-value\" id=\"ref-for-key-value⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">value</a> <var>input</var>.</p>"
                    }
                  ]
                },
                {
                  "case": "If input is a Date (has a [[DateValue]] internal slot)",
                  "html": "",
                  "rationale": "let",
                  "steps": [
                    {
                      "html": "<p>Let <var>ms</var> be the value of <var>input</var>’s\n  [[DateValue]] internal slot.</p>"
                    },
                    {
                      "html": "<p>If <var>ms</var> is NaN then return invalid.</p>"
                    },
                    {
                      "html": "<p>Otherwise, return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑨⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-type\" id=\"ref-for-key-type⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">type</a> <em>date</em> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-value\" id=\"ref-for-key-value⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">value</a> <var>ms</var>.</p>"
                    }
                  ]
                },
                {
                  "case": "If Type(input) is String",
                  "html": "",
                  "rationale": "return",
                  "steps": [
                    {
                      "html": "<p>Return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑨⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-type\" id=\"ref-for-key-type①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">type</a> <em>string</em> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-value\" id=\"ref-for-key-value⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">value</a> <var>input</var>.</p>"
                    }
                  ]
                },
                {
                  "case": "If input is a buffer source type",
                  "html": "",
                  "rationale": "let",
                  "steps": [
                    {
                      "html": "<p>Let <var>bytes</var> be the result of <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-get-buffer-source-copy\" id=\"ref-for-dfn-get-buffer-source-copy\" aria-expanded=\"false\" class=\"has-ref-hint\">getting a copy of the bytes held by the buffer source</a> <var>input</var>. Rethrow any exceptions.</p>"
                    },
                    {
                      "html": "<p>Return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑨⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-type\" id=\"ref-for-key-type①①\" aria-expanded=\"false\" class=\"has-ref-hint\">type</a> <em>binary</em> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-value\" id=\"ref-for-key-value⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">value</a> <var>bytes</var>.</p>"
                    }
                  ]
                },
                {
                  "case": "If input is an Array exotic object",
                  "html": "",
                  "rationale": "let",
                  "steps": [
                    {
                      "html": "<p>Let <var>len</var> be <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions①⑧\" aria-expanded=\"false\" class=\"has-ref-hint\">?</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-tolength\" id=\"ref-for-sec-tolength①\" aria-expanded=\"false\" class=\"has-ref-hint\">ToLength</a>( <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions①⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">?</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-get-o-p\" id=\"ref-for-sec-get-o-p④\" aria-expanded=\"false\" class=\"has-ref-hint\">Get</a>(<var>input</var>,\n  \"<code>length</code>\")).</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#set-append\" id=\"ref-for-set-append\" aria-expanded=\"false\" class=\"has-ref-hint\">Append</a> <var>input</var> to <var>seen</var>.</p>"
                    },
                    {
                      "html": "<p>Let <var>keys</var> be a new empty list.</p>"
                    },
                    {
                      "html": "<p>Let <var>index</var> be 0.</p>"
                    },
                    {
                      "html": "While <var>index</var> is less than <var>len</var>:",
                      "rationale": "let",
                      "steps": [
                        {
                          "html": "<p>Let <var>hop</var> be <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions②⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">?</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-hasownproperty\" id=\"ref-for-sec-hasownproperty③\" aria-expanded=\"false\" class=\"has-ref-hint\">HasOwnProperty</a>(<var>input</var>, <var>index</var>).</p>"
                        },
                        {
                          "html": "<p>If <var>hop</var> is false, return invalid.</p>"
                        },
                        {
                          "html": "<p>Let <var>entry</var> be <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions②①\" aria-expanded=\"false\" class=\"has-ref-hint\">?</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-get-o-p\" id=\"ref-for-sec-get-o-p⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">Get</a>(<var>input</var>, <var>index</var>).</p>"
                        },
                        {
                          "html": "<p>Let <var>key</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key①⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a value to a key</a> with arguments <var>entry</var> and <var>seen</var>.</p>"
                        },
                        {
                          "html": "<p><a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-returnifabrupt\" id=\"ref-for-sec-returnifabrupt\" aria-expanded=\"false\" class=\"has-ref-hint\">ReturnIfAbrupt</a>(<var>key</var>).</p>"
                        },
                        {
                          "html": "<p>If <var>key</var> is invalid abort these steps and return\n  invalid.</p>"
                        },
                        {
                          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append①\" aria-expanded=\"false\" class=\"has-ref-hint\">Append</a> <var>key</var> to <var>keys</var>.</p>"
                        },
                        {
                          "html": "<p>Increase <var>index</var> by 1.</p>"
                        }
                      ]
                    },
                    {
                      "html": "<p>Return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#array-key\" id=\"ref-for-array-key①①\" aria-expanded=\"false\" class=\"has-ref-hint\">array key</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-value\" id=\"ref-for-key-value①⓪\" aria-expanded=\"false\" class=\"has-ref-hint\">value</a> <var>keys</var>.</p>"
                    }
                  ]
                },
                {
                  "case": "Otherwise",
                  "html": "<p>Return invalid.</p>"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "convert a value to a multiEntry key",
      "href": "https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-multientry-key",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"convert-a-value-to-a-multientry-key\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">convert a value to a multiEntry key</dfn> with an ECMAScript value <var>input</var>, run the following steps.\nThe result of these steps is a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑨⑨\" aria-expanded=\"false\" class=\"has-ref-hint\">key</a> or invalid, or the\nsteps may throw an exception.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "If <var>input</var> is an <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/ordinary-and-exotic-objects-behaviours.html#array-exotic-object\" id=\"ref-for-array-exotic-object①\" aria-expanded=\"false\" class=\"has-ref-hint\">Array exotic object</a>, then:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>len</var> be <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions②②\" aria-expanded=\"false\" class=\"has-ref-hint\">?</a> ToLength( <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions②③\" aria-expanded=\"false\" class=\"has-ref-hint\">?</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-get-o-p\" id=\"ref-for-sec-get-o-p⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">Get</a>(<var>input</var>, \"<code>length</code>\")).</p>"
            },
            {
              "html": "<p>Let <var>seen</var> be a new <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ordered-set\" id=\"ref-for-ordered-set⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">set</a> containing only <var>input</var>.</p>"
            },
            {
              "html": "<p>Let <var>keys</var> be a new empty <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list①②\" aria-expanded=\"false\" class=\"has-ref-hint\">list</a>.</p>"
            },
            {
              "html": "<p>Let <var>index</var> be 0.</p>"
            },
            {
              "html": "While <var>index</var> is less than <var>len</var>:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>entry</var> be <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-get-o-p\" id=\"ref-for-sec-get-o-p⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">Get</a>(<var>input</var>, <var>index</var>).</p>"
                },
                {
                  "html": "If <var>entry</var> is not an <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-completion-record-specification-type\" id=\"ref-for-sec-completion-record-specification-type⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">abrupt completion</a>, then:",
                  "rationale": "let",
                  "steps": [
                    {
                      "html": "<p>Let <var>key</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key①⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a value to a key</a> with arguments <var>entry</var> and <var>seen</var>.</p>"
                    },
                    {
                      "html": "<p>If <var>key</var> is not invalid or an <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-completion-record-specification-type\" id=\"ref-for-sec-completion-record-specification-type⑥\" aria-expanded=\"false\" class=\"has-ref-hint\">abrupt completion</a>,\n and there is no <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-item\" id=\"ref-for-list-item③\" aria-expanded=\"false\" class=\"has-ref-hint\">item</a> in <var>keys</var> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to②⑤\" aria-expanded=\"false\" class=\"has-ref-hint\">equal to</a> <var>key</var>,\n then <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append②\" aria-expanded=\"false\" class=\"has-ref-hint\">append</a> <var>key</var> to <var>keys</var>.</p>"
                    }
                  ]
                },
                {
                  "html": "<p>Increase <var>index</var> by 1.</p>"
                }
              ]
            },
            {
              "html": "<p>Return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#array-key\" id=\"ref-for-array-key①②\" aria-expanded=\"false\" class=\"has-ref-hint\">array key</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-value\" id=\"ref-for-key-value①①\" aria-expanded=\"false\" class=\"has-ref-hint\">value</a> set to <var>keys</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Otherwise, return the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key①⑦\" aria-expanded=\"false\" class=\"has-ref-hint\">converting a\nvalue to a key</a> with argument <var>input</var>.\nRethrow any exceptions.</p>"
        }
      ]
    }
  ]
}